var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(en){return en&&en.__esModule&&Object.prototype.hasOwnProperty.call(en,"default")?en.default:en}var htmx_min={exports:{}};(function(module){(function(en,ze){module.exports?module.exports=ze():en.htmx=en.htmx||ze()})(typeof self<"u"?self:commonjsGlobal,function(){return function(){var Q={onLoad:B,process:zt,on:de,off:ge,trigger:ce,ajax:Nr,find:C,findAll:f,closest:v,values:function(en,ze){var tn=dr(en,ze||"post");return tn.values},remove:_,addClass:z,removeClass:n,toggleClass:$,takeClass:W,defineExtension:Ur,removeExtension:Fr,logAll:V,logNone:j,logger:null,config:{historyEnabled:!0,historyCacheSize:10,refreshOnHistoryMiss:!1,defaultSwapStyle:"innerHTML",defaultSwapDelay:0,defaultSettleDelay:20,includeIndicatorStyles:!0,indicatorClass:"htmx-indicator",requestClass:"htmx-request",addedClass:"htmx-added",settlingClass:"htmx-settling",swappingClass:"htmx-swapping",allowEval:!0,allowScriptTags:!0,inlineScriptNonce:"",attributesToSettle:["class","style","width","height"],withCredentials:!1,timeout:0,wsReconnectDelay:"full-jitter",wsBinaryType:"blob",disableSelector:"[hx-disable], [data-hx-disable]",useTemplateFragments:!1,scrollBehavior:"smooth",defaultFocusScroll:!1,getCacheBusterParam:!1,globalViewTransitions:!1,methodsThatUseUrlParams:["get"],selfRequestsOnly:!1,ignoreTitle:!1,scrollIntoViewOnBoost:!0,triggerSpecsCache:null},parseInterval:d,_:t,createEventSource:function(en){return new EventSource(en,{withCredentials:!0})},createWebSocket:function(en){var ze=new WebSocket(en,[]);return ze.binaryType=Q.config.wsBinaryType,ze},version:"1.9.11"},r={addTriggerHandler:Lt,bodyContains:se,canAccessLocalStorage:U,findThisElement:xe,filterValues:yr,hasAttribute:o,getAttributeValue:te,getClosestAttributeValue:ne,getClosestMatch:c,getExpressionVars:Hr,getHeaders:xr,getInputValues:dr,getInternalData:ae,getSwapSpecification:wr,getTriggerSpecs:it,getTarget:ye,makeFragment:l,mergeObjects:le,makeSettleInfo:T,oobSwap:Ee,querySelectorExt:ue,selectAndSwap:je,settleImmediately:nr,shouldCancel:ut,triggerEvent:ce,triggerErrorEvent:fe,withExtensions:R},w=["get","post","put","delete","patch"],i=w.map(function(en){return"[hx-"+en+"], [data-hx-"+en+"]"}).join(", "),S=e("head"),q=e("title"),H=e("svg",!0);function e(en,ze=!1){return new RegExp(`<${en}(\\s[^>]*>|>)([\\s\\S]*?)<\\/${en}>`,ze?"gim":"im")}function d(en){if(en==null)return;let ze=NaN;return en.slice(-2)=="ms"?ze=parseFloat(en.slice(0,-2)):en.slice(-1)=="s"?ze=parseFloat(en.slice(0,-1))*1e3:en.slice(-1)=="m"?ze=parseFloat(en.slice(0,-1))*1e3*60:ze=parseFloat(en),isNaN(ze)?void 0:ze}function ee(en,ze){return en.getAttribute&&en.getAttribute(ze)}function o(en,ze){return en.hasAttribute&&(en.hasAttribute(ze)||en.hasAttribute("data-"+ze))}function te(en,ze){return ee(en,ze)||ee(en,"data-"+ze)}function u(en){return en.parentElement}function re(){return document}function c(en,ze){for(;en&&!ze(en);)en=u(en);return en||null}function L(en,ze,tn){var nn=te(ze,tn),rn=te(ze,"hx-disinherit");return en!==ze&&rn&&(rn==="*"||rn.split(" ").indexOf(tn)>=0)?"unset":nn}function ne(en,ze){var tn=null;if(c(en,function(nn){return tn=L(en,nn,ze)}),tn!=="unset")return tn}function h(en,ze){var tn=en.matches||en.matchesSelector||en.msMatchesSelector||en.mozMatchesSelector||en.webkitMatchesSelector||en.oMatchesSelector;return tn&&tn.call(en,ze)}function A(en){var ze=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,tn=ze.exec(en);return tn?tn[1].toLowerCase():""}function s(en,ze){for(var tn=new DOMParser,nn=tn.parseFromString(en,"text/html"),rn=nn.body;ze>0;)ze--,rn=rn.firstChild;return rn==null&&(rn=re().createDocumentFragment()),rn}function N(en){return/<body/.test(en)}function l(en){var ze=!N(en),tn=A(en),nn=en;if(tn==="head"&&(nn=nn.replace(S,"")),Q.config.useTemplateFragments&&ze){var rn=s("<body><template>"+nn+"</template></body>",0),sn=rn.querySelector("template").content;return Q.config.allowScriptTags?oe(sn.querySelectorAll("script"),function(an){Q.config.inlineScriptNonce&&(an.nonce=Q.config.inlineScriptNonce),an.htmxExecuted=navigator.userAgent.indexOf("Firefox")===-1}):oe(sn.querySelectorAll("script"),function(an){_(an)}),sn}switch(tn){case"thead":case"tbody":case"tfoot":case"colgroup":case"caption":return s("<table>"+nn+"</table>",1);case"col":return s("<table><colgroup>"+nn+"</colgroup></table>",2);case"tr":return s("<table><tbody>"+nn+"</tbody></table>",2);case"td":case"th":return s("<table><tbody><tr>"+nn+"</tr></tbody></table>",3);case"script":case"style":return s("<div>"+nn+"</div>",1);default:return s(nn,0)}}function ie(en){en&&en()}function I(en,ze){return Object.prototype.toString.call(en)==="[object "+ze+"]"}function k(en){return I(en,"Function")}function P(en){return I(en,"Object")}function ae(en){var ze="htmx-internal-data",tn=en[ze];return tn||(tn=en[ze]={}),tn}function M(en){var ze=[];if(en)for(var tn=0;tn<en.length;tn++)ze.push(en[tn]);return ze}function oe(en,ze){if(en)for(var tn=0;tn<en.length;tn++)ze(en[tn])}function X(en){var ze=en.getBoundingClientRect(),tn=ze.top,nn=ze.bottom;return tn<window.innerHeight&&nn>=0}function se(en){return en.getRootNode&&en.getRootNode()instanceof window.ShadowRoot?re().body.contains(en.getRootNode().host):re().body.contains(en)}function D(en){return en.trim().split(/\s+/)}function le(en,ze){for(var tn in ze)ze.hasOwnProperty(tn)&&(en[tn]=ze[tn]);return en}function E(en){try{return JSON.parse(en)}catch(ze){return b(ze),null}}function U(){var en="htmx:localStorageTest";try{return localStorage.setItem(en,en),localStorage.removeItem(en),!0}catch{return!1}}function F(en){try{var ze=new URL(en);return ze&&(en=ze.pathname+ze.search),/^\/$/.test(en)||(en=en.replace(/\/+$/,"")),en}catch{return en}}function t(e){return Tr(re().body,function(){return eval(e)})}function B(en){var ze=Q.on("htmx:load",function(tn){en(tn.detail.elt)});return ze}function V(){Q.logger=function(en,ze,tn){console&&console.log(ze,en,tn)}}function j(){Q.logger=null}function C(en,ze){return ze?en.querySelector(ze):C(re(),en)}function f(en,ze){return ze?en.querySelectorAll(ze):f(re(),en)}function _(en,ze){en=p(en),ze?setTimeout(function(){_(en),en=null},ze):en.parentElement.removeChild(en)}function z(en,ze,tn){en=p(en),tn?setTimeout(function(){z(en,ze),en=null},tn):en.classList&&en.classList.add(ze)}function n(en,ze,tn){en=p(en),tn?setTimeout(function(){n(en,ze),en=null},tn):en.classList&&(en.classList.remove(ze),en.classList.length===0&&en.removeAttribute("class"))}function $(en,ze){en=p(en),en.classList.toggle(ze)}function W(en,ze){en=p(en),oe(en.parentElement.children,function(tn){n(tn,ze)}),z(en,ze)}function v(en,ze){if(en=p(en),en.closest)return en.closest(ze);do if(en==null||h(en,ze))return en;while(en=en&&u(en));return null}function g(en,ze){return en.substring(0,ze.length)===ze}function G(en,ze){return en.substring(en.length-ze.length)===ze}function J(en){var ze=en.trim();return g(ze,"<")&&G(ze,"/>")?ze.substring(1,ze.length-2):ze}function Z(en,ze){return ze.indexOf("closest ")===0?[v(en,J(ze.substr(8)))]:ze.indexOf("find ")===0?[C(en,J(ze.substr(5)))]:ze==="next"?[en.nextElementSibling]:ze.indexOf("next ")===0?[K(en,J(ze.substr(5)))]:ze==="previous"?[en.previousElementSibling]:ze.indexOf("previous ")===0?[Y(en,J(ze.substr(9)))]:ze==="document"?[document]:ze==="window"?[window]:ze==="body"?[document.body]:re().querySelectorAll(J(ze))}var K=function(en,ze){for(var tn=re().querySelectorAll(ze),nn=0;nn<tn.length;nn++){var rn=tn[nn];if(rn.compareDocumentPosition(en)===Node.DOCUMENT_POSITION_PRECEDING)return rn}},Y=function(en,ze){for(var tn=re().querySelectorAll(ze),nn=tn.length-1;nn>=0;nn--){var rn=tn[nn];if(rn.compareDocumentPosition(en)===Node.DOCUMENT_POSITION_FOLLOWING)return rn}};function ue(en,ze){return ze?Z(en,ze)[0]:Z(re().body,en)[0]}function p(en){return I(en,"String")?C(en):en}function ve(en,ze,tn){return k(ze)?{target:re().body,event:en,listener:ze}:{target:p(en),event:ze,listener:tn}}function de(en,ze,tn){jr(function(){var rn=ve(en,ze,tn);rn.target.addEventListener(rn.event,rn.listener)});var nn=k(ze);return nn?ze:tn}function ge(en,ze,tn){return jr(function(){var nn=ve(en,ze,tn);nn.target.removeEventListener(nn.event,nn.listener)}),k(ze)?ze:tn}var pe=re().createElement("output");function me(en,ze){var tn=ne(en,ze);if(tn){if(tn==="this")return[xe(en,ze)];var nn=Z(en,tn);return nn.length===0?(b('The selector "'+tn+'" on '+ze+" returned no matches!"),[pe]):nn}}function xe(en,ze){return c(en,function(tn){return te(tn,ze)!=null})}function ye(en){var ze=ne(en,"hx-target");if(ze)return ze==="this"?xe(en,"hx-target"):ue(en,ze);var tn=ae(en);return tn.boosted?re().body:en}function be(en){for(var ze=Q.config.attributesToSettle,tn=0;tn<ze.length;tn++)if(en===ze[tn])return!0;return!1}function we(en,ze){oe(en.attributes,function(tn){!ze.hasAttribute(tn.name)&&be(tn.name)&&en.removeAttribute(tn.name)}),oe(ze.attributes,function(tn){be(tn.name)&&en.setAttribute(tn.name,tn.value)})}function Se(en,ze){for(var tn=Br(ze),nn=0;nn<tn.length;nn++){var rn=tn[nn];try{if(rn.isInlineSwap(en))return!0}catch(sn){b(sn)}}return en==="outerHTML"}function Ee(en,ze,tn){var nn="#"+ee(ze,"id"),rn="outerHTML";en==="true"||(en.indexOf(":")>0?(rn=en.substr(0,en.indexOf(":")),nn=en.substr(en.indexOf(":")+1,en.length)):rn=en);var sn=re().querySelectorAll(nn);return sn?(oe(sn,function(an){var ln,cn=ze.cloneNode(!0);ln=re().createDocumentFragment(),ln.appendChild(cn),Se(rn,an)||(ln=cn);var un={shouldSwap:!0,target:an,fragment:ln};ce(an,"htmx:oobBeforeSwap",un)&&(an=un.target,un.shouldSwap&&Be(rn,an,an,ln,tn),oe(tn.elts,function(dn){ce(dn,"htmx:oobAfterSwap",un)}))}),ze.parentNode.removeChild(ze)):(ze.parentNode.removeChild(ze),fe(re().body,"htmx:oobErrorNoTarget",{content:ze})),en}function Ce(en,ze,tn){var nn=ne(en,"hx-select-oob");if(nn)for(var rn=nn.split(","),sn=0;sn<rn.length;sn++){var an=rn[sn].split(":",2),ln=an[0].trim();ln.indexOf("#")===0&&(ln=ln.substring(1));var cn=an[1]||"true",un=ze.querySelector("#"+ln);un&&Ee(cn,un,tn)}oe(f(ze,"[hx-swap-oob], [data-hx-swap-oob]"),function(dn){var fn=te(dn,"hx-swap-oob");fn!=null&&Ee(fn,dn,tn)})}function Re(en){oe(f(en,"[hx-preserve], [data-hx-preserve]"),function(ze){var tn=te(ze,"id"),nn=re().getElementById(tn);nn!=null&&ze.parentNode.replaceChild(nn,ze)})}function Te(en,ze,tn){oe(ze.querySelectorAll("[id]"),function(nn){var rn=ee(nn,"id");if(rn&&rn.length>0){var sn=rn.replace("'","\\'"),an=nn.tagName.replace(":","\\:"),ln=en.querySelector(an+"[id='"+sn+"']");if(ln&&ln!==en){var cn=nn.cloneNode();we(nn,ln),tn.tasks.push(function(){we(nn,cn)})}}})}function Oe(en){return function(){n(en,Q.config.addedClass),zt(en),Nt(en),qe(en),ce(en,"htmx:load")}}function qe(en){var ze="[autofocus]",tn=h(en,ze)?en:en.querySelector(ze);tn!=null&&tn.focus()}function a(en,ze,tn,nn){for(Te(en,tn,nn);tn.childNodes.length>0;){var rn=tn.firstChild;z(rn,Q.config.addedClass),en.insertBefore(rn,ze),rn.nodeType!==Node.TEXT_NODE&&rn.nodeType!==Node.COMMENT_NODE&&nn.tasks.push(Oe(rn))}}function He(en,ze){for(var tn=0;tn<en.length;)ze=(ze<<5)-ze+en.charCodeAt(tn++)|0;return ze}function Le(en){var ze=0;if(en.attributes)for(var tn=0;tn<en.attributes.length;tn++){var nn=en.attributes[tn];nn.value&&(ze=He(nn.name,ze),ze=He(nn.value,ze))}return ze}function Ae(en){var ze=ae(en);if(ze.onHandlers){for(var tn=0;tn<ze.onHandlers.length;tn++){const nn=ze.onHandlers[tn];en.removeEventListener(nn.event,nn.listener)}delete ze.onHandlers}}function Ne(en){var ze=ae(en);ze.timeout&&clearTimeout(ze.timeout),ze.webSocket&&ze.webSocket.close(),ze.sseEventSource&&ze.sseEventSource.close(),ze.listenerInfos&&oe(ze.listenerInfos,function(tn){tn.on&&tn.on.removeEventListener(tn.trigger,tn.listener)}),Ae(en),oe(Object.keys(ze),function(tn){delete ze[tn]})}function m(en){ce(en,"htmx:beforeCleanupElement"),Ne(en),en.children&&oe(en.children,function(ze){m(ze)})}function Ie(en,ze,tn){if(en.tagName==="BODY")return Ue(en,ze,tn);var nn,rn=en.previousSibling;for(a(u(en),en,ze,tn),rn==null?nn=u(en).firstChild:nn=rn.nextSibling,tn.elts=tn.elts.filter(function(sn){return sn!=en});nn&&nn!==en;)nn.nodeType===Node.ELEMENT_NODE&&tn.elts.push(nn),nn=nn.nextElementSibling;m(en),u(en).removeChild(en)}function ke(en,ze,tn){return a(en,en.firstChild,ze,tn)}function Pe(en,ze,tn){return a(u(en),en,ze,tn)}function Me(en,ze,tn){return a(en,null,ze,tn)}function Xe(en,ze,tn){return a(u(en),en.nextSibling,ze,tn)}function De(en,ze,tn){return m(en),u(en).removeChild(en)}function Ue(en,ze,tn){var nn=en.firstChild;if(a(en,nn,ze,tn),nn){for(;nn.nextSibling;)m(nn.nextSibling),en.removeChild(nn.nextSibling);m(nn),en.removeChild(nn)}}function Fe(en,ze,tn){var nn=tn||ne(en,"hx-select");if(nn){var rn=re().createDocumentFragment();oe(ze.querySelectorAll(nn),function(sn){rn.appendChild(sn)}),ze=rn}return ze}function Be(en,ze,tn,nn,rn){switch(en){case"none":return;case"outerHTML":Ie(tn,nn,rn);return;case"afterbegin":ke(tn,nn,rn);return;case"beforebegin":Pe(tn,nn,rn);return;case"beforeend":Me(tn,nn,rn);return;case"afterend":Xe(tn,nn,rn);return;case"delete":De(tn);return;default:for(var sn=Br(ze),an=0;an<sn.length;an++){var ln=sn[an];try{var cn=ln.handleSwap(en,tn,nn,rn);if(cn){if(typeof cn.length<"u")for(var un=0;un<cn.length;un++){var dn=cn[un];dn.nodeType!==Node.TEXT_NODE&&dn.nodeType!==Node.COMMENT_NODE&&rn.tasks.push(Oe(dn))}return}}catch(fn){b(fn)}}en==="innerHTML"?Ue(tn,nn,rn):Be(Q.config.defaultSwapStyle,ze,tn,nn,rn)}}function Ve(en){if(en.indexOf("<title")>-1){var ze=en.replace(H,""),tn=ze.match(q);if(tn)return tn[2]}}function je(en,ze,tn,nn,rn,sn){rn.title=Ve(nn);var an=l(nn);if(an)return Ce(tn,an,rn),an=Fe(tn,an,sn),Re(an),Be(en,tn,ze,an,rn)}function _e(en,ze,tn){var nn=en.getResponseHeader(ze);if(nn.indexOf("{")===0){var rn=E(nn);for(var sn in rn)if(rn.hasOwnProperty(sn)){var an=rn[sn];P(an)||(an={value:an}),ce(tn,sn,an)}}else for(var ln=nn.split(","),cn=0;cn<ln.length;cn++)ce(tn,ln[cn].trim(),[])}var x=/[\s,]/,$e=/[_$a-zA-Z]/,We=/[_$a-zA-Z0-9]/,Ge=['"',"'","/"],Je=/[^\s]/,Ze=/[{(]/,Ke=/[})]/;function Ye(en){for(var ze=[],tn=0;tn<en.length;){if($e.exec(en.charAt(tn))){for(var nn=tn;We.exec(en.charAt(tn+1));)tn++;ze.push(en.substr(nn,tn-nn+1))}else if(Ge.indexOf(en.charAt(tn))!==-1){var rn=en.charAt(tn),nn=tn;for(tn++;tn<en.length&&en.charAt(tn)!==rn;)en.charAt(tn)==="\\"&&tn++,tn++;ze.push(en.substr(nn,tn-nn+1))}else{var sn=en.charAt(tn);ze.push(sn)}tn++}return ze}function Qe(en,ze,tn){return $e.exec(en.charAt(0))&&en!=="true"&&en!=="false"&&en!=="this"&&en!==tn&&ze!=="."}function et(en,ze,tn){if(ze[0]==="["){ze.shift();for(var nn=1,rn=" return (function("+tn+"){ return (",sn=null;ze.length>0;){var an=ze[0];if(an==="]"){if(nn--,nn===0){sn===null&&(rn=rn+"true"),ze.shift(),rn+=")})";try{var ln=Tr(en,function(){return Function(rn)()},function(){return!0});return ln.source=rn,ln}catch(cn){return fe(re().body,"htmx:syntax:error",{error:cn,source:rn}),null}}}else an==="["&&nn++;Qe(an,sn,tn)?rn+="(("+tn+"."+an+") ? ("+tn+"."+an+") : (window."+an+"))":rn=rn+an,sn=ze.shift()}}}function y(en,ze){for(var tn="";en.length>0&&!ze.test(en[0]);)tn+=en.shift();return tn}function tt(en){var ze;return en.length>0&&Ze.test(en[0])?(en.shift(),ze=y(en,Ke).trim(),en.shift()):ze=y(en,x),ze}var rt="input, textarea, select";function nt(en,ze,tn){var nn=[],rn=Ye(ze);do{y(rn,Je);var sn=rn.length,an=y(rn,/[,\[\s]/);if(an!=="")if(an==="every"){var ln={trigger:"every"};y(rn,Je),ln.pollInterval=d(y(rn,/[,\[\s]/)),y(rn,Je);var cn=et(en,rn,"event");cn&&(ln.eventFilter=cn),nn.push(ln)}else if(an.indexOf("sse:")===0)nn.push({trigger:"sse",sseEvent:an.substr(4)});else{var un={trigger:an},cn=et(en,rn,"event");for(cn&&(un.eventFilter=cn);rn.length>0&&rn[0]!==",";){y(rn,Je);var dn=rn.shift();if(dn==="changed")un.changed=!0;else if(dn==="once")un.once=!0;else if(dn==="consume")un.consume=!0;else if(dn==="delay"&&rn[0]===":")rn.shift(),un.delay=d(y(rn,x));else if(dn==="from"&&rn[0]===":"){if(rn.shift(),Ze.test(rn[0]))var fn=tt(rn);else{var fn=y(rn,x);if(fn==="closest"||fn==="find"||fn==="next"||fn==="previous"){rn.shift();var pn=tt(rn);pn.length>0&&(fn+=" "+pn)}}un.from=fn}else dn==="target"&&rn[0]===":"?(rn.shift(),un.target=tt(rn)):dn==="throttle"&&rn[0]===":"?(rn.shift(),un.throttle=d(y(rn,x))):dn==="queue"&&rn[0]===":"?(rn.shift(),un.queue=y(rn,x)):dn==="root"&&rn[0]===":"?(rn.shift(),un[dn]=tt(rn)):dn==="threshold"&&rn[0]===":"?(rn.shift(),un[dn]=y(rn,x)):fe(en,"htmx:syntax:error",{token:rn.shift()})}nn.push(un)}rn.length===sn&&fe(en,"htmx:syntax:error",{token:rn.shift()}),y(rn,Je)}while(rn[0]===","&&rn.shift());return tn&&(tn[ze]=nn),nn}function it(en){var ze=te(en,"hx-trigger"),tn=[];if(ze){var nn=Q.config.triggerSpecsCache;tn=nn&&nn[ze]||nt(en,ze,nn)}return tn.length>0?tn:h(en,"form")?[{trigger:"submit"}]:h(en,'input[type="button"], input[type="submit"]')?[{trigger:"click"}]:h(en,rt)?[{trigger:"change"}]:[{trigger:"click"}]}function at(en){ae(en).cancelled=!0}function ot(en,ze,tn){var nn=ae(en);nn.timeout=setTimeout(function(){se(en)&&nn.cancelled!==!0&&(ct(tn,en,Wt("hx:poll:trigger",{triggerSpec:tn,target:en}))||ze(en),ot(en,ze,tn))},tn.pollInterval)}function st(en){return location.hostname===en.hostname&&ee(en,"href")&&ee(en,"href").indexOf("#")!==0}function lt(en,ze,tn){if(en.tagName==="A"&&st(en)&&(en.target===""||en.target==="_self")||en.tagName==="FORM"){ze.boosted=!0;var nn,rn;if(en.tagName==="A")nn="get",rn=ee(en,"href");else{var sn=ee(en,"method");nn=sn?sn.toLowerCase():"get",rn=ee(en,"action")}tn.forEach(function(an){ht(en,function(ln,cn){if(v(ln,Q.config.disableSelector)){m(ln);return}he(nn,rn,ln,cn)},ze,an,!0)})}}function ut(en,ze){return!!((en.type==="submit"||en.type==="click")&&(ze.tagName==="FORM"||h(ze,'input[type="submit"], button')&&v(ze,"form")!==null||ze.tagName==="A"&&ze.href&&(ze.getAttribute("href")==="#"||ze.getAttribute("href").indexOf("#")!==0)))}function ft(en,ze){return ae(en).boosted&&en.tagName==="A"&&ze.type==="click"&&(ze.ctrlKey||ze.metaKey)}function ct(en,ze,tn){var nn=en.eventFilter;if(nn)try{return nn.call(ze,tn)!==!0}catch(rn){return fe(re().body,"htmx:eventFilter:error",{error:rn,source:nn.source}),!0}return!1}function ht(en,ze,tn,nn,rn){var sn=ae(en),an;nn.from?an=Z(en,nn.from):an=[en],nn.changed&&an.forEach(function(ln){var cn=ae(ln);cn.lastValue=ln.value}),oe(an,function(ln){var cn=function(un){if(!se(en)){ln.removeEventListener(nn.trigger,cn);return}if(!ft(en,un)&&((rn||ut(un,en))&&un.preventDefault(),!ct(nn,en,un))){var dn=ae(un);if(dn.triggerSpec=nn,dn.handledFor==null&&(dn.handledFor=[]),dn.handledFor.indexOf(en)<0){if(dn.handledFor.push(en),nn.consume&&un.stopPropagation(),nn.target&&un.target&&!h(un.target,nn.target))return;if(nn.once){if(sn.triggeredOnce)return;sn.triggeredOnce=!0}if(nn.changed){var fn=ae(ln);if(fn.lastValue===ln.value)return;fn.lastValue=ln.value}if(sn.delayed&&clearTimeout(sn.delayed),sn.throttle)return;nn.throttle>0?sn.throttle||(ze(en,un),sn.throttle=setTimeout(function(){sn.throttle=null},nn.throttle)):nn.delay>0?sn.delayed=setTimeout(function(){ze(en,un)},nn.delay):(ce(en,"htmx:trigger"),ze(en,un))}}};tn.listenerInfos==null&&(tn.listenerInfos=[]),tn.listenerInfos.push({trigger:nn.trigger,listener:cn,on:ln}),ln.addEventListener(nn.trigger,cn)})}var vt=!1,dt=null;function gt(){dt||(dt=function(){vt=!0},window.addEventListener("scroll",dt),setInterval(function(){vt&&(vt=!1,oe(re().querySelectorAll("[hx-trigger='revealed'],[data-hx-trigger='revealed']"),function(en){pt(en)}))},200))}function pt(en){if(!o(en,"data-hx-revealed")&&X(en)){en.setAttribute("data-hx-revealed","true");var ze=ae(en);ze.initHash?ce(en,"revealed"):en.addEventListener("htmx:afterProcessNode",function(tn){ce(en,"revealed")},{once:!0})}}function mt(en,ze,tn){for(var nn=D(tn),rn=0;rn<nn.length;rn++){var sn=nn[rn].split(/:(.+)/);sn[0]==="connect"&&xt(en,sn[1],0),sn[0]==="send"&&bt(en)}}function xt(en,ze,tn){if(se(en)){if(ze.indexOf("/")==0){var nn=location.hostname+(location.port?":"+location.port:"");location.protocol=="https:"?ze="wss://"+nn+ze:location.protocol=="http:"&&(ze="ws://"+nn+ze)}var rn=Q.createWebSocket(ze);rn.onerror=function(sn){fe(en,"htmx:wsError",{error:sn,socket:rn}),yt(en)},rn.onclose=function(sn){if([1006,1012,1013].indexOf(sn.code)>=0){var an=wt(tn);setTimeout(function(){xt(en,ze,tn+1)},an)}},rn.onopen=function(sn){tn=0},ae(en).webSocket=rn,rn.addEventListener("message",function(sn){if(!yt(en)){var an=sn.data;R(en,function(pn){an=pn.transformResponse(an,null,en)});for(var ln=T(en),cn=l(an),un=M(cn.children),dn=0;dn<un.length;dn++){var fn=un[dn];Ee(te(fn,"hx-swap-oob")||"true",fn,ln)}nr(ln.tasks)}})}}function yt(en){if(!se(en))return ae(en).webSocket.close(),!0}function bt(en){var ze=c(en,function(tn){return ae(tn).webSocket!=null});ze?en.addEventListener(it(en)[0].trigger,function(tn){var nn=ae(ze).webSocket,rn=xr(en,ze),sn=dr(en,"post"),an=sn.errors,ln=sn.values,cn=Hr(en),un=le(ln,cn),dn=yr(un,en);if(dn.HEADERS=rn,an&&an.length>0){ce(en,"htmx:validation:halted",an);return}nn.send(JSON.stringify(dn)),ut(tn,en)&&tn.preventDefault()}):fe(en,"htmx:noWebSocketSourceError")}function wt(en){var ze=Q.config.wsReconnectDelay;if(typeof ze=="function")return ze(en);if(ze==="full-jitter"){var tn=Math.min(en,6),nn=1e3*Math.pow(2,tn);return nn*Math.random()}b('htmx.config.wsReconnectDelay must either be a function or the string "full-jitter"')}function St(en,ze,tn){for(var nn=D(tn),rn=0;rn<nn.length;rn++){var sn=nn[rn].split(/:(.+)/);sn[0]==="connect"&&Et(en,sn[1]),sn[0]==="swap"&&Ct(en,sn[1])}}function Et(en,ze){var tn=Q.createEventSource(ze);tn.onerror=function(nn){fe(en,"htmx:sseError",{error:nn,source:tn}),Tt(en)},ae(en).sseEventSource=tn}function Ct(en,ze){var tn=c(en,Ot);if(tn){var nn=ae(tn).sseEventSource,rn=function(sn){if(!Tt(tn)){if(!se(en)){nn.removeEventListener(ze,rn);return}var an=sn.data;R(en,function(dn){an=dn.transformResponse(an,null,en)});var ln=wr(en),cn=ye(en),un=T(en);je(ln.swapStyle,cn,en,an,un),nr(un.tasks),ce(en,"htmx:sseMessage",sn)}};ae(en).sseListener=rn,nn.addEventListener(ze,rn)}else fe(en,"htmx:noSSESourceError")}function Rt(en,ze,tn){var nn=c(en,Ot);if(nn){var rn=ae(nn).sseEventSource,sn=function(){Tt(nn)||(se(en)?ze(en):rn.removeEventListener(tn,sn))};ae(en).sseListener=sn,rn.addEventListener(tn,sn)}else fe(en,"htmx:noSSESourceError")}function Tt(en){if(!se(en))return ae(en).sseEventSource.close(),!0}function Ot(en){return ae(en).sseEventSource!=null}function qt(en,ze,tn,nn){var rn=function(){tn.loaded||(tn.loaded=!0,ze(en))};nn>0?setTimeout(rn,nn):rn()}function Ht(en,ze,tn){var nn=!1;return oe(w,function(rn){if(o(en,"hx-"+rn)){var sn=te(en,"hx-"+rn);nn=!0,ze.path=sn,ze.verb=rn,tn.forEach(function(an){Lt(en,an,ze,function(ln,cn){if(v(ln,Q.config.disableSelector)){m(ln);return}he(rn,sn,ln,cn)})})}}),nn}function Lt(en,ze,tn,nn){if(ze.sseEvent)Rt(en,nn,ze.sseEvent);else if(ze.trigger==="revealed")gt(),ht(en,nn,tn,ze),pt(en);else if(ze.trigger==="intersect"){var rn={};ze.root&&(rn.root=ue(en,ze.root)),ze.threshold&&(rn.threshold=parseFloat(ze.threshold));var sn=new IntersectionObserver(function(an){for(var ln=0;ln<an.length;ln++){var cn=an[ln];if(cn.isIntersecting){ce(en,"intersect");break}}},rn);sn.observe(en),ht(en,nn,tn,ze)}else ze.trigger==="load"?ct(ze,en,Wt("load",{elt:en}))||qt(en,nn,tn,ze.delay):ze.pollInterval>0?(tn.polling=!0,ot(en,nn,ze)):ht(en,nn,tn,ze)}function At(en){if(!en.htmxExecuted&&Q.config.allowScriptTags&&(en.type==="text/javascript"||en.type==="module"||en.type==="")){var ze=re().createElement("script");oe(en.attributes,function(nn){ze.setAttribute(nn.name,nn.value)}),ze.textContent=en.textContent,ze.async=!1,Q.config.inlineScriptNonce&&(ze.nonce=Q.config.inlineScriptNonce);var tn=en.parentElement;try{tn.insertBefore(ze,en)}catch(nn){b(nn)}finally{en.parentElement&&en.parentElement.removeChild(en)}}}function Nt(en){h(en,"script")&&At(en),oe(f(en,"script"),function(ze){At(ze)})}function It(en){for(var ze=en.attributes,tn=0;tn<ze.length;tn++){var nn=ze[tn].name;if(g(nn,"hx-on:")||g(nn,"data-hx-on:")||g(nn,"hx-on-")||g(nn,"data-hx-on-"))return!0}return!1}function kt(en){var ze=null,tn=[];if(It(en)&&tn.push(en),document.evaluate)for(var nn=document.evaluate('.//*[@*[ starts-with(name(), "hx-on:") or starts-with(name(), "data-hx-on:") or starts-with(name(), "hx-on-") or starts-with(name(), "data-hx-on-") ]]',en);ze=nn.iterateNext();)tn.push(ze);else for(var rn=en.getElementsByTagName("*"),sn=0;sn<rn.length;sn++)It(rn[sn])&&tn.push(rn[sn]);return tn}function Pt(en){if(en.querySelectorAll){var ze=", [hx-boost] a, [data-hx-boost] a, a[hx-boost], a[data-hx-boost]",tn=en.querySelectorAll(i+ze+", form, [type='submit'], [hx-sse], [data-hx-sse], [hx-ws], [data-hx-ws], [hx-ext], [data-hx-ext], [hx-trigger], [data-hx-trigger], [hx-on], [data-hx-on]");return tn}else return[]}function Mt(en){var ze=v(en.target,"button, input[type='submit']"),tn=Dt(en);tn&&(tn.lastButtonClicked=ze)}function Xt(en){var ze=Dt(en);ze&&(ze.lastButtonClicked=null)}function Dt(en){var ze=v(en.target,"button, input[type='submit']");if(ze){var tn=p("#"+ee(ze,"form"))||v(ze,"form");if(tn)return ae(tn)}}function Ut(en){en.addEventListener("click",Mt),en.addEventListener("focusin",Mt),en.addEventListener("focusout",Xt)}function Ft(en){for(var ze=Ye(en),tn=0,nn=0;nn<ze.length;nn++){const rn=ze[nn];rn==="{"?tn++:rn==="}"&&tn--}return tn}function Bt(en,ze,tn){var nn=ae(en);Array.isArray(nn.onHandlers)||(nn.onHandlers=[]);var rn,sn=function(an){return Tr(en,function(){rn||(rn=new Function("event",tn)),rn.call(en,an)})};en.addEventListener(ze,sn),nn.onHandlers.push({event:ze,listener:sn})}function Vt(en){var ze=te(en,"hx-on");if(ze){for(var tn={},nn=ze.split(`
`),rn=null,sn=0;nn.length>0;){var an=nn.shift(),ln=an.match(/^\s*([a-zA-Z:\-\.]+:)(.*)/);sn===0&&ln?(an.split(":"),rn=ln[1].slice(0,-1),tn[rn]=ln[2]):tn[rn]+=an,sn+=Ft(an)}for(var cn in tn)Bt(en,cn,tn[cn])}}function jt(en){Ae(en);for(var ze=0;ze<en.attributes.length;ze++){var tn=en.attributes[ze].name,nn=en.attributes[ze].value;if(g(tn,"hx-on")||g(tn,"data-hx-on")){var rn=tn.indexOf("-on")+3,sn=tn.slice(rn,rn+1);if(sn==="-"||sn===":"){var an=tn.slice(rn+1);g(an,":")?an="htmx"+an:g(an,"-")?an="htmx:"+an.slice(1):g(an,"htmx-")&&(an="htmx:"+an.slice(5)),Bt(en,an,nn)}}}}function _t(en){if(v(en,Q.config.disableSelector)){m(en);return}var ze=ae(en);if(ze.initHash!==Le(en)){Ne(en),ze.initHash=Le(en),Vt(en),ce(en,"htmx:beforeProcessNode"),en.value&&(ze.lastValue=en.value);var tn=it(en),nn=Ht(en,ze,tn);nn||(ne(en,"hx-boost")==="true"?lt(en,ze,tn):o(en,"hx-trigger")&&tn.forEach(function(an){Lt(en,an,ze,function(){})})),(en.tagName==="FORM"||ee(en,"type")==="submit"&&o(en,"form"))&&Ut(en);var rn=te(en,"hx-sse");rn&&St(en,ze,rn);var sn=te(en,"hx-ws");sn&&mt(en,ze,sn),ce(en,"htmx:afterProcessNode")}}function zt(en){if(en=p(en),v(en,Q.config.disableSelector)){m(en);return}_t(en),oe(Pt(en),function(ze){_t(ze)}),oe(kt(en),jt)}function $t(en){return en.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function Wt(en,ze){var tn;return window.CustomEvent&&typeof window.CustomEvent=="function"?tn=new CustomEvent(en,{bubbles:!0,cancelable:!0,detail:ze}):(tn=re().createEvent("CustomEvent"),tn.initCustomEvent(en,!0,!0,ze)),tn}function fe(en,ze,tn){ce(en,ze,le({error:ze},tn))}function Gt(en){return en==="htmx:afterProcessNode"}function R(en,ze){oe(Br(en),function(tn){try{ze(tn)}catch(nn){b(nn)}})}function b(en){console.error?console.error(en):console.log&&console.log("ERROR: ",en)}function ce(en,ze,tn){en=p(en),tn==null&&(tn={}),tn.elt=en;var nn=Wt(ze,tn);Q.logger&&!Gt(ze)&&Q.logger(en,ze,tn),tn.error&&(b(tn.error),ce(en,"htmx:error",{errorInfo:tn}));var rn=en.dispatchEvent(nn),sn=$t(ze);if(rn&&sn!==ze){var an=Wt(sn,nn.detail);rn=rn&&en.dispatchEvent(an)}return R(en,function(ln){rn=rn&&ln.onEvent(ze,nn)!==!1&&!nn.defaultPrevented}),rn}var Jt=location.pathname+location.search;function Zt(){var en=re().querySelector("[hx-history-elt],[data-hx-history-elt]");return en||re().body}function Kt(en,ze,tn,nn){if(U()){if(Q.config.historyCacheSize<=0){localStorage.removeItem("htmx-history-cache");return}en=F(en);for(var rn=E(localStorage.getItem("htmx-history-cache"))||[],sn=0;sn<rn.length;sn++)if(rn[sn].url===en){rn.splice(sn,1);break}var an={url:en,content:ze,title:tn,scroll:nn};for(ce(re().body,"htmx:historyItemCreated",{item:an,cache:rn}),rn.push(an);rn.length>Q.config.historyCacheSize;)rn.shift();for(;rn.length>0;)try{localStorage.setItem("htmx-history-cache",JSON.stringify(rn));break}catch(ln){fe(re().body,"htmx:historyCacheError",{cause:ln,cache:rn}),rn.shift()}}}function Yt(en){if(!U())return null;en=F(en);for(var ze=E(localStorage.getItem("htmx-history-cache"))||[],tn=0;tn<ze.length;tn++)if(ze[tn].url===en)return ze[tn];return null}function Qt(en){var ze=Q.config.requestClass,tn=en.cloneNode(!0);return oe(f(tn,"."+ze),function(nn){n(nn,ze)}),tn.innerHTML}function er(){var en=Zt(),ze=Jt||location.pathname+location.search,tn;try{tn=re().querySelector('[hx-history="false" i],[data-hx-history="false" i]')}catch{tn=re().querySelector('[hx-history="false"],[data-hx-history="false"]')}tn||(ce(re().body,"htmx:beforeHistorySave",{path:ze,historyElt:en}),Kt(ze,Qt(en),re().title,window.scrollY)),Q.config.historyEnabled&&history.replaceState({htmx:!0},re().title,window.location.href)}function tr(en){Q.config.getCacheBusterParam&&(en=en.replace(/org\.htmx\.cache-buster=[^&]*&?/,""),(G(en,"&")||G(en,"?"))&&(en=en.slice(0,-1))),Q.config.historyEnabled&&history.pushState({htmx:!0},"",en),Jt=en}function rr(en){Q.config.historyEnabled&&history.replaceState({htmx:!0},"",en),Jt=en}function nr(en){oe(en,function(ze){ze.call()})}function ir(en){var ze=new XMLHttpRequest,tn={path:en,xhr:ze};ce(re().body,"htmx:historyCacheMiss",tn),ze.open("GET",en,!0),ze.setRequestHeader("HX-Request","true"),ze.setRequestHeader("HX-History-Restore-Request","true"),ze.setRequestHeader("HX-Current-URL",re().location.href),ze.onload=function(){if(this.status>=200&&this.status<400){ce(re().body,"htmx:historyCacheMissLoad",tn);var nn=l(this.response);nn=nn.querySelector("[hx-history-elt],[data-hx-history-elt]")||nn;var rn=Zt(),sn=T(rn),an=Ve(this.response);if(an){var ln=C("title");ln?ln.innerHTML=an:window.document.title=an}Ue(rn,nn,sn),nr(sn.tasks),Jt=en,ce(re().body,"htmx:historyRestore",{path:en,cacheMiss:!0,serverResponse:this.response})}else fe(re().body,"htmx:historyCacheMissLoadError",tn)},ze.send()}function ar(en){er(),en=en||location.pathname+location.search;var ze=Yt(en);if(ze){var tn=l(ze.content),nn=Zt(),rn=T(nn);Ue(nn,tn,rn),nr(rn.tasks),document.title=ze.title,setTimeout(function(){window.scrollTo(0,ze.scroll)},0),Jt=en,ce(re().body,"htmx:historyRestore",{path:en,item:ze})}else Q.config.refreshOnHistoryMiss?window.location.reload(!0):ir(en)}function or(en){var ze=me(en,"hx-indicator");return ze==null&&(ze=[en]),oe(ze,function(tn){var nn=ae(tn);nn.requestCount=(nn.requestCount||0)+1,tn.classList.add.call(tn.classList,Q.config.requestClass)}),ze}function sr(en){var ze=me(en,"hx-disabled-elt");return ze==null&&(ze=[]),oe(ze,function(tn){var nn=ae(tn);nn.requestCount=(nn.requestCount||0)+1,tn.setAttribute("disabled","")}),ze}function lr(en,ze){oe(en,function(tn){var nn=ae(tn);nn.requestCount=(nn.requestCount||0)-1,nn.requestCount===0&&tn.classList.remove.call(tn.classList,Q.config.requestClass)}),oe(ze,function(tn){var nn=ae(tn);nn.requestCount=(nn.requestCount||0)-1,nn.requestCount===0&&tn.removeAttribute("disabled")})}function ur(en,ze){for(var tn=0;tn<en.length;tn++){var nn=en[tn];if(nn.isSameNode(ze))return!0}return!1}function fr(en){return en.name===""||en.name==null||en.disabled||v(en,"fieldset[disabled]")||en.type==="button"||en.type==="submit"||en.tagName==="image"||en.tagName==="reset"||en.tagName==="file"?!1:en.type==="checkbox"||en.type==="radio"?en.checked:!0}function cr(en,ze,tn){if(en!=null&&ze!=null){var nn=tn[en];nn===void 0?tn[en]=ze:Array.isArray(nn)?Array.isArray(ze)?tn[en]=nn.concat(ze):nn.push(ze):Array.isArray(ze)?tn[en]=[nn].concat(ze):tn[en]=[nn,ze]}}function hr(en,ze,tn,nn,rn){if(!(nn==null||ur(en,nn))){if(en.push(nn),fr(nn)){var sn=ee(nn,"name"),an=nn.value;nn.multiple&&nn.tagName==="SELECT"&&(an=M(nn.querySelectorAll("option:checked")).map(function(cn){return cn.value})),nn.files&&(an=M(nn.files)),cr(sn,an,ze),rn&&vr(nn,tn)}if(h(nn,"form")){var ln=nn.elements;oe(ln,function(cn){hr(en,ze,tn,cn,rn)})}}}function vr(en,ze){en.willValidate&&(ce(en,"htmx:validation:validate"),en.checkValidity()||(ze.push({elt:en,message:en.validationMessage,validity:en.validity}),ce(en,"htmx:validation:failed",{message:en.validationMessage,validity:en.validity})))}function dr(en,ze){var tn=[],nn={},rn={},sn=[],an=ae(en);an.lastButtonClicked&&!se(an.lastButtonClicked)&&(an.lastButtonClicked=null);var ln=h(en,"form")&&en.noValidate!==!0||te(en,"hx-validate")==="true";if(an.lastButtonClicked&&(ln=ln&&an.lastButtonClicked.formNoValidate!==!0),ze!=="get"&&hr(tn,rn,sn,v(en,"form"),ln),hr(tn,nn,sn,en,ln),an.lastButtonClicked||en.tagName==="BUTTON"||en.tagName==="INPUT"&&ee(en,"type")==="submit"){var cn=an.lastButtonClicked||en,un=ee(cn,"name");cr(un,cn.value,rn)}var dn=me(en,"hx-include");return oe(dn,function(fn){hr(tn,nn,sn,fn,ln),h(fn,"form")||oe(fn.querySelectorAll(rt),function(pn){hr(tn,nn,sn,pn,ln)})}),nn=le(nn,rn),{errors:sn,values:nn}}function gr(en,ze,tn){en!==""&&(en+="&"),String(tn)==="[object Object]"&&(tn=JSON.stringify(tn));var nn=encodeURIComponent(tn);return en+=encodeURIComponent(ze)+"="+nn,en}function pr(en){var ze="";for(var tn in en)if(en.hasOwnProperty(tn)){var nn=en[tn];Array.isArray(nn)?oe(nn,function(rn){ze=gr(ze,tn,rn)}):ze=gr(ze,tn,nn)}return ze}function mr(en){var ze=new FormData;for(var tn in en)if(en.hasOwnProperty(tn)){var nn=en[tn];Array.isArray(nn)?oe(nn,function(rn){ze.append(tn,rn)}):ze.append(tn,nn)}return ze}function xr(en,ze,tn){var nn={"HX-Request":"true","HX-Trigger":ee(en,"id"),"HX-Trigger-Name":ee(en,"name"),"HX-Target":te(ze,"id"),"HX-Current-URL":re().location.href};return Rr(en,"hx-headers",!1,nn),tn!==void 0&&(nn["HX-Prompt"]=tn),ae(en).boosted&&(nn["HX-Boosted"]="true"),nn}function yr(en,ze){var tn=ne(ze,"hx-params");if(tn){if(tn==="none")return{};if(tn==="*")return en;if(tn.indexOf("not ")===0)return oe(tn.substr(4).split(","),function(rn){rn=rn.trim(),delete en[rn]}),en;var nn={};return oe(tn.split(","),function(rn){rn=rn.trim(),nn[rn]=en[rn]}),nn}else return en}function br(en){return ee(en,"href")&&ee(en,"href").indexOf("#")>=0}function wr(en,ze){var tn=ze||ne(en,"hx-swap"),nn={swapStyle:ae(en).boosted?"innerHTML":Q.config.defaultSwapStyle,swapDelay:Q.config.defaultSwapDelay,settleDelay:Q.config.defaultSettleDelay};if(Q.config.scrollIntoViewOnBoost&&ae(en).boosted&&!br(en)&&(nn.show="top"),tn){var rn=D(tn);if(rn.length>0)for(var sn=0;sn<rn.length;sn++){var an=rn[sn];if(an.indexOf("swap:")===0)nn.swapDelay=d(an.substr(5));else if(an.indexOf("settle:")===0)nn.settleDelay=d(an.substr(7));else if(an.indexOf("transition:")===0)nn.transition=an.substr(11)==="true";else if(an.indexOf("ignoreTitle:")===0)nn.ignoreTitle=an.substr(12)==="true";else if(an.indexOf("scroll:")===0){var ln=an.substr(7),cn=ln.split(":"),un=cn.pop(),dn=cn.length>0?cn.join(":"):null;nn.scroll=un,nn.scrollTarget=dn}else if(an.indexOf("show:")===0){var fn=an.substr(5),cn=fn.split(":"),pn=cn.pop(),dn=cn.length>0?cn.join(":"):null;nn.show=pn,nn.showTarget=dn}else if(an.indexOf("focus-scroll:")===0){var hn=an.substr(13);nn.focusScroll=hn=="true"}else sn==0?nn.swapStyle=an:b("Unknown modifier in hx-swap: "+an)}}return nn}function Sr(en){return ne(en,"hx-encoding")==="multipart/form-data"||h(en,"form")&&ee(en,"enctype")==="multipart/form-data"}function Er(en,ze,tn){var nn=null;return R(ze,function(rn){nn==null&&(nn=rn.encodeParameters(en,tn,ze))}),nn??(Sr(ze)?mr(tn):pr(tn))}function T(en){return{tasks:[],elts:[en]}}function Cr(en,ze){var tn=en[0],nn=en[en.length-1];if(ze.scroll){var rn=null;ze.scrollTarget&&(rn=ue(tn,ze.scrollTarget)),ze.scroll==="top"&&(tn||rn)&&(rn=rn||tn,rn.scrollTop=0),ze.scroll==="bottom"&&(nn||rn)&&(rn=rn||nn,rn.scrollTop=rn.scrollHeight)}if(ze.show){var rn=null;if(ze.showTarget){var sn=ze.showTarget;ze.showTarget==="window"&&(sn="body"),rn=ue(tn,sn)}ze.show==="top"&&(tn||rn)&&(rn=rn||tn,rn.scrollIntoView({block:"start",behavior:Q.config.scrollBehavior})),ze.show==="bottom"&&(nn||rn)&&(rn=rn||nn,rn.scrollIntoView({block:"end",behavior:Q.config.scrollBehavior}))}}function Rr(en,ze,tn,nn){if(nn==null&&(nn={}),en==null)return nn;var rn=te(en,ze);if(rn){var sn=rn.trim(),an=tn;if(sn==="unset")return null;sn.indexOf("javascript:")===0?(sn=sn.substr(11),an=!0):sn.indexOf("js:")===0&&(sn=sn.substr(3),an=!0),sn.indexOf("{")!==0&&(sn="{"+sn+"}");var ln;an?ln=Tr(en,function(){return Function("return ("+sn+")")()},{}):ln=E(sn);for(var cn in ln)ln.hasOwnProperty(cn)&&nn[cn]==null&&(nn[cn]=ln[cn])}return Rr(u(en),ze,tn,nn)}function Tr(en,ze,tn){return Q.config.allowEval?ze():(fe(en,"htmx:evalDisallowedError"),tn)}function Or(en,ze){return Rr(en,"hx-vars",!0,ze)}function qr(en,ze){return Rr(en,"hx-vals",!1,ze)}function Hr(en){return le(Or(en),qr(en))}function Lr(en,ze,tn){if(tn!==null)try{en.setRequestHeader(ze,tn)}catch{en.setRequestHeader(ze,encodeURIComponent(tn)),en.setRequestHeader(ze+"-URI-AutoEncoded","true")}}function Ar(en){if(en.responseURL&&typeof URL<"u")try{var ze=new URL(en.responseURL);return ze.pathname+ze.search}catch{fe(re().body,"htmx:badResponseUrl",{url:en.responseURL})}}function O(en,ze){return ze.test(en.getAllResponseHeaders())}function Nr(en,ze,tn){return en=en.toLowerCase(),tn?tn instanceof Element||I(tn,"String")?he(en,ze,null,null,{targetOverride:p(tn),returnPromise:!0}):he(en,ze,p(tn.source),tn.event,{handler:tn.handler,headers:tn.headers,values:tn.values,targetOverride:p(tn.target),swapOverride:tn.swap,select:tn.select,returnPromise:!0}):he(en,ze,null,null,{returnPromise:!0})}function Ir(en){for(var ze=[];en;)ze.push(en),en=en.parentElement;return ze}function kr(en,ze,tn){var nn,rn;if(typeof URL=="function"){rn=new URL(ze,document.location.href);var sn=document.location.origin;nn=sn===rn.origin}else rn=ze,nn=g(ze,document.location.origin);return Q.config.selfRequestsOnly&&!nn?!1:ce(en,"htmx:validateUrl",le({url:rn,sameHost:nn},tn))}function he(en,ze,tn,nn,rn,sn){var an=null,ln=null;if(rn=rn??{},rn.returnPromise&&typeof Promise<"u")var cn=new Promise(function(Pn,Zr){an=Pn,ln=Zr});tn==null&&(tn=re().body);var un=rn.handler||Mr,dn=rn.select||null;if(!se(tn))return ie(an),cn;var fn=rn.targetOverride||ye(tn);if(fn==null||fn==pe)return fe(tn,"htmx:targetError",{target:te(tn,"hx-target")}),ie(ln),cn;var pn=ae(tn),hn=pn.lastButtonClicked;if(hn){var gn=ee(hn,"formaction");gn!=null&&(ze=gn);var En=ee(hn,"formmethod");En!=null&&En.toLowerCase()!=="dialog"&&(en=En)}var mn=ne(tn,"hx-confirm");if(sn===void 0){var bn=function(Pn){return he(en,ze,tn,nn,rn,!!Pn)},Tn={target:fn,elt:tn,path:ze,verb:en,triggeringEvent:nn,etc:rn,issueRequest:bn,question:mn};if(ce(tn,"htmx:confirm",Tn)===!1)return ie(an),cn}var _n=tn,An=ne(tn,"hx-sync"),Rn=null,Cn=!1;if(An){var wn=An.split(":"),Fn=wn[0].trim();if(Fn==="this"?_n=xe(tn,"hx-sync"):_n=ue(tn,Fn),An=(wn[1]||"drop").trim(),pn=ae(_n),An==="drop"&&pn.xhr&&pn.abortable!==!0)return ie(an),cn;if(An==="abort"){if(pn.xhr)return ie(an),cn;Cn=!0}else if(An==="replace")ce(_n,"htmx:abort");else if(An.indexOf("queue")===0){var xn=An.split(" ");Rn=(xn[1]||"last").trim()}}if(pn.xhr)if(pn.abortable)ce(_n,"htmx:abort");else{if(Rn==null){if(nn){var zn=ae(nn);zn&&zn.triggerSpec&&zn.triggerSpec.queue&&(Rn=zn.triggerSpec.queue)}Rn==null&&(Rn="last")}return pn.queuedRequests==null&&(pn.queuedRequests=[]),Rn==="first"&&pn.queuedRequests.length===0?pn.queuedRequests.push(function(){he(en,ze,tn,nn,rn)}):Rn==="all"?pn.queuedRequests.push(function(){he(en,ze,tn,nn,rn)}):Rn==="last"&&(pn.queuedRequests=[],pn.queuedRequests.push(function(){he(en,ze,tn,nn,rn)})),ie(an),cn}var Hn=new XMLHttpRequest;pn.xhr=Hn,pn.abortable=Cn;var Yn=function(){if(pn.xhr=null,pn.abortable=!1,pn.queuedRequests!=null&&pn.queuedRequests.length>0){var Pn=pn.queuedRequests.shift();Pn()}},Xn=ne(tn,"hx-prompt");if(Xn){var Kn=prompt(Xn);if(Kn===null||!ce(tn,"htmx:prompt",{prompt:Kn,target:fn}))return ie(an),Yn(),cn}if(mn&&!sn&&!confirm(mn))return ie(an),Yn(),cn;var Un=xr(tn,fn,Kn);en!=="get"&&!Sr(tn)&&(Un["Content-Type"]="application/x-www-form-urlencoded"),rn.headers&&(Un=le(Un,rn.headers));var On=dr(tn,en),Sn=On.errors,Nn=On.values;rn.values&&(Nn=le(Nn,rn.values));var Mn=Hr(tn),Dn=le(Nn,Mn),$n=yr(Dn,tn);Q.config.getCacheBusterParam&&en==="get"&&($n["org.htmx.cache-buster"]=ee(fn,"id")||"true"),(ze==null||ze==="")&&(ze=re().location.href);var Vn=Rr(tn,"hx-request"),Zn=ae(tn).boosted,Qn=Q.config.methodsThatUseUrlParams.indexOf(en)>=0,Wn={boosted:Zn,useUrlParams:Qn,parameters:$n,unfilteredParameters:Dn,headers:Un,target:fn,verb:en,errors:Sn,withCredentials:rn.credentials||Vn.credentials||Q.config.withCredentials,timeout:rn.timeout||Vn.timeout||Q.config.timeout,path:ze,triggeringEvent:nn};if(!ce(tn,"htmx:configRequest",Wn))return ie(an),Yn(),cn;if(ze=Wn.path,en=Wn.verb,Un=Wn.headers,$n=Wn.parameters,Sn=Wn.errors,Qn=Wn.useUrlParams,Sn&&Sn.length>0)return ce(tn,"htmx:validation:halted",Wn),ie(an),Yn(),cn;var Wr=ze.split("#"),si=Wr[0],ti=Wr[1],Qr=ze;if(Qn){Qr=si;var li=Object.keys($n).length!==0;li&&(Qr.indexOf("?")<0?Qr+="?":Qr+="&",Qr+=pr($n),ti&&(Qr+="#"+ti))}if(!kr(tn,Qr,Wn))return fe(tn,"htmx:invalidPath",Wn),ie(ln),cn;if(Hn.open(en.toUpperCase(),Qr,!0),Hn.overrideMimeType("text/html"),Hn.withCredentials=Wn.withCredentials,Hn.timeout=Wn.timeout,!Vn.noHeaders){for(var oi in Un)if(Un.hasOwnProperty(oi)){var ii=Un[oi];Lr(Hn,oi,ii)}}var Gn={xhr:Hn,target:fn,requestConfig:Wn,etc:rn,boosted:Zn,select:dn,pathInfo:{requestPath:ze,finalRequestPath:Qr,anchor:ti}};if(Hn.onload=function(){try{var Pn=Ir(tn);if(Gn.pathInfo.responsePath=Ar(Hn),un(tn,Gn),lr(Gr,ei),ce(tn,"htmx:afterRequest",Gn),ce(tn,"htmx:afterOnLoad",Gn),!se(tn)){for(var Zr=null;Pn.length>0&&Zr==null;){var kn=Pn.shift();se(kn)&&(Zr=kn)}Zr&&(ce(Zr,"htmx:afterRequest",Gn),ce(Zr,"htmx:afterOnLoad",Gn))}ie(an),Yn()}catch(jn){throw fe(tn,"htmx:onLoadError",le({error:jn},Gn)),jn}},Hn.onerror=function(){lr(Gr,ei),fe(tn,"htmx:afterRequest",Gn),fe(tn,"htmx:sendError",Gn),ie(ln),Yn()},Hn.onabort=function(){lr(Gr,ei),fe(tn,"htmx:afterRequest",Gn),fe(tn,"htmx:sendAbort",Gn),ie(ln),Yn()},Hn.ontimeout=function(){lr(Gr,ei),fe(tn,"htmx:afterRequest",Gn),fe(tn,"htmx:timeout",Gn),ie(ln),Yn()},!ce(tn,"htmx:beforeRequest",Gn))return ie(an),Yn(),cn;var Gr=or(tn),ei=sr(tn);oe(["loadstart","loadend","progress","abort"],function(Pn){oe([Hn,Hn.upload],function(Zr){Zr.addEventListener(Pn,function(kn){ce(tn,"htmx:xhr:"+Pn,{lengthComputable:kn.lengthComputable,loaded:kn.loaded,total:kn.total})})})}),ce(tn,"htmx:beforeSend",Gn);var Yr=Qn?null:Er(Hn,tn,$n);return Hn.send(Yr),cn}function Pr(en,ze){var tn=ze.xhr,nn=null,rn=null;if(O(tn,/HX-Push:/i)?(nn=tn.getResponseHeader("HX-Push"),rn="push"):O(tn,/HX-Push-Url:/i)?(nn=tn.getResponseHeader("HX-Push-Url"),rn="push"):O(tn,/HX-Replace-Url:/i)&&(nn=tn.getResponseHeader("HX-Replace-Url"),rn="replace"),nn)return nn==="false"?{}:{type:rn,path:nn};var sn=ze.pathInfo.finalRequestPath,an=ze.pathInfo.responsePath,ln=ne(en,"hx-push-url"),cn=ne(en,"hx-replace-url"),un=ae(en).boosted,dn=null,fn=null;return ln?(dn="push",fn=ln):cn?(dn="replace",fn=cn):un&&(dn="push",fn=an||sn),fn?fn==="false"?{}:(fn==="true"&&(fn=an||sn),ze.pathInfo.anchor&&fn.indexOf("#")===-1&&(fn=fn+"#"+ze.pathInfo.anchor),{type:dn,path:fn}):{}}function Mr(en,ze){var tn=ze.xhr,nn=ze.target,rn=ze.etc;ze.requestConfig;var sn=ze.select;if(ce(en,"htmx:beforeOnLoad",ze)){if(O(tn,/HX-Trigger:/i)&&_e(tn,"HX-Trigger",en),O(tn,/HX-Location:/i)){er();var an=tn.getResponseHeader("HX-Location"),ln;an.indexOf("{")===0&&(ln=E(an),an=ln.path,delete ln.path),Nr("GET",an,ln).then(function(){tr(an)});return}var cn=O(tn,/HX-Refresh:/i)&&tn.getResponseHeader("HX-Refresh")==="true";if(O(tn,/HX-Redirect:/i)){location.href=tn.getResponseHeader("HX-Redirect"),cn&&location.reload();return}if(cn){location.reload();return}O(tn,/HX-Retarget:/i)&&(tn.getResponseHeader("HX-Retarget")==="this"?ze.target=en:ze.target=ue(en,tn.getResponseHeader("HX-Retarget")));var un=Pr(en,ze),dn=tn.status>=200&&tn.status<400&&tn.status!==204,fn=tn.response,pn=tn.status>=400,hn=Q.config.ignoreTitle,gn=le({shouldSwap:dn,serverResponse:fn,isError:pn,ignoreTitle:hn},ze);if(ce(nn,"htmx:beforeSwap",gn)){if(nn=gn.target,fn=gn.serverResponse,pn=gn.isError,hn=gn.ignoreTitle,ze.target=nn,ze.failed=pn,ze.successful=!pn,gn.shouldSwap){tn.status===286&&at(en),R(en,function(wn){fn=wn.transformResponse(fn,tn,en)}),un.type&&er();var En=rn.swapOverride;O(tn,/HX-Reswap:/i)&&(En=tn.getResponseHeader("HX-Reswap"));var ln=wr(en,En);ln.hasOwnProperty("ignoreTitle")&&(hn=ln.ignoreTitle),nn.classList.add(Q.config.swappingClass);var mn=null,bn=null,Tn=function(){try{var wn=document.activeElement,Fn={};try{Fn={elt:wn,start:wn?wn.selectionStart:null,end:wn?wn.selectionEnd:null}}catch{}var xn;sn&&(xn=sn),O(tn,/HX-Reselect:/i)&&(xn=tn.getResponseHeader("HX-Reselect")),un.type&&(ce(re().body,"htmx:beforeHistoryUpdate",le({history:un},ze)),un.type==="push"?(tr(un.path),ce(re().body,"htmx:pushedIntoHistory",{path:un.path})):(rr(un.path),ce(re().body,"htmx:replacedInHistory",{path:un.path})));var zn=T(nn);if(je(ln.swapStyle,nn,en,fn,zn,xn),Fn.elt&&!se(Fn.elt)&&ee(Fn.elt,"id")){var Hn=document.getElementById(ee(Fn.elt,"id")),Yn={preventScroll:ln.focusScroll!==void 0?!ln.focusScroll:!Q.config.defaultFocusScroll};if(Hn){if(Fn.start&&Hn.setSelectionRange)try{Hn.setSelectionRange(Fn.start,Fn.end)}catch{}Hn.focus(Yn)}}if(nn.classList.remove(Q.config.swappingClass),oe(zn.elts,function(Un){Un.classList&&Un.classList.add(Q.config.settlingClass),ce(Un,"htmx:afterSwap",ze)}),O(tn,/HX-Trigger-After-Swap:/i)){var Xn=en;se(en)||(Xn=re().body),_e(tn,"HX-Trigger-After-Swap",Xn)}var Kn=function(){if(oe(zn.tasks,function(Nn){Nn.call()}),oe(zn.elts,function(Nn){Nn.classList&&Nn.classList.remove(Q.config.settlingClass),ce(Nn,"htmx:afterSettle",ze)}),ze.pathInfo.anchor){var Un=re().getElementById(ze.pathInfo.anchor);Un&&Un.scrollIntoView({block:"start",behavior:"auto"})}if(zn.title&&!hn){var On=C("title");On?On.innerHTML=zn.title:window.document.title=zn.title}if(Cr(zn.elts,ln),O(tn,/HX-Trigger-After-Settle:/i)){var Sn=en;se(en)||(Sn=re().body),_e(tn,"HX-Trigger-After-Settle",Sn)}ie(mn)};ln.settleDelay>0?setTimeout(Kn,ln.settleDelay):Kn()}catch(Un){throw fe(en,"htmx:swapError",ze),ie(bn),Un}},_n=Q.config.globalViewTransitions;if(ln.hasOwnProperty("transition")&&(_n=ln.transition),_n&&ce(en,"htmx:beforeTransition",ze)&&typeof Promise<"u"&&document.startViewTransition){var An=new Promise(function(wn,Fn){mn=wn,bn=Fn}),Rn=Tn;Tn=function(){document.startViewTransition(function(){return Rn(),An})}}ln.swapDelay>0?setTimeout(Tn,ln.swapDelay):Tn()}pn&&fe(en,"htmx:responseError",le({error:"Response Status Error Code "+tn.status+" from "+ze.pathInfo.requestPath},ze))}}}var Xr={};function Dr(){return{init:function(en){return null},onEvent:function(en,ze){return!0},transformResponse:function(en,ze,tn){return en},isInlineSwap:function(en){return!1},handleSwap:function(en,ze,tn,nn){return!1},encodeParameters:function(en,ze,tn){return null}}}function Ur(en,ze){ze.init&&ze.init(r),Xr[en]=le(Dr(),ze)}function Fr(en){delete Xr[en]}function Br(en,ze,tn){if(en==null)return ze;ze==null&&(ze=[]),tn==null&&(tn=[]);var nn=te(en,"hx-ext");return nn&&oe(nn.split(","),function(rn){if(rn=rn.replace(/ /g,""),rn.slice(0,7)=="ignore:"){tn.push(rn.slice(7));return}if(tn.indexOf(rn)<0){var sn=Xr[rn];sn&&ze.indexOf(sn)<0&&ze.push(sn)}}),Br(u(en),ze,tn)}var Vr=!1;re().addEventListener("DOMContentLoaded",function(){Vr=!0});function jr(en){Vr||re().readyState==="complete"?en():re().addEventListener("DOMContentLoaded",en)}function _r(){Q.config.includeIndicatorStyles!==!1&&re().head.insertAdjacentHTML("beforeend","<style>                      ."+Q.config.indicatorClass+"{opacity:0}                      ."+Q.config.requestClass+" ."+Q.config.indicatorClass+"{opacity:1; transition: opacity 200ms ease-in;}                      ."+Q.config.requestClass+"."+Q.config.indicatorClass+"{opacity:1; transition: opacity 200ms ease-in;}                    </style>")}function zr(){var en=re().querySelector('meta[name="htmx-config"]');return en?E(en.content):null}function $r(){var en=zr();en&&(Q.config=le(Q.config,en))}return jr(function(){$r(),_r();var en=re().body;zt(en);var ze=re().querySelectorAll("[hx-trigger='restored'],[data-hx-trigger='restored']");en.addEventListener("htmx:abort",function(nn){var rn=nn.target,sn=ae(rn);sn&&sn.xhr&&sn.xhr.abort()});const tn=window.onpopstate?window.onpopstate.bind(window):null;window.onpopstate=function(nn){nn.state&&nn.state.htmx?(ar(),oe(ze,function(rn){ce(rn,"htmx:restored",{document:re(),triggerEvent:ce})})):tn&&tn(nn)},setTimeout(function(){ce(en,"htmx:load",{}),en=null},0)}),Q}()})})(htmx_min);var htmx_minExports=htmx_min.exports;const htmx=getDefaultExportFromCjs(htmx_minExports);var flushPending=!1,flushing=!1,queue=[],lastFlushedIndex=-1;function scheduler(en){queueJob(en)}function queueJob(en){queue.includes(en)||queue.push(en),queueFlush()}function dequeueJob(en){let ze=queue.indexOf(en);ze!==-1&&ze>lastFlushedIndex&&queue.splice(ze,1)}function queueFlush(){!flushing&&!flushPending&&(flushPending=!0,queueMicrotask(flushJobs))}function flushJobs(){flushPending=!1,flushing=!0;for(let en=0;en<queue.length;en++)queue[en](),lastFlushedIndex=en;queue.length=0,lastFlushedIndex=-1,flushing=!1}var reactive,effect,release,raw,shouldSchedule=!0;function disableEffectScheduling(en){shouldSchedule=!1,en(),shouldSchedule=!0}function setReactivityEngine(en){reactive=en.reactive,release=en.release,effect=ze=>en.effect(ze,{scheduler:tn=>{shouldSchedule?scheduler(tn):tn()}}),raw=en.raw}function overrideEffect(en){effect=en}function elementBoundEffect(en){let ze=()=>{};return[nn=>{let rn=effect(nn);return en._x_effects||(en._x_effects=new Set,en._x_runEffects=()=>{en._x_effects.forEach(sn=>sn())}),en._x_effects.add(rn),ze=()=>{rn!==void 0&&(en._x_effects.delete(rn),release(rn))},rn},()=>{ze()}]}function watch(en,ze){let tn=!0,nn,rn=effect(()=>{let sn=en();JSON.stringify(sn),tn?nn=sn:queueMicrotask(()=>{ze(sn,nn),nn=sn}),tn=!1});return()=>release(rn)}function dispatch(en,ze,tn={}){en.dispatchEvent(new CustomEvent(ze,{detail:tn,bubbles:!0,composed:!0,cancelable:!0}))}function walk(en,ze){if(typeof ShadowRoot=="function"&&en instanceof ShadowRoot){Array.from(en.children).forEach(rn=>walk(rn,ze));return}let tn=!1;if(ze(en,()=>tn=!0),tn)return;let nn=en.firstElementChild;for(;nn;)walk(nn,ze),nn=nn.nextElementSibling}function warn$3(en,...ze){console.warn(`Alpine Warning: ${en}`,...ze)}var started=!1;function start(){started&&warn$3("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),started=!0,document.body||warn$3("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),dispatch(document,"alpine:init"),dispatch(document,"alpine:initializing"),startObservingMutations(),onElAdded(ze=>initTree(ze,walk)),onElRemoved(ze=>destroyTree(ze)),onAttributesAdded((ze,tn)=>{directives(ze,tn).forEach(nn=>nn())});let en=ze=>!closestRoot(ze.parentElement,!0);Array.from(document.querySelectorAll(allSelectors().join(","))).filter(en).forEach(ze=>{initTree(ze)}),dispatch(document,"alpine:initialized")}var rootSelectorCallbacks=[],initSelectorCallbacks=[];function rootSelectors(){return rootSelectorCallbacks.map(en=>en())}function allSelectors(){return rootSelectorCallbacks.concat(initSelectorCallbacks).map(en=>en())}function addRootSelector(en){rootSelectorCallbacks.push(en)}function addInitSelector(en){initSelectorCallbacks.push(en)}function closestRoot(en,ze=!1){return findClosest(en,tn=>{if((ze?allSelectors():rootSelectors()).some(rn=>tn.matches(rn)))return!0})}function findClosest(en,ze){if(en){if(ze(en))return en;if(en._x_teleportBack&&(en=en._x_teleportBack),!!en.parentElement)return findClosest(en.parentElement,ze)}}function isRoot(en){return rootSelectors().some(ze=>en.matches(ze))}var initInterceptors=[];function interceptInit(en){initInterceptors.push(en)}function initTree(en,ze=walk,tn=()=>{}){deferHandlingDirectives(()=>{ze(en,(nn,rn)=>{tn(nn,rn),initInterceptors.forEach(sn=>sn(nn,rn)),directives(nn,nn.attributes).forEach(sn=>sn()),nn._x_ignore&&rn()})})}function destroyTree(en,ze=walk){ze(en,tn=>{cleanupAttributes(tn),cleanupElement(tn)})}var onAttributeAddeds=[],onElRemoveds=[],onElAddeds=[];function onElAdded(en){onElAddeds.push(en)}function onElRemoved(en,ze){typeof ze=="function"?(en._x_cleanups||(en._x_cleanups=[]),en._x_cleanups.push(ze)):(ze=en,onElRemoveds.push(ze))}function onAttributesAdded(en){onAttributeAddeds.push(en)}function onAttributeRemoved(en,ze,tn){en._x_attributeCleanups||(en._x_attributeCleanups={}),en._x_attributeCleanups[ze]||(en._x_attributeCleanups[ze]=[]),en._x_attributeCleanups[ze].push(tn)}function cleanupAttributes(en,ze){en._x_attributeCleanups&&Object.entries(en._x_attributeCleanups).forEach(([tn,nn])=>{(ze===void 0||ze.includes(tn))&&(nn.forEach(rn=>rn()),delete en._x_attributeCleanups[tn])})}function cleanupElement(en){if(en._x_cleanups)for(;en._x_cleanups.length;)en._x_cleanups.pop()()}var observer=new MutationObserver(onMutate),currentlyObserving=!1;function startObservingMutations(){observer.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),currentlyObserving=!0}function stopObservingMutations(){flushObserver(),observer.disconnect(),currentlyObserving=!1}var queuedMutations=[];function flushObserver(){let en=observer.takeRecords();queuedMutations.push(()=>en.length>0&&onMutate(en));let ze=queuedMutations.length;queueMicrotask(()=>{if(queuedMutations.length===ze)for(;queuedMutations.length>0;)queuedMutations.shift()()})}function mutateDom(en){if(!currentlyObserving)return en();stopObservingMutations();let ze=en();return startObservingMutations(),ze}var isCollecting=!1,deferredMutations=[];function deferMutations(){isCollecting=!0}function flushAndStopDeferringMutations(){isCollecting=!1,onMutate(deferredMutations),deferredMutations=[]}function onMutate(en){if(isCollecting){deferredMutations=deferredMutations.concat(en);return}let ze=new Set,tn=new Set,nn=new Map,rn=new Map;for(let sn=0;sn<en.length;sn++)if(!en[sn].target._x_ignoreMutationObserver&&(en[sn].type==="childList"&&(en[sn].addedNodes.forEach(an=>an.nodeType===1&&ze.add(an)),en[sn].removedNodes.forEach(an=>an.nodeType===1&&tn.add(an))),en[sn].type==="attributes")){let an=en[sn].target,ln=en[sn].attributeName,cn=en[sn].oldValue,un=()=>{nn.has(an)||nn.set(an,[]),nn.get(an).push({name:ln,value:an.getAttribute(ln)})},dn=()=>{rn.has(an)||rn.set(an,[]),rn.get(an).push(ln)};an.hasAttribute(ln)&&cn===null?un():an.hasAttribute(ln)?(dn(),un()):dn()}rn.forEach((sn,an)=>{cleanupAttributes(an,sn)}),nn.forEach((sn,an)=>{onAttributeAddeds.forEach(ln=>ln(an,sn))});for(let sn of tn)ze.has(sn)||(onElRemoveds.forEach(an=>an(sn)),destroyTree(sn));ze.forEach(sn=>{sn._x_ignoreSelf=!0,sn._x_ignore=!0});for(let sn of ze)tn.has(sn)||sn.isConnected&&(delete sn._x_ignoreSelf,delete sn._x_ignore,onElAddeds.forEach(an=>an(sn)),sn._x_ignore=!0,sn._x_ignoreSelf=!0);ze.forEach(sn=>{delete sn._x_ignoreSelf,delete sn._x_ignore}),ze=null,tn=null,nn=null,rn=null}function scope(en){return mergeProxies(closestDataStack(en))}function addScopeToNode(en,ze,tn){return en._x_dataStack=[ze,...closestDataStack(tn||en)],()=>{en._x_dataStack=en._x_dataStack.filter(nn=>nn!==ze)}}function closestDataStack(en){return en._x_dataStack?en._x_dataStack:typeof ShadowRoot=="function"&&en instanceof ShadowRoot?closestDataStack(en.host):en.parentNode?closestDataStack(en.parentNode):[]}function mergeProxies(en){return new Proxy({objects:en},mergeProxyTrap)}var mergeProxyTrap={ownKeys({objects:en}){return Array.from(new Set(en.flatMap(ze=>Object.keys(ze))))},has({objects:en},ze){return ze==Symbol.unscopables?!1:en.some(tn=>Object.prototype.hasOwnProperty.call(tn,ze)||Reflect.has(tn,ze))},get({objects:en},ze,tn){return ze=="toJSON"?collapseProxies:Reflect.get(en.find(nn=>Reflect.has(nn,ze))||{},ze,tn)},set({objects:en},ze,tn,nn){const rn=en.find(an=>Object.prototype.hasOwnProperty.call(an,ze))||en[en.length-1],sn=Object.getOwnPropertyDescriptor(rn,ze);return sn!=null&&sn.set&&(sn!=null&&sn.get)?Reflect.set(rn,ze,tn,nn):Reflect.set(rn,ze,tn)}};function collapseProxies(){return Reflect.ownKeys(this).reduce((ze,tn)=>(ze[tn]=Reflect.get(this,tn),ze),{})}function initInterceptors2(en){let ze=nn=>typeof nn=="object"&&!Array.isArray(nn)&&nn!==null,tn=(nn,rn="")=>{Object.entries(Object.getOwnPropertyDescriptors(nn)).forEach(([sn,{value:an,enumerable:ln}])=>{if(ln===!1||an===void 0||typeof an=="object"&&an!==null&&an.__v_skip)return;let cn=rn===""?sn:`${rn}.${sn}`;typeof an=="object"&&an!==null&&an._x_interceptor?nn[sn]=an.initialize(en,cn,sn):ze(an)&&an!==nn&&!(an instanceof Element)&&tn(an,cn)})};return tn(en)}function interceptor(en,ze=()=>{}){let tn={initialValue:void 0,_x_interceptor:!0,initialize(nn,rn,sn){return en(this.initialValue,()=>get(nn,rn),an=>set(nn,rn,an),rn,sn)}};return ze(tn),nn=>{if(typeof nn=="object"&&nn!==null&&nn._x_interceptor){let rn=tn.initialize.bind(tn);tn.initialize=(sn,an,ln)=>{let cn=nn.initialize(sn,an,ln);return tn.initialValue=cn,rn(sn,an,ln)}}else tn.initialValue=nn;return tn}}function get(en,ze){return ze.split(".").reduce((tn,nn)=>tn[nn],en)}function set(en,ze,tn){if(typeof ze=="string"&&(ze=ze.split(".")),ze.length===1)en[ze[0]]=tn;else{if(ze.length===0)throw error;return en[ze[0]]||(en[ze[0]]={}),set(en[ze[0]],ze.slice(1),tn)}}var magics={};function magic(en,ze){magics[en]=ze}function injectMagics(en,ze){return Object.entries(magics).forEach(([tn,nn])=>{let rn=null;function sn(){if(rn)return rn;{let[an,ln]=getElementBoundUtilities(ze);return rn={interceptor,...an},onElRemoved(ze,ln),rn}}Object.defineProperty(en,`$${tn}`,{get(){return nn(ze,sn())},enumerable:!1})}),en}function tryCatch(en,ze,tn,...nn){try{return tn(...nn)}catch(rn){handleError(rn,en,ze)}}function handleError(en,ze,tn=void 0){en=Object.assign(en??{message:"No error message given."},{el:ze,expression:tn}),console.warn(`Alpine Expression Error: ${en.message}

${tn?'Expression: "'+tn+`"

`:""}`,ze),setTimeout(()=>{throw en},0)}var shouldAutoEvaluateFunctions=!0;function dontAutoEvaluateFunctions(en){let ze=shouldAutoEvaluateFunctions;shouldAutoEvaluateFunctions=!1;let tn=en();return shouldAutoEvaluateFunctions=ze,tn}function evaluate$1(en,ze,tn={}){let nn;return evaluateLater(en,ze)(rn=>nn=rn,tn),nn}function evaluateLater(...en){return theEvaluatorFunction(...en)}var theEvaluatorFunction=normalEvaluator;function setEvaluator(en){theEvaluatorFunction=en}function normalEvaluator(en,ze){let tn={};injectMagics(tn,en);let nn=[tn,...closestDataStack(en)],rn=typeof ze=="function"?generateEvaluatorFromFunction(nn,ze):generateEvaluatorFromString(nn,ze,en);return tryCatch.bind(null,en,ze,rn)}function generateEvaluatorFromFunction(en,ze){return(tn=()=>{},{scope:nn={},params:rn=[]}={})=>{let sn=ze.apply(mergeProxies([nn,...en]),rn);runIfTypeOfFunction(tn,sn)}}var evaluatorMemo={};function generateFunctionFromString(en,ze){if(evaluatorMemo[en])return evaluatorMemo[en];let tn=Object.getPrototypeOf(async function(){}).constructor,nn=/^[\n\s]*if.*\(.*\)/.test(en.trim())||/^(let|const)\s/.test(en.trim())?`(async()=>{ ${en} })()`:en,sn=(()=>{try{let an=new tn(["__self","scope"],`with (scope) { __self.result = ${nn} }; __self.finished = true; return __self.result;`);return Object.defineProperty(an,"name",{value:`[Alpine] ${en}`}),an}catch(an){return handleError(an,ze,en),Promise.resolve()}})();return evaluatorMemo[en]=sn,sn}function generateEvaluatorFromString(en,ze,tn){let nn=generateFunctionFromString(ze,tn);return(rn=()=>{},{scope:sn={},params:an=[]}={})=>{nn.result=void 0,nn.finished=!1;let ln=mergeProxies([sn,...en]);if(typeof nn=="function"){let cn=nn(nn,ln).catch(un=>handleError(un,tn,ze));nn.finished?(runIfTypeOfFunction(rn,nn.result,ln,an,tn),nn.result=void 0):cn.then(un=>{runIfTypeOfFunction(rn,un,ln,an,tn)}).catch(un=>handleError(un,tn,ze)).finally(()=>nn.result=void 0)}}}function runIfTypeOfFunction(en,ze,tn,nn,rn){if(shouldAutoEvaluateFunctions&&typeof ze=="function"){let sn=ze.apply(tn,nn);sn instanceof Promise?sn.then(an=>runIfTypeOfFunction(en,an,tn,nn)).catch(an=>handleError(an,rn,ze)):en(sn)}else typeof ze=="object"&&ze instanceof Promise?ze.then(sn=>en(sn)):en(ze)}var prefixAsString="x-";function prefix(en=""){return prefixAsString+en}function setPrefix(en){prefixAsString=en}var directiveHandlers={};function directive(en,ze){return directiveHandlers[en]=ze,{before(tn){if(!directiveHandlers[tn]){console.warn(String.raw`Cannot find directive \`${tn}\`. \`${en}\` will use the default order of execution`);return}const nn=directiveOrder.indexOf(tn);directiveOrder.splice(nn>=0?nn:directiveOrder.indexOf("DEFAULT"),0,en)}}}function directives(en,ze,tn){if(ze=Array.from(ze),en._x_virtualDirectives){let sn=Object.entries(en._x_virtualDirectives).map(([ln,cn])=>({name:ln,value:cn})),an=attributesOnly(sn);sn=sn.map(ln=>an.find(cn=>cn.name===ln.name)?{name:`x-bind:${ln.name}`,value:`"${ln.value}"`}:ln),ze=ze.concat(sn)}let nn={};return ze.map(toTransformedAttributes((sn,an)=>nn[sn]=an)).filter(outNonAlpineAttributes).map(toParsedDirectives(nn,tn)).sort(byPriority).map(sn=>getDirectiveHandler(en,sn))}function attributesOnly(en){return Array.from(en).map(toTransformedAttributes()).filter(ze=>!outNonAlpineAttributes(ze))}var isDeferringHandlers=!1,directiveHandlerStacks=new Map,currentHandlerStackKey=Symbol();function deferHandlingDirectives(en){isDeferringHandlers=!0;let ze=Symbol();currentHandlerStackKey=ze,directiveHandlerStacks.set(ze,[]);let tn=()=>{for(;directiveHandlerStacks.get(ze).length;)directiveHandlerStacks.get(ze).shift()();directiveHandlerStacks.delete(ze)},nn=()=>{isDeferringHandlers=!1,tn()};en(tn),nn()}function getElementBoundUtilities(en){let ze=[],tn=ln=>ze.push(ln),[nn,rn]=elementBoundEffect(en);return ze.push(rn),[{Alpine:alpine_default,effect:nn,cleanup:tn,evaluateLater:evaluateLater.bind(evaluateLater,en),evaluate:evaluate$1.bind(evaluate$1,en)},()=>ze.forEach(ln=>ln())]}function getDirectiveHandler(en,ze){let tn=()=>{},nn=directiveHandlers[ze.type]||tn,[rn,sn]=getElementBoundUtilities(en);onAttributeRemoved(en,ze.original,sn);let an=()=>{en._x_ignore||en._x_ignoreSelf||(nn.inline&&nn.inline(en,ze,rn),nn=nn.bind(nn,en,ze,rn),isDeferringHandlers?directiveHandlerStacks.get(currentHandlerStackKey).push(nn):nn())};return an.runCleanups=sn,an}var startingWith=(en,ze)=>({name:tn,value:nn})=>(tn.startsWith(en)&&(tn=tn.replace(en,ze)),{name:tn,value:nn}),into=en=>en;function toTransformedAttributes(en=()=>{}){return({name:ze,value:tn})=>{let{name:nn,value:rn}=attributeTransformers.reduce((sn,an)=>an(sn),{name:ze,value:tn});return nn!==ze&&en(nn,ze),{name:nn,value:rn}}}var attributeTransformers=[];function mapAttributes(en){attributeTransformers.push(en)}function outNonAlpineAttributes({name:en}){return alpineAttributeRegex().test(en)}var alpineAttributeRegex=()=>new RegExp(`^${prefixAsString}([^:^.]+)\\b`);function toParsedDirectives(en,ze){return({name:tn,value:nn})=>{let rn=tn.match(alpineAttributeRegex()),sn=tn.match(/:([a-zA-Z0-9\-_:]+)/),an=tn.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],ln=ze||en[tn]||tn;return{type:rn?rn[1]:null,value:sn?sn[1]:null,modifiers:an.map(cn=>cn.replace(".","")),expression:nn,original:ln}}}var DEFAULT="DEFAULT",directiveOrder=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",DEFAULT,"teleport"];function byPriority(en,ze){let tn=directiveOrder.indexOf(en.type)===-1?DEFAULT:en.type,nn=directiveOrder.indexOf(ze.type)===-1?DEFAULT:ze.type;return directiveOrder.indexOf(tn)-directiveOrder.indexOf(nn)}var tickStack=[],isHolding=!1;function nextTick(en=()=>{}){return queueMicrotask(()=>{isHolding||setTimeout(()=>{releaseNextTicks()})}),new Promise(ze=>{tickStack.push(()=>{en(),ze()})})}function releaseNextTicks(){for(isHolding=!1;tickStack.length;)tickStack.shift()()}function holdNextTicks(){isHolding=!0}function setClasses(en,ze){return Array.isArray(ze)?setClassesFromString(en,ze.join(" ")):typeof ze=="object"&&ze!==null?setClassesFromObject(en,ze):typeof ze=="function"?setClasses(en,ze()):setClassesFromString(en,ze)}function setClassesFromString(en,ze){let tn=rn=>rn.split(" ").filter(sn=>!en.classList.contains(sn)).filter(Boolean),nn=rn=>(en.classList.add(...rn),()=>{en.classList.remove(...rn)});return ze=ze===!0?ze="":ze||"",nn(tn(ze))}function setClassesFromObject(en,ze){let tn=ln=>ln.split(" ").filter(Boolean),nn=Object.entries(ze).flatMap(([ln,cn])=>cn?tn(ln):!1).filter(Boolean),rn=Object.entries(ze).flatMap(([ln,cn])=>cn?!1:tn(ln)).filter(Boolean),sn=[],an=[];return rn.forEach(ln=>{en.classList.contains(ln)&&(en.classList.remove(ln),an.push(ln))}),nn.forEach(ln=>{en.classList.contains(ln)||(en.classList.add(ln),sn.push(ln))}),()=>{an.forEach(ln=>en.classList.add(ln)),sn.forEach(ln=>en.classList.remove(ln))}}function setStyles$1(en,ze){return typeof ze=="object"&&ze!==null?setStylesFromObject(en,ze):setStylesFromString(en,ze)}function setStylesFromObject(en,ze){let tn={};return Object.entries(ze).forEach(([nn,rn])=>{tn[nn]=en.style[nn],nn.startsWith("--")||(nn=kebabCase(nn)),en.style.setProperty(nn,rn)}),setTimeout(()=>{en.style.length===0&&en.removeAttribute("style")}),()=>{setStyles$1(en,tn)}}function setStylesFromString(en,ze){let tn=en.getAttribute("style",ze);return en.setAttribute("style",ze),()=>{en.setAttribute("style",tn||"")}}function kebabCase(en){return en.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function once(en,ze=()=>{}){let tn=!1;return function(){tn?ze.apply(this,arguments):(tn=!0,en.apply(this,arguments))}}directive("transition",(en,{value:ze,modifiers:tn,expression:nn},{evaluate:rn})=>{typeof nn=="function"&&(nn=rn(nn)),nn!==!1&&(!nn||typeof nn=="boolean"?registerTransitionsFromHelper(en,tn,ze):registerTransitionsFromClassString(en,nn,ze))});function registerTransitionsFromClassString(en,ze,tn){registerTransitionObject(en,setClasses,""),{enter:rn=>{en._x_transition.enter.during=rn},"enter-start":rn=>{en._x_transition.enter.start=rn},"enter-end":rn=>{en._x_transition.enter.end=rn},leave:rn=>{en._x_transition.leave.during=rn},"leave-start":rn=>{en._x_transition.leave.start=rn},"leave-end":rn=>{en._x_transition.leave.end=rn}}[tn](ze)}function registerTransitionsFromHelper(en,ze,tn){registerTransitionObject(en,setStyles$1);let nn=!ze.includes("in")&&!ze.includes("out")&&!tn,rn=nn||ze.includes("in")||["enter"].includes(tn),sn=nn||ze.includes("out")||["leave"].includes(tn);ze.includes("in")&&!nn&&(ze=ze.filter((bn,Tn)=>Tn<ze.indexOf("out"))),ze.includes("out")&&!nn&&(ze=ze.filter((bn,Tn)=>Tn>ze.indexOf("out")));let an=!ze.includes("opacity")&&!ze.includes("scale"),ln=an||ze.includes("opacity"),cn=an||ze.includes("scale"),un=ln?0:1,dn=cn?modifierValue(ze,"scale",95)/100:1,fn=modifierValue(ze,"delay",0)/1e3,pn=modifierValue(ze,"origin","center"),hn="opacity, transform",gn=modifierValue(ze,"duration",150)/1e3,En=modifierValue(ze,"duration",75)/1e3,mn="cubic-bezier(0.4, 0.0, 0.2, 1)";rn&&(en._x_transition.enter.during={transformOrigin:pn,transitionDelay:`${fn}s`,transitionProperty:hn,transitionDuration:`${gn}s`,transitionTimingFunction:mn},en._x_transition.enter.start={opacity:un,transform:`scale(${dn})`},en._x_transition.enter.end={opacity:1,transform:"scale(1)"}),sn&&(en._x_transition.leave.during={transformOrigin:pn,transitionDelay:`${fn}s`,transitionProperty:hn,transitionDuration:`${En}s`,transitionTimingFunction:mn},en._x_transition.leave.start={opacity:1,transform:"scale(1)"},en._x_transition.leave.end={opacity:un,transform:`scale(${dn})`})}function registerTransitionObject(en,ze,tn={}){en._x_transition||(en._x_transition={enter:{during:tn,start:tn,end:tn},leave:{during:tn,start:tn,end:tn},in(nn=()=>{},rn=()=>{}){transition(en,ze,{during:this.enter.during,start:this.enter.start,end:this.enter.end},nn,rn)},out(nn=()=>{},rn=()=>{}){transition(en,ze,{during:this.leave.during,start:this.leave.start,end:this.leave.end},nn,rn)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(en,ze,tn,nn){const rn=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let sn=()=>rn(tn);if(ze){en._x_transition&&(en._x_transition.enter||en._x_transition.leave)?en._x_transition.enter&&(Object.entries(en._x_transition.enter.during).length||Object.entries(en._x_transition.enter.start).length||Object.entries(en._x_transition.enter.end).length)?en._x_transition.in(tn):sn():en._x_transition?en._x_transition.in(tn):sn();return}en._x_hidePromise=en._x_transition?new Promise((an,ln)=>{en._x_transition.out(()=>{},()=>an(nn)),en._x_transitioning&&en._x_transitioning.beforeCancel(()=>ln({isFromCancelledTransition:!0}))}):Promise.resolve(nn),queueMicrotask(()=>{let an=closestHide(en);an?(an._x_hideChildren||(an._x_hideChildren=[]),an._x_hideChildren.push(en)):rn(()=>{let ln=cn=>{let un=Promise.all([cn._x_hidePromise,...(cn._x_hideChildren||[]).map(ln)]).then(([dn])=>dn());return delete cn._x_hidePromise,delete cn._x_hideChildren,un};ln(en).catch(cn=>{if(!cn.isFromCancelledTransition)throw cn})})})};function closestHide(en){let ze=en.parentNode;if(ze)return ze._x_hidePromise?ze:closestHide(ze)}function transition(en,ze,{during:tn,start:nn,end:rn}={},sn=()=>{},an=()=>{}){if(en._x_transitioning&&en._x_transitioning.cancel(),Object.keys(tn).length===0&&Object.keys(nn).length===0&&Object.keys(rn).length===0){sn(),an();return}let ln,cn,un;performTransition(en,{start(){ln=ze(en,nn)},during(){cn=ze(en,tn)},before:sn,end(){ln(),un=ze(en,rn)},after:an,cleanup(){cn(),un()}})}function performTransition(en,ze){let tn,nn,rn,sn=once(()=>{mutateDom(()=>{tn=!0,nn||ze.before(),rn||(ze.end(),releaseNextTicks()),ze.after(),en.isConnected&&ze.cleanup(),delete en._x_transitioning})});en._x_transitioning={beforeCancels:[],beforeCancel(an){this.beforeCancels.push(an)},cancel:once(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();sn()}),finish:sn},mutateDom(()=>{ze.start(),ze.during()}),holdNextTicks(),requestAnimationFrame(()=>{if(tn)return;let an=Number(getComputedStyle(en).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,ln=Number(getComputedStyle(en).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;an===0&&(an=Number(getComputedStyle(en).animationDuration.replace("s",""))*1e3),mutateDom(()=>{ze.before()}),nn=!0,requestAnimationFrame(()=>{tn||(mutateDom(()=>{ze.end()}),releaseNextTicks(),setTimeout(en._x_transitioning.finish,an+ln),rn=!0)})})}function modifierValue(en,ze,tn){if(en.indexOf(ze)===-1)return tn;const nn=en[en.indexOf(ze)+1];if(!nn||ze==="scale"&&isNaN(nn))return tn;if(ze==="duration"||ze==="delay"){let rn=nn.match(/([0-9]+)ms/);if(rn)return rn[1]}return ze==="origin"&&["top","right","left","center","bottom"].includes(en[en.indexOf(ze)+2])?[nn,en[en.indexOf(ze)+2]].join(" "):nn}var isCloning=!1;function skipDuringClone(en,ze=()=>{}){return(...tn)=>isCloning?ze(...tn):en(...tn)}function onlyDuringClone(en){return(...ze)=>isCloning&&en(...ze)}var interceptors=[];function interceptClone(en){interceptors.push(en)}function cloneNode(en,ze){interceptors.forEach(tn=>tn(en,ze)),isCloning=!0,dontRegisterReactiveSideEffects(()=>{initTree(ze,(tn,nn)=>{nn(tn,()=>{})})}),isCloning=!1}var isCloningLegacy=!1;function clone(en,ze){ze._x_dataStack||(ze._x_dataStack=en._x_dataStack),isCloning=!0,isCloningLegacy=!0,dontRegisterReactiveSideEffects(()=>{cloneTree(ze)}),isCloning=!1,isCloningLegacy=!1}function cloneTree(en){let ze=!1;initTree(en,(nn,rn)=>{walk(nn,(sn,an)=>{if(ze&&isRoot(sn))return an();ze=!0,rn(sn,an)})})}function dontRegisterReactiveSideEffects(en){let ze=effect;overrideEffect((tn,nn)=>{let rn=ze(tn);return release(rn),()=>{}}),en(),overrideEffect(ze)}function bind$1(en,ze,tn,nn=[]){switch(en._x_bindings||(en._x_bindings=reactive({})),en._x_bindings[ze]=tn,ze=nn.includes("camel")?camelCase(ze):ze,ze){case"value":bindInputValue(en,tn);break;case"style":bindStyles(en,tn);break;case"class":bindClasses(en,tn);break;case"selected":case"checked":bindAttributeAndProperty(en,ze,tn);break;default:bindAttribute(en,ze,tn);break}}function bindInputValue(en,ze){if(en.type==="radio")en.attributes.value===void 0&&(en.value=ze),window.fromModel&&(typeof ze=="boolean"?en.checked=safeParseBoolean(en.value)===ze:en.checked=checkedAttrLooseCompare(en.value,ze));else if(en.type==="checkbox")Number.isInteger(ze)?en.value=ze:!Array.isArray(ze)&&typeof ze!="boolean"&&![null,void 0].includes(ze)?en.value=String(ze):Array.isArray(ze)?en.checked=ze.some(tn=>checkedAttrLooseCompare(tn,en.value)):en.checked=!!ze;else if(en.tagName==="SELECT")updateSelect(en,ze);else{if(en.value===ze)return;en.value=ze===void 0?"":ze}}function bindClasses(en,ze){en._x_undoAddedClasses&&en._x_undoAddedClasses(),en._x_undoAddedClasses=setClasses(en,ze)}function bindStyles(en,ze){en._x_undoAddedStyles&&en._x_undoAddedStyles(),en._x_undoAddedStyles=setStyles$1(en,ze)}function bindAttributeAndProperty(en,ze,tn){bindAttribute(en,ze,tn),setPropertyIfChanged(en,ze,tn)}function bindAttribute(en,ze,tn){[null,void 0,!1].includes(tn)&&attributeShouldntBePreservedIfFalsy(ze)?en.removeAttribute(ze):(isBooleanAttr(ze)&&(tn=ze),setIfChanged(en,ze,tn))}function setIfChanged(en,ze,tn){en.getAttribute(ze)!=tn&&en.setAttribute(ze,tn)}function setPropertyIfChanged(en,ze,tn){en[ze]!==tn&&(en[ze]=tn)}function updateSelect(en,ze){const tn=[].concat(ze).map(nn=>nn+"");Array.from(en.options).forEach(nn=>{nn.selected=tn.includes(nn.value)})}function camelCase(en){return en.toLowerCase().replace(/-(\w)/g,(ze,tn)=>tn.toUpperCase())}function checkedAttrLooseCompare(en,ze){return en==ze}function safeParseBoolean(en){return[1,"1","true","on","yes",!0].includes(en)?!0:[0,"0","false","off","no",!1].includes(en)?!1:en?!!en:null}function isBooleanAttr(en){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(en)}function attributeShouldntBePreservedIfFalsy(en){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(en)}function getBinding(en,ze,tn){return en._x_bindings&&en._x_bindings[ze]!==void 0?en._x_bindings[ze]:getAttributeBinding(en,ze,tn)}function extractProp(en,ze,tn,nn=!0){if(en._x_bindings&&en._x_bindings[ze]!==void 0)return en._x_bindings[ze];if(en._x_inlineBindings&&en._x_inlineBindings[ze]!==void 0){let rn=en._x_inlineBindings[ze];return rn.extract=nn,dontAutoEvaluateFunctions(()=>evaluate$1(en,rn.expression))}return getAttributeBinding(en,ze,tn)}function getAttributeBinding(en,ze,tn){let nn=en.getAttribute(ze);return nn===null?typeof tn=="function"?tn():tn:nn===""?!0:isBooleanAttr(ze)?!![ze,"true"].includes(nn):nn}function debounce(en,ze){var tn;return function(){var nn=this,rn=arguments,sn=function(){tn=null,en.apply(nn,rn)};clearTimeout(tn),tn=setTimeout(sn,ze)}}function throttle(en,ze){let tn;return function(){let nn=this,rn=arguments;tn||(en.apply(nn,rn),tn=!0,setTimeout(()=>tn=!1,ze))}}function entangle({get:en,set:ze},{get:tn,set:nn}){let rn=!0,sn,an=effect(()=>{let ln=en(),cn=tn();if(rn)nn(cloneIfObject(ln)),rn=!1;else{let un=JSON.stringify(ln),dn=JSON.stringify(cn);un!==sn?nn(cloneIfObject(ln)):un!==dn&&ze(cloneIfObject(cn))}sn=JSON.stringify(en()),JSON.stringify(tn())});return()=>{release(an)}}function cloneIfObject(en){return typeof en=="object"?JSON.parse(JSON.stringify(en)):en}function plugin(en){(Array.isArray(en)?en:[en]).forEach(tn=>tn(alpine_default))}var stores={},isReactive=!1;function store(en,ze){if(isReactive||(stores=reactive(stores),isReactive=!0),ze===void 0)return stores[en];stores[en]=ze,typeof ze=="object"&&ze!==null&&ze.hasOwnProperty("init")&&typeof ze.init=="function"&&stores[en].init(),initInterceptors2(stores[en])}function getStores(){return stores}var binds={};function bind2(en,ze){let tn=typeof ze!="function"?()=>ze:ze;return en instanceof Element?applyBindingsObject(en,tn()):(binds[en]=tn,()=>{})}function injectBindingProviders(en){return Object.entries(binds).forEach(([ze,tn])=>{Object.defineProperty(en,ze,{get(){return(...nn)=>tn(...nn)}})}),en}function applyBindingsObject(en,ze,tn){let nn=[];for(;nn.length;)nn.pop()();let rn=Object.entries(ze).map(([an,ln])=>({name:an,value:ln})),sn=attributesOnly(rn);return rn=rn.map(an=>sn.find(ln=>ln.name===an.name)?{name:`x-bind:${an.name}`,value:`"${an.value}"`}:an),directives(en,rn,tn).map(an=>{nn.push(an.runCleanups),an()}),()=>{for(;nn.length;)nn.pop()()}}var datas={};function data(en,ze){datas[en]=ze}function injectDataProviders(en,ze){return Object.entries(datas).forEach(([tn,nn])=>{Object.defineProperty(en,tn,{get(){return(...rn)=>nn.bind(ze)(...rn)},enumerable:!1})}),en}var Alpine={get reactive(){return reactive},get release(){return release},get effect(){return effect},get raw(){return raw},version:"3.13.7",flushAndStopDeferringMutations,dontAutoEvaluateFunctions,disableEffectScheduling,startObservingMutations,stopObservingMutations,setReactivityEngine,onAttributeRemoved,onAttributesAdded,closestDataStack,skipDuringClone,onlyDuringClone,addRootSelector,addInitSelector,interceptClone,addScopeToNode,deferMutations,mapAttributes,evaluateLater,interceptInit,setEvaluator,mergeProxies,extractProp,findClosest,onElRemoved,closestRoot,destroyTree,interceptor,transition,setStyles:setStyles$1,mutateDom,directive,entangle,throttle,debounce,evaluate:evaluate$1,initTree,nextTick,prefixed:prefix,prefix:setPrefix,plugin,magic,store,start,clone,cloneNode,bound:getBinding,$data:scope,watch,walk,data,bind:bind2},alpine_default=Alpine;function makeMap(en,ze){const tn=Object.create(null),nn=en.split(",");for(let rn=0;rn<nn.length;rn++)tn[nn[rn]]=!0;return ze?rn=>!!tn[rn.toLowerCase()]:rn=>!!tn[rn]}var EMPTY_OBJ=Object.freeze({}),hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn=(en,ze)=>hasOwnProperty.call(en,ze),isArray=Array.isArray,isMap=en=>toTypeString(en)==="[object Map]",isString=en=>typeof en=="string",isSymbol=en=>typeof en=="symbol",isObject=en=>en!==null&&typeof en=="object",objectToString=Object.prototype.toString,toTypeString=en=>objectToString.call(en),toRawType=en=>toTypeString(en).slice(8,-1),isIntegerKey=en=>isString(en)&&en!=="NaN"&&en[0]!=="-"&&""+parseInt(en,10)===en,cacheStringFunction=en=>{const ze=Object.create(null);return tn=>ze[tn]||(ze[tn]=en(tn))},capitalize=cacheStringFunction(en=>en.charAt(0).toUpperCase()+en.slice(1)),hasChanged=(en,ze)=>en!==ze&&(en===en||ze===ze),targetMap=new WeakMap,effectStack=[],activeEffect,ITERATE_KEY=Symbol("iterate"),MAP_KEY_ITERATE_KEY=Symbol("Map key iterate");function isEffect(en){return en&&en._isEffect===!0}function effect2(en,ze=EMPTY_OBJ){isEffect(en)&&(en=en.raw);const tn=createReactiveEffect(en,ze);return ze.lazy||tn(),tn}function stop(en){en.active&&(cleanup(en),en.options.onStop&&en.options.onStop(),en.active=!1)}var uid=0;function createReactiveEffect(en,ze){const tn=function(){if(!tn.active)return en();if(!effectStack.includes(tn)){cleanup(tn);try{return enableTracking(),effectStack.push(tn),activeEffect=tn,en()}finally{effectStack.pop(),resetTracking(),activeEffect=effectStack[effectStack.length-1]}}};return tn.id=uid++,tn.allowRecurse=!!ze.allowRecurse,tn._isEffect=!0,tn.active=!0,tn.raw=en,tn.deps=[],tn.options=ze,tn}function cleanup(en){const{deps:ze}=en;if(ze.length){for(let tn=0;tn<ze.length;tn++)ze[tn].delete(en);ze.length=0}}var shouldTrack=!0,trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function enableTracking(){trackStack.push(shouldTrack),shouldTrack=!0}function resetTracking(){const en=trackStack.pop();shouldTrack=en===void 0?!0:en}function track(en,ze,tn){if(!shouldTrack||activeEffect===void 0)return;let nn=targetMap.get(en);nn||targetMap.set(en,nn=new Map);let rn=nn.get(tn);rn||nn.set(tn,rn=new Set),rn.has(activeEffect)||(rn.add(activeEffect),activeEffect.deps.push(rn),activeEffect.options.onTrack&&activeEffect.options.onTrack({effect:activeEffect,target:en,type:ze,key:tn}))}function trigger(en,ze,tn,nn,rn,sn){const an=targetMap.get(en);if(!an)return;const ln=new Set,cn=dn=>{dn&&dn.forEach(fn=>{(fn!==activeEffect||fn.allowRecurse)&&ln.add(fn)})};if(ze==="clear")an.forEach(cn);else if(tn==="length"&&isArray(en))an.forEach((dn,fn)=>{(fn==="length"||fn>=nn)&&cn(dn)});else switch(tn!==void 0&&cn(an.get(tn)),ze){case"add":isArray(en)?isIntegerKey(tn)&&cn(an.get("length")):(cn(an.get(ITERATE_KEY)),isMap(en)&&cn(an.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(en)||(cn(an.get(ITERATE_KEY)),isMap(en)&&cn(an.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(en)&&cn(an.get(ITERATE_KEY));break}const un=dn=>{dn.options.onTrigger&&dn.options.onTrigger({effect:dn,target:en,key:tn,type:ze,newValue:nn,oldValue:rn,oldTarget:sn}),dn.options.scheduler?dn.options.scheduler(dn):dn()};ln.forEach(un)}var isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).map(en=>Symbol[en]).filter(isSymbol)),get2=createGetter(),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const en={};return["includes","indexOf","lastIndexOf"].forEach(ze=>{en[ze]=function(...tn){const nn=toRaw(this);for(let sn=0,an=this.length;sn<an;sn++)track(nn,"get",sn+"");const rn=nn[ze](...tn);return rn===-1||rn===!1?nn[ze](...tn.map(toRaw)):rn}}),["push","pop","shift","unshift","splice"].forEach(ze=>{en[ze]=function(...tn){pauseTracking();const nn=toRaw(this)[ze].apply(this,tn);return resetTracking(),nn}}),en}function createGetter(en=!1,ze=!1){return function(nn,rn,sn){if(rn==="__v_isReactive")return!en;if(rn==="__v_isReadonly")return en;if(rn==="__v_raw"&&sn===(en?ze?shallowReadonlyMap:readonlyMap:ze?shallowReactiveMap:reactiveMap).get(nn))return nn;const an=isArray(nn);if(!en&&an&&hasOwn(arrayInstrumentations,rn))return Reflect.get(arrayInstrumentations,rn,sn);const ln=Reflect.get(nn,rn,sn);return(isSymbol(rn)?builtInSymbols.has(rn):isNonTrackableKeys(rn))||(en||track(nn,"get",rn),ze)?ln:isRef(ln)?!an||!isIntegerKey(rn)?ln.value:ln:isObject(ln)?en?readonly(ln):reactive2(ln):ln}}var set2=createSetter();function createSetter(en=!1){return function(tn,nn,rn,sn){let an=tn[nn];if(!en&&(rn=toRaw(rn),an=toRaw(an),!isArray(tn)&&isRef(an)&&!isRef(rn)))return an.value=rn,!0;const ln=isArray(tn)&&isIntegerKey(nn)?Number(nn)<tn.length:hasOwn(tn,nn),cn=Reflect.set(tn,nn,rn,sn);return tn===toRaw(sn)&&(ln?hasChanged(rn,an)&&trigger(tn,"set",nn,rn,an):trigger(tn,"add",nn,rn)),cn}}function deleteProperty(en,ze){const tn=hasOwn(en,ze),nn=en[ze],rn=Reflect.deleteProperty(en,ze);return rn&&tn&&trigger(en,"delete",ze,void 0,nn),rn}function has(en,ze){const tn=Reflect.has(en,ze);return(!isSymbol(ze)||!builtInSymbols.has(ze))&&track(en,"has",ze),tn}function ownKeys(en){return track(en,"iterate",isArray(en)?"length":ITERATE_KEY),Reflect.ownKeys(en)}var mutableHandlers={get:get2,set:set2,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(en,ze){return console.warn(`Set operation on key "${String(ze)}" failed: target is readonly.`,en),!0},deleteProperty(en,ze){return console.warn(`Delete operation on key "${String(ze)}" failed: target is readonly.`,en),!0}},toReactive=en=>isObject(en)?reactive2(en):en,toReadonly=en=>isObject(en)?readonly(en):en,toShallow=en=>en,getProto=en=>Reflect.getPrototypeOf(en);function get$1(en,ze,tn=!1,nn=!1){en=en.__v_raw;const rn=toRaw(en),sn=toRaw(ze);ze!==sn&&!tn&&track(rn,"get",ze),!tn&&track(rn,"get",sn);const{has:an}=getProto(rn),ln=nn?toShallow:tn?toReadonly:toReactive;if(an.call(rn,ze))return ln(en.get(ze));if(an.call(rn,sn))return ln(en.get(sn));en!==rn&&en.get(ze)}function has$1(en,ze=!1){const tn=this.__v_raw,nn=toRaw(tn),rn=toRaw(en);return en!==rn&&!ze&&track(nn,"has",en),!ze&&track(nn,"has",rn),en===rn?tn.has(en):tn.has(en)||tn.has(rn)}function size(en,ze=!1){return en=en.__v_raw,!ze&&track(toRaw(en),"iterate",ITERATE_KEY),Reflect.get(en,"size",en)}function add(en){en=toRaw(en);const ze=toRaw(this);return getProto(ze).has.call(ze,en)||(ze.add(en),trigger(ze,"add",en,en)),this}function set$1(en,ze){ze=toRaw(ze);const tn=toRaw(this),{has:nn,get:rn}=getProto(tn);let sn=nn.call(tn,en);sn?checkIdentityKeys(tn,nn,en):(en=toRaw(en),sn=nn.call(tn,en));const an=rn.call(tn,en);return tn.set(en,ze),sn?hasChanged(ze,an)&&trigger(tn,"set",en,ze,an):trigger(tn,"add",en,ze),this}function deleteEntry(en){const ze=toRaw(this),{has:tn,get:nn}=getProto(ze);let rn=tn.call(ze,en);rn?checkIdentityKeys(ze,tn,en):(en=toRaw(en),rn=tn.call(ze,en));const sn=nn?nn.call(ze,en):void 0,an=ze.delete(en);return rn&&trigger(ze,"delete",en,void 0,sn),an}function clear(){const en=toRaw(this),ze=en.size!==0,tn=isMap(en)?new Map(en):new Set(en),nn=en.clear();return ze&&trigger(en,"clear",void 0,void 0,tn),nn}function createForEach(en,ze){return function(nn,rn){const sn=this,an=sn.__v_raw,ln=toRaw(an),cn=ze?toShallow:en?toReadonly:toReactive;return!en&&track(ln,"iterate",ITERATE_KEY),an.forEach((un,dn)=>nn.call(rn,cn(un),cn(dn),sn))}}function createIterableMethod(en,ze,tn){return function(...nn){const rn=this.__v_raw,sn=toRaw(rn),an=isMap(sn),ln=en==="entries"||en===Symbol.iterator&&an,cn=en==="keys"&&an,un=rn[en](...nn),dn=tn?toShallow:ze?toReadonly:toReactive;return!ze&&track(sn,"iterate",cn?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:fn,done:pn}=un.next();return pn?{value:fn,done:pn}:{value:ln?[dn(fn[0]),dn(fn[1])]:dn(fn),done:pn}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(en){return function(...ze){{const tn=ze[0]?`on key "${ze[0]}" `:"";console.warn(`${capitalize(en)} operation ${tn}failed: target is readonly.`,toRaw(this))}return en==="delete"?!1:this}}function createInstrumentations(){const en={get(sn){return get$1(this,sn)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},ze={get(sn){return get$1(this,sn,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},tn={get(sn){return get$1(this,sn,!0)},get size(){return size(this,!0)},has(sn){return has$1.call(this,sn,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},nn={get(sn){return get$1(this,sn,!0,!0)},get size(){return size(this,!0)},has(sn){return has$1.call(this,sn,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(sn=>{en[sn]=createIterableMethod(sn,!1,!1),tn[sn]=createIterableMethod(sn,!0,!1),ze[sn]=createIterableMethod(sn,!1,!0),nn[sn]=createIterableMethod(sn,!0,!0)}),[en,tn,ze,nn]}var[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(en,ze){const tn=ze?en?shallowReadonlyInstrumentations:shallowInstrumentations:en?readonlyInstrumentations:mutableInstrumentations;return(nn,rn,sn)=>rn==="__v_isReactive"?!en:rn==="__v_isReadonly"?en:rn==="__v_raw"?nn:Reflect.get(hasOwn(tn,rn)&&rn in nn?tn:nn,rn,sn)}var mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)};function checkIdentityKeys(en,ze,tn){const nn=toRaw(tn);if(nn!==tn&&ze.call(en,nn)){const rn=toRawType(en);console.warn(`Reactive ${rn} contains both the raw and reactive versions of the same object${rn==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(en){switch(en){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(en){return en.__v_skip||!Object.isExtensible(en)?0:targetTypeMap(toRawType(en))}function reactive2(en){return en&&en.__v_isReadonly?en:createReactiveObject(en,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function readonly(en){return createReactiveObject(en,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(en,ze,tn,nn,rn){if(!isObject(en))return console.warn(`value cannot be made reactive: ${String(en)}`),en;if(en.__v_raw&&!(ze&&en.__v_isReactive))return en;const sn=rn.get(en);if(sn)return sn;const an=getTargetType(en);if(an===0)return en;const ln=new Proxy(en,an===2?nn:tn);return rn.set(en,ln),ln}function toRaw(en){return en&&toRaw(en.__v_raw)||en}function isRef(en){return!!(en&&en.__v_isRef===!0)}magic("nextTick",()=>nextTick);magic("dispatch",en=>dispatch.bind(dispatch,en));magic("watch",(en,{evaluateLater:ze,cleanup:tn})=>(nn,rn)=>{let sn=ze(nn),ln=watch(()=>{let cn;return sn(un=>cn=un),cn},rn);tn(ln)});magic("store",getStores);magic("data",en=>scope(en));magic("root",en=>closestRoot(en));magic("refs",en=>(en._x_refs_proxy||(en._x_refs_proxy=mergeProxies(getArrayOfRefObject(en))),en._x_refs_proxy));function getArrayOfRefObject(en){let ze=[];return findClosest(en,tn=>{tn._x_refs&&ze.push(tn._x_refs)}),ze}var globalIdMemo={};function findAndIncrementId(en){return globalIdMemo[en]||(globalIdMemo[en]=0),++globalIdMemo[en]}function closestIdRoot(en,ze){return findClosest(en,tn=>{if(tn._x_ids&&tn._x_ids[ze])return!0})}function setIdRoot(en,ze){en._x_ids||(en._x_ids={}),en._x_ids[ze]||(en._x_ids[ze]=findAndIncrementId(ze))}magic("id",(en,{cleanup:ze})=>(tn,nn=null)=>{let rn=`${tn}${nn?`-${nn}`:""}`;return cacheIdByNameOnElement(en,rn,ze,()=>{let sn=closestIdRoot(en,tn),an=sn?sn._x_ids[tn]:findAndIncrementId(tn);return nn?`${tn}-${an}-${nn}`:`${tn}-${an}`})});interceptClone((en,ze)=>{en._x_id&&(ze._x_id=en._x_id)});function cacheIdByNameOnElement(en,ze,tn,nn){if(en._x_id||(en._x_id={}),en._x_id[ze])return en._x_id[ze];let rn=nn();return en._x_id[ze]=rn,tn(()=>{delete en._x_id[ze]}),rn}magic("el",en=>en);warnMissingPluginMagic("Focus","focus","focus");warnMissingPluginMagic("Persist","persist","persist");function warnMissingPluginMagic(en,ze,tn){magic(ze,nn=>warn$3(`You can't use [$${ze}] without first installing the "${en}" plugin here: https://alpinejs.dev/plugins/${tn}`,nn))}directive("modelable",(en,{expression:ze},{effect:tn,evaluateLater:nn,cleanup:rn})=>{let sn=nn(ze),an=()=>{let dn;return sn(fn=>dn=fn),dn},ln=nn(`${ze} = __placeholder`),cn=dn=>ln(()=>{},{scope:{__placeholder:dn}}),un=an();cn(un),queueMicrotask(()=>{if(!en._x_model)return;en._x_removeModelListeners.default();let dn=en._x_model.get,fn=en._x_model.set,pn=entangle({get(){return dn()},set(hn){fn(hn)}},{get(){return an()},set(hn){cn(hn)}});rn(pn)})});directive("teleport",(en,{modifiers:ze,expression:tn},{cleanup:nn})=>{en.tagName.toLowerCase()!=="template"&&warn$3("x-teleport can only be used on a <template> tag",en);let rn=getTarget(tn),sn=en.content.cloneNode(!0).firstElementChild;en._x_teleport=sn,sn._x_teleportBack=en,en.setAttribute("data-teleport-template",!0),sn.setAttribute("data-teleport-target",!0),en._x_forwardEvents&&en._x_forwardEvents.forEach(ln=>{sn.addEventListener(ln,cn=>{cn.stopPropagation(),en.dispatchEvent(new cn.constructor(cn.type,cn))})}),addScopeToNode(sn,{},en);let an=(ln,cn,un)=>{un.includes("prepend")?cn.parentNode.insertBefore(ln,cn):un.includes("append")?cn.parentNode.insertBefore(ln,cn.nextSibling):cn.appendChild(ln)};mutateDom(()=>{an(sn,rn,ze),initTree(sn),sn._x_ignore=!0}),en._x_teleportPutBack=()=>{let ln=getTarget(tn);mutateDom(()=>{an(en._x_teleport,ln,ze)})},nn(()=>sn.remove())});var teleportContainerDuringClone=document.createElement("div");function getTarget(en){let ze=skipDuringClone(()=>document.querySelector(en),()=>teleportContainerDuringClone)();return ze||warn$3(`Cannot find x-teleport element for selector: "${en}"`),ze}var handler=()=>{};handler.inline=(en,{modifiers:ze},{cleanup:tn})=>{ze.includes("self")?en._x_ignoreSelf=!0:en._x_ignore=!0,tn(()=>{ze.includes("self")?delete en._x_ignoreSelf:delete en._x_ignore})};directive("ignore",handler);directive("effect",skipDuringClone((en,{expression:ze},{effect:tn})=>{tn(evaluateLater(en,ze))}));function on(en,ze,tn,nn){let rn=en,sn=cn=>nn(cn),an={},ln=(cn,un)=>dn=>un(cn,dn);if(tn.includes("dot")&&(ze=dotSyntax(ze)),tn.includes("camel")&&(ze=camelCase2(ze)),tn.includes("passive")&&(an.passive=!0),tn.includes("capture")&&(an.capture=!0),tn.includes("window")&&(rn=window),tn.includes("document")&&(rn=document),tn.includes("debounce")){let cn=tn[tn.indexOf("debounce")+1]||"invalid-wait",un=isNumeric(cn.split("ms")[0])?Number(cn.split("ms")[0]):250;sn=debounce(sn,un)}if(tn.includes("throttle")){let cn=tn[tn.indexOf("throttle")+1]||"invalid-wait",un=isNumeric(cn.split("ms")[0])?Number(cn.split("ms")[0]):250;sn=throttle(sn,un)}return tn.includes("prevent")&&(sn=ln(sn,(cn,un)=>{un.preventDefault(),cn(un)})),tn.includes("stop")&&(sn=ln(sn,(cn,un)=>{un.stopPropagation(),cn(un)})),tn.includes("self")&&(sn=ln(sn,(cn,un)=>{un.target===en&&cn(un)})),(tn.includes("away")||tn.includes("outside"))&&(rn=document,sn=ln(sn,(cn,un)=>{en.contains(un.target)||un.target.isConnected!==!1&&(en.offsetWidth<1&&en.offsetHeight<1||en._x_isShown!==!1&&cn(un))})),tn.includes("once")&&(sn=ln(sn,(cn,un)=>{cn(un),rn.removeEventListener(ze,sn,an)})),sn=ln(sn,(cn,un)=>{isKeyEvent(ze)&&isListeningForASpecificKeyThatHasntBeenPressed(un,tn)||cn(un)}),rn.addEventListener(ze,sn,an),()=>{rn.removeEventListener(ze,sn,an)}}function dotSyntax(en){return en.replace(/-/g,".")}function camelCase2(en){return en.toLowerCase().replace(/-(\w)/g,(ze,tn)=>tn.toUpperCase())}function isNumeric(en){return!Array.isArray(en)&&!isNaN(en)}function kebabCase2(en){return[" ","_"].includes(en)?en:en.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function isKeyEvent(en){return["keydown","keyup"].includes(en)}function isListeningForASpecificKeyThatHasntBeenPressed(en,ze){let tn=ze.filter(sn=>!["window","document","prevent","stop","once","capture"].includes(sn));if(tn.includes("debounce")){let sn=tn.indexOf("debounce");tn.splice(sn,isNumeric((tn[sn+1]||"invalid-wait").split("ms")[0])?2:1)}if(tn.includes("throttle")){let sn=tn.indexOf("throttle");tn.splice(sn,isNumeric((tn[sn+1]||"invalid-wait").split("ms")[0])?2:1)}if(tn.length===0||tn.length===1&&keyToModifiers(en.key).includes(tn[0]))return!1;const rn=["ctrl","shift","alt","meta","cmd","super"].filter(sn=>tn.includes(sn));return tn=tn.filter(sn=>!rn.includes(sn)),!(rn.length>0&&rn.filter(an=>((an==="cmd"||an==="super")&&(an="meta"),en[`${an}Key`])).length===rn.length&&keyToModifiers(en.key).includes(tn[0]))}function keyToModifiers(en){if(!en)return[];en=kebabCase2(en);let ze={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"=",minus:"-",underscore:"_"};return ze[en]=en,Object.keys(ze).map(tn=>{if(ze[tn]===en)return tn}).filter(tn=>tn)}directive("model",(en,{modifiers:ze,expression:tn},{effect:nn,cleanup:rn})=>{let sn=en;ze.includes("parent")&&(sn=en.parentNode);let an=evaluateLater(sn,tn),ln;typeof tn=="string"?ln=evaluateLater(sn,`${tn} = __placeholder`):typeof tn=="function"&&typeof tn()=="string"?ln=evaluateLater(sn,`${tn()} = __placeholder`):ln=()=>{};let cn=()=>{let pn;return an(hn=>pn=hn),isGetterSetter(pn)?pn.get():pn},un=pn=>{let hn;an(gn=>hn=gn),isGetterSetter(hn)?hn.set(pn):ln(()=>{},{scope:{__placeholder:pn}})};typeof tn=="string"&&en.type==="radio"&&mutateDom(()=>{en.hasAttribute("name")||en.setAttribute("name",tn)});var dn=en.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(en.type)||ze.includes("lazy")?"change":"input";let fn=isCloning?()=>{}:on(en,dn,ze,pn=>{un(getInputValue(en,ze,pn,cn()))});if(ze.includes("fill")&&([void 0,null,""].includes(cn())||en.type==="checkbox"&&Array.isArray(cn()))&&en.dispatchEvent(new Event(dn,{})),en._x_removeModelListeners||(en._x_removeModelListeners={}),en._x_removeModelListeners.default=fn,rn(()=>en._x_removeModelListeners.default()),en.form){let pn=on(en.form,"reset",[],hn=>{nextTick(()=>en._x_model&&en._x_model.set(en.value))});rn(()=>pn())}en._x_model={get(){return cn()},set(pn){un(pn)}},en._x_forceModelUpdate=pn=>{pn===void 0&&typeof tn=="string"&&tn.match(/\./)&&(pn=""),window.fromModel=!0,mutateDom(()=>bind$1(en,"value",pn)),delete window.fromModel},nn(()=>{let pn=cn();ze.includes("unintrusive")&&document.activeElement.isSameNode(en)||en._x_forceModelUpdate(pn)})});function getInputValue(en,ze,tn,nn){return mutateDom(()=>{if(tn instanceof CustomEvent&&tn.detail!==void 0)return tn.detail!==null&&tn.detail!==void 0?tn.detail:tn.target.value;if(en.type==="checkbox")if(Array.isArray(nn)){let rn=null;return ze.includes("number")?rn=safeParseNumber(tn.target.value):ze.includes("boolean")?rn=safeParseBoolean(tn.target.value):rn=tn.target.value,tn.target.checked?nn.concat([rn]):nn.filter(sn=>!checkedAttrLooseCompare2(sn,rn))}else return tn.target.checked;else return en.tagName.toLowerCase()==="select"&&en.multiple?ze.includes("number")?Array.from(tn.target.selectedOptions).map(rn=>{let sn=rn.value||rn.text;return safeParseNumber(sn)}):ze.includes("boolean")?Array.from(tn.target.selectedOptions).map(rn=>{let sn=rn.value||rn.text;return safeParseBoolean(sn)}):Array.from(tn.target.selectedOptions).map(rn=>rn.value||rn.text):ze.includes("number")?safeParseNumber(tn.target.value):ze.includes("boolean")?safeParseBoolean(tn.target.value):ze.includes("trim")?tn.target.value.trim():tn.target.value})}function safeParseNumber(en){let ze=en?parseFloat(en):null;return isNumeric2(ze)?ze:en}function checkedAttrLooseCompare2(en,ze){return en==ze}function isNumeric2(en){return!Array.isArray(en)&&!isNaN(en)}function isGetterSetter(en){return en!==null&&typeof en=="object"&&typeof en.get=="function"&&typeof en.set=="function"}directive("cloak",en=>queueMicrotask(()=>mutateDom(()=>en.removeAttribute(prefix("cloak")))));addInitSelector(()=>`[${prefix("init")}]`);directive("init",skipDuringClone((en,{expression:ze},{evaluate:tn})=>typeof ze=="string"?!!ze.trim()&&tn(ze,{},!1):tn(ze,{},!1)));directive("text",(en,{expression:ze},{effect:tn,evaluateLater:nn})=>{let rn=nn(ze);tn(()=>{rn(sn=>{mutateDom(()=>{en.textContent=sn})})})});directive("html",(en,{expression:ze},{effect:tn,evaluateLater:nn})=>{let rn=nn(ze);tn(()=>{rn(sn=>{mutateDom(()=>{en.innerHTML=sn,en._x_ignoreSelf=!0,initTree(en),delete en._x_ignoreSelf})})})});mapAttributes(startingWith(":",into(prefix("bind:"))));var handler2=(en,{value:ze,modifiers:tn,expression:nn,original:rn},{effect:sn})=>{if(!ze){let ln={};injectBindingProviders(ln),evaluateLater(en,nn)(un=>{applyBindingsObject(en,un,rn)},{scope:ln});return}if(ze==="key")return storeKeyForXFor(en,nn);if(en._x_inlineBindings&&en._x_inlineBindings[ze]&&en._x_inlineBindings[ze].extract)return;let an=evaluateLater(en,nn);sn(()=>an(ln=>{ln===void 0&&typeof nn=="string"&&nn.match(/\./)&&(ln=""),mutateDom(()=>bind$1(en,ze,ln,tn))}))};handler2.inline=(en,{value:ze,modifiers:tn,expression:nn})=>{ze&&(en._x_inlineBindings||(en._x_inlineBindings={}),en._x_inlineBindings[ze]={expression:nn,extract:!1})};directive("bind",handler2);function storeKeyForXFor(en,ze){en._x_keyExpression=ze}addRootSelector(()=>`[${prefix("data")}]`);directive("data",(en,{expression:ze},{cleanup:tn})=>{if(shouldSkipRegisteringDataDuringClone(en))return;ze=ze===""?"{}":ze;let nn={};injectMagics(nn,en);let rn={};injectDataProviders(rn,nn);let sn=evaluate$1(en,ze,{scope:rn});(sn===void 0||sn===!0)&&(sn={}),injectMagics(sn,en);let an=reactive(sn);initInterceptors2(an);let ln=addScopeToNode(en,an);an.init&&evaluate$1(en,an.init),tn(()=>{an.destroy&&evaluate$1(en,an.destroy),ln()})});interceptClone((en,ze)=>{en._x_dataStack&&(ze._x_dataStack=en._x_dataStack,ze.setAttribute("data-has-alpine-state",!0))});function shouldSkipRegisteringDataDuringClone(en){return isCloning?isCloningLegacy?!0:en.hasAttribute("data-has-alpine-state"):!1}directive("show",(en,{modifiers:ze,expression:tn},{effect:nn})=>{let rn=evaluateLater(en,tn);en._x_doHide||(en._x_doHide=()=>{mutateDom(()=>{en.style.setProperty("display","none",ze.includes("important")?"important":void 0)})}),en._x_doShow||(en._x_doShow=()=>{mutateDom(()=>{en.style.length===1&&en.style.display==="none"?en.removeAttribute("style"):en.style.removeProperty("display")})});let sn=()=>{en._x_doHide(),en._x_isShown=!1},an=()=>{en._x_doShow(),en._x_isShown=!0},ln=()=>setTimeout(an),cn=once(fn=>fn?an():sn(),fn=>{typeof en._x_toggleAndCascadeWithTransitions=="function"?en._x_toggleAndCascadeWithTransitions(en,fn,an,sn):fn?ln():sn()}),un,dn=!0;nn(()=>rn(fn=>{!dn&&fn===un||(ze.includes("immediate")&&(fn?ln():sn()),cn(fn),un=fn,dn=!1)}))});directive("for",(en,{expression:ze},{effect:tn,cleanup:nn})=>{let rn=parseForExpression(ze),sn=evaluateLater(en,rn.items),an=evaluateLater(en,en._x_keyExpression||"index");en._x_prevKeys=[],en._x_lookup={},tn(()=>loop(en,rn,sn,an)),nn(()=>{Object.values(en._x_lookup).forEach(ln=>ln.remove()),delete en._x_prevKeys,delete en._x_lookup})});function loop(en,ze,tn,nn){let rn=an=>typeof an=="object"&&!Array.isArray(an),sn=en;tn(an=>{isNumeric3(an)&&an>=0&&(an=Array.from(Array(an).keys(),mn=>mn+1)),an===void 0&&(an=[]);let ln=en._x_lookup,cn=en._x_prevKeys,un=[],dn=[];if(rn(an))an=Object.entries(an).map(([mn,bn])=>{let Tn=getIterationScopeVariables(ze,bn,mn,an);nn(_n=>{dn.includes(_n)&&warn$3("Duplicate key on x-for",en),dn.push(_n)},{scope:{index:mn,...Tn}}),un.push(Tn)});else for(let mn=0;mn<an.length;mn++){let bn=getIterationScopeVariables(ze,an[mn],mn,an);nn(Tn=>{dn.includes(Tn)&&warn$3("Duplicate key on x-for",en),dn.push(Tn)},{scope:{index:mn,...bn}}),un.push(bn)}let fn=[],pn=[],hn=[],gn=[];for(let mn=0;mn<cn.length;mn++){let bn=cn[mn];dn.indexOf(bn)===-1&&hn.push(bn)}cn=cn.filter(mn=>!hn.includes(mn));let En="template";for(let mn=0;mn<dn.length;mn++){let bn=dn[mn],Tn=cn.indexOf(bn);if(Tn===-1)cn.splice(mn,0,bn),fn.push([En,mn]);else if(Tn!==mn){let _n=cn.splice(mn,1)[0],An=cn.splice(Tn-1,1)[0];cn.splice(mn,0,An),cn.splice(Tn,0,_n),pn.push([_n,An])}else gn.push(bn);En=bn}for(let mn=0;mn<hn.length;mn++){let bn=hn[mn];ln[bn]._x_effects&&ln[bn]._x_effects.forEach(dequeueJob),ln[bn].remove(),ln[bn]=null,delete ln[bn]}for(let mn=0;mn<pn.length;mn++){let[bn,Tn]=pn[mn],_n=ln[bn],An=ln[Tn],Rn=document.createElement("div");mutateDom(()=>{An||warn$3('x-for ":key" is undefined or invalid',sn,Tn,ln),An.after(Rn),_n.after(An),An._x_currentIfEl&&An.after(An._x_currentIfEl),Rn.before(_n),_n._x_currentIfEl&&_n.after(_n._x_currentIfEl),Rn.remove()}),An._x_refreshXForScope(un[dn.indexOf(Tn)])}for(let mn=0;mn<fn.length;mn++){let[bn,Tn]=fn[mn],_n=bn==="template"?sn:ln[bn];_n._x_currentIfEl&&(_n=_n._x_currentIfEl);let An=un[Tn],Rn=dn[Tn],Cn=document.importNode(sn.content,!0).firstElementChild,wn=reactive(An);addScopeToNode(Cn,wn,sn),Cn._x_refreshXForScope=Fn=>{Object.entries(Fn).forEach(([xn,zn])=>{wn[xn]=zn})},mutateDom(()=>{_n.after(Cn),skipDuringClone(()=>initTree(Cn))()}),typeof Rn=="object"&&warn$3("x-for key cannot be an object, it must be a string or an integer",sn),ln[Rn]=Cn}for(let mn=0;mn<gn.length;mn++)ln[gn[mn]]._x_refreshXForScope(un[dn.indexOf(gn[mn])]);sn._x_prevKeys=dn})}function parseForExpression(en){let ze=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,tn=/^\s*\(|\)\s*$/g,nn=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,rn=en.match(nn);if(!rn)return;let sn={};sn.items=rn[2].trim();let an=rn[1].replace(tn,"").trim(),ln=an.match(ze);return ln?(sn.item=an.replace(ze,"").trim(),sn.index=ln[1].trim(),ln[2]&&(sn.collection=ln[2].trim())):sn.item=an,sn}function getIterationScopeVariables(en,ze,tn,nn){let rn={};return/^\[.*\]$/.test(en.item)&&Array.isArray(ze)?en.item.replace("[","").replace("]","").split(",").map(an=>an.trim()).forEach((an,ln)=>{rn[an]=ze[ln]}):/^\{.*\}$/.test(en.item)&&!Array.isArray(ze)&&typeof ze=="object"?en.item.replace("{","").replace("}","").split(",").map(an=>an.trim()).forEach(an=>{rn[an]=ze[an]}):rn[en.item]=ze,en.index&&(rn[en.index]=tn),en.collection&&(rn[en.collection]=nn),rn}function isNumeric3(en){return!Array.isArray(en)&&!isNaN(en)}function handler3(){}handler3.inline=(en,{expression:ze},{cleanup:tn})=>{let nn=closestRoot(en);nn._x_refs||(nn._x_refs={}),nn._x_refs[ze]=en,tn(()=>delete nn._x_refs[ze])};directive("ref",handler3);directive("if",(en,{expression:ze},{effect:tn,cleanup:nn})=>{en.tagName.toLowerCase()!=="template"&&warn$3("x-if can only be used on a <template> tag",en);let rn=evaluateLater(en,ze),sn=()=>{if(en._x_currentIfEl)return en._x_currentIfEl;let ln=en.content.cloneNode(!0).firstElementChild;return addScopeToNode(ln,{},en),mutateDom(()=>{en.after(ln),skipDuringClone(()=>initTree(ln))()}),en._x_currentIfEl=ln,en._x_undoIf=()=>{walk(ln,cn=>{cn._x_effects&&cn._x_effects.forEach(dequeueJob)}),ln.remove(),delete en._x_currentIfEl},ln},an=()=>{en._x_undoIf&&(en._x_undoIf(),delete en._x_undoIf)};tn(()=>rn(ln=>{ln?sn():an()})),nn(()=>en._x_undoIf&&en._x_undoIf())});directive("id",(en,{expression:ze},{evaluate:tn})=>{tn(ze).forEach(rn=>setIdRoot(en,rn))});interceptClone((en,ze)=>{en._x_ids&&(ze._x_ids=en._x_ids)});mapAttributes(startingWith("@",into(prefix("on:"))));directive("on",skipDuringClone((en,{value:ze,modifiers:tn,expression:nn},{cleanup:rn})=>{let sn=nn?evaluateLater(en,nn):()=>{};en.tagName.toLowerCase()==="template"&&(en._x_forwardEvents||(en._x_forwardEvents=[]),en._x_forwardEvents.includes(ze)||en._x_forwardEvents.push(ze));let an=on(en,ze,tn,ln=>{sn(()=>{},{scope:{$event:ln},params:[ln]})});rn(()=>an())}));warnMissingPluginDirective("Collapse","collapse","collapse");warnMissingPluginDirective("Intersect","intersect","intersect");warnMissingPluginDirective("Focus","trap","focus");warnMissingPluginDirective("Mask","mask","mask");function warnMissingPluginDirective(en,ze,tn){directive(ze,nn=>warn$3(`You can't use [x-${ze}] without first installing the "${en}" plugin here: https://alpinejs.dev/plugins/${tn}`,nn))}alpine_default.setEvaluator(normalEvaluator);alpine_default.setReactivityEngine({reactive:reactive2,effect:effect2,release:stop,raw:toRaw});var src_default$1=alpine_default,module_default$1=src_default$1,min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=en=>({x:en,y:en}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(en,ze,tn){return max(en,min(ze,tn))}function evaluate(en,ze){return typeof en=="function"?en(ze):en}function getSide$1(en){return en.split("-")[0]}function getAlignment(en){return en.split("-")[1]}function getOppositeAxis(en){return en==="x"?"y":"x"}function getAxisLength(en){return en==="y"?"height":"width"}function getSideAxis(en){return["top","bottom"].includes(getSide$1(en))?"y":"x"}function getAlignmentAxis(en){return getOppositeAxis(getSideAxis(en))}function getAlignmentSides(en,ze,tn){tn===void 0&&(tn=!1);const nn=getAlignment(en),rn=getAlignmentAxis(en),sn=getAxisLength(rn);let an=rn==="x"?nn===(tn?"end":"start")?"right":"left":nn==="start"?"bottom":"top";return ze.reference[sn]>ze.floating[sn]&&(an=getOppositePlacement(an)),[an,getOppositePlacement(an)]}function getExpandedPlacements(en){const ze=getOppositePlacement(en);return[getOppositeAlignmentPlacement(en),ze,getOppositeAlignmentPlacement(ze)]}function getOppositeAlignmentPlacement(en){return en.replace(/start|end/g,ze=>oppositeAlignmentMap[ze])}function getSideList(en,ze,tn){const nn=["left","right"],rn=["right","left"],sn=["top","bottom"],an=["bottom","top"];switch(en){case"top":case"bottom":return tn?ze?rn:nn:ze?nn:rn;case"left":case"right":return ze?sn:an;default:return[]}}function getOppositeAxisPlacements(en,ze,tn,nn){const rn=getAlignment(en);let sn=getSideList(getSide$1(en),tn==="start",nn);return rn&&(sn=sn.map(an=>an+"-"+rn),ze&&(sn=sn.concat(sn.map(getOppositeAlignmentPlacement)))),sn}function getOppositePlacement(en){return en.replace(/left|right|bottom|top/g,ze=>oppositeSideMap[ze])}function expandPaddingObject(en){return{top:0,right:0,bottom:0,left:0,...en}}function getPaddingObject(en){return typeof en!="number"?expandPaddingObject(en):{top:en,right:en,bottom:en,left:en}}function rectToClientRect(en){return{...en,top:en.y,left:en.x,right:en.x+en.width,bottom:en.y+en.height}}function computeCoordsFromPlacement(en,ze,tn){let{reference:nn,floating:rn}=en;const sn=getSideAxis(ze),an=getAlignmentAxis(ze),ln=getAxisLength(an),cn=getSide$1(ze),un=sn==="y",dn=nn.x+nn.width/2-rn.width/2,fn=nn.y+nn.height/2-rn.height/2,pn=nn[ln]/2-rn[ln]/2;let hn;switch(cn){case"top":hn={x:dn,y:nn.y-rn.height};break;case"bottom":hn={x:dn,y:nn.y+nn.height};break;case"right":hn={x:nn.x+nn.width,y:fn};break;case"left":hn={x:nn.x-rn.width,y:fn};break;default:hn={x:nn.x,y:nn.y}}switch(getAlignment(ze)){case"start":hn[an]-=pn*(tn&&un?-1:1);break;case"end":hn[an]+=pn*(tn&&un?-1:1);break}return hn}var computePosition=async(en,ze,tn)=>{const{placement:nn="bottom",strategy:rn="absolute",middleware:sn=[],platform:an}=tn,ln=sn.filter(Boolean),cn=await(an.isRTL==null?void 0:an.isRTL(ze));let un=await an.getElementRects({reference:en,floating:ze,strategy:rn}),{x:dn,y:fn}=computeCoordsFromPlacement(un,nn,cn),pn=nn,hn={},gn=0;for(let En=0;En<ln.length;En++){const{name:mn,fn:bn}=ln[En],{x:Tn,y:_n,data:An,reset:Rn}=await bn({x:dn,y:fn,initialPlacement:nn,placement:pn,strategy:rn,middlewareData:hn,rects:un,platform:an,elements:{reference:en,floating:ze}});if(dn=Tn??dn,fn=_n??fn,hn={...hn,[mn]:{...hn[mn],...An}},Rn&&gn<=50){gn++,typeof Rn=="object"&&(Rn.placement&&(pn=Rn.placement),Rn.rects&&(un=Rn.rects===!0?await an.getElementRects({reference:en,floating:ze,strategy:rn}):Rn.rects),{x:dn,y:fn}=computeCoordsFromPlacement(un,pn,cn)),En=-1;continue}}return{x:dn,y:fn,placement:pn,strategy:rn,middlewareData:hn}};async function detectOverflow(en,ze){var tn;ze===void 0&&(ze={});const{x:nn,y:rn,platform:sn,rects:an,elements:ln,strategy:cn}=en,{boundary:un="clippingAncestors",rootBoundary:dn="viewport",elementContext:fn="floating",altBoundary:pn=!1,padding:hn=0}=evaluate(ze,en),gn=getPaddingObject(hn),mn=ln[pn?fn==="floating"?"reference":"floating":fn],bn=rectToClientRect(await sn.getClippingRect({element:(tn=await(sn.isElement==null?void 0:sn.isElement(mn)))==null||tn?mn:mn.contextElement||await(sn.getDocumentElement==null?void 0:sn.getDocumentElement(ln.floating)),boundary:un,rootBoundary:dn,strategy:cn})),Tn=fn==="floating"?{...an.floating,x:nn,y:rn}:an.reference,_n=await(sn.getOffsetParent==null?void 0:sn.getOffsetParent(ln.floating)),An=await(sn.isElement==null?void 0:sn.isElement(_n))?await(sn.getScale==null?void 0:sn.getScale(_n))||{x:1,y:1}:{x:1,y:1},Rn=rectToClientRect(sn.convertOffsetParentRelativeRectToViewportRelativeRect?await sn.convertOffsetParentRelativeRectToViewportRelativeRect({rect:Tn,offsetParent:_n,strategy:cn}):Tn);return{top:(bn.top-Rn.top+gn.top)/An.y,bottom:(Rn.bottom-bn.bottom+gn.bottom)/An.y,left:(bn.left-Rn.left+gn.left)/An.x,right:(Rn.right-bn.right+gn.right)/An.x}}var flip=function(en){return en===void 0&&(en={}),{name:"flip",options:en,async fn(ze){var tn,nn;const{placement:rn,middlewareData:sn,rects:an,initialPlacement:ln,platform:cn,elements:un}=ze,{mainAxis:dn=!0,crossAxis:fn=!0,fallbackPlacements:pn,fallbackStrategy:hn="bestFit",fallbackAxisSideDirection:gn="none",flipAlignment:En=!0,...mn}=evaluate(en,ze);if((tn=sn.arrow)!=null&&tn.alignmentOffset)return{};const bn=getSide$1(rn),Tn=getSide$1(ln)===ln,_n=await(cn.isRTL==null?void 0:cn.isRTL(un.floating)),An=pn||(Tn||!En?[getOppositePlacement(ln)]:getExpandedPlacements(ln));!pn&&gn!=="none"&&An.push(...getOppositeAxisPlacements(ln,En,gn,_n));const Rn=[ln,...An],Cn=await detectOverflow(ze,mn),wn=[];let Fn=((nn=sn.flip)==null?void 0:nn.overflows)||[];if(dn&&wn.push(Cn[bn]),fn){const Yn=getAlignmentSides(rn,an,_n);wn.push(Cn[Yn[0]],Cn[Yn[1]])}if(Fn=[...Fn,{placement:rn,overflows:wn}],!wn.every(Yn=>Yn<=0)){var xn,zn;const Yn=(((xn=sn.flip)==null?void 0:xn.index)||0)+1,Xn=Rn[Yn];if(Xn)return{data:{index:Yn,overflows:Fn},reset:{placement:Xn}};let Kn=(zn=Fn.filter(Un=>Un.overflows[0]<=0).sort((Un,On)=>Un.overflows[1]-On.overflows[1])[0])==null?void 0:zn.placement;if(!Kn)switch(hn){case"bestFit":{var Hn;const Un=(Hn=Fn.map(On=>[On.placement,On.overflows.filter(Sn=>Sn>0).reduce((Sn,Nn)=>Sn+Nn,0)]).sort((On,Sn)=>On[1]-Sn[1])[0])==null?void 0:Hn[0];Un&&(Kn=Un);break}case"initialPlacement":Kn=ln;break}if(rn!==Kn)return{reset:{placement:Kn}}}return{}}}};async function convertValueToCoords(en,ze){const{placement:tn,platform:nn,elements:rn}=en,sn=await(nn.isRTL==null?void 0:nn.isRTL(rn.floating)),an=getSide$1(tn),ln=getAlignment(tn),cn=getSideAxis(tn)==="y",un=["left","top"].includes(an)?-1:1,dn=sn&&cn?-1:1,fn=evaluate(ze,en);let{mainAxis:pn,crossAxis:hn,alignmentAxis:gn}=typeof fn=="number"?{mainAxis:fn,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...fn};return ln&&typeof gn=="number"&&(hn=ln==="end"?gn*-1:gn),cn?{x:hn*dn,y:pn*un}:{x:pn*un,y:hn*dn}}var offset=function(en){return en===void 0&&(en=0),{name:"offset",options:en,async fn(ze){const{x:tn,y:nn}=ze,rn=await convertValueToCoords(ze,en);return{x:tn+rn.x,y:nn+rn.y,data:rn}}}},shift$1=function(en){return en===void 0&&(en={}),{name:"shift",options:en,async fn(ze){const{x:tn,y:nn,placement:rn}=ze,{mainAxis:sn=!0,crossAxis:an=!1,limiter:ln={fn:mn=>{let{x:bn,y:Tn}=mn;return{x:bn,y:Tn}}},...cn}=evaluate(en,ze),un={x:tn,y:nn},dn=await detectOverflow(ze,cn),fn=getSideAxis(getSide$1(rn)),pn=getOppositeAxis(fn);let hn=un[pn],gn=un[fn];if(sn){const mn=pn==="y"?"top":"left",bn=pn==="y"?"bottom":"right",Tn=hn+dn[mn],_n=hn-dn[bn];hn=clamp$1(Tn,hn,_n)}if(an){const mn=fn==="y"?"top":"left",bn=fn==="y"?"bottom":"right",Tn=gn+dn[mn],_n=gn-dn[bn];gn=clamp$1(Tn,gn,_n)}const En=ln.fn({...ze,[pn]:hn,[fn]:gn});return{...En,data:{x:En.x-tn,y:En.y-nn}}}}};function getNodeName(en){return isNode(en)?(en.nodeName||"").toLowerCase():"#document"}function getWindow(en){var ze;return(en==null||(ze=en.ownerDocument)==null?void 0:ze.defaultView)||window}function getDocumentElement(en){var ze;return(ze=(isNode(en)?en.ownerDocument:en.document)||window.document)==null?void 0:ze.documentElement}function isNode(en){return en instanceof Node||en instanceof getWindow(en).Node}function isElement(en){return en instanceof Element||en instanceof getWindow(en).Element}function isHTMLElement(en){return en instanceof HTMLElement||en instanceof getWindow(en).HTMLElement}function isShadowRoot(en){return typeof ShadowRoot>"u"?!1:en instanceof ShadowRoot||en instanceof getWindow(en).ShadowRoot}function isOverflowElement(en){const{overflow:ze,overflowX:tn,overflowY:nn,display:rn}=getComputedStyle$1(en);return/auto|scroll|overlay|hidden|clip/.test(ze+nn+tn)&&!["inline","contents"].includes(rn)}function isTableElement(en){return["table","td","th"].includes(getNodeName(en))}function isContainingBlock(en){const ze=isWebKit(),tn=getComputedStyle$1(en);return tn.transform!=="none"||tn.perspective!=="none"||(tn.containerType?tn.containerType!=="normal":!1)||!ze&&(tn.backdropFilter?tn.backdropFilter!=="none":!1)||!ze&&(tn.filter?tn.filter!=="none":!1)||["transform","perspective","filter"].some(nn=>(tn.willChange||"").includes(nn))||["paint","layout","strict","content"].some(nn=>(tn.contain||"").includes(nn))}function getContainingBlock(en){let ze=getParentNode(en);for(;isHTMLElement(ze)&&!isLastTraversableNode(ze);){if(isContainingBlock(ze))return ze;ze=getParentNode(ze)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(en){return["html","body","#document"].includes(getNodeName(en))}function getComputedStyle$1(en){return getWindow(en).getComputedStyle(en)}function getNodeScroll(en){return isElement(en)?{scrollLeft:en.scrollLeft,scrollTop:en.scrollTop}:{scrollLeft:en.pageXOffset,scrollTop:en.pageYOffset}}function getParentNode(en){if(getNodeName(en)==="html")return en;const ze=en.assignedSlot||en.parentNode||isShadowRoot(en)&&en.host||getDocumentElement(en);return isShadowRoot(ze)?ze.host:ze}function getNearestOverflowAncestor(en){const ze=getParentNode(en);return isLastTraversableNode(ze)?en.ownerDocument?en.ownerDocument.body:en.body:isHTMLElement(ze)&&isOverflowElement(ze)?ze:getNearestOverflowAncestor(ze)}function getOverflowAncestors(en,ze,tn){var nn;ze===void 0&&(ze=[]),tn===void 0&&(tn=!0);const rn=getNearestOverflowAncestor(en),sn=rn===((nn=en.ownerDocument)==null?void 0:nn.body),an=getWindow(rn);return sn?ze.concat(an,an.visualViewport||[],isOverflowElement(rn)?rn:[],an.frameElement&&tn?getOverflowAncestors(an.frameElement):[]):ze.concat(rn,getOverflowAncestors(rn,[],tn))}function getCssDimensions(en){const ze=getComputedStyle$1(en);let tn=parseFloat(ze.width)||0,nn=parseFloat(ze.height)||0;const rn=isHTMLElement(en),sn=rn?en.offsetWidth:tn,an=rn?en.offsetHeight:nn,ln=round(tn)!==sn||round(nn)!==an;return ln&&(tn=sn,nn=an),{width:tn,height:nn,$:ln}}function unwrapElement(en){return isElement(en)?en:en.contextElement}function getScale(en){const ze=unwrapElement(en);if(!isHTMLElement(ze))return createCoords(1);const tn=ze.getBoundingClientRect(),{width:nn,height:rn,$:sn}=getCssDimensions(ze);let an=(sn?round(tn.width):tn.width)/nn,ln=(sn?round(tn.height):tn.height)/rn;return(!an||!Number.isFinite(an))&&(an=1),(!ln||!Number.isFinite(ln))&&(ln=1),{x:an,y:ln}}var noOffsets=createCoords(0);function getVisualOffsets(en){const ze=getWindow(en);return!isWebKit()||!ze.visualViewport?noOffsets:{x:ze.visualViewport.offsetLeft,y:ze.visualViewport.offsetTop}}function shouldAddVisualOffsets(en,ze,tn){return ze===void 0&&(ze=!1),!tn||ze&&tn!==getWindow(en)?!1:ze}function getBoundingClientRect(en,ze,tn,nn){ze===void 0&&(ze=!1),tn===void 0&&(tn=!1);const rn=en.getBoundingClientRect(),sn=unwrapElement(en);let an=createCoords(1);ze&&(nn?isElement(nn)&&(an=getScale(nn)):an=getScale(en));const ln=shouldAddVisualOffsets(sn,tn,nn)?getVisualOffsets(sn):createCoords(0);let cn=(rn.left+ln.x)/an.x,un=(rn.top+ln.y)/an.y,dn=rn.width/an.x,fn=rn.height/an.y;if(sn){const pn=getWindow(sn),hn=nn&&isElement(nn)?getWindow(nn):nn;let gn=pn.frameElement;for(;gn&&nn&&hn!==pn;){const En=getScale(gn),mn=gn.getBoundingClientRect(),bn=getComputedStyle$1(gn),Tn=mn.left+(gn.clientLeft+parseFloat(bn.paddingLeft))*En.x,_n=mn.top+(gn.clientTop+parseFloat(bn.paddingTop))*En.y;cn*=En.x,un*=En.y,dn*=En.x,fn*=En.y,cn+=Tn,un+=_n,gn=getWindow(gn).frameElement}}return rectToClientRect({width:dn,height:fn,x:cn,y:un})}function convertOffsetParentRelativeRectToViewportRelativeRect(en){let{rect:ze,offsetParent:tn,strategy:nn}=en;const rn=isHTMLElement(tn),sn=getDocumentElement(tn);if(tn===sn)return ze;let an={scrollLeft:0,scrollTop:0},ln=createCoords(1);const cn=createCoords(0);if((rn||!rn&&nn!=="fixed")&&((getNodeName(tn)!=="body"||isOverflowElement(sn))&&(an=getNodeScroll(tn)),isHTMLElement(tn))){const un=getBoundingClientRect(tn);ln=getScale(tn),cn.x=un.x+tn.clientLeft,cn.y=un.y+tn.clientTop}return{width:ze.width*ln.x,height:ze.height*ln.y,x:ze.x*ln.x-an.scrollLeft*ln.x+cn.x,y:ze.y*ln.y-an.scrollTop*ln.y+cn.y}}function getClientRects(en){return Array.from(en.getClientRects())}function getWindowScrollBarX(en){return getBoundingClientRect(getDocumentElement(en)).left+getNodeScroll(en).scrollLeft}function getDocumentRect(en){const ze=getDocumentElement(en),tn=getNodeScroll(en),nn=en.ownerDocument.body,rn=max(ze.scrollWidth,ze.clientWidth,nn.scrollWidth,nn.clientWidth),sn=max(ze.scrollHeight,ze.clientHeight,nn.scrollHeight,nn.clientHeight);let an=-tn.scrollLeft+getWindowScrollBarX(en);const ln=-tn.scrollTop;return getComputedStyle$1(nn).direction==="rtl"&&(an+=max(ze.clientWidth,nn.clientWidth)-rn),{width:rn,height:sn,x:an,y:ln}}function getViewportRect(en,ze){const tn=getWindow(en),nn=getDocumentElement(en),rn=tn.visualViewport;let sn=nn.clientWidth,an=nn.clientHeight,ln=0,cn=0;if(rn){sn=rn.width,an=rn.height;const un=isWebKit();(!un||un&&ze==="fixed")&&(ln=rn.offsetLeft,cn=rn.offsetTop)}return{width:sn,height:an,x:ln,y:cn}}function getInnerBoundingClientRect(en,ze){const tn=getBoundingClientRect(en,!0,ze==="fixed"),nn=tn.top+en.clientTop,rn=tn.left+en.clientLeft,sn=isHTMLElement(en)?getScale(en):createCoords(1),an=en.clientWidth*sn.x,ln=en.clientHeight*sn.y,cn=rn*sn.x,un=nn*sn.y;return{width:an,height:ln,x:cn,y:un}}function getClientRectFromClippingAncestor(en,ze,tn){let nn;if(ze==="viewport")nn=getViewportRect(en,tn);else if(ze==="document")nn=getDocumentRect(getDocumentElement(en));else if(isElement(ze))nn=getInnerBoundingClientRect(ze,tn);else{const rn=getVisualOffsets(en);nn={...ze,x:ze.x-rn.x,y:ze.y-rn.y}}return rectToClientRect(nn)}function hasFixedPositionAncestor(en,ze){const tn=getParentNode(en);return tn===ze||!isElement(tn)||isLastTraversableNode(tn)?!1:getComputedStyle$1(tn).position==="fixed"||hasFixedPositionAncestor(tn,ze)}function getClippingElementAncestors(en,ze){const tn=ze.get(en);if(tn)return tn;let nn=getOverflowAncestors(en,[],!1).filter(ln=>isElement(ln)&&getNodeName(ln)!=="body"),rn=null;const sn=getComputedStyle$1(en).position==="fixed";let an=sn?getParentNode(en):en;for(;isElement(an)&&!isLastTraversableNode(an);){const ln=getComputedStyle$1(an),cn=isContainingBlock(an);!cn&&ln.position==="fixed"&&(rn=null),(sn?!cn&&!rn:!cn&&ln.position==="static"&&!!rn&&["absolute","fixed"].includes(rn.position)||isOverflowElement(an)&&!cn&&hasFixedPositionAncestor(en,an))?nn=nn.filter(dn=>dn!==an):rn=ln,an=getParentNode(an)}return ze.set(en,nn),nn}function getClippingRect(en){let{element:ze,boundary:tn,rootBoundary:nn,strategy:rn}=en;const an=[...tn==="clippingAncestors"?getClippingElementAncestors(ze,this._c):[].concat(tn),nn],ln=an[0],cn=an.reduce((un,dn)=>{const fn=getClientRectFromClippingAncestor(ze,dn,rn);return un.top=max(fn.top,un.top),un.right=min(fn.right,un.right),un.bottom=min(fn.bottom,un.bottom),un.left=max(fn.left,un.left),un},getClientRectFromClippingAncestor(ze,ln,rn));return{width:cn.right-cn.left,height:cn.bottom-cn.top,x:cn.left,y:cn.top}}function getDimensions(en){return getCssDimensions(en)}function getRectRelativeToOffsetParent(en,ze,tn){const nn=isHTMLElement(ze),rn=getDocumentElement(ze),sn=tn==="fixed",an=getBoundingClientRect(en,!0,sn,ze);let ln={scrollLeft:0,scrollTop:0};const cn=createCoords(0);if(nn||!nn&&!sn)if((getNodeName(ze)!=="body"||isOverflowElement(rn))&&(ln=getNodeScroll(ze)),nn){const un=getBoundingClientRect(ze,!0,sn,ze);cn.x=un.x+ze.clientLeft,cn.y=un.y+ze.clientTop}else rn&&(cn.x=getWindowScrollBarX(rn));return{x:an.left+ln.scrollLeft-cn.x,y:an.top+ln.scrollTop-cn.y,width:an.width,height:an.height}}function getTrueOffsetParent(en,ze){return!isHTMLElement(en)||getComputedStyle$1(en).position==="fixed"?null:ze?ze(en):en.offsetParent}function getOffsetParent(en,ze){const tn=getWindow(en);if(!isHTMLElement(en))return tn;let nn=getTrueOffsetParent(en,ze);for(;nn&&isTableElement(nn)&&getComputedStyle$1(nn).position==="static";)nn=getTrueOffsetParent(nn,ze);return nn&&(getNodeName(nn)==="html"||getNodeName(nn)==="body"&&getComputedStyle$1(nn).position==="static"&&!isContainingBlock(nn))?tn:nn||getContainingBlock(en)||tn}var getElementRects=async function(en){let{reference:ze,floating:tn,strategy:nn}=en;const rn=this.getOffsetParent||getOffsetParent,sn=this.getDimensions;return{reference:getRectRelativeToOffsetParent(ze,await rn(tn),nn),floating:{x:0,y:0,...await sn(tn)}}};function isRTL(en){return getComputedStyle$1(en).direction==="rtl"}var platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(en,ze){let tn=null,nn;const rn=getDocumentElement(en);function sn(){clearTimeout(nn),tn&&tn.disconnect(),tn=null}function an(ln,cn){ln===void 0&&(ln=!1),cn===void 0&&(cn=1),sn();const{left:un,top:dn,width:fn,height:pn}=en.getBoundingClientRect();if(ln||ze(),!fn||!pn)return;const hn=floor(dn),gn=floor(rn.clientWidth-(un+fn)),En=floor(rn.clientHeight-(dn+pn)),mn=floor(un),Tn={rootMargin:-hn+"px "+-gn+"px "+-En+"px "+-mn+"px",threshold:max(0,min(1,cn))||1};let _n=!0;function An(Rn){const Cn=Rn[0].intersectionRatio;if(Cn!==cn){if(!_n)return an();Cn?an(!1,Cn):nn=setTimeout(()=>{an(!1,1e-7)},100)}_n=!1}try{tn=new IntersectionObserver(An,{...Tn,root:rn.ownerDocument})}catch{tn=new IntersectionObserver(An,Tn)}tn.observe(en)}return an(!0),sn}function autoUpdate(en,ze,tn,nn){nn===void 0&&(nn={});const{ancestorScroll:rn=!0,ancestorResize:sn=!0,elementResize:an=typeof ResizeObserver=="function",layoutShift:ln=typeof IntersectionObserver=="function",animationFrame:cn=!1}=nn,un=unwrapElement(en),dn=rn||sn?[...un?getOverflowAncestors(un):[],...getOverflowAncestors(ze)]:[];dn.forEach(bn=>{rn&&bn.addEventListener("scroll",tn,{passive:!0}),sn&&bn.addEventListener("resize",tn)});const fn=un&&ln?observeMove(un,tn):null;let pn=-1,hn=null;an&&(hn=new ResizeObserver(bn=>{let[Tn]=bn;Tn&&Tn.target===un&&hn&&(hn.unobserve(ze),cancelAnimationFrame(pn),pn=requestAnimationFrame(()=>{hn&&hn.observe(ze)})),tn()}),un&&!cn&&hn.observe(un),hn.observe(ze));let gn,En=cn?getBoundingClientRect(en):null;cn&&mn();function mn(){const bn=getBoundingClientRect(en);En&&(bn.x!==En.x||bn.y!==En.y||bn.width!==En.width||bn.height!==En.height)&&tn(),En=bn,gn=requestAnimationFrame(mn)}return tn(),()=>{dn.forEach(bn=>{rn&&bn.removeEventListener("scroll",tn),sn&&bn.removeEventListener("resize",tn)}),fn&&fn(),hn&&hn.disconnect(),hn=null,cn&&cancelAnimationFrame(gn)}}var computePosition2=(en,ze,tn)=>{const nn=new Map,rn={platform,...tn},sn={...rn.platform,_c:nn};return computePosition(en,ze,{...rn,platform:sn})};function src_default(en){en.magic("anchor",ze=>{if(!ze._x_anchor)throw"Alpine: No x-anchor directive found on element using $anchor...";return ze._x_anchor}),en.interceptClone((ze,tn)=>{ze&&ze._x_anchor&&!tn._x_anchor&&(tn._x_anchor=ze._x_anchor)}),en.directive("anchor",en.skipDuringClone((ze,{expression:tn,modifiers:nn,value:rn},{cleanup:sn,evaluate:an})=>{let{placement:ln,offsetValue:cn,unstyled:un}=getOptions(nn);ze._x_anchor=en.reactive({x:0,y:0});let dn=an(tn);if(!dn)throw"Alpine: no element provided to x-anchor...";let fn=()=>{let hn;computePosition2(dn,ze,{placement:ln,middleware:[flip(),shift$1({padding:5}),offset(cn)]}).then(({x:gn,y:En})=>{un||setStyles(ze,gn,En),JSON.stringify({x:gn,y:En})!==hn&&(ze._x_anchor.x=gn,ze._x_anchor.y=En),hn=JSON.stringify({x:gn,y:En})})},pn=autoUpdate(dn,ze,()=>fn());sn(()=>pn())},(ze,{expression:tn,modifiers:nn,value:rn},{cleanup:sn,evaluate:an})=>{let{placement:ln,offsetValue:cn,unstyled:un}=getOptions(nn);ze._x_anchor&&(un||setStyles(ze,ze._x_anchor.x,ze._x_anchor.y))}))}function setStyles(en,ze,tn){Object.assign(en.style,{left:ze+"px",top:tn+"px",position:"absolute"})}function getOptions(en){let tn=["top","top-start","top-end","right","right-start","right-end","bottom","bottom-start","bottom-end","left","left-start","left-end"].find(sn=>en.includes(sn)),nn=0;if(en.includes("offset")){let sn=en.findIndex(an=>an==="offset");nn=en[sn+1]!==void 0?Number(en[sn+1]):nn}let rn=en.includes("no-style");return{placement:tn,offsetValue:nn,unstyled:rn}}var module_default=src_default;const formValidator=en=>({formData:{},errors:{},init(){Object.keys(en).forEach(ze=>{this.formData[ze]="";const tn=document.querySelector(`[name="${ze}"]`);tn&&tn.addEventListener("blur",()=>{this.validateField(ze,en[ze])})})},validateForm(){let ze=!0;if(Object.keys(en).forEach(tn=>{this.validateField(tn,en[tn])||(ze=!1)}),ze){console.log("Form is valid, proceed with submission.");const tn=this.$refs.form;console.log(tn)}else return console.log("Form is invalid, please correct the errors."),!1},validateField(ze,tn){let nn=!0;this.errors[ze]=null;for(const rn of tn){for(const[sn,an]of Object.entries(rn))if(sn!=="message"){const ln=this[sn],cn=Array.isArray(an)?an:[an];if(typeof ln=="function"){if(!ln.call(this,this.formData[ze],...cn)){let un=rn.message;cn.forEach((dn,fn)=>{un=un.replace(new RegExp(`\\{${fn}\\}`,"g"),dn)}),this.errors[ze]=un,nn=!1;break}}else console.error(`Validator function for "${sn}" is not defined.`)}if(!nn)break}return nn},required(ze){return ze!=null&&ze.length>0},email(ze){return/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(ze)},maxLength(ze,tn){return ze.length<=tn},equalTo(ze,tn){return ze===this.formData[tn]},range(ze,tn,nn){return ze>=tn&&ze<=nn}});function OrderedMap(en){this.content=en}OrderedMap.prototype={constructor:OrderedMap,find:function(en){for(var ze=0;ze<this.content.length;ze+=2)if(this.content[ze]===en)return ze;return-1},get:function(en){var ze=this.find(en);return ze==-1?void 0:this.content[ze+1]},update:function(en,ze,tn){var nn=tn&&tn!=en?this.remove(tn):this,rn=nn.find(en),sn=nn.content.slice();return rn==-1?sn.push(tn||en,ze):(sn[rn+1]=ze,tn&&(sn[rn]=tn)),new OrderedMap(sn)},remove:function(en){var ze=this.find(en);if(ze==-1)return this;var tn=this.content.slice();return tn.splice(ze,2),new OrderedMap(tn)},addToStart:function(en,ze){return new OrderedMap([en,ze].concat(this.remove(en).content))},addToEnd:function(en,ze){var tn=this.remove(en).content.slice();return tn.push(en,ze),new OrderedMap(tn)},addBefore:function(en,ze,tn){var nn=this.remove(ze),rn=nn.content.slice(),sn=nn.find(en);return rn.splice(sn==-1?rn.length:sn,0,ze,tn),new OrderedMap(rn)},forEach:function(en){for(var ze=0;ze<this.content.length;ze+=2)en(this.content[ze],this.content[ze+1])},prepend:function(en){return en=OrderedMap.from(en),en.size?new OrderedMap(en.content.concat(this.subtract(en).content)):this},append:function(en){return en=OrderedMap.from(en),en.size?new OrderedMap(this.subtract(en).content.concat(en.content)):this},subtract:function(en){var ze=this;en=OrderedMap.from(en);for(var tn=0;tn<en.content.length;tn+=2)ze=ze.remove(en.content[tn]);return ze},toObject:function(){var en={};return this.forEach(function(ze,tn){en[ze]=tn}),en},get size(){return this.content.length>>1}};OrderedMap.from=function(en){if(en instanceof OrderedMap)return en;var ze=[];if(en)for(var tn in en)ze.push(tn,en[tn]);return new OrderedMap(ze)};function findDiffStart(en,ze,tn){for(let nn=0;;nn++){if(nn==en.childCount||nn==ze.childCount)return en.childCount==ze.childCount?null:tn;let rn=en.child(nn),sn=ze.child(nn);if(rn==sn){tn+=rn.nodeSize;continue}if(!rn.sameMarkup(sn))return tn;if(rn.isText&&rn.text!=sn.text){for(let an=0;rn.text[an]==sn.text[an];an++)tn++;return tn}if(rn.content.size||sn.content.size){let an=findDiffStart(rn.content,sn.content,tn+1);if(an!=null)return an}tn+=rn.nodeSize}}function findDiffEnd(en,ze,tn,nn){for(let rn=en.childCount,sn=ze.childCount;;){if(rn==0||sn==0)return rn==sn?null:{a:tn,b:nn};let an=en.child(--rn),ln=ze.child(--sn),cn=an.nodeSize;if(an==ln){tn-=cn,nn-=cn;continue}if(!an.sameMarkup(ln))return{a:tn,b:nn};if(an.isText&&an.text!=ln.text){let un=0,dn=Math.min(an.text.length,ln.text.length);for(;un<dn&&an.text[an.text.length-un-1]==ln.text[ln.text.length-un-1];)un++,tn--,nn--;return{a:tn,b:nn}}if(an.content.size||ln.content.size){let un=findDiffEnd(an.content,ln.content,tn-1,nn-1);if(un)return un}tn-=cn,nn-=cn}}class Fragment{constructor(ze,tn){if(this.content=ze,this.size=tn||0,tn==null)for(let nn=0;nn<ze.length;nn++)this.size+=ze[nn].nodeSize}nodesBetween(ze,tn,nn,rn=0,sn){for(let an=0,ln=0;ln<tn;an++){let cn=this.content[an],un=ln+cn.nodeSize;if(un>ze&&nn(cn,rn+ln,sn||null,an)!==!1&&cn.content.size){let dn=ln+1;cn.nodesBetween(Math.max(0,ze-dn),Math.min(cn.content.size,tn-dn),nn,rn+dn)}ln=un}}descendants(ze){this.nodesBetween(0,this.size,ze)}textBetween(ze,tn,nn,rn){let sn="",an=!0;return this.nodesBetween(ze,tn,(ln,cn)=>{let un=ln.isText?ln.text.slice(Math.max(ze,cn)-cn,tn-cn):ln.isLeaf?rn?typeof rn=="function"?rn(ln):rn:ln.type.spec.leafText?ln.type.spec.leafText(ln):"":"";ln.isBlock&&(ln.isLeaf&&un||ln.isTextblock)&&nn&&(an?an=!1:sn+=nn),sn+=un},0),sn}append(ze){if(!ze.size)return this;if(!this.size)return ze;let tn=this.lastChild,nn=ze.firstChild,rn=this.content.slice(),sn=0;for(tn.isText&&tn.sameMarkup(nn)&&(rn[rn.length-1]=tn.withText(tn.text+nn.text),sn=1);sn<ze.content.length;sn++)rn.push(ze.content[sn]);return new Fragment(rn,this.size+ze.size)}cut(ze,tn=this.size){if(ze==0&&tn==this.size)return this;let nn=[],rn=0;if(tn>ze)for(let sn=0,an=0;an<tn;sn++){let ln=this.content[sn],cn=an+ln.nodeSize;cn>ze&&((an<ze||cn>tn)&&(ln.isText?ln=ln.cut(Math.max(0,ze-an),Math.min(ln.text.length,tn-an)):ln=ln.cut(Math.max(0,ze-an-1),Math.min(ln.content.size,tn-an-1))),nn.push(ln),rn+=ln.nodeSize),an=cn}return new Fragment(nn,rn)}cutByIndex(ze,tn){return ze==tn?Fragment.empty:ze==0&&tn==this.content.length?this:new Fragment(this.content.slice(ze,tn))}replaceChild(ze,tn){let nn=this.content[ze];if(nn==tn)return this;let rn=this.content.slice(),sn=this.size+tn.nodeSize-nn.nodeSize;return rn[ze]=tn,new Fragment(rn,sn)}addToStart(ze){return new Fragment([ze].concat(this.content),this.size+ze.nodeSize)}addToEnd(ze){return new Fragment(this.content.concat(ze),this.size+ze.nodeSize)}eq(ze){if(this.content.length!=ze.content.length)return!1;for(let tn=0;tn<this.content.length;tn++)if(!this.content[tn].eq(ze.content[tn]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(ze){let tn=this.content[ze];if(!tn)throw new RangeError("Index "+ze+" out of range for "+this);return tn}maybeChild(ze){return this.content[ze]||null}forEach(ze){for(let tn=0,nn=0;tn<this.content.length;tn++){let rn=this.content[tn];ze(rn,nn,tn),nn+=rn.nodeSize}}findDiffStart(ze,tn=0){return findDiffStart(this,ze,tn)}findDiffEnd(ze,tn=this.size,nn=ze.size){return findDiffEnd(this,ze,tn,nn)}findIndex(ze,tn=-1){if(ze==0)return retIndex(0,ze);if(ze==this.size)return retIndex(this.content.length,ze);if(ze>this.size||ze<0)throw new RangeError(`Position ${ze} outside of fragment (${this})`);for(let nn=0,rn=0;;nn++){let sn=this.child(nn),an=rn+sn.nodeSize;if(an>=ze)return an==ze||tn>0?retIndex(nn+1,an):retIndex(nn,rn);rn=an}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(ze=>ze.toJSON()):null}static fromJSON(ze,tn){if(!tn)return Fragment.empty;if(!Array.isArray(tn))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(tn.map(ze.nodeFromJSON))}static fromArray(ze){if(!ze.length)return Fragment.empty;let tn,nn=0;for(let rn=0;rn<ze.length;rn++){let sn=ze[rn];nn+=sn.nodeSize,rn&&sn.isText&&ze[rn-1].sameMarkup(sn)?(tn||(tn=ze.slice(0,rn)),tn[tn.length-1]=sn.withText(tn[tn.length-1].text+sn.text)):tn&&tn.push(sn)}return new Fragment(tn||ze,nn)}static from(ze){if(!ze)return Fragment.empty;if(ze instanceof Fragment)return ze;if(Array.isArray(ze))return this.fromArray(ze);if(ze.attrs)return new Fragment([ze],ze.nodeSize);throw new RangeError("Can not convert "+ze+" to a Fragment"+(ze.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(en,ze){return found.index=en,found.offset=ze,found}function compareDeep(en,ze){if(en===ze)return!0;if(!(en&&typeof en=="object")||!(ze&&typeof ze=="object"))return!1;let tn=Array.isArray(en);if(Array.isArray(ze)!=tn)return!1;if(tn){if(en.length!=ze.length)return!1;for(let nn=0;nn<en.length;nn++)if(!compareDeep(en[nn],ze[nn]))return!1}else{for(let nn in en)if(!(nn in ze)||!compareDeep(en[nn],ze[nn]))return!1;for(let nn in ze)if(!(nn in en))return!1}return!0}let Mark$1=class ci{constructor(ze,tn){this.type=ze,this.attrs=tn}addToSet(ze){let tn,nn=!1;for(let rn=0;rn<ze.length;rn++){let sn=ze[rn];if(this.eq(sn))return ze;if(this.type.excludes(sn.type))tn||(tn=ze.slice(0,rn));else{if(sn.type.excludes(this.type))return ze;!nn&&sn.type.rank>this.type.rank&&(tn||(tn=ze.slice(0,rn)),tn.push(this),nn=!0),tn&&tn.push(sn)}}return tn||(tn=ze.slice()),nn||tn.push(this),tn}removeFromSet(ze){for(let tn=0;tn<ze.length;tn++)if(this.eq(ze[tn]))return ze.slice(0,tn).concat(ze.slice(tn+1));return ze}isInSet(ze){for(let tn=0;tn<ze.length;tn++)if(this.eq(ze[tn]))return!0;return!1}eq(ze){return this==ze||this.type==ze.type&&compareDeep(this.attrs,ze.attrs)}toJSON(){let ze={type:this.type.name};for(let tn in this.attrs){ze.attrs=this.attrs;break}return ze}static fromJSON(ze,tn){if(!tn)throw new RangeError("Invalid input for Mark.fromJSON");let nn=ze.marks[tn.type];if(!nn)throw new RangeError(`There is no mark type ${tn.type} in this schema`);return nn.create(tn.attrs)}static sameSet(ze,tn){if(ze==tn)return!0;if(ze.length!=tn.length)return!1;for(let nn=0;nn<ze.length;nn++)if(!ze[nn].eq(tn[nn]))return!1;return!0}static setFrom(ze){if(!ze||Array.isArray(ze)&&ze.length==0)return ci.none;if(ze instanceof ci)return[ze];let tn=ze.slice();return tn.sort((nn,rn)=>nn.type.rank-rn.type.rank),tn}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(ze,tn,nn){this.content=ze,this.openStart=tn,this.openEnd=nn}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(ze,tn){let nn=insertInto(this.content,ze+this.openStart,tn);return nn&&new Slice(nn,this.openStart,this.openEnd)}removeBetween(ze,tn){return new Slice(removeRange(this.content,ze+this.openStart,tn+this.openStart),this.openStart,this.openEnd)}eq(ze){return this.content.eq(ze.content)&&this.openStart==ze.openStart&&this.openEnd==ze.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let ze={content:this.content.toJSON()};return this.openStart>0&&(ze.openStart=this.openStart),this.openEnd>0&&(ze.openEnd=this.openEnd),ze}static fromJSON(ze,tn){if(!tn)return Slice.empty;let nn=tn.openStart||0,rn=tn.openEnd||0;if(typeof nn!="number"||typeof rn!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(ze,tn.content),nn,rn)}static maxOpen(ze,tn=!0){let nn=0,rn=0;for(let sn=ze.firstChild;sn&&!sn.isLeaf&&(tn||!sn.type.spec.isolating);sn=sn.firstChild)nn++;for(let sn=ze.lastChild;sn&&!sn.isLeaf&&(tn||!sn.type.spec.isolating);sn=sn.lastChild)rn++;return new Slice(ze,nn,rn)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(en,ze,tn){let{index:nn,offset:rn}=en.findIndex(ze),sn=en.maybeChild(nn),{index:an,offset:ln}=en.findIndex(tn);if(rn==ze||sn.isText){if(ln!=tn&&!en.child(an).isText)throw new RangeError("Removing non-flat range");return en.cut(0,ze).append(en.cut(tn))}if(nn!=an)throw new RangeError("Removing non-flat range");return en.replaceChild(nn,sn.copy(removeRange(sn.content,ze-rn-1,tn-rn-1)))}function insertInto(en,ze,tn,nn){let{index:rn,offset:sn}=en.findIndex(ze),an=en.maybeChild(rn);if(sn==ze||an.isText)return nn&&!nn.canReplace(rn,rn,tn)?null:en.cut(0,ze).append(tn).append(en.cut(ze));let ln=insertInto(an.content,ze-sn-1,tn);return ln&&en.replaceChild(rn,an.copy(ln))}function replace(en,ze,tn){if(tn.openStart>en.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(en.depth-tn.openStart!=ze.depth-tn.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(en,ze,tn,0)}function replaceOuter(en,ze,tn,nn){let rn=en.index(nn),sn=en.node(nn);if(rn==ze.index(nn)&&nn<en.depth-tn.openStart){let an=replaceOuter(en,ze,tn,nn+1);return sn.copy(sn.content.replaceChild(rn,an))}else if(tn.content.size)if(!tn.openStart&&!tn.openEnd&&en.depth==nn&&ze.depth==nn){let an=en.parent,ln=an.content;return close(an,ln.cut(0,en.parentOffset).append(tn.content).append(ln.cut(ze.parentOffset)))}else{let{start:an,end:ln}=prepareSliceForReplace(tn,en);return close(sn,replaceThreeWay(en,an,ln,ze,nn))}else return close(sn,replaceTwoWay(en,ze,nn))}function checkJoin(en,ze){if(!ze.type.compatibleContent(en.type))throw new ReplaceError("Cannot join "+ze.type.name+" onto "+en.type.name)}function joinable$1(en,ze,tn){let nn=en.node(tn);return checkJoin(nn,ze.node(tn)),nn}function addNode(en,ze){let tn=ze.length-1;tn>=0&&en.isText&&en.sameMarkup(ze[tn])?ze[tn]=en.withText(ze[tn].text+en.text):ze.push(en)}function addRange(en,ze,tn,nn){let rn=(ze||en).node(tn),sn=0,an=ze?ze.index(tn):rn.childCount;en&&(sn=en.index(tn),en.depth>tn?sn++:en.textOffset&&(addNode(en.nodeAfter,nn),sn++));for(let ln=sn;ln<an;ln++)addNode(rn.child(ln),nn);ze&&ze.depth==tn&&ze.textOffset&&addNode(ze.nodeBefore,nn)}function close(en,ze){return en.type.checkContent(ze),en.copy(ze)}function replaceThreeWay(en,ze,tn,nn,rn){let sn=en.depth>rn&&joinable$1(en,ze,rn+1),an=nn.depth>rn&&joinable$1(tn,nn,rn+1),ln=[];return addRange(null,en,rn,ln),sn&&an&&ze.index(rn)==tn.index(rn)?(checkJoin(sn,an),addNode(close(sn,replaceThreeWay(en,ze,tn,nn,rn+1)),ln)):(sn&&addNode(close(sn,replaceTwoWay(en,ze,rn+1)),ln),addRange(ze,tn,rn,ln),an&&addNode(close(an,replaceTwoWay(tn,nn,rn+1)),ln)),addRange(nn,null,rn,ln),new Fragment(ln)}function replaceTwoWay(en,ze,tn){let nn=[];if(addRange(null,en,tn,nn),en.depth>tn){let rn=joinable$1(en,ze,tn+1);addNode(close(rn,replaceTwoWay(en,ze,tn+1)),nn)}return addRange(ze,null,tn,nn),new Fragment(nn)}function prepareSliceForReplace(en,ze){let tn=ze.depth-en.openStart,rn=ze.node(tn).copy(en.content);for(let sn=tn-1;sn>=0;sn--)rn=ze.node(sn).copy(Fragment.from(rn));return{start:rn.resolveNoCache(en.openStart+tn),end:rn.resolveNoCache(rn.content.size-en.openEnd-tn)}}class ResolvedPos{constructor(ze,tn,nn){this.pos=ze,this.path=tn,this.parentOffset=nn,this.depth=tn.length/3-1}resolveDepth(ze){return ze==null?this.depth:ze<0?this.depth+ze:ze}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(ze){return this.path[this.resolveDepth(ze)*3]}index(ze){return this.path[this.resolveDepth(ze)*3+1]}indexAfter(ze){return ze=this.resolveDepth(ze),this.index(ze)+(ze==this.depth&&!this.textOffset?0:1)}start(ze){return ze=this.resolveDepth(ze),ze==0?0:this.path[ze*3-1]+1}end(ze){return ze=this.resolveDepth(ze),this.start(ze)+this.node(ze).content.size}before(ze){if(ze=this.resolveDepth(ze),!ze)throw new RangeError("There is no position before the top-level node");return ze==this.depth+1?this.pos:this.path[ze*3-1]}after(ze){if(ze=this.resolveDepth(ze),!ze)throw new RangeError("There is no position after the top-level node");return ze==this.depth+1?this.pos:this.path[ze*3-1]+this.path[ze*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let ze=this.parent,tn=this.index(this.depth);if(tn==ze.childCount)return null;let nn=this.pos-this.path[this.path.length-1],rn=ze.child(tn);return nn?ze.child(tn).cut(nn):rn}get nodeBefore(){let ze=this.index(this.depth),tn=this.pos-this.path[this.path.length-1];return tn?this.parent.child(ze).cut(0,tn):ze==0?null:this.parent.child(ze-1)}posAtIndex(ze,tn){tn=this.resolveDepth(tn);let nn=this.path[tn*3],rn=tn==0?0:this.path[tn*3-1]+1;for(let sn=0;sn<ze;sn++)rn+=nn.child(sn).nodeSize;return rn}marks(){let ze=this.parent,tn=this.index();if(ze.content.size==0)return Mark$1.none;if(this.textOffset)return ze.child(tn).marks;let nn=ze.maybeChild(tn-1),rn=ze.maybeChild(tn);if(!nn){let ln=nn;nn=rn,rn=ln}let sn=nn.marks;for(var an=0;an<sn.length;an++)sn[an].type.spec.inclusive===!1&&(!rn||!sn[an].isInSet(rn.marks))&&(sn=sn[an--].removeFromSet(sn));return sn}marksAcross(ze){let tn=this.parent.maybeChild(this.index());if(!tn||!tn.isInline)return null;let nn=tn.marks,rn=ze.parent.maybeChild(ze.index());for(var sn=0;sn<nn.length;sn++)nn[sn].type.spec.inclusive===!1&&(!rn||!nn[sn].isInSet(rn.marks))&&(nn=nn[sn--].removeFromSet(nn));return nn}sharedDepth(ze){for(let tn=this.depth;tn>0;tn--)if(this.start(tn)<=ze&&this.end(tn)>=ze)return tn;return 0}blockRange(ze=this,tn){if(ze.pos<this.pos)return ze.blockRange(this);for(let nn=this.depth-(this.parent.inlineContent||this.pos==ze.pos?1:0);nn>=0;nn--)if(ze.pos<=this.end(nn)&&(!tn||tn(this.node(nn))))return new NodeRange(this,ze,nn);return null}sameParent(ze){return this.pos-this.parentOffset==ze.pos-ze.parentOffset}max(ze){return ze.pos>this.pos?ze:this}min(ze){return ze.pos<this.pos?ze:this}toString(){let ze="";for(let tn=1;tn<=this.depth;tn++)ze+=(ze?"/":"")+this.node(tn).type.name+"_"+this.index(tn-1);return ze+":"+this.parentOffset}static resolve(ze,tn){if(!(tn>=0&&tn<=ze.content.size))throw new RangeError("Position "+tn+" out of range");let nn=[],rn=0,sn=tn;for(let an=ze;;){let{index:ln,offset:cn}=an.content.findIndex(sn),un=sn-cn;if(nn.push(an,ln,rn+cn),!un||(an=an.child(ln),an.isText))break;sn=un-1,rn+=cn+1}return new ResolvedPos(tn,nn,sn)}static resolveCached(ze,tn){for(let rn=0;rn<resolveCache.length;rn++){let sn=resolveCache[rn];if(sn.pos==tn&&sn.doc==ze)return sn}let nn=resolveCache[resolveCachePos]=ResolvedPos.resolve(ze,tn);return resolveCachePos=(resolveCachePos+1)%resolveCacheSize,nn}}let resolveCache=[],resolveCachePos=0,resolveCacheSize=12;class NodeRange{constructor(ze,tn,nn){this.$from=ze,this.$to=tn,this.depth=nn}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$2=class ui{constructor(ze,tn,nn,rn=Mark$1.none){this.type=ze,this.attrs=tn,this.marks=rn,this.content=nn||Fragment.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(ze){return this.content.child(ze)}maybeChild(ze){return this.content.maybeChild(ze)}forEach(ze){this.content.forEach(ze)}nodesBetween(ze,tn,nn,rn=0){this.content.nodesBetween(ze,tn,nn,rn,this)}descendants(ze){this.nodesBetween(0,this.content.size,ze)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(ze,tn,nn,rn){return this.content.textBetween(ze,tn,nn,rn)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(ze){return this==ze||this.sameMarkup(ze)&&this.content.eq(ze.content)}sameMarkup(ze){return this.hasMarkup(ze.type,ze.attrs,ze.marks)}hasMarkup(ze,tn,nn){return this.type==ze&&compareDeep(this.attrs,tn||ze.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,nn||Mark$1.none)}copy(ze=null){return ze==this.content?this:new ui(this.type,this.attrs,ze,this.marks)}mark(ze){return ze==this.marks?this:new ui(this.type,this.attrs,this.content,ze)}cut(ze,tn=this.content.size){return ze==0&&tn==this.content.size?this:this.copy(this.content.cut(ze,tn))}slice(ze,tn=this.content.size,nn=!1){if(ze==tn)return Slice.empty;let rn=this.resolve(ze),sn=this.resolve(tn),an=nn?0:rn.sharedDepth(tn),ln=rn.start(an),un=rn.node(an).content.cut(rn.pos-ln,sn.pos-ln);return new Slice(un,rn.depth-an,sn.depth-an)}replace(ze,tn,nn){return replace(this.resolve(ze),this.resolve(tn),nn)}nodeAt(ze){for(let tn=this;;){let{index:nn,offset:rn}=tn.content.findIndex(ze);if(tn=tn.maybeChild(nn),!tn)return null;if(rn==ze||tn.isText)return tn;ze-=rn+1}}childAfter(ze){let{index:tn,offset:nn}=this.content.findIndex(ze);return{node:this.content.maybeChild(tn),index:tn,offset:nn}}childBefore(ze){if(ze==0)return{node:null,index:0,offset:0};let{index:tn,offset:nn}=this.content.findIndex(ze);if(nn<ze)return{node:this.content.child(tn),index:tn,offset:nn};let rn=this.content.child(tn-1);return{node:rn,index:tn-1,offset:nn-rn.nodeSize}}resolve(ze){return ResolvedPos.resolveCached(this,ze)}resolveNoCache(ze){return ResolvedPos.resolve(this,ze)}rangeHasMark(ze,tn,nn){let rn=!1;return tn>ze&&this.nodesBetween(ze,tn,sn=>(nn.isInSet(sn.marks)&&(rn=!0),!rn)),rn}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let ze=this.type.name;return this.content.size&&(ze+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,ze)}contentMatchAt(ze){let tn=this.type.contentMatch.matchFragment(this.content,0,ze);if(!tn)throw new Error("Called contentMatchAt on a node with invalid content");return tn}canReplace(ze,tn,nn=Fragment.empty,rn=0,sn=nn.childCount){let an=this.contentMatchAt(ze).matchFragment(nn,rn,sn),ln=an&&an.matchFragment(this.content,tn);if(!ln||!ln.validEnd)return!1;for(let cn=rn;cn<sn;cn++)if(!this.type.allowsMarks(nn.child(cn).marks))return!1;return!0}canReplaceWith(ze,tn,nn,rn){if(rn&&!this.type.allowsMarks(rn))return!1;let sn=this.contentMatchAt(ze).matchType(nn),an=sn&&sn.matchFragment(this.content,tn);return an?an.validEnd:!1}canAppend(ze){return ze.content.size?this.canReplace(this.childCount,this.childCount,ze.content):this.type.compatibleContent(ze.type)}check(){this.type.checkContent(this.content);let ze=Mark$1.none;for(let tn=0;tn<this.marks.length;tn++)ze=this.marks[tn].addToSet(ze);if(!Mark$1.sameSet(ze,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(tn=>tn.type.name)}`);this.content.forEach(tn=>tn.check())}toJSON(){let ze={type:this.type.name};for(let tn in this.attrs){ze.attrs=this.attrs;break}return this.content.size&&(ze.content=this.content.toJSON()),this.marks.length&&(ze.marks=this.marks.map(tn=>tn.toJSON())),ze}static fromJSON(ze,tn){if(!tn)throw new RangeError("Invalid input for Node.fromJSON");let nn=null;if(tn.marks){if(!Array.isArray(tn.marks))throw new RangeError("Invalid mark data for Node.fromJSON");nn=tn.marks.map(ze.markFromJSON)}if(tn.type=="text"){if(typeof tn.text!="string")throw new RangeError("Invalid text node in JSON");return ze.text(tn.text,nn)}let rn=Fragment.fromJSON(ze,tn.content);return ze.nodeType(tn.type).create(tn.attrs,rn,nn)}};Node$2.prototype.text=void 0;class TextNode extends Node$2{constructor(ze,tn,nn,rn){if(super(ze,tn,null,rn),!nn)throw new RangeError("Empty text nodes are not allowed");this.text=nn}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(ze,tn){return this.text.slice(ze,tn)}get nodeSize(){return this.text.length}mark(ze){return ze==this.marks?this:new TextNode(this.type,this.attrs,this.text,ze)}withText(ze){return ze==this.text?this:new TextNode(this.type,this.attrs,ze,this.marks)}cut(ze=0,tn=this.text.length){return ze==0&&tn==this.text.length?this:this.withText(this.text.slice(ze,tn))}eq(ze){return this.sameMarkup(ze)&&this.text==ze.text}toJSON(){let ze=super.toJSON();return ze.text=this.text,ze}}function wrapMarks(en,ze){for(let tn=en.length-1;tn>=0;tn--)ze=en[tn].type.name+"("+ze+")";return ze}class ContentMatch{constructor(ze){this.validEnd=ze,this.next=[],this.wrapCache=[]}static parse(ze,tn){let nn=new TokenStream(ze,tn);if(nn.next==null)return ContentMatch.empty;let rn=parseExpr(nn);nn.next&&nn.err("Unexpected trailing text");let sn=dfa(nfa(rn));return checkForDeadEnds(sn,nn),sn}matchType(ze){for(let tn=0;tn<this.next.length;tn++)if(this.next[tn].type==ze)return this.next[tn].next;return null}matchFragment(ze,tn=0,nn=ze.childCount){let rn=this;for(let sn=tn;rn&&sn<nn;sn++)rn=rn.matchType(ze.child(sn).type);return rn}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let ze=0;ze<this.next.length;ze++){let{type:tn}=this.next[ze];if(!(tn.isText||tn.hasRequiredAttrs()))return tn}return null}compatible(ze){for(let tn=0;tn<this.next.length;tn++)for(let nn=0;nn<ze.next.length;nn++)if(this.next[tn].type==ze.next[nn].type)return!0;return!1}fillBefore(ze,tn=!1,nn=0){let rn=[this];function sn(an,ln){let cn=an.matchFragment(ze,nn);if(cn&&(!tn||cn.validEnd))return Fragment.from(ln.map(un=>un.createAndFill()));for(let un=0;un<an.next.length;un++){let{type:dn,next:fn}=an.next[un];if(!(dn.isText||dn.hasRequiredAttrs())&&rn.indexOf(fn)==-1){rn.push(fn);let pn=sn(fn,ln.concat(dn));if(pn)return pn}}return null}return sn(this,[])}findWrapping(ze){for(let nn=0;nn<this.wrapCache.length;nn+=2)if(this.wrapCache[nn]==ze)return this.wrapCache[nn+1];let tn=this.computeWrapping(ze);return this.wrapCache.push(ze,tn),tn}computeWrapping(ze){let tn=Object.create(null),nn=[{match:this,type:null,via:null}];for(;nn.length;){let rn=nn.shift(),sn=rn.match;if(sn.matchType(ze)){let an=[];for(let ln=rn;ln.type;ln=ln.via)an.push(ln.type);return an.reverse()}for(let an=0;an<sn.next.length;an++){let{type:ln,next:cn}=sn.next[an];!ln.isLeaf&&!ln.hasRequiredAttrs()&&!(ln.name in tn)&&(!rn.type||cn.validEnd)&&(nn.push({match:ln.contentMatch,type:ln,via:rn}),tn[ln.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(ze){if(ze>=this.next.length)throw new RangeError(`There's no ${ze}th edge in this content match`);return this.next[ze]}toString(){let ze=[];function tn(nn){ze.push(nn);for(let rn=0;rn<nn.next.length;rn++)ze.indexOf(nn.next[rn].next)==-1&&tn(nn.next[rn].next)}return tn(this),ze.map((nn,rn)=>{let sn=rn+(nn.validEnd?"*":" ")+" ";for(let an=0;an<nn.next.length;an++)sn+=(an?", ":"")+nn.next[an].type.name+"->"+ze.indexOf(nn.next[an].next);return sn}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(ze,tn){this.string=ze,this.nodeTypes=tn,this.inline=null,this.pos=0,this.tokens=ze.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(ze){return this.next==ze&&(this.pos++||!0)}err(ze){throw new SyntaxError(ze+" (in content expression '"+this.string+"')")}}function parseExpr(en){let ze=[];do ze.push(parseExprSeq(en));while(en.eat("|"));return ze.length==1?ze[0]:{type:"choice",exprs:ze}}function parseExprSeq(en){let ze=[];do ze.push(parseExprSubscript(en));while(en.next&&en.next!=")"&&en.next!="|");return ze.length==1?ze[0]:{type:"seq",exprs:ze}}function parseExprSubscript(en){let ze=parseExprAtom(en);for(;;)if(en.eat("+"))ze={type:"plus",expr:ze};else if(en.eat("*"))ze={type:"star",expr:ze};else if(en.eat("?"))ze={type:"opt",expr:ze};else if(en.eat("{"))ze=parseExprRange(en,ze);else break;return ze}function parseNum(en){/\D/.test(en.next)&&en.err("Expected number, got '"+en.next+"'");let ze=Number(en.next);return en.pos++,ze}function parseExprRange(en,ze){let tn=parseNum(en),nn=tn;return en.eat(",")&&(en.next!="}"?nn=parseNum(en):nn=-1),en.eat("}")||en.err("Unclosed braced range"),{type:"range",min:tn,max:nn,expr:ze}}function resolveName(en,ze){let tn=en.nodeTypes,nn=tn[ze];if(nn)return[nn];let rn=[];for(let sn in tn){let an=tn[sn];an.groups.indexOf(ze)>-1&&rn.push(an)}return rn.length==0&&en.err("No node type or group '"+ze+"' found"),rn}function parseExprAtom(en){if(en.eat("(")){let ze=parseExpr(en);return en.eat(")")||en.err("Missing closing paren"),ze}else if(/\W/.test(en.next))en.err("Unexpected token '"+en.next+"'");else{let ze=resolveName(en,en.next).map(tn=>(en.inline==null?en.inline=tn.isInline:en.inline!=tn.isInline&&en.err("Mixing inline and block content"),{type:"name",value:tn}));return en.pos++,ze.length==1?ze[0]:{type:"choice",exprs:ze}}}function nfa(en){let ze=[[]];return rn(sn(en,0),tn()),ze;function tn(){return ze.push([])-1}function nn(an,ln,cn){let un={term:cn,to:ln};return ze[an].push(un),un}function rn(an,ln){an.forEach(cn=>cn.to=ln)}function sn(an,ln){if(an.type=="choice")return an.exprs.reduce((cn,un)=>cn.concat(sn(un,ln)),[]);if(an.type=="seq")for(let cn=0;;cn++){let un=sn(an.exprs[cn],ln);if(cn==an.exprs.length-1)return un;rn(un,ln=tn())}else if(an.type=="star"){let cn=tn();return nn(ln,cn),rn(sn(an.expr,cn),cn),[nn(cn)]}else if(an.type=="plus"){let cn=tn();return rn(sn(an.expr,ln),cn),rn(sn(an.expr,cn),cn),[nn(cn)]}else{if(an.type=="opt")return[nn(ln)].concat(sn(an.expr,ln));if(an.type=="range"){let cn=ln;for(let un=0;un<an.min;un++){let dn=tn();rn(sn(an.expr,cn),dn),cn=dn}if(an.max==-1)rn(sn(an.expr,cn),cn);else for(let un=an.min;un<an.max;un++){let dn=tn();nn(cn,dn),rn(sn(an.expr,cn),dn),cn=dn}return[nn(cn)]}else{if(an.type=="name")return[nn(ln,void 0,an.value)];throw new Error("Unknown expr type")}}}}function cmp(en,ze){return ze-en}function nullFrom(en,ze){let tn=[];return nn(ze),tn.sort(cmp);function nn(rn){let sn=en[rn];if(sn.length==1&&!sn[0].term)return nn(sn[0].to);tn.push(rn);for(let an=0;an<sn.length;an++){let{term:ln,to:cn}=sn[an];!ln&&tn.indexOf(cn)==-1&&nn(cn)}}}function dfa(en){let ze=Object.create(null);return tn(nullFrom(en,0));function tn(nn){let rn=[];nn.forEach(an=>{en[an].forEach(({term:ln,to:cn})=>{if(!ln)return;let un;for(let dn=0;dn<rn.length;dn++)rn[dn][0]==ln&&(un=rn[dn][1]);nullFrom(en,cn).forEach(dn=>{un||rn.push([ln,un=[]]),un.indexOf(dn)==-1&&un.push(dn)})})});let sn=ze[nn.join(",")]=new ContentMatch(nn.indexOf(en.length-1)>-1);for(let an=0;an<rn.length;an++){let ln=rn[an][1].sort(cmp);sn.next.push({type:rn[an][0],next:ze[ln.join(",")]||tn(ln)})}return sn}}function checkForDeadEnds(en,ze){for(let tn=0,nn=[en];tn<nn.length;tn++){let rn=nn[tn],sn=!rn.validEnd,an=[];for(let ln=0;ln<rn.next.length;ln++){let{type:cn,next:un}=rn.next[ln];an.push(cn.name),sn&&!(cn.isText||cn.hasRequiredAttrs())&&(sn=!1),nn.indexOf(un)==-1&&nn.push(un)}sn&&ze.err("Only non-generatable nodes ("+an.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(en){let ze=Object.create(null);for(let tn in en){let nn=en[tn];if(!nn.hasDefault)return null;ze[tn]=nn.default}return ze}function computeAttrs(en,ze){let tn=Object.create(null);for(let nn in en){let rn=ze&&ze[nn];if(rn===void 0){let sn=en[nn];if(sn.hasDefault)rn=sn.default;else throw new RangeError("No value supplied for attribute "+nn)}tn[nn]=rn}return tn}function initAttrs(en){let ze=Object.create(null);if(en)for(let tn in en)ze[tn]=new Attribute(en[tn]);return ze}let NodeType$1=class pi{constructor(ze,tn,nn){this.name=ze,this.schema=tn,this.spec=nn,this.markSet=null,this.groups=nn.group?nn.group.split(" "):[],this.attrs=initAttrs(nn.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(nn.inline||ze=="text"),this.isText=ze=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let ze in this.attrs)if(this.attrs[ze].isRequired)return!0;return!1}compatibleContent(ze){return this==ze||this.contentMatch.compatible(ze.contentMatch)}computeAttrs(ze){return!ze&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,ze)}create(ze=null,tn,nn){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$2(this,this.computeAttrs(ze),Fragment.from(tn),Mark$1.setFrom(nn))}createChecked(ze=null,tn,nn){return tn=Fragment.from(tn),this.checkContent(tn),new Node$2(this,this.computeAttrs(ze),tn,Mark$1.setFrom(nn))}createAndFill(ze=null,tn,nn){if(ze=this.computeAttrs(ze),tn=Fragment.from(tn),tn.size){let an=this.contentMatch.fillBefore(tn);if(!an)return null;tn=an.append(tn)}let rn=this.contentMatch.matchFragment(tn),sn=rn&&rn.fillBefore(Fragment.empty,!0);return sn?new Node$2(this,ze,tn.append(sn),Mark$1.setFrom(nn)):null}validContent(ze){let tn=this.contentMatch.matchFragment(ze);if(!tn||!tn.validEnd)return!1;for(let nn=0;nn<ze.childCount;nn++)if(!this.allowsMarks(ze.child(nn).marks))return!1;return!0}checkContent(ze){if(!this.validContent(ze))throw new RangeError(`Invalid content for node ${this.name}: ${ze.toString().slice(0,50)}`)}allowsMarkType(ze){return this.markSet==null||this.markSet.indexOf(ze)>-1}allowsMarks(ze){if(this.markSet==null)return!0;for(let tn=0;tn<ze.length;tn++)if(!this.allowsMarkType(ze[tn].type))return!1;return!0}allowedMarks(ze){if(this.markSet==null)return ze;let tn;for(let nn=0;nn<ze.length;nn++)this.allowsMarkType(ze[nn].type)?tn&&tn.push(ze[nn]):tn||(tn=ze.slice(0,nn));return tn?tn.length?tn:Mark$1.none:ze}static compile(ze,tn){let nn=Object.create(null);ze.forEach((sn,an)=>nn[sn]=new pi(sn,tn,an));let rn=tn.spec.topNode||"doc";if(!nn[rn])throw new RangeError("Schema is missing its top node type ('"+rn+"')");if(!nn.text)throw new RangeError("Every schema needs a 'text' type");for(let sn in nn.text.attrs)throw new RangeError("The text node type should not have attributes");return nn}};class Attribute{constructor(ze){this.hasDefault=Object.prototype.hasOwnProperty.call(ze,"default"),this.default=ze.default}get isRequired(){return!this.hasDefault}}class MarkType{constructor(ze,tn,nn,rn){this.name=ze,this.rank=tn,this.schema=nn,this.spec=rn,this.attrs=initAttrs(rn.attrs),this.excluded=null;let sn=defaultAttrs(this.attrs);this.instance=sn?new Mark$1(this,sn):null}create(ze=null){return!ze&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,ze))}static compile(ze,tn){let nn=Object.create(null),rn=0;return ze.forEach((sn,an)=>nn[sn]=new MarkType(sn,rn++,tn,an)),nn}removeFromSet(ze){for(var tn=0;tn<ze.length;tn++)ze[tn].type==this&&(ze=ze.slice(0,tn).concat(ze.slice(tn+1)),tn--);return ze}isInSet(ze){for(let tn=0;tn<ze.length;tn++)if(ze[tn].type==this)return ze[tn]}excludes(ze){return this.excluded.indexOf(ze)>-1}}class Schema{constructor(ze){this.cached=Object.create(null);let tn=this.spec={};for(let rn in ze)tn[rn]=ze[rn];tn.nodes=OrderedMap.from(ze.nodes),tn.marks=OrderedMap.from(ze.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let nn=Object.create(null);for(let rn in this.nodes){if(rn in this.marks)throw new RangeError(rn+" can not be both a node and a mark");let sn=this.nodes[rn],an=sn.spec.content||"",ln=sn.spec.marks;sn.contentMatch=nn[an]||(nn[an]=ContentMatch.parse(an,this.nodes)),sn.inlineContent=sn.contentMatch.inlineContent,sn.markSet=ln=="_"?null:ln?gatherMarks(this,ln.split(" ")):ln==""||!sn.inlineContent?[]:null}for(let rn in this.marks){let sn=this.marks[rn],an=sn.spec.excludes;sn.excluded=an==null?[sn]:an==""?[]:gatherMarks(this,an.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(ze,tn=null,nn,rn){if(typeof ze=="string")ze=this.nodeType(ze);else if(ze instanceof NodeType$1){if(ze.schema!=this)throw new RangeError("Node type from different schema used ("+ze.name+")")}else throw new RangeError("Invalid node type: "+ze);return ze.createChecked(tn,nn,rn)}text(ze,tn){let nn=this.nodes.text;return new TextNode(nn,nn.defaultAttrs,ze,Mark$1.setFrom(tn))}mark(ze,tn){return typeof ze=="string"&&(ze=this.marks[ze]),ze.create(tn)}nodeFromJSON(ze){return Node$2.fromJSON(this,ze)}markFromJSON(ze){return Mark$1.fromJSON(this,ze)}nodeType(ze){let tn=this.nodes[ze];if(!tn)throw new RangeError("Unknown node type: "+ze);return tn}}function gatherMarks(en,ze){let tn=[];for(let nn=0;nn<ze.length;nn++){let rn=ze[nn],sn=en.marks[rn],an=sn;if(sn)tn.push(sn);else for(let ln in en.marks){let cn=en.marks[ln];(rn=="_"||cn.spec.group&&cn.spec.group.split(" ").indexOf(rn)>-1)&&tn.push(an=cn)}if(!an)throw new SyntaxError("Unknown mark type: '"+ze[nn]+"'")}return tn}let DOMParser$1=class di{constructor(ze,tn){this.schema=ze,this.rules=tn,this.tags=[],this.styles=[],tn.forEach(nn=>{nn.tag?this.tags.push(nn):nn.style&&this.styles.push(nn)}),this.normalizeLists=!this.tags.some(nn=>{if(!/^(ul|ol)\b/.test(nn.tag)||!nn.node)return!1;let rn=ze.nodes[nn.node];return rn.contentMatch.matchType(rn)})}parse(ze,tn={}){let nn=new ParseContext(this,tn,!1);return nn.addAll(ze,tn.from,tn.to),nn.finish()}parseSlice(ze,tn={}){let nn=new ParseContext(this,tn,!0);return nn.addAll(ze,tn.from,tn.to),Slice.maxOpen(nn.finish())}matchTag(ze,tn,nn){for(let rn=nn?this.tags.indexOf(nn)+1:0;rn<this.tags.length;rn++){let sn=this.tags[rn];if(matches(ze,sn.tag)&&(sn.namespace===void 0||ze.namespaceURI==sn.namespace)&&(!sn.context||tn.matchesContext(sn.context))){if(sn.getAttrs){let an=sn.getAttrs(ze);if(an===!1)continue;sn.attrs=an||void 0}return sn}}}matchStyle(ze,tn,nn,rn){for(let sn=rn?this.styles.indexOf(rn)+1:0;sn<this.styles.length;sn++){let an=this.styles[sn],ln=an.style;if(!(ln.indexOf(ze)!=0||an.context&&!nn.matchesContext(an.context)||ln.length>ze.length&&(ln.charCodeAt(ze.length)!=61||ln.slice(ze.length+1)!=tn))){if(an.getAttrs){let cn=an.getAttrs(tn);if(cn===!1)continue;an.attrs=cn||void 0}return an}}}static schemaRules(ze){let tn=[];function nn(rn){let sn=rn.priority==null?50:rn.priority,an=0;for(;an<tn.length;an++){let ln=tn[an];if((ln.priority==null?50:ln.priority)<sn)break}tn.splice(an,0,rn)}for(let rn in ze.marks){let sn=ze.marks[rn].spec.parseDOM;sn&&sn.forEach(an=>{nn(an=copy(an)),an.mark||an.ignore||an.clearMark||(an.mark=rn)})}for(let rn in ze.nodes){let sn=ze.nodes[rn].spec.parseDOM;sn&&sn.forEach(an=>{nn(an=copy(an)),an.node||an.ignore||an.mark||(an.node=rn)})}return tn}static fromSchema(ze){return ze.cached.domParser||(ze.cached.domParser=new di(ze,di.schemaRules(ze)))}};const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(en,ze,tn){return ze!=null?(ze?OPT_PRESERVE_WS:0)|(ze==="full"?OPT_PRESERVE_WS_FULL:0):en&&en.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:tn&~OPT_OPEN_LEFT}class NodeContext{constructor(ze,tn,nn,rn,sn,an,ln){this.type=ze,this.attrs=tn,this.marks=nn,this.pendingMarks=rn,this.solid=sn,this.options=ln,this.content=[],this.activeMarks=Mark$1.none,this.stashMarks=[],this.match=an||(ln&OPT_OPEN_LEFT?null:ze.contentMatch)}findWrapping(ze){if(!this.match){if(!this.type)return[];let tn=this.type.contentMatch.fillBefore(Fragment.from(ze));if(tn)this.match=this.type.contentMatch.matchFragment(tn);else{let nn=this.type.contentMatch,rn;return(rn=nn.findWrapping(ze.type))?(this.match=nn,rn):null}}return this.match.findWrapping(ze.type)}finish(ze){if(!(this.options&OPT_PRESERVE_WS)){let nn=this.content[this.content.length-1],rn;if(nn&&nn.isText&&(rn=/[ \t\r\n\u000c]+$/.exec(nn.text))){let sn=nn;nn.text.length==rn[0].length?this.content.pop():this.content[this.content.length-1]=sn.withText(sn.text.slice(0,sn.text.length-rn[0].length))}}let tn=Fragment.from(this.content);return!ze&&this.match&&(tn=tn.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,tn,this.marks):tn}popFromStashMark(ze){for(let tn=this.stashMarks.length-1;tn>=0;tn--)if(ze.eq(this.stashMarks[tn]))return this.stashMarks.splice(tn,1)[0]}applyPending(ze){for(let tn=0,nn=this.pendingMarks;tn<nn.length;tn++){let rn=nn[tn];(this.type?this.type.allowsMarkType(rn.type):markMayApply(rn.type,ze))&&!rn.isInSet(this.activeMarks)&&(this.activeMarks=rn.addToSet(this.activeMarks),this.pendingMarks=rn.removeFromSet(this.pendingMarks))}}inlineContext(ze){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:ze.parentNode&&!blockTags.hasOwnProperty(ze.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(ze,tn,nn){this.parser=ze,this.options=tn,this.isOpen=nn,this.open=0;let rn=tn.topNode,sn,an=wsOptionsFor(null,tn.preserveWhitespace,0)|(nn?OPT_OPEN_LEFT:0);rn?sn=new NodeContext(rn.type,rn.attrs,Mark$1.none,Mark$1.none,!0,tn.topMatch||rn.type.contentMatch,an):nn?sn=new NodeContext(null,null,Mark$1.none,Mark$1.none,!0,null,an):sn=new NodeContext(ze.schema.topNodeType,null,Mark$1.none,Mark$1.none,!0,null,an),this.nodes=[sn],this.find=tn.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(ze){ze.nodeType==3?this.addTextNode(ze):ze.nodeType==1&&this.addElement(ze)}withStyleRules(ze,tn){let nn=ze.getAttribute("style");if(!nn)return tn();let rn=this.readStyles(parseStyles(nn));if(!rn)return;let[sn,an]=rn,ln=this.top;for(let cn=0;cn<an.length;cn++)this.removePendingMark(an[cn],ln);for(let cn=0;cn<sn.length;cn++)this.addPendingMark(sn[cn]);tn();for(let cn=0;cn<sn.length;cn++)this.removePendingMark(sn[cn],ln);for(let cn=0;cn<an.length;cn++)this.addPendingMark(an[cn])}addTextNode(ze){let tn=ze.nodeValue,nn=this.top;if(nn.options&OPT_PRESERVE_WS_FULL||nn.inlineContext(ze)||/[^ \t\r\n\u000c]/.test(tn)){if(nn.options&OPT_PRESERVE_WS)nn.options&OPT_PRESERVE_WS_FULL?tn=tn.replace(/\r\n?/g,`
`):tn=tn.replace(/\r?\n|\r/g," ");else if(tn=tn.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(tn)&&this.open==this.nodes.length-1){let rn=nn.content[nn.content.length-1],sn=ze.previousSibling;(!rn||sn&&sn.nodeName=="BR"||rn.isText&&/[ \t\r\n\u000c]$/.test(rn.text))&&(tn=tn.slice(1))}tn&&this.insertNode(this.parser.schema.text(tn)),this.findInText(ze)}else this.findInside(ze)}addElement(ze,tn){let nn=ze.nodeName.toLowerCase(),rn;listTags.hasOwnProperty(nn)&&this.parser.normalizeLists&&normalizeList(ze);let sn=this.options.ruleFromNode&&this.options.ruleFromNode(ze)||(rn=this.parser.matchTag(ze,this,tn));if(sn?sn.ignore:ignoreTags.hasOwnProperty(nn))this.findInside(ze),this.ignoreFallback(ze);else if(!sn||sn.skip||sn.closeParent){sn&&sn.closeParent?this.open=Math.max(0,this.open-1):sn&&sn.skip.nodeType&&(ze=sn.skip);let an,ln=this.top,cn=this.needsBlock;if(blockTags.hasOwnProperty(nn))ln.content.length&&ln.content[0].isInline&&this.open&&(this.open--,ln=this.top),an=!0,ln.type||(this.needsBlock=!0);else if(!ze.firstChild){this.leafFallback(ze);return}sn&&sn.skip?this.addAll(ze):this.withStyleRules(ze,()=>this.addAll(ze)),an&&this.sync(ln),this.needsBlock=cn}else this.withStyleRules(ze,()=>{this.addElementByRule(ze,sn,sn.consuming===!1?rn:void 0)})}leafFallback(ze){ze.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(ze.ownerDocument.createTextNode(`
`))}ignoreFallback(ze){ze.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(ze){let tn=Mark$1.none,nn=Mark$1.none;for(let rn=0;rn<ze.length;rn+=2)for(let sn=void 0;;){let an=this.parser.matchStyle(ze[rn],ze[rn+1],this,sn);if(!an)break;if(an.ignore)return null;if(an.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(ln=>{an.clearMark(ln)&&(nn=ln.addToSet(nn))}):tn=this.parser.schema.marks[an.mark].create(an.attrs).addToSet(tn),an.consuming===!1)sn=an;else break}return[tn,nn]}addElementByRule(ze,tn,nn){let rn,sn,an;tn.node?(sn=this.parser.schema.nodes[tn.node],sn.isLeaf?this.insertNode(sn.create(tn.attrs))||this.leafFallback(ze):rn=this.enter(sn,tn.attrs||null,tn.preserveWhitespace)):(an=this.parser.schema.marks[tn.mark].create(tn.attrs),this.addPendingMark(an));let ln=this.top;if(sn&&sn.isLeaf)this.findInside(ze);else if(nn)this.addElement(ze,nn);else if(tn.getContent)this.findInside(ze),tn.getContent(ze,this.parser.schema).forEach(cn=>this.insertNode(cn));else{let cn=ze;typeof tn.contentElement=="string"?cn=ze.querySelector(tn.contentElement):typeof tn.contentElement=="function"?cn=tn.contentElement(ze):tn.contentElement&&(cn=tn.contentElement),this.findAround(ze,cn,!0),this.addAll(cn)}rn&&this.sync(ln)&&this.open--,an&&this.removePendingMark(an,ln)}addAll(ze,tn,nn){let rn=tn||0;for(let sn=tn?ze.childNodes[tn]:ze.firstChild,an=nn==null?null:ze.childNodes[nn];sn!=an;sn=sn.nextSibling,++rn)this.findAtPoint(ze,rn),this.addDOM(sn);this.findAtPoint(ze,rn)}findPlace(ze){let tn,nn;for(let rn=this.open;rn>=0;rn--){let sn=this.nodes[rn],an=sn.findWrapping(ze);if(an&&(!tn||tn.length>an.length)&&(tn=an,nn=sn,!an.length)||sn.solid)break}if(!tn)return!1;this.sync(nn);for(let rn=0;rn<tn.length;rn++)this.enterInner(tn[rn],null,!1);return!0}insertNode(ze){if(ze.isInline&&this.needsBlock&&!this.top.type){let tn=this.textblockFromContext();tn&&this.enterInner(tn)}if(this.findPlace(ze)){this.closeExtra();let tn=this.top;tn.applyPending(ze.type),tn.match&&(tn.match=tn.match.matchType(ze.type));let nn=tn.activeMarks;for(let rn=0;rn<ze.marks.length;rn++)(!tn.type||tn.type.allowsMarkType(ze.marks[rn].type))&&(nn=ze.marks[rn].addToSet(nn));return tn.content.push(ze.mark(nn)),!0}return!1}enter(ze,tn,nn){let rn=this.findPlace(ze.create(tn));return rn&&this.enterInner(ze,tn,!0,nn),rn}enterInner(ze,tn=null,nn=!1,rn){this.closeExtra();let sn=this.top;sn.applyPending(ze),sn.match=sn.match&&sn.match.matchType(ze);let an=wsOptionsFor(ze,rn,sn.options);sn.options&OPT_OPEN_LEFT&&sn.content.length==0&&(an|=OPT_OPEN_LEFT),this.nodes.push(new NodeContext(ze,tn,sn.activeMarks,sn.pendingMarks,nn,null,an)),this.open++}closeExtra(ze=!1){let tn=this.nodes.length-1;if(tn>this.open){for(;tn>this.open;tn--)this.nodes[tn-1].content.push(this.nodes[tn].finish(ze));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(ze){for(let tn=this.open;tn>=0;tn--)if(this.nodes[tn]==ze)return this.open=tn,!0;return!1}get currentPos(){this.closeExtra();let ze=0;for(let tn=this.open;tn>=0;tn--){let nn=this.nodes[tn].content;for(let rn=nn.length-1;rn>=0;rn--)ze+=nn[rn].nodeSize;tn&&ze++}return ze}findAtPoint(ze,tn){if(this.find)for(let nn=0;nn<this.find.length;nn++)this.find[nn].node==ze&&this.find[nn].offset==tn&&(this.find[nn].pos=this.currentPos)}findInside(ze){if(this.find)for(let tn=0;tn<this.find.length;tn++)this.find[tn].pos==null&&ze.nodeType==1&&ze.contains(this.find[tn].node)&&(this.find[tn].pos=this.currentPos)}findAround(ze,tn,nn){if(ze!=tn&&this.find)for(let rn=0;rn<this.find.length;rn++)this.find[rn].pos==null&&ze.nodeType==1&&ze.contains(this.find[rn].node)&&tn.compareDocumentPosition(this.find[rn].node)&(nn?2:4)&&(this.find[rn].pos=this.currentPos)}findInText(ze){if(this.find)for(let tn=0;tn<this.find.length;tn++)this.find[tn].node==ze&&(this.find[tn].pos=this.currentPos-(ze.nodeValue.length-this.find[tn].offset))}matchesContext(ze){if(ze.indexOf("|")>-1)return ze.split(/\s*\|\s*/).some(this.matchesContext,this);let tn=ze.split("/"),nn=this.options.context,rn=!this.isOpen&&(!nn||nn.parent.type==this.nodes[0].type),sn=-(nn?nn.depth+1:0)+(rn?0:1),an=(ln,cn)=>{for(;ln>=0;ln--){let un=tn[ln];if(un==""){if(ln==tn.length-1||ln==0)continue;for(;cn>=sn;cn--)if(an(ln-1,cn))return!0;return!1}else{let dn=cn>0||cn==0&&rn?this.nodes[cn].type:nn&&cn>=sn?nn.node(cn-sn).type:null;if(!dn||dn.name!=un&&dn.groups.indexOf(un)==-1)return!1;cn--}}return!0};return an(tn.length-1,this.open)}textblockFromContext(){let ze=this.options.context;if(ze)for(let tn=ze.depth;tn>=0;tn--){let nn=ze.node(tn).contentMatchAt(ze.indexAfter(tn)).defaultType;if(nn&&nn.isTextblock&&nn.defaultAttrs)return nn}for(let tn in this.parser.schema.nodes){let nn=this.parser.schema.nodes[tn];if(nn.isTextblock&&nn.defaultAttrs)return nn}}addPendingMark(ze){let tn=findSameMarkInSet(ze,this.top.pendingMarks);tn&&this.top.stashMarks.push(tn),this.top.pendingMarks=ze.addToSet(this.top.pendingMarks)}removePendingMark(ze,tn){for(let nn=this.open;nn>=0;nn--){let rn=this.nodes[nn];if(rn.pendingMarks.lastIndexOf(ze)>-1)rn.pendingMarks=ze.removeFromSet(rn.pendingMarks);else{rn.activeMarks=ze.removeFromSet(rn.activeMarks);let an=rn.popFromStashMark(ze);an&&rn.type&&rn.type.allowsMarkType(an.type)&&(rn.activeMarks=an.addToSet(rn.activeMarks))}if(rn==tn)break}}}function normalizeList(en){for(let ze=en.firstChild,tn=null;ze;ze=ze.nextSibling){let nn=ze.nodeType==1?ze.nodeName.toLowerCase():null;nn&&listTags.hasOwnProperty(nn)&&tn?(tn.appendChild(ze),ze=tn):nn=="li"?tn=ze:nn&&(tn=null)}}function matches(en,ze){return(en.matches||en.msMatchesSelector||en.webkitMatchesSelector||en.mozMatchesSelector).call(en,ze)}function parseStyles(en){let ze=/\s*([\w-]+)\s*:\s*([^;]+)/g,tn,nn=[];for(;tn=ze.exec(en);)nn.push(tn[1],tn[2].trim());return nn}function copy(en){let ze={};for(let tn in en)ze[tn]=en[tn];return ze}function markMayApply(en,ze){let tn=ze.schema.nodes;for(let nn in tn){let rn=tn[nn];if(!rn.allowsMarkType(en))continue;let sn=[],an=ln=>{sn.push(ln);for(let cn=0;cn<ln.edgeCount;cn++){let{type:un,next:dn}=ln.edge(cn);if(un==ze||sn.indexOf(dn)<0&&an(dn))return!0}};if(an(rn.contentMatch))return!0}}function findSameMarkInSet(en,ze){for(let tn=0;tn<ze.length;tn++)if(en.eq(ze[tn]))return ze[tn]}class DOMSerializer{constructor(ze,tn){this.nodes=ze,this.marks=tn}serializeFragment(ze,tn={},nn){nn||(nn=doc$1(tn).createDocumentFragment());let rn=nn,sn=[];return ze.forEach(an=>{if(sn.length||an.marks.length){let ln=0,cn=0;for(;ln<sn.length&&cn<an.marks.length;){let un=an.marks[cn];if(!this.marks[un.type.name]){cn++;continue}if(!un.eq(sn[ln][0])||un.type.spec.spanning===!1)break;ln++,cn++}for(;ln<sn.length;)rn=sn.pop()[1];for(;cn<an.marks.length;){let un=an.marks[cn++],dn=this.serializeMark(un,an.isInline,tn);dn&&(sn.push([un,rn]),rn.appendChild(dn.dom),rn=dn.contentDOM||dn.dom)}}rn.appendChild(this.serializeNodeInner(an,tn))}),nn}serializeNodeInner(ze,tn){let{dom:nn,contentDOM:rn}=DOMSerializer.renderSpec(doc$1(tn),this.nodes[ze.type.name](ze));if(rn){if(ze.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(ze.content,tn,rn)}return nn}serializeNode(ze,tn={}){let nn=this.serializeNodeInner(ze,tn);for(let rn=ze.marks.length-1;rn>=0;rn--){let sn=this.serializeMark(ze.marks[rn],ze.isInline,tn);sn&&((sn.contentDOM||sn.dom).appendChild(nn),nn=sn.dom)}return nn}serializeMark(ze,tn,nn={}){let rn=this.marks[ze.type.name];return rn&&DOMSerializer.renderSpec(doc$1(nn),rn(ze,tn))}static renderSpec(ze,tn,nn=null){if(typeof tn=="string")return{dom:ze.createTextNode(tn)};if(tn.nodeType!=null)return{dom:tn};if(tn.dom&&tn.dom.nodeType!=null)return tn;let rn=tn[0],sn=rn.indexOf(" ");sn>0&&(nn=rn.slice(0,sn),rn=rn.slice(sn+1));let an,ln=nn?ze.createElementNS(nn,rn):ze.createElement(rn),cn=tn[1],un=1;if(cn&&typeof cn=="object"&&cn.nodeType==null&&!Array.isArray(cn)){un=2;for(let dn in cn)if(cn[dn]!=null){let fn=dn.indexOf(" ");fn>0?ln.setAttributeNS(dn.slice(0,fn),dn.slice(fn+1),cn[dn]):ln.setAttribute(dn,cn[dn])}}for(let dn=un;dn<tn.length;dn++){let fn=tn[dn];if(fn===0){if(dn<tn.length-1||dn>un)throw new RangeError("Content hole must be the only child of its parent node");return{dom:ln,contentDOM:ln}}else{let{dom:pn,contentDOM:hn}=DOMSerializer.renderSpec(ze,fn,nn);if(ln.appendChild(pn),hn){if(an)throw new RangeError("Multiple content holes");an=hn}}}return{dom:ln,contentDOM:an}}static fromSchema(ze){return ze.cached.domSerializer||(ze.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(ze),this.marksFromSchema(ze)))}static nodesFromSchema(ze){let tn=gatherToDOM(ze.nodes);return tn.text||(tn.text=nn=>nn.text),tn}static marksFromSchema(ze){return gatherToDOM(ze.marks)}}function gatherToDOM(en){let ze={};for(let tn in en){let nn=en[tn].spec.toDOM;nn&&(ze[tn]=nn)}return ze}function doc$1(en){return en.document||window.document}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(en,ze){return en+ze*factor16}function recoverIndex(en){return en&lower16}function recoverOffset(en){return(en-(en&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(ze,tn,nn){this.pos=ze,this.delInfo=tn,this.recover=nn}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(ze,tn=!1){if(this.ranges=ze,this.inverted=tn,!ze.length&&StepMap.empty)return StepMap.empty}recover(ze){let tn=0,nn=recoverIndex(ze);if(!this.inverted)for(let rn=0;rn<nn;rn++)tn+=this.ranges[rn*3+2]-this.ranges[rn*3+1];return this.ranges[nn*3]+tn+recoverOffset(ze)}mapResult(ze,tn=1){return this._map(ze,tn,!1)}map(ze,tn=1){return this._map(ze,tn,!0)}_map(ze,tn,nn){let rn=0,sn=this.inverted?2:1,an=this.inverted?1:2;for(let ln=0;ln<this.ranges.length;ln+=3){let cn=this.ranges[ln]-(this.inverted?rn:0);if(cn>ze)break;let un=this.ranges[ln+sn],dn=this.ranges[ln+an],fn=cn+un;if(ze<=fn){let pn=un?ze==cn?-1:ze==fn?1:tn:tn,hn=cn+rn+(pn<0?0:dn);if(nn)return hn;let gn=ze==(tn<0?cn:fn)?null:makeRecover(ln/3,ze-cn),En=ze==cn?DEL_AFTER:ze==fn?DEL_BEFORE:DEL_ACROSS;return(tn<0?ze!=cn:ze!=fn)&&(En|=DEL_SIDE),new MapResult(hn,En,gn)}rn+=dn-un}return nn?ze+rn:new MapResult(ze+rn,0,null)}touches(ze,tn){let nn=0,rn=recoverIndex(tn),sn=this.inverted?2:1,an=this.inverted?1:2;for(let ln=0;ln<this.ranges.length;ln+=3){let cn=this.ranges[ln]-(this.inverted?nn:0);if(cn>ze)break;let un=this.ranges[ln+sn],dn=cn+un;if(ze<=dn&&ln==rn*3)return!0;nn+=this.ranges[ln+an]-un}return!1}forEach(ze){let tn=this.inverted?2:1,nn=this.inverted?1:2;for(let rn=0,sn=0;rn<this.ranges.length;rn+=3){let an=this.ranges[rn],ln=an-(this.inverted?sn:0),cn=an+(this.inverted?0:sn),un=this.ranges[rn+tn],dn=this.ranges[rn+nn];ze(ln,ln+un,cn,cn+dn),sn+=dn-un}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(ze){return ze==0?StepMap.empty:new StepMap(ze<0?[0,-ze,0]:[0,0,ze])}}StepMap.empty=new StepMap([]);class Mapping{constructor(ze=[],tn,nn=0,rn=ze.length){this.maps=ze,this.mirror=tn,this.from=nn,this.to=rn}slice(ze=0,tn=this.maps.length){return new Mapping(this.maps,this.mirror,ze,tn)}copy(){return new Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(ze,tn){this.to=this.maps.push(ze),tn!=null&&this.setMirror(this.maps.length-1,tn)}appendMapping(ze){for(let tn=0,nn=this.maps.length;tn<ze.maps.length;tn++){let rn=ze.getMirror(tn);this.appendMap(ze.maps[tn],rn!=null&&rn<tn?nn+rn:void 0)}}getMirror(ze){if(this.mirror){for(let tn=0;tn<this.mirror.length;tn++)if(this.mirror[tn]==ze)return this.mirror[tn+(tn%2?-1:1)]}}setMirror(ze,tn){this.mirror||(this.mirror=[]),this.mirror.push(ze,tn)}appendMappingInverted(ze){for(let tn=ze.maps.length-1,nn=this.maps.length+ze.maps.length;tn>=0;tn--){let rn=ze.getMirror(tn);this.appendMap(ze.maps[tn].invert(),rn!=null&&rn>tn?nn-rn-1:void 0)}}invert(){let ze=new Mapping;return ze.appendMappingInverted(this),ze}map(ze,tn=1){if(this.mirror)return this._map(ze,tn,!0);for(let nn=this.from;nn<this.to;nn++)ze=this.maps[nn].map(ze,tn);return ze}mapResult(ze,tn=1){return this._map(ze,tn,!1)}_map(ze,tn,nn){let rn=0;for(let sn=this.from;sn<this.to;sn++){let an=this.maps[sn],ln=an.mapResult(ze,tn);if(ln.recover!=null){let cn=this.getMirror(sn);if(cn!=null&&cn>sn&&cn<this.to){sn=cn,ze=this.maps[cn].recover(ln.recover);continue}}rn|=ln.delInfo,ze=ln.pos}return nn?ze:new MapResult(ze,rn,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(ze){return null}static fromJSON(ze,tn){if(!tn||!tn.stepType)throw new RangeError("Invalid input for Step.fromJSON");let nn=stepsByID[tn.stepType];if(!nn)throw new RangeError(`No step type ${tn.stepType} defined`);return nn.fromJSON(ze,tn)}static jsonID(ze,tn){if(ze in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+ze);return stepsByID[ze]=tn,tn.prototype.jsonID=ze,tn}}class StepResult{constructor(ze,tn){this.doc=ze,this.failed=tn}static ok(ze){return new StepResult(ze,null)}static fail(ze){return new StepResult(null,ze)}static fromReplace(ze,tn,nn,rn){try{return StepResult.ok(ze.replace(tn,nn,rn))}catch(sn){if(sn instanceof ReplaceError)return StepResult.fail(sn.message);throw sn}}}function mapFragment(en,ze,tn){let nn=[];for(let rn=0;rn<en.childCount;rn++){let sn=en.child(rn);sn.content.size&&(sn=sn.copy(mapFragment(sn.content,ze,sn))),sn.isInline&&(sn=ze(sn,tn,rn)),nn.push(sn)}return Fragment.fromArray(nn)}class AddMarkStep extends Step{constructor(ze,tn,nn){super(),this.from=ze,this.to=tn,this.mark=nn}apply(ze){let tn=ze.slice(this.from,this.to),nn=ze.resolve(this.from),rn=nn.node(nn.sharedDepth(this.to)),sn=new Slice(mapFragment(tn.content,(an,ln)=>!an.isAtom||!ln.type.allowsMarkType(this.mark.type)?an:an.mark(this.mark.addToSet(an.marks)),rn),tn.openStart,tn.openEnd);return StepResult.fromReplace(ze,this.from,this.to,sn)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(ze){let tn=ze.mapResult(this.from,1),nn=ze.mapResult(this.to,-1);return tn.deleted&&nn.deleted||tn.pos>=nn.pos?null:new AddMarkStep(tn.pos,nn.pos,this.mark)}merge(ze){return ze instanceof AddMarkStep&&ze.mark.eq(this.mark)&&this.from<=ze.to&&this.to>=ze.from?new AddMarkStep(Math.min(this.from,ze.from),Math.max(this.to,ze.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(ze,tn){if(typeof tn.from!="number"||typeof tn.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(tn.from,tn.to,ze.markFromJSON(tn.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(ze,tn,nn){super(),this.from=ze,this.to=tn,this.mark=nn}apply(ze){let tn=ze.slice(this.from,this.to),nn=new Slice(mapFragment(tn.content,rn=>rn.mark(this.mark.removeFromSet(rn.marks)),ze),tn.openStart,tn.openEnd);return StepResult.fromReplace(ze,this.from,this.to,nn)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(ze){let tn=ze.mapResult(this.from,1),nn=ze.mapResult(this.to,-1);return tn.deleted&&nn.deleted||tn.pos>=nn.pos?null:new RemoveMarkStep(tn.pos,nn.pos,this.mark)}merge(ze){return ze instanceof RemoveMarkStep&&ze.mark.eq(this.mark)&&this.from<=ze.to&&this.to>=ze.from?new RemoveMarkStep(Math.min(this.from,ze.from),Math.max(this.to,ze.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(ze,tn){if(typeof tn.from!="number"||typeof tn.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(tn.from,tn.to,ze.markFromJSON(tn.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(ze,tn){super(),this.pos=ze,this.mark=tn}apply(ze){let tn=ze.nodeAt(this.pos);if(!tn)return StepResult.fail("No node at mark step's position");let nn=tn.type.create(tn.attrs,null,this.mark.addToSet(tn.marks));return StepResult.fromReplace(ze,this.pos,this.pos+1,new Slice(Fragment.from(nn),0,tn.isLeaf?0:1))}invert(ze){let tn=ze.nodeAt(this.pos);if(tn){let nn=this.mark.addToSet(tn.marks);if(nn.length==tn.marks.length){for(let rn=0;rn<tn.marks.length;rn++)if(!tn.marks[rn].isInSet(nn))return new AddNodeMarkStep(this.pos,tn.marks[rn]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(ze){let tn=ze.mapResult(this.pos,1);return tn.deletedAfter?null:new AddNodeMarkStep(tn.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(ze,tn){if(typeof tn.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(tn.pos,ze.markFromJSON(tn.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(ze,tn){super(),this.pos=ze,this.mark=tn}apply(ze){let tn=ze.nodeAt(this.pos);if(!tn)return StepResult.fail("No node at mark step's position");let nn=tn.type.create(tn.attrs,null,this.mark.removeFromSet(tn.marks));return StepResult.fromReplace(ze,this.pos,this.pos+1,new Slice(Fragment.from(nn),0,tn.isLeaf?0:1))}invert(ze){let tn=ze.nodeAt(this.pos);return!tn||!this.mark.isInSet(tn.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(ze){let tn=ze.mapResult(this.pos,1);return tn.deletedAfter?null:new RemoveNodeMarkStep(tn.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(ze,tn){if(typeof tn.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(tn.pos,ze.markFromJSON(tn.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(ze,tn,nn,rn=!1){super(),this.from=ze,this.to=tn,this.slice=nn,this.structure=rn}apply(ze){return this.structure&&contentBetween(ze,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(ze,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(ze){return new ReplaceStep(this.from,this.from+this.slice.size,ze.slice(this.from,this.to))}map(ze){let tn=ze.mapResult(this.from,1),nn=ze.mapResult(this.to,-1);return tn.deletedAcross&&nn.deletedAcross?null:new ReplaceStep(tn.pos,Math.max(tn.pos,nn.pos),this.slice)}merge(ze){if(!(ze instanceof ReplaceStep)||ze.structure||this.structure)return null;if(this.from+this.slice.size==ze.from&&!this.slice.openEnd&&!ze.slice.openStart){let tn=this.slice.size+ze.slice.size==0?Slice.empty:new Slice(this.slice.content.append(ze.slice.content),this.slice.openStart,ze.slice.openEnd);return new ReplaceStep(this.from,this.to+(ze.to-ze.from),tn,this.structure)}else if(ze.to==this.from&&!this.slice.openStart&&!ze.slice.openEnd){let tn=this.slice.size+ze.slice.size==0?Slice.empty:new Slice(ze.slice.content.append(this.slice.content),ze.slice.openStart,this.slice.openEnd);return new ReplaceStep(ze.from,this.to,tn,this.structure)}else return null}toJSON(){let ze={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(ze.slice=this.slice.toJSON()),this.structure&&(ze.structure=!0),ze}static fromJSON(ze,tn){if(typeof tn.from!="number"||typeof tn.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(tn.from,tn.to,Slice.fromJSON(ze,tn.slice),!!tn.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(ze,tn,nn,rn,sn,an,ln=!1){super(),this.from=ze,this.to=tn,this.gapFrom=nn,this.gapTo=rn,this.slice=sn,this.insert=an,this.structure=ln}apply(ze){if(this.structure&&(contentBetween(ze,this.from,this.gapFrom)||contentBetween(ze,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let tn=ze.slice(this.gapFrom,this.gapTo);if(tn.openStart||tn.openEnd)return StepResult.fail("Gap is not a flat range");let nn=this.slice.insertAt(this.insert,tn.content);return nn?StepResult.fromReplace(ze,this.from,this.to,nn):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(ze){let tn=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+tn,this.from+this.insert,this.from+this.insert+tn,ze.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(ze){let tn=ze.mapResult(this.from,1),nn=ze.mapResult(this.to,-1),rn=ze.map(this.gapFrom,-1),sn=ze.map(this.gapTo,1);return tn.deletedAcross&&nn.deletedAcross||rn<tn.pos||sn>nn.pos?null:new ReplaceAroundStep(tn.pos,nn.pos,rn,sn,this.slice,this.insert,this.structure)}toJSON(){let ze={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(ze.slice=this.slice.toJSON()),this.structure&&(ze.structure=!0),ze}static fromJSON(ze,tn){if(typeof tn.from!="number"||typeof tn.to!="number"||typeof tn.gapFrom!="number"||typeof tn.gapTo!="number"||typeof tn.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(tn.from,tn.to,tn.gapFrom,tn.gapTo,Slice.fromJSON(ze,tn.slice),tn.insert,!!tn.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(en,ze,tn){let nn=en.resolve(ze),rn=tn-ze,sn=nn.depth;for(;rn>0&&sn>0&&nn.indexAfter(sn)==nn.node(sn).childCount;)sn--,rn--;if(rn>0){let an=nn.node(sn).maybeChild(nn.indexAfter(sn));for(;rn>0;){if(!an||an.isLeaf)return!0;an=an.firstChild,rn--}}return!1}function addMark(en,ze,tn,nn){let rn=[],sn=[],an,ln;en.doc.nodesBetween(ze,tn,(cn,un,dn)=>{if(!cn.isInline)return;let fn=cn.marks;if(!nn.isInSet(fn)&&dn.type.allowsMarkType(nn.type)){let pn=Math.max(un,ze),hn=Math.min(un+cn.nodeSize,tn),gn=nn.addToSet(fn);for(let En=0;En<fn.length;En++)fn[En].isInSet(gn)||(an&&an.to==pn&&an.mark.eq(fn[En])?an.to=hn:rn.push(an=new RemoveMarkStep(pn,hn,fn[En])));ln&&ln.to==pn?ln.to=hn:sn.push(ln=new AddMarkStep(pn,hn,nn))}}),rn.forEach(cn=>en.step(cn)),sn.forEach(cn=>en.step(cn))}function removeMark(en,ze,tn,nn){let rn=[],sn=0;en.doc.nodesBetween(ze,tn,(an,ln)=>{if(!an.isInline)return;sn++;let cn=null;if(nn instanceof MarkType){let un=an.marks,dn;for(;dn=nn.isInSet(un);)(cn||(cn=[])).push(dn),un=dn.removeFromSet(un)}else nn?nn.isInSet(an.marks)&&(cn=[nn]):cn=an.marks;if(cn&&cn.length){let un=Math.min(ln+an.nodeSize,tn);for(let dn=0;dn<cn.length;dn++){let fn=cn[dn],pn;for(let hn=0;hn<rn.length;hn++){let gn=rn[hn];gn.step==sn-1&&fn.eq(rn[hn].style)&&(pn=gn)}pn?(pn.to=un,pn.step=sn):rn.push({style:fn,from:Math.max(ln,ze),to:un,step:sn})}}}),rn.forEach(an=>en.step(new RemoveMarkStep(an.from,an.to,an.style)))}function clearIncompatible(en,ze,tn,nn=tn.contentMatch){let rn=en.doc.nodeAt(ze),sn=[],an=ze+1;for(let ln=0;ln<rn.childCount;ln++){let cn=rn.child(ln),un=an+cn.nodeSize,dn=nn.matchType(cn.type);if(!dn)sn.push(new ReplaceStep(an,un,Slice.empty));else{nn=dn;for(let fn=0;fn<cn.marks.length;fn++)tn.allowsMarkType(cn.marks[fn].type)||en.step(new RemoveMarkStep(an,un,cn.marks[fn]));if(cn.isText&&!tn.spec.code){let fn,pn=/\r?\n|\r/g,hn;for(;fn=pn.exec(cn.text);)hn||(hn=new Slice(Fragment.from(tn.schema.text(" ",tn.allowedMarks(cn.marks))),0,0)),sn.push(new ReplaceStep(an+fn.index,an+fn.index+fn[0].length,hn))}}an=un}if(!nn.validEnd){let ln=nn.fillBefore(Fragment.empty,!0);en.replace(an,an,new Slice(ln,0,0))}for(let ln=sn.length-1;ln>=0;ln--)en.step(sn[ln])}function canCut(en,ze,tn){return(ze==0||en.canReplace(ze,en.childCount))&&(tn==en.childCount||en.canReplace(0,tn))}function liftTarget(en){let tn=en.parent.content.cutByIndex(en.startIndex,en.endIndex);for(let nn=en.depth;;--nn){let rn=en.$from.node(nn),sn=en.$from.index(nn),an=en.$to.indexAfter(nn);if(nn<en.depth&&rn.canReplace(sn,an,tn))return nn;if(nn==0||rn.type.spec.isolating||!canCut(rn,sn,an))break}return null}function lift$2(en,ze,tn){let{$from:nn,$to:rn,depth:sn}=ze,an=nn.before(sn+1),ln=rn.after(sn+1),cn=an,un=ln,dn=Fragment.empty,fn=0;for(let gn=sn,En=!1;gn>tn;gn--)En||nn.index(gn)>0?(En=!0,dn=Fragment.from(nn.node(gn).copy(dn)),fn++):cn--;let pn=Fragment.empty,hn=0;for(let gn=sn,En=!1;gn>tn;gn--)En||rn.after(gn+1)<rn.end(gn)?(En=!0,pn=Fragment.from(rn.node(gn).copy(pn)),hn++):un++;en.step(new ReplaceAroundStep(cn,un,an,ln,new Slice(dn.append(pn),fn,hn),dn.size-fn,!0))}function findWrapping(en,ze,tn=null,nn=en){let rn=findWrappingOutside(en,ze),sn=rn&&findWrappingInside(nn,ze);return sn?rn.map(withAttrs).concat({type:ze,attrs:tn}).concat(sn.map(withAttrs)):null}function withAttrs(en){return{type:en,attrs:null}}function findWrappingOutside(en,ze){let{parent:tn,startIndex:nn,endIndex:rn}=en,sn=tn.contentMatchAt(nn).findWrapping(ze);if(!sn)return null;let an=sn.length?sn[0]:ze;return tn.canReplaceWith(nn,rn,an)?sn:null}function findWrappingInside(en,ze){let{parent:tn,startIndex:nn,endIndex:rn}=en,sn=tn.child(nn),an=ze.contentMatch.findWrapping(sn.type);if(!an)return null;let cn=(an.length?an[an.length-1]:ze).contentMatch;for(let un=nn;cn&&un<rn;un++)cn=cn.matchType(tn.child(un).type);return!cn||!cn.validEnd?null:an}function wrap(en,ze,tn){let nn=Fragment.empty;for(let an=tn.length-1;an>=0;an--){if(nn.size){let ln=tn[an].type.contentMatch.matchFragment(nn);if(!ln||!ln.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}nn=Fragment.from(tn[an].type.create(tn[an].attrs,nn))}let rn=ze.start,sn=ze.end;en.step(new ReplaceAroundStep(rn,sn,rn,sn,new Slice(nn,0,0),tn.length,!0))}function setBlockType$1(en,ze,tn,nn,rn){if(!nn.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let sn=en.steps.length;en.doc.nodesBetween(ze,tn,(an,ln)=>{if(an.isTextblock&&!an.hasMarkup(nn,rn)&&canChangeType(en.doc,en.mapping.slice(sn).map(ln),nn)){en.clearIncompatible(en.mapping.slice(sn).map(ln,1),nn);let cn=en.mapping.slice(sn),un=cn.map(ln,1),dn=cn.map(ln+an.nodeSize,1);return en.step(new ReplaceAroundStep(un,dn,un+1,dn-1,new Slice(Fragment.from(nn.create(rn,null,an.marks)),0,0),1,!0)),!1}})}function canChangeType(en,ze,tn){let nn=en.resolve(ze),rn=nn.index();return nn.parent.canReplaceWith(rn,rn+1,tn)}function setNodeMarkup(en,ze,tn,nn,rn){let sn=en.doc.nodeAt(ze);if(!sn)throw new RangeError("No node at given position");tn||(tn=sn.type);let an=tn.create(nn,null,rn||sn.marks);if(sn.isLeaf)return en.replaceWith(ze,ze+sn.nodeSize,an);if(!tn.validContent(sn.content))throw new RangeError("Invalid content for node type "+tn.name);en.step(new ReplaceAroundStep(ze,ze+sn.nodeSize,ze+1,ze+sn.nodeSize-1,new Slice(Fragment.from(an),0,0),1,!0))}function canSplit(en,ze,tn=1,nn){let rn=en.resolve(ze),sn=rn.depth-tn,an=nn&&nn[nn.length-1]||rn.parent;if(sn<0||rn.parent.type.spec.isolating||!rn.parent.canReplace(rn.index(),rn.parent.childCount)||!an.type.validContent(rn.parent.content.cutByIndex(rn.index(),rn.parent.childCount)))return!1;for(let un=rn.depth-1,dn=tn-2;un>sn;un--,dn--){let fn=rn.node(un),pn=rn.index(un);if(fn.type.spec.isolating)return!1;let hn=fn.content.cutByIndex(pn,fn.childCount),gn=nn&&nn[dn+1];gn&&(hn=hn.replaceChild(0,gn.type.create(gn.attrs)));let En=nn&&nn[dn]||fn;if(!fn.canReplace(pn+1,fn.childCount)||!En.type.validContent(hn))return!1}let ln=rn.indexAfter(sn),cn=nn&&nn[0];return rn.node(sn).canReplaceWith(ln,ln,cn?cn.type:rn.node(sn+1).type)}function split(en,ze,tn=1,nn){let rn=en.doc.resolve(ze),sn=Fragment.empty,an=Fragment.empty;for(let ln=rn.depth,cn=rn.depth-tn,un=tn-1;ln>cn;ln--,un--){sn=Fragment.from(rn.node(ln).copy(sn));let dn=nn&&nn[un];an=Fragment.from(dn?dn.type.create(dn.attrs,an):rn.node(ln).copy(an))}en.step(new ReplaceStep(ze,ze,new Slice(sn.append(an),tn,tn),!0))}function canJoin(en,ze){let tn=en.resolve(ze),nn=tn.index();return joinable(tn.nodeBefore,tn.nodeAfter)&&tn.parent.canReplace(nn,nn+1)}function joinable(en,ze){return!!(en&&ze&&!en.isLeaf&&en.canAppend(ze))}function joinPoint(en,ze,tn=-1){let nn=en.resolve(ze);for(let rn=nn.depth;;rn--){let sn,an,ln=nn.index(rn);if(rn==nn.depth?(sn=nn.nodeBefore,an=nn.nodeAfter):tn>0?(sn=nn.node(rn+1),ln++,an=nn.node(rn).maybeChild(ln)):(sn=nn.node(rn).maybeChild(ln-1),an=nn.node(rn+1)),sn&&!sn.isTextblock&&joinable(sn,an)&&nn.node(rn).canReplace(ln,ln+1))return ze;if(rn==0)break;ze=tn<0?nn.before(rn):nn.after(rn)}}function join(en,ze,tn){let nn=new ReplaceStep(ze-tn,ze+tn,Slice.empty,!0);en.step(nn)}function insertPoint(en,ze,tn){let nn=en.resolve(ze);if(nn.parent.canReplaceWith(nn.index(),nn.index(),tn))return ze;if(nn.parentOffset==0)for(let rn=nn.depth-1;rn>=0;rn--){let sn=nn.index(rn);if(nn.node(rn).canReplaceWith(sn,sn,tn))return nn.before(rn+1);if(sn>0)return null}if(nn.parentOffset==nn.parent.content.size)for(let rn=nn.depth-1;rn>=0;rn--){let sn=nn.indexAfter(rn);if(nn.node(rn).canReplaceWith(sn,sn,tn))return nn.after(rn+1);if(sn<nn.node(rn).childCount)return null}return null}function dropPoint(en,ze,tn){let nn=en.resolve(ze);if(!tn.content.size)return ze;let rn=tn.content;for(let sn=0;sn<tn.openStart;sn++)rn=rn.firstChild.content;for(let sn=1;sn<=(tn.openStart==0&&tn.size?2:1);sn++)for(let an=nn.depth;an>=0;an--){let ln=an==nn.depth?0:nn.pos<=(nn.start(an+1)+nn.end(an+1))/2?-1:1,cn=nn.index(an)+(ln>0?1:0),un=nn.node(an),dn=!1;if(sn==1)dn=un.canReplace(cn,cn,rn);else{let fn=un.contentMatchAt(cn).findWrapping(rn.firstChild.type);dn=fn&&un.canReplaceWith(cn,cn,fn[0])}if(dn)return ln==0?nn.pos:ln<0?nn.before(an+1):nn.after(an+1)}return null}function replaceStep(en,ze,tn=ze,nn=Slice.empty){if(ze==tn&&!nn.size)return null;let rn=en.resolve(ze),sn=en.resolve(tn);return fitsTrivially(rn,sn,nn)?new ReplaceStep(ze,tn,nn):new Fitter(rn,sn,nn).fit()}function fitsTrivially(en,ze,tn){return!tn.openStart&&!tn.openEnd&&en.start()==ze.start()&&en.parent.canReplace(en.index(),ze.index(),tn.content)}class Fitter{constructor(ze,tn,nn){this.$from=ze,this.$to=tn,this.unplaced=nn,this.frontier=[],this.placed=Fragment.empty;for(let rn=0;rn<=ze.depth;rn++){let sn=ze.node(rn);this.frontier.push({type:sn.type,match:sn.contentMatchAt(ze.indexAfter(rn))})}for(let rn=ze.depth;rn>0;rn--)this.placed=Fragment.from(ze.node(rn).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let un=this.findFittable();un?this.placeNodes(un):this.openMore()||this.dropNode()}let ze=this.mustMoveInline(),tn=this.placed.size-this.depth-this.$from.depth,nn=this.$from,rn=this.close(ze<0?this.$to:nn.doc.resolve(ze));if(!rn)return null;let sn=this.placed,an=nn.depth,ln=rn.depth;for(;an&&ln&&sn.childCount==1;)sn=sn.firstChild.content,an--,ln--;let cn=new Slice(sn,an,ln);return ze>-1?new ReplaceAroundStep(nn.pos,ze,this.$to.pos,this.$to.end(),cn,tn):cn.size||nn.pos!=this.$to.pos?new ReplaceStep(nn.pos,rn.pos,cn):null}findFittable(){let ze=this.unplaced.openStart;for(let tn=this.unplaced.content,nn=0,rn=this.unplaced.openEnd;nn<ze;nn++){let sn=tn.firstChild;if(tn.childCount>1&&(rn=0),sn.type.spec.isolating&&rn<=nn){ze=nn;break}tn=sn.content}for(let tn=1;tn<=2;tn++)for(let nn=tn==1?ze:this.unplaced.openStart;nn>=0;nn--){let rn,sn=null;nn?(sn=contentAt(this.unplaced.content,nn-1).firstChild,rn=sn.content):rn=this.unplaced.content;let an=rn.firstChild;for(let ln=this.depth;ln>=0;ln--){let{type:cn,match:un}=this.frontier[ln],dn,fn=null;if(tn==1&&(an?un.matchType(an.type)||(fn=un.fillBefore(Fragment.from(an),!1)):sn&&cn.compatibleContent(sn.type)))return{sliceDepth:nn,frontierDepth:ln,parent:sn,inject:fn};if(tn==2&&an&&(dn=un.findWrapping(an.type)))return{sliceDepth:nn,frontierDepth:ln,parent:sn,wrap:dn};if(sn&&un.matchType(sn.type))break}}}openMore(){let{content:ze,openStart:tn,openEnd:nn}=this.unplaced,rn=contentAt(ze,tn);return!rn.childCount||rn.firstChild.isLeaf?!1:(this.unplaced=new Slice(ze,tn+1,Math.max(nn,rn.size+tn>=ze.size-nn?tn+1:0)),!0)}dropNode(){let{content:ze,openStart:tn,openEnd:nn}=this.unplaced,rn=contentAt(ze,tn);if(rn.childCount<=1&&tn>0){let sn=ze.size-tn<=tn+rn.size;this.unplaced=new Slice(dropFromFragment(ze,tn-1,1),tn-1,sn?tn-1:nn)}else this.unplaced=new Slice(dropFromFragment(ze,tn,1),tn,nn)}placeNodes({sliceDepth:ze,frontierDepth:tn,parent:nn,inject:rn,wrap:sn}){for(;this.depth>tn;)this.closeFrontierNode();if(sn)for(let En=0;En<sn.length;En++)this.openFrontierNode(sn[En]);let an=this.unplaced,ln=nn?nn.content:an.content,cn=an.openStart-ze,un=0,dn=[],{match:fn,type:pn}=this.frontier[tn];if(rn){for(let En=0;En<rn.childCount;En++)dn.push(rn.child(En));fn=fn.matchFragment(rn)}let hn=ln.size+ze-(an.content.size-an.openEnd);for(;un<ln.childCount;){let En=ln.child(un),mn=fn.matchType(En.type);if(!mn)break;un++,(un>1||cn==0||En.content.size)&&(fn=mn,dn.push(closeNodeStart(En.mark(pn.allowedMarks(En.marks)),un==1?cn:0,un==ln.childCount?hn:-1)))}let gn=un==ln.childCount;gn||(hn=-1),this.placed=addToFragment(this.placed,tn,Fragment.from(dn)),this.frontier[tn].match=fn,gn&&hn<0&&nn&&nn.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let En=0,mn=ln;En<hn;En++){let bn=mn.lastChild;this.frontier.push({type:bn.type,match:bn.contentMatchAt(bn.childCount)}),mn=bn.content}this.unplaced=gn?ze==0?Slice.empty:new Slice(dropFromFragment(an.content,ze-1,1),ze-1,hn<0?an.openEnd:ze-1):new Slice(dropFromFragment(an.content,ze,un),an.openStart,an.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let ze=this.frontier[this.depth],tn;if(!ze.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,ze.type,ze.match,!1)||this.$to.depth==this.depth&&(tn=this.findCloseLevel(this.$to))&&tn.depth==this.depth)return-1;let{depth:nn}=this.$to,rn=this.$to.after(nn);for(;nn>1&&rn==this.$to.end(--nn);)++rn;return rn}findCloseLevel(ze){e:for(let tn=Math.min(this.depth,ze.depth);tn>=0;tn--){let{match:nn,type:rn}=this.frontier[tn],sn=tn<ze.depth&&ze.end(tn+1)==ze.pos+(ze.depth-(tn+1)),an=contentAfterFits(ze,tn,rn,nn,sn);if(an){for(let ln=tn-1;ln>=0;ln--){let{match:cn,type:un}=this.frontier[ln],dn=contentAfterFits(ze,ln,un,cn,!0);if(!dn||dn.childCount)continue e}return{depth:tn,fit:an,move:sn?ze.doc.resolve(ze.after(tn+1)):ze}}}}close(ze){let tn=this.findCloseLevel(ze);if(!tn)return null;for(;this.depth>tn.depth;)this.closeFrontierNode();tn.fit.childCount&&(this.placed=addToFragment(this.placed,tn.depth,tn.fit)),ze=tn.move;for(let nn=tn.depth+1;nn<=ze.depth;nn++){let rn=ze.node(nn),sn=rn.type.contentMatch.fillBefore(rn.content,!0,ze.index(nn));this.openFrontierNode(rn.type,rn.attrs,sn)}return ze}openFrontierNode(ze,tn=null,nn){let rn=this.frontier[this.depth];rn.match=rn.match.matchType(ze),this.placed=addToFragment(this.placed,this.depth,Fragment.from(ze.create(tn,nn))),this.frontier.push({type:ze,match:ze.contentMatch})}closeFrontierNode(){let tn=this.frontier.pop().match.fillBefore(Fragment.empty,!0);tn.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,tn))}}function dropFromFragment(en,ze,tn){return ze==0?en.cutByIndex(tn,en.childCount):en.replaceChild(0,en.firstChild.copy(dropFromFragment(en.firstChild.content,ze-1,tn)))}function addToFragment(en,ze,tn){return ze==0?en.append(tn):en.replaceChild(en.childCount-1,en.lastChild.copy(addToFragment(en.lastChild.content,ze-1,tn)))}function contentAt(en,ze){for(let tn=0;tn<ze;tn++)en=en.firstChild.content;return en}function closeNodeStart(en,ze,tn){if(ze<=0)return en;let nn=en.content;return ze>1&&(nn=nn.replaceChild(0,closeNodeStart(nn.firstChild,ze-1,nn.childCount==1?tn-1:0))),ze>0&&(nn=en.type.contentMatch.fillBefore(nn).append(nn),tn<=0&&(nn=nn.append(en.type.contentMatch.matchFragment(nn).fillBefore(Fragment.empty,!0)))),en.copy(nn)}function contentAfterFits(en,ze,tn,nn,rn){let sn=en.node(ze),an=rn?en.indexAfter(ze):en.index(ze);if(an==sn.childCount&&!tn.compatibleContent(sn.type))return null;let ln=nn.fillBefore(sn.content,!0,an);return ln&&!invalidMarks(tn,sn.content,an)?ln:null}function invalidMarks(en,ze,tn){for(let nn=tn;nn<ze.childCount;nn++)if(!en.allowsMarks(ze.child(nn).marks))return!0;return!1}function definesContent(en){return en.spec.defining||en.spec.definingForContent}function replaceRange(en,ze,tn,nn){if(!nn.size)return en.deleteRange(ze,tn);let rn=en.doc.resolve(ze),sn=en.doc.resolve(tn);if(fitsTrivially(rn,sn,nn))return en.step(new ReplaceStep(ze,tn,nn));let an=coveredDepths(rn,en.doc.resolve(tn));an[an.length-1]==0&&an.pop();let ln=-(rn.depth+1);an.unshift(ln);for(let pn=rn.depth,hn=rn.pos-1;pn>0;pn--,hn--){let gn=rn.node(pn).type.spec;if(gn.defining||gn.definingAsContext||gn.isolating)break;an.indexOf(pn)>-1?ln=pn:rn.before(pn)==hn&&an.splice(1,0,-pn)}let cn=an.indexOf(ln),un=[],dn=nn.openStart;for(let pn=nn.content,hn=0;;hn++){let gn=pn.firstChild;if(un.push(gn),hn==nn.openStart)break;pn=gn.content}for(let pn=dn-1;pn>=0;pn--){let hn=un[pn],gn=definesContent(hn.type);if(gn&&!hn.sameMarkup(rn.node(Math.abs(ln)-1)))dn=pn;else if(gn||!hn.type.isTextblock)break}for(let pn=nn.openStart;pn>=0;pn--){let hn=(pn+dn+1)%(nn.openStart+1),gn=un[hn];if(gn)for(let En=0;En<an.length;En++){let mn=an[(En+cn)%an.length],bn=!0;mn<0&&(bn=!1,mn=-mn);let Tn=rn.node(mn-1),_n=rn.index(mn-1);if(Tn.canReplaceWith(_n,_n,gn.type,gn.marks))return en.replace(rn.before(mn),bn?sn.after(mn):tn,new Slice(closeFragment(nn.content,0,nn.openStart,hn),hn,nn.openEnd))}}let fn=en.steps.length;for(let pn=an.length-1;pn>=0&&(en.replace(ze,tn,nn),!(en.steps.length>fn));pn--){let hn=an[pn];hn<0||(ze=rn.before(hn),tn=sn.after(hn))}}function closeFragment(en,ze,tn,nn,rn){if(ze<tn){let sn=en.firstChild;en=en.replaceChild(0,sn.copy(closeFragment(sn.content,ze+1,tn,nn,sn)))}if(ze>nn){let sn=rn.contentMatchAt(0),an=sn.fillBefore(en).append(en);en=an.append(sn.matchFragment(an).fillBefore(Fragment.empty,!0))}return en}function replaceRangeWith(en,ze,tn,nn){if(!nn.isInline&&ze==tn&&en.doc.resolve(ze).parent.content.size){let rn=insertPoint(en.doc,ze,nn.type);rn!=null&&(ze=tn=rn)}en.replaceRange(ze,tn,new Slice(Fragment.from(nn),0,0))}function deleteRange$1(en,ze,tn){let nn=en.doc.resolve(ze),rn=en.doc.resolve(tn),sn=coveredDepths(nn,rn);for(let an=0;an<sn.length;an++){let ln=sn[an],cn=an==sn.length-1;if(cn&&ln==0||nn.node(ln).type.contentMatch.validEnd)return en.delete(nn.start(ln),rn.end(ln));if(ln>0&&(cn||nn.node(ln-1).canReplace(nn.index(ln-1),rn.indexAfter(ln-1))))return en.delete(nn.before(ln),rn.after(ln))}for(let an=1;an<=nn.depth&&an<=rn.depth;an++)if(ze-nn.start(an)==nn.depth-an&&tn>nn.end(an)&&rn.end(an)-tn!=rn.depth-an)return en.delete(nn.before(an),tn);en.delete(ze,tn)}function coveredDepths(en,ze){let tn=[],nn=Math.min(en.depth,ze.depth);for(let rn=nn;rn>=0;rn--){let sn=en.start(rn);if(sn<en.pos-(en.depth-rn)||ze.end(rn)>ze.pos+(ze.depth-rn)||en.node(rn).type.spec.isolating||ze.node(rn).type.spec.isolating)break;(sn==ze.start(rn)||rn==en.depth&&rn==ze.depth&&en.parent.inlineContent&&ze.parent.inlineContent&&rn&&ze.start(rn-1)==sn-1)&&tn.push(rn)}return tn}class AttrStep extends Step{constructor(ze,tn,nn){super(),this.pos=ze,this.attr=tn,this.value=nn}apply(ze){let tn=ze.nodeAt(this.pos);if(!tn)return StepResult.fail("No node at attribute step's position");let nn=Object.create(null);for(let sn in tn.attrs)nn[sn]=tn.attrs[sn];nn[this.attr]=this.value;let rn=tn.type.create(nn,null,tn.marks);return StepResult.fromReplace(ze,this.pos,this.pos+1,new Slice(Fragment.from(rn),0,tn.isLeaf?0:1))}getMap(){return StepMap.empty}invert(ze){return new AttrStep(this.pos,this.attr,ze.nodeAt(this.pos).attrs[this.attr])}map(ze){let tn=ze.mapResult(this.pos,1);return tn.deletedAfter?null:new AttrStep(tn.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(ze,tn){if(typeof tn.pos!="number"||typeof tn.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(tn.pos,tn.attr,tn.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(ze,tn){super(),this.attr=ze,this.value=tn}apply(ze){let tn=Object.create(null);for(let rn in ze.attrs)tn[rn]=ze.attrs[rn];tn[this.attr]=this.value;let nn=ze.type.create(tn,ze.content,ze.marks);return StepResult.ok(nn)}getMap(){return StepMap.empty}invert(ze){return new DocAttrStep(this.attr,ze.attrs[this.attr])}map(ze){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(ze,tn){if(typeof tn.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(tn.attr,tn.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function en(ze){let tn=Error.call(this,ze);return tn.__proto__=en.prototype,tn};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";class Transform{constructor(ze){this.doc=ze,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(ze){let tn=this.maybeStep(ze);if(tn.failed)throw new TransformError(tn.failed);return this}maybeStep(ze){let tn=ze.apply(this.doc);return tn.failed||this.addStep(ze,tn.doc),tn}get docChanged(){return this.steps.length>0}addStep(ze,tn){this.docs.push(this.doc),this.steps.push(ze),this.mapping.appendMap(ze.getMap()),this.doc=tn}replace(ze,tn=ze,nn=Slice.empty){let rn=replaceStep(this.doc,ze,tn,nn);return rn&&this.step(rn),this}replaceWith(ze,tn,nn){return this.replace(ze,tn,new Slice(Fragment.from(nn),0,0))}delete(ze,tn){return this.replace(ze,tn,Slice.empty)}insert(ze,tn){return this.replaceWith(ze,ze,tn)}replaceRange(ze,tn,nn){return replaceRange(this,ze,tn,nn),this}replaceRangeWith(ze,tn,nn){return replaceRangeWith(this,ze,tn,nn),this}deleteRange(ze,tn){return deleteRange$1(this,ze,tn),this}lift(ze,tn){return lift$2(this,ze,tn),this}join(ze,tn=1){return join(this,ze,tn),this}wrap(ze,tn){return wrap(this,ze,tn),this}setBlockType(ze,tn=ze,nn,rn=null){return setBlockType$1(this,ze,tn,nn,rn),this}setNodeMarkup(ze,tn,nn=null,rn){return setNodeMarkup(this,ze,tn,nn,rn),this}setNodeAttribute(ze,tn,nn){return this.step(new AttrStep(ze,tn,nn)),this}setDocAttribute(ze,tn){return this.step(new DocAttrStep(ze,tn)),this}addNodeMark(ze,tn){return this.step(new AddNodeMarkStep(ze,tn)),this}removeNodeMark(ze,tn){if(!(tn instanceof Mark$1)){let nn=this.doc.nodeAt(ze);if(!nn)throw new RangeError("No node at position "+ze);if(tn=tn.isInSet(nn.marks),!tn)return this}return this.step(new RemoveNodeMarkStep(ze,tn)),this}split(ze,tn=1,nn){return split(this,ze,tn,nn),this}addMark(ze,tn,nn){return addMark(this,ze,tn,nn),this}removeMark(ze,tn,nn){return removeMark(this,ze,tn,nn),this}clearIncompatible(ze,tn,nn){return clearIncompatible(this,ze,tn,nn),this}}const classesById=Object.create(null);class Selection{constructor(ze,tn,nn){this.$anchor=ze,this.$head=tn,this.ranges=nn||[new SelectionRange(ze.min(tn),ze.max(tn))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let ze=this.ranges;for(let tn=0;tn<ze.length;tn++)if(ze[tn].$from.pos!=ze[tn].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(ze,tn=Slice.empty){let nn=tn.content.lastChild,rn=null;for(let ln=0;ln<tn.openEnd;ln++)rn=nn,nn=nn.lastChild;let sn=ze.steps.length,an=this.ranges;for(let ln=0;ln<an.length;ln++){let{$from:cn,$to:un}=an[ln],dn=ze.mapping.slice(sn);ze.replaceRange(dn.map(cn.pos),dn.map(un.pos),ln?Slice.empty:tn),ln==0&&selectionToInsertionEnd$1(ze,sn,(nn?nn.isInline:rn&&rn.isTextblock)?-1:1)}}replaceWith(ze,tn){let nn=ze.steps.length,rn=this.ranges;for(let sn=0;sn<rn.length;sn++){let{$from:an,$to:ln}=rn[sn],cn=ze.mapping.slice(nn),un=cn.map(an.pos),dn=cn.map(ln.pos);sn?ze.deleteRange(un,dn):(ze.replaceRangeWith(un,dn,tn),selectionToInsertionEnd$1(ze,nn,tn.isInline?-1:1))}}static findFrom(ze,tn,nn=!1){let rn=ze.parent.inlineContent?new TextSelection(ze):findSelectionIn(ze.node(0),ze.parent,ze.pos,ze.index(),tn,nn);if(rn)return rn;for(let sn=ze.depth-1;sn>=0;sn--){let an=tn<0?findSelectionIn(ze.node(0),ze.node(sn),ze.before(sn+1),ze.index(sn),tn,nn):findSelectionIn(ze.node(0),ze.node(sn),ze.after(sn+1),ze.index(sn)+1,tn,nn);if(an)return an}return null}static near(ze,tn=1){return this.findFrom(ze,tn)||this.findFrom(ze,-tn)||new AllSelection(ze.node(0))}static atStart(ze){return findSelectionIn(ze,ze,0,0,1)||new AllSelection(ze)}static atEnd(ze){return findSelectionIn(ze,ze,ze.content.size,ze.childCount,-1)||new AllSelection(ze)}static fromJSON(ze,tn){if(!tn||!tn.type)throw new RangeError("Invalid input for Selection.fromJSON");let nn=classesById[tn.type];if(!nn)throw new RangeError(`No selection type ${tn.type} defined`);return nn.fromJSON(ze,tn)}static jsonID(ze,tn){if(ze in classesById)throw new RangeError("Duplicate use of selection JSON ID "+ze);return classesById[ze]=tn,tn.prototype.jsonID=ze,tn}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(ze,tn){this.$from=ze,this.$to=tn}}let warnedAboutTextSelection=!1;function checkTextSelection(en){!warnedAboutTextSelection&&!en.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+en.parent.type.name+")"))}class TextSelection extends Selection{constructor(ze,tn=ze){checkTextSelection(ze),checkTextSelection(tn),super(ze,tn)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(ze,tn){let nn=ze.resolve(tn.map(this.head));if(!nn.parent.inlineContent)return Selection.near(nn);let rn=ze.resolve(tn.map(this.anchor));return new TextSelection(rn.parent.inlineContent?rn:nn,nn)}replace(ze,tn=Slice.empty){if(super.replace(ze,tn),tn==Slice.empty){let nn=this.$from.marksAcross(this.$to);nn&&ze.ensureMarks(nn)}}eq(ze){return ze instanceof TextSelection&&ze.anchor==this.anchor&&ze.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(ze,tn){if(typeof tn.anchor!="number"||typeof tn.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(ze.resolve(tn.anchor),ze.resolve(tn.head))}static create(ze,tn,nn=tn){let rn=ze.resolve(tn);return new this(rn,nn==tn?rn:ze.resolve(nn))}static between(ze,tn,nn){let rn=ze.pos-tn.pos;if((!nn||rn)&&(nn=rn>=0?1:-1),!tn.parent.inlineContent){let sn=Selection.findFrom(tn,nn,!0)||Selection.findFrom(tn,-nn,!0);if(sn)tn=sn.$head;else return Selection.near(tn,nn)}return ze.parent.inlineContent||(rn==0?ze=tn:(ze=(Selection.findFrom(ze,-nn,!0)||Selection.findFrom(ze,nn,!0)).$anchor,ze.pos<tn.pos!=rn<0&&(ze=tn))),new TextSelection(ze,tn)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(ze,tn){this.anchor=ze,this.head=tn}map(ze){return new TextBookmark(ze.map(this.anchor),ze.map(this.head))}resolve(ze){return TextSelection.between(ze.resolve(this.anchor),ze.resolve(this.head))}}class NodeSelection extends Selection{constructor(ze){let tn=ze.nodeAfter,nn=ze.node(0).resolve(ze.pos+tn.nodeSize);super(ze,nn),this.node=tn}map(ze,tn){let{deleted:nn,pos:rn}=tn.mapResult(this.anchor),sn=ze.resolve(rn);return nn?Selection.near(sn):new NodeSelection(sn)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(ze){return ze instanceof NodeSelection&&ze.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(ze,tn){if(typeof tn.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(ze.resolve(tn.anchor))}static create(ze,tn){return new NodeSelection(ze.resolve(tn))}static isSelectable(ze){return!ze.isText&&ze.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(ze){this.anchor=ze}map(ze){let{deleted:tn,pos:nn}=ze.mapResult(this.anchor);return tn?new TextBookmark(nn,nn):new NodeBookmark(nn)}resolve(ze){let tn=ze.resolve(this.anchor),nn=tn.nodeAfter;return nn&&NodeSelection.isSelectable(nn)?new NodeSelection(tn):Selection.near(tn)}}class AllSelection extends Selection{constructor(ze){super(ze.resolve(0),ze.resolve(ze.content.size))}replace(ze,tn=Slice.empty){if(tn==Slice.empty){ze.delete(0,ze.doc.content.size);let nn=Selection.atStart(ze.doc);nn.eq(ze.selection)||ze.setSelection(nn)}else super.replace(ze,tn)}toJSON(){return{type:"all"}}static fromJSON(ze){return new AllSelection(ze)}map(ze){return new AllSelection(ze)}eq(ze){return ze instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(en){return new AllSelection(en)}};function findSelectionIn(en,ze,tn,nn,rn,sn=!1){if(ze.inlineContent)return TextSelection.create(en,tn);for(let an=nn-(rn>0?0:1);rn>0?an<ze.childCount:an>=0;an+=rn){let ln=ze.child(an);if(ln.isAtom){if(!sn&&NodeSelection.isSelectable(ln))return NodeSelection.create(en,tn-(rn<0?ln.nodeSize:0))}else{let cn=findSelectionIn(en,ln,tn+rn,rn<0?ln.childCount:0,rn,sn);if(cn)return cn}tn+=ln.nodeSize*rn}return null}function selectionToInsertionEnd$1(en,ze,tn){let nn=en.steps.length-1;if(nn<ze)return;let rn=en.steps[nn];if(!(rn instanceof ReplaceStep||rn instanceof ReplaceAroundStep))return;let sn=en.mapping.maps[nn],an;sn.forEach((ln,cn,un,dn)=>{an==null&&(an=dn)}),en.setSelection(Selection.near(en.doc.resolve(an),tn))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction extends Transform{constructor(ze){super(ze.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=ze.selection,this.storedMarks=ze.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(ze){if(ze.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=ze,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(ze){return this.storedMarks=ze,this.updated|=UPDATED_MARKS,this}ensureMarks(ze){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),ze)||this.setStoredMarks(ze),this}addStoredMark(ze){return this.ensureMarks(ze.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(ze){return this.ensureMarks(ze.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(ze,tn){super.addStep(ze,tn),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(ze){return this.time=ze,this}replaceSelection(ze){return this.selection.replace(this,ze),this}replaceSelectionWith(ze,tn=!0){let nn=this.selection;return tn&&(ze=ze.mark(this.storedMarks||(nn.empty?nn.$from.marks():nn.$from.marksAcross(nn.$to)||Mark$1.none))),nn.replaceWith(this,ze),this}deleteSelection(){return this.selection.replace(this),this}insertText(ze,tn,nn){let rn=this.doc.type.schema;if(tn==null)return ze?this.replaceSelectionWith(rn.text(ze),!0):this.deleteSelection();{if(nn==null&&(nn=tn),nn=nn??tn,!ze)return this.deleteRange(tn,nn);let sn=this.storedMarks;if(!sn){let an=this.doc.resolve(tn);sn=nn==tn?an.marks():an.marksAcross(this.doc.resolve(nn))}return this.replaceRangeWith(tn,nn,rn.text(ze,sn)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(ze,tn){return this.meta[typeof ze=="string"?ze:ze.key]=tn,this}getMeta(ze){return this.meta[typeof ze=="string"?ze:ze.key]}get isGeneric(){for(let ze in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind(en,ze){return!ze||!en?en:en.bind(ze)}class FieldDesc{constructor(ze,tn,nn){this.name=ze,this.init=bind(tn.init,nn),this.apply=bind(tn.apply,nn)}}const baseFields=[new FieldDesc("doc",{init(en){return en.doc||en.schema.topNodeType.createAndFill()},apply(en){return en.doc}}),new FieldDesc("selection",{init(en,ze){return en.selection||Selection.atStart(ze.doc)},apply(en){return en.selection}}),new FieldDesc("storedMarks",{init(en){return en.storedMarks||null},apply(en,ze,tn,nn){return nn.selection.$cursor?en.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(en,ze){return en.scrolledIntoView?ze+1:ze}})];class Configuration{constructor(ze,tn){this.schema=ze,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),tn&&tn.forEach(nn=>{if(this.pluginsByKey[nn.key])throw new RangeError("Adding different instances of a keyed plugin ("+nn.key+")");this.plugins.push(nn),this.pluginsByKey[nn.key]=nn,nn.spec.state&&this.fields.push(new FieldDesc(nn.key,nn.spec.state,nn))})}}class EditorState{constructor(ze){this.config=ze}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(ze){return this.applyTransaction(ze).state}filterTransaction(ze,tn=-1){for(let nn=0;nn<this.config.plugins.length;nn++)if(nn!=tn){let rn=this.config.plugins[nn];if(rn.spec.filterTransaction&&!rn.spec.filterTransaction.call(rn,ze,this))return!1}return!0}applyTransaction(ze){if(!this.filterTransaction(ze))return{state:this,transactions:[]};let tn=[ze],nn=this.applyInner(ze),rn=null;for(;;){let sn=!1;for(let an=0;an<this.config.plugins.length;an++){let ln=this.config.plugins[an];if(ln.spec.appendTransaction){let cn=rn?rn[an].n:0,un=rn?rn[an].state:this,dn=cn<tn.length&&ln.spec.appendTransaction.call(ln,cn?tn.slice(cn):tn,un,nn);if(dn&&nn.filterTransaction(dn,an)){if(dn.setMeta("appendedTransaction",ze),!rn){rn=[];for(let fn=0;fn<this.config.plugins.length;fn++)rn.push(fn<an?{state:nn,n:tn.length}:{state:this,n:0})}tn.push(dn),nn=nn.applyInner(dn),sn=!0}rn&&(rn[an]={state:nn,n:tn.length})}}if(!sn)return{state:nn,transactions:tn}}}applyInner(ze){if(!ze.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let tn=new EditorState(this.config),nn=this.config.fields;for(let rn=0;rn<nn.length;rn++){let sn=nn[rn];tn[sn.name]=sn.apply(ze,this[sn.name],this,tn)}return tn}get tr(){return new Transaction(this)}static create(ze){let tn=new Configuration(ze.doc?ze.doc.type.schema:ze.schema,ze.plugins),nn=new EditorState(tn);for(let rn=0;rn<tn.fields.length;rn++)nn[tn.fields[rn].name]=tn.fields[rn].init(ze,nn);return nn}reconfigure(ze){let tn=new Configuration(this.schema,ze.plugins),nn=tn.fields,rn=new EditorState(tn);for(let sn=0;sn<nn.length;sn++){let an=nn[sn].name;rn[an]=this.hasOwnProperty(an)?this[an]:nn[sn].init(ze,rn)}return rn}toJSON(ze){let tn={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(tn.storedMarks=this.storedMarks.map(nn=>nn.toJSON())),ze&&typeof ze=="object")for(let nn in ze){if(nn=="doc"||nn=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let rn=ze[nn],sn=rn.spec.state;sn&&sn.toJSON&&(tn[nn]=sn.toJSON.call(rn,this[rn.key]))}return tn}static fromJSON(ze,tn,nn){if(!tn)throw new RangeError("Invalid input for EditorState.fromJSON");if(!ze.schema)throw new RangeError("Required config field 'schema' missing");let rn=new Configuration(ze.schema,ze.plugins),sn=new EditorState(rn);return rn.fields.forEach(an=>{if(an.name=="doc")sn.doc=Node$2.fromJSON(ze.schema,tn.doc);else if(an.name=="selection")sn.selection=Selection.fromJSON(sn.doc,tn.selection);else if(an.name=="storedMarks")tn.storedMarks&&(sn.storedMarks=tn.storedMarks.map(ze.schema.markFromJSON));else{if(nn)for(let ln in nn){let cn=nn[ln],un=cn.spec.state;if(cn.key==an.name&&un&&un.fromJSON&&Object.prototype.hasOwnProperty.call(tn,ln)){sn[an.name]=un.fromJSON.call(cn,ze,tn[ln],sn);return}}sn[an.name]=an.init(ze,sn)}}),sn}}function bindProps(en,ze,tn){for(let nn in en){let rn=en[nn];rn instanceof Function?rn=rn.bind(ze):nn=="handleDOMEvents"&&(rn=bindProps(rn,ze,{})),tn[nn]=rn}return tn}class Plugin{constructor(ze){this.spec=ze,this.props={},ze.props&&bindProps(ze.props,this,this.props),this.key=ze.key?ze.key.key:createKey("plugin")}getState(ze){return ze[this.key]}}const keys=Object.create(null);function createKey(en){return en in keys?en+"$"+ ++keys[en]:(keys[en]=0,en+"$")}class PluginKey{constructor(ze="key"){this.key=createKey(ze)}get(ze){return ze.config.pluginsByKey[this.key]}getState(ze){return ze[this.key]}}const domIndex=function(en){for(var ze=0;;ze++)if(en=en.previousSibling,!en)return ze},parentNode=function(en){let ze=en.assignedSlot||en.parentNode;return ze&&ze.nodeType==11?ze.host:ze};let reusedRange=null;const textRange=function(en,ze,tn){let nn=reusedRange||(reusedRange=document.createRange());return nn.setEnd(en,tn??en.nodeValue.length),nn.setStart(en,ze||0),nn},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(en,ze,tn,nn){return tn&&(scanFor(en,ze,tn,nn,-1)||scanFor(en,ze,tn,nn,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(en,ze,tn,nn,rn){for(;;){if(en==tn&&ze==nn)return!0;if(ze==(rn<0?0:nodeSize(en))){let sn=en.parentNode;if(!sn||sn.nodeType!=1||hasBlockDesc(en)||atomElements.test(en.nodeName)||en.contentEditable=="false")return!1;ze=domIndex(en)+(rn<0?0:1),en=sn}else if(en.nodeType==1){if(en=en.childNodes[ze+(rn<0?-1:0)],en.contentEditable=="false")return!1;ze=rn<0?nodeSize(en):0}else return!1}}function nodeSize(en){return en.nodeType==3?en.nodeValue.length:en.childNodes.length}function textNodeBefore$1(en,ze){for(;;){if(en.nodeType==3&&ze)return en;if(en.nodeType==1&&ze>0){if(en.contentEditable=="false")return null;en=en.childNodes[ze-1],ze=nodeSize(en)}else if(en.parentNode&&!hasBlockDesc(en))ze=domIndex(en),en=en.parentNode;else return null}}function textNodeAfter$1(en,ze){for(;;){if(en.nodeType==3&&ze<en.nodeValue.length)return en;if(en.nodeType==1&&ze<en.childNodes.length){if(en.contentEditable=="false")return null;en=en.childNodes[ze],ze=0}else if(en.parentNode&&!hasBlockDesc(en))ze=domIndex(en)+1,en=en.parentNode;else return null}}function isOnEdge(en,ze,tn){for(let nn=ze==0,rn=ze==nodeSize(en);nn||rn;){if(en==tn)return!0;let sn=domIndex(en);if(en=en.parentNode,!en)return!1;nn=nn&&sn==0,rn=rn&&sn==nodeSize(en)}}function hasBlockDesc(en){let ze;for(let tn=en;tn&&!(ze=tn.pmViewDesc);tn=tn.parentNode);return ze&&ze.node&&ze.node.isBlock&&(ze.dom==en||ze.contentDOM==en)}const selectionCollapsed=function(en){return en.focusNode&&isEquivalentPosition(en.focusNode,en.focusOffset,en.anchorNode,en.anchorOffset)};function keyEvent(en,ze){let tn=document.createEvent("Event");return tn.initEvent("keydown",!0,!0),tn.keyCode=en,tn.key=tn.code=ze,tn}function deepActiveElement(en){let ze=en.activeElement;for(;ze&&ze.shadowRoot;)ze=ze.shadowRoot.activeElement;return ze}function caretFromPoint(en,ze,tn){if(en.caretPositionFromPoint)try{let nn=en.caretPositionFromPoint(ze,tn);if(nn)return{node:nn.offsetNode,offset:nn.offset}}catch{}if(en.caretRangeFromPoint){let nn=en.caretRangeFromPoint(ze,tn);if(nn)return{node:nn.startContainer,offset:nn.startOffset}}}const nav=typeof navigator<"u"?navigator:null,doc=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$1=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$1&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$1&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari=!ie$1&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc&&"webkitFontSmoothing"in doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(en){let ze=en.defaultView&&en.defaultView.visualViewport;return ze?{left:0,right:ze.width,top:0,bottom:ze.height}:{left:0,right:en.documentElement.clientWidth,top:0,bottom:en.documentElement.clientHeight}}function getSide(en,ze){return typeof en=="number"?en:en[ze]}function clientRect(en){let ze=en.getBoundingClientRect(),tn=ze.width/en.offsetWidth||1,nn=ze.height/en.offsetHeight||1;return{left:ze.left,right:ze.left+en.clientWidth*tn,top:ze.top,bottom:ze.top+en.clientHeight*nn}}function scrollRectIntoView(en,ze,tn){let nn=en.someProp("scrollThreshold")||0,rn=en.someProp("scrollMargin")||5,sn=en.dom.ownerDocument;for(let an=tn||en.dom;an;an=parentNode(an)){if(an.nodeType!=1)continue;let ln=an,cn=ln==sn.body,un=cn?windowRect(sn):clientRect(ln),dn=0,fn=0;if(ze.top<un.top+getSide(nn,"top")?fn=-(un.top-ze.top+getSide(rn,"top")):ze.bottom>un.bottom-getSide(nn,"bottom")&&(fn=ze.bottom-ze.top>un.bottom-un.top?ze.top+getSide(rn,"top")-un.top:ze.bottom-un.bottom+getSide(rn,"bottom")),ze.left<un.left+getSide(nn,"left")?dn=-(un.left-ze.left+getSide(rn,"left")):ze.right>un.right-getSide(nn,"right")&&(dn=ze.right-un.right+getSide(rn,"right")),dn||fn)if(cn)sn.defaultView.scrollBy(dn,fn);else{let pn=ln.scrollLeft,hn=ln.scrollTop;fn&&(ln.scrollTop+=fn),dn&&(ln.scrollLeft+=dn);let gn=ln.scrollLeft-pn,En=ln.scrollTop-hn;ze={left:ze.left-gn,top:ze.top-En,right:ze.right-gn,bottom:ze.bottom-En}}if(cn||/^(fixed|sticky)$/.test(getComputedStyle(an).position))break}}function storeScrollPos(en){let ze=en.dom.getBoundingClientRect(),tn=Math.max(0,ze.top),nn,rn;for(let sn=(ze.left+ze.right)/2,an=tn+1;an<Math.min(innerHeight,ze.bottom);an+=5){let ln=en.root.elementFromPoint(sn,an);if(!ln||ln==en.dom||!en.dom.contains(ln))continue;let cn=ln.getBoundingClientRect();if(cn.top>=tn-20){nn=ln,rn=cn.top;break}}return{refDOM:nn,refTop:rn,stack:scrollStack(en.dom)}}function scrollStack(en){let ze=[],tn=en.ownerDocument;for(let nn=en;nn&&(ze.push({dom:nn,top:nn.scrollTop,left:nn.scrollLeft}),en!=tn);nn=parentNode(nn));return ze}function resetScrollPos({refDOM:en,refTop:ze,stack:tn}){let nn=en?en.getBoundingClientRect().top:0;restoreScrollStack(tn,nn==0?0:nn-ze)}function restoreScrollStack(en,ze){for(let tn=0;tn<en.length;tn++){let{dom:nn,top:rn,left:sn}=en[tn];nn.scrollTop!=rn+ze&&(nn.scrollTop=rn+ze),nn.scrollLeft!=sn&&(nn.scrollLeft=sn)}}let preventScrollSupported=null;function focusPreventScroll(en){if(en.setActive)return en.setActive();if(preventScrollSupported)return en.focus(preventScrollSupported);let ze=scrollStack(en);en.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(ze,0))}function findOffsetInNode(en,ze){let tn,nn=2e8,rn,sn=0,an=ze.top,ln=ze.top,cn,un;for(let dn=en.firstChild,fn=0;dn;dn=dn.nextSibling,fn++){let pn;if(dn.nodeType==1)pn=dn.getClientRects();else if(dn.nodeType==3)pn=textRange(dn).getClientRects();else continue;for(let hn=0;hn<pn.length;hn++){let gn=pn[hn];if(gn.top<=an&&gn.bottom>=ln){an=Math.max(gn.bottom,an),ln=Math.min(gn.top,ln);let En=gn.left>ze.left?gn.left-ze.left:gn.right<ze.left?ze.left-gn.right:0;if(En<nn){tn=dn,nn=En,rn=En&&tn.nodeType==3?{left:gn.right<ze.left?gn.right:gn.left,top:ze.top}:ze,dn.nodeType==1&&En&&(sn=fn+(ze.left>=(gn.left+gn.right)/2?1:0));continue}}else gn.top>ze.top&&!cn&&gn.left<=ze.left&&gn.right>=ze.left&&(cn=dn,un={left:Math.max(gn.left,Math.min(gn.right,ze.left)),top:gn.top});!tn&&(ze.left>=gn.right&&ze.top>=gn.top||ze.left>=gn.left&&ze.top>=gn.bottom)&&(sn=fn+1)}}return!tn&&cn&&(tn=cn,rn=un,nn=0),tn&&tn.nodeType==3?findOffsetInText(tn,rn):!tn||nn&&tn.nodeType==1?{node:en,offset:sn}:findOffsetInNode(tn,rn)}function findOffsetInText(en,ze){let tn=en.nodeValue.length,nn=document.createRange();for(let rn=0;rn<tn;rn++){nn.setEnd(en,rn+1),nn.setStart(en,rn);let sn=singleRect(nn,1);if(sn.top!=sn.bottom&&inRect(ze,sn))return{node:en,offset:rn+(ze.left>=(sn.left+sn.right)/2?1:0)}}return{node:en,offset:0}}function inRect(en,ze){return en.left>=ze.left-1&&en.left<=ze.right+1&&en.top>=ze.top-1&&en.top<=ze.bottom+1}function targetKludge(en,ze){let tn=en.parentNode;return tn&&/^li$/i.test(tn.nodeName)&&ze.left<en.getBoundingClientRect().left?tn:en}function posFromElement(en,ze,tn){let{node:nn,offset:rn}=findOffsetInNode(ze,tn),sn=-1;if(nn.nodeType==1&&!nn.firstChild){let an=nn.getBoundingClientRect();sn=an.left!=an.right&&tn.left>(an.left+an.right)/2?1:-1}return en.docView.posFromDOM(nn,rn,sn)}function posFromCaret(en,ze,tn,nn){let rn=-1;for(let sn=ze,an=!1;sn!=en.dom;){let ln=en.docView.nearestDesc(sn,!0);if(!ln)return null;if(ln.dom.nodeType==1&&(ln.node.isBlock&&ln.parent&&!an||!ln.contentDOM)){let cn=ln.dom.getBoundingClientRect();if(ln.node.isBlock&&ln.parent&&!an&&(an=!0,cn.left>nn.left||cn.top>nn.top?rn=ln.posBefore:(cn.right<nn.left||cn.bottom<nn.top)&&(rn=ln.posAfter)),!ln.contentDOM&&rn<0&&!ln.node.isText)return(ln.node.isBlock?nn.top<(cn.top+cn.bottom)/2:nn.left<(cn.left+cn.right)/2)?ln.posBefore:ln.posAfter}sn=ln.dom.parentNode}return rn>-1?rn:en.docView.posFromDOM(ze,tn,-1)}function elementFromPoint(en,ze,tn){let nn=en.childNodes.length;if(nn&&tn.top<tn.bottom)for(let rn=Math.max(0,Math.min(nn-1,Math.floor(nn*(ze.top-tn.top)/(tn.bottom-tn.top))-2)),sn=rn;;){let an=en.childNodes[sn];if(an.nodeType==1){let ln=an.getClientRects();for(let cn=0;cn<ln.length;cn++){let un=ln[cn];if(inRect(ze,un))return elementFromPoint(an,ze,un)}}if((sn=(sn+1)%nn)==rn)break}return en}function posAtCoords(en,ze){let tn=en.dom.ownerDocument,nn,rn=0,sn=caretFromPoint(tn,ze.left,ze.top);sn&&({node:nn,offset:rn}=sn);let an=(en.root.elementFromPoint?en.root:tn).elementFromPoint(ze.left,ze.top),ln;if(!an||!en.dom.contains(an.nodeType!=1?an.parentNode:an)){let un=en.dom.getBoundingClientRect();if(!inRect(ze,un)||(an=elementFromPoint(en.dom,ze,un),!an))return null}if(safari)for(let un=an;nn&&un;un=parentNode(un))un.draggable&&(nn=void 0);if(an=targetKludge(an,ze),nn){if(gecko&&nn.nodeType==1&&(rn=Math.min(rn,nn.childNodes.length),rn<nn.childNodes.length)){let dn=nn.childNodes[rn],fn;dn.nodeName=="IMG"&&(fn=dn.getBoundingClientRect()).right<=ze.left&&fn.bottom>ze.top&&rn++}let un;webkit&&rn&&nn.nodeType==1&&(un=nn.childNodes[rn-1]).nodeType==1&&un.contentEditable=="false"&&un.getBoundingClientRect().top>=ze.top&&rn--,nn==en.dom&&rn==nn.childNodes.length-1&&nn.lastChild.nodeType==1&&ze.top>nn.lastChild.getBoundingClientRect().bottom?ln=en.state.doc.content.size:(rn==0||nn.nodeType!=1||nn.childNodes[rn-1].nodeName!="BR")&&(ln=posFromCaret(en,nn,rn,ze))}ln==null&&(ln=posFromElement(en,an,ze));let cn=en.docView.nearestDesc(an,!0);return{pos:ln,inside:cn?cn.posAtStart-cn.border:-1}}function nonZero(en){return en.top<en.bottom||en.left<en.right}function singleRect(en,ze){let tn=en.getClientRects();if(tn.length){let nn=tn[ze<0?0:tn.length-1];if(nonZero(nn))return nn}return Array.prototype.find.call(tn,nonZero)||en.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(en,ze,tn){let{node:nn,offset:rn,atom:sn}=en.docView.domFromPos(ze,tn<0?-1:1),an=webkit||gecko;if(nn.nodeType==3)if(an&&(BIDI.test(nn.nodeValue)||(tn<0?!rn:rn==nn.nodeValue.length))){let cn=singleRect(textRange(nn,rn,rn),tn);if(gecko&&rn&&/\s/.test(nn.nodeValue[rn-1])&&rn<nn.nodeValue.length){let un=singleRect(textRange(nn,rn-1,rn-1),-1);if(un.top==cn.top){let dn=singleRect(textRange(nn,rn,rn+1),-1);if(dn.top!=cn.top)return flattenV(dn,dn.left<un.left)}}return cn}else{let cn=rn,un=rn,dn=tn<0?1:-1;return tn<0&&!rn?(un++,dn=-1):tn>=0&&rn==nn.nodeValue.length?(cn--,dn=1):tn<0?cn--:un++,flattenV(singleRect(textRange(nn,cn,un),dn),dn<0)}if(!en.state.doc.resolve(ze-(sn||0)).parent.inlineContent){if(sn==null&&rn&&(tn<0||rn==nodeSize(nn))){let cn=nn.childNodes[rn-1];if(cn.nodeType==1)return flattenH(cn.getBoundingClientRect(),!1)}if(sn==null&&rn<nodeSize(nn)){let cn=nn.childNodes[rn];if(cn.nodeType==1)return flattenH(cn.getBoundingClientRect(),!0)}return flattenH(nn.getBoundingClientRect(),tn>=0)}if(sn==null&&rn&&(tn<0||rn==nodeSize(nn))){let cn=nn.childNodes[rn-1],un=cn.nodeType==3?textRange(cn,nodeSize(cn)-(an?0:1)):cn.nodeType==1&&(cn.nodeName!="BR"||!cn.nextSibling)?cn:null;if(un)return flattenV(singleRect(un,1),!1)}if(sn==null&&rn<nodeSize(nn)){let cn=nn.childNodes[rn];for(;cn.pmViewDesc&&cn.pmViewDesc.ignoreForCoords;)cn=cn.nextSibling;let un=cn?cn.nodeType==3?textRange(cn,0,an?0:1):cn.nodeType==1?cn:null:null;if(un)return flattenV(singleRect(un,-1),!0)}return flattenV(singleRect(nn.nodeType==3?textRange(nn):nn,-tn),tn>=0)}function flattenV(en,ze){if(en.width==0)return en;let tn=ze?en.left:en.right;return{top:en.top,bottom:en.bottom,left:tn,right:tn}}function flattenH(en,ze){if(en.height==0)return en;let tn=ze?en.top:en.bottom;return{top:tn,bottom:tn,left:en.left,right:en.right}}function withFlushedState(en,ze,tn){let nn=en.state,rn=en.root.activeElement;nn!=ze&&en.updateState(ze),rn!=en.dom&&en.focus();try{return tn()}finally{nn!=ze&&en.updateState(nn),rn!=en.dom&&rn&&rn.focus()}}function endOfTextblockVertical(en,ze,tn){let nn=ze.selection,rn=tn=="up"?nn.$from:nn.$to;return withFlushedState(en,ze,()=>{let{node:sn}=en.docView.domFromPos(rn.pos,tn=="up"?-1:1);for(;;){let ln=en.docView.nearestDesc(sn,!0);if(!ln)break;if(ln.node.isBlock){sn=ln.contentDOM||ln.dom;break}sn=ln.dom.parentNode}let an=coordsAtPos(en,rn.pos,1);for(let ln=sn.firstChild;ln;ln=ln.nextSibling){let cn;if(ln.nodeType==1)cn=ln.getClientRects();else if(ln.nodeType==3)cn=textRange(ln,0,ln.nodeValue.length).getClientRects();else continue;for(let un=0;un<cn.length;un++){let dn=cn[un];if(dn.bottom>dn.top+1&&(tn=="up"?an.top-dn.top>(dn.bottom-an.top)*2:dn.bottom-an.bottom>(an.bottom-dn.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(en,ze,tn){let{$head:nn}=ze.selection;if(!nn.parent.isTextblock)return!1;let rn=nn.parentOffset,sn=!rn,an=rn==nn.parent.content.size,ln=en.domSelection();return!maybeRTL.test(nn.parent.textContent)||!ln.modify?tn=="left"||tn=="backward"?sn:an:withFlushedState(en,ze,()=>{let{focusNode:cn,focusOffset:un,anchorNode:dn,anchorOffset:fn}=en.domSelectionRange(),pn=ln.caretBidiLevel;ln.modify("move",tn,"character");let hn=nn.depth?en.docView.domAfterPos(nn.before()):en.dom,{focusNode:gn,focusOffset:En}=en.domSelectionRange(),mn=gn&&!hn.contains(gn.nodeType==1?gn:gn.parentNode)||cn==gn&&un==En;try{ln.collapse(dn,fn),cn&&(cn!=dn||un!=fn)&&ln.extend&&ln.extend(cn,un)}catch{}return pn!=null&&(ln.caretBidiLevel=pn),mn})}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(en,ze,tn){return cachedState==ze&&cachedDir==tn?cachedResult:(cachedState=ze,cachedDir=tn,cachedResult=tn=="up"||tn=="down"?endOfTextblockVertical(en,ze,tn):endOfTextblockHorizontal(en,ze,tn))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(ze,tn,nn,rn){this.parent=ze,this.children=tn,this.dom=nn,this.contentDOM=rn,this.dirty=NOT_DIRTY,nn.pmViewDesc=this}matchesWidget(ze){return!1}matchesMark(ze){return!1}matchesNode(ze,tn,nn){return!1}matchesHack(ze){return!1}parseRule(){return null}stopEvent(ze){return!1}get size(){let ze=0;for(let tn=0;tn<this.children.length;tn++)ze+=this.children[tn].size;return ze}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let ze=0;ze<this.children.length;ze++)this.children[ze].destroy()}posBeforeChild(ze){for(let tn=0,nn=this.posAtStart;;tn++){let rn=this.children[tn];if(rn==ze)return nn;nn+=rn.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(ze,tn,nn){if(this.contentDOM&&this.contentDOM.contains(ze.nodeType==1?ze:ze.parentNode))if(nn<0){let sn,an;if(ze==this.contentDOM)sn=ze.childNodes[tn-1];else{for(;ze.parentNode!=this.contentDOM;)ze=ze.parentNode;sn=ze.previousSibling}for(;sn&&!((an=sn.pmViewDesc)&&an.parent==this);)sn=sn.previousSibling;return sn?this.posBeforeChild(an)+an.size:this.posAtStart}else{let sn,an;if(ze==this.contentDOM)sn=ze.childNodes[tn];else{for(;ze.parentNode!=this.contentDOM;)ze=ze.parentNode;sn=ze.nextSibling}for(;sn&&!((an=sn.pmViewDesc)&&an.parent==this);)sn=sn.nextSibling;return sn?this.posBeforeChild(an):this.posAtEnd}let rn;if(ze==this.dom&&this.contentDOM)rn=tn>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))rn=ze.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(tn==0)for(let sn=ze;;sn=sn.parentNode){if(sn==this.dom){rn=!1;break}if(sn.previousSibling)break}if(rn==null&&tn==ze.childNodes.length)for(let sn=ze;;sn=sn.parentNode){if(sn==this.dom){rn=!0;break}if(sn.nextSibling)break}}return rn??nn>0?this.posAtEnd:this.posAtStart}nearestDesc(ze,tn=!1){for(let nn=!0,rn=ze;rn;rn=rn.parentNode){let sn=this.getDesc(rn),an;if(sn&&(!tn||sn.node))if(nn&&(an=sn.nodeDOM)&&!(an.nodeType==1?an.contains(ze.nodeType==1?ze:ze.parentNode):an==ze))nn=!1;else return sn}}getDesc(ze){let tn=ze.pmViewDesc;for(let nn=tn;nn;nn=nn.parent)if(nn==this)return tn}posFromDOM(ze,tn,nn){for(let rn=ze;rn;rn=rn.parentNode){let sn=this.getDesc(rn);if(sn)return sn.localPosFromDOM(ze,tn,nn)}return-1}descAt(ze){for(let tn=0,nn=0;tn<this.children.length;tn++){let rn=this.children[tn],sn=nn+rn.size;if(nn==ze&&sn!=nn){for(;!rn.border&&rn.children.length;)rn=rn.children[0];return rn}if(ze<sn)return rn.descAt(ze-nn-rn.border);nn=sn}}domFromPos(ze,tn){if(!this.contentDOM)return{node:this.dom,offset:0,atom:ze+1};let nn=0,rn=0;for(let sn=0;nn<this.children.length;nn++){let an=this.children[nn],ln=sn+an.size;if(ln>ze||an instanceof TrailingHackViewDesc){rn=ze-sn;break}sn=ln}if(rn)return this.children[nn].domFromPos(rn-this.children[nn].border,tn);for(let sn;nn&&!(sn=this.children[nn-1]).size&&sn instanceof WidgetViewDesc&&sn.side>=0;nn--);if(tn<=0){let sn,an=!0;for(;sn=nn?this.children[nn-1]:null,!(!sn||sn.dom.parentNode==this.contentDOM);nn--,an=!1);return sn&&tn&&an&&!sn.border&&!sn.domAtom?sn.domFromPos(sn.size,tn):{node:this.contentDOM,offset:sn?domIndex(sn.dom)+1:0}}else{let sn,an=!0;for(;sn=nn<this.children.length?this.children[nn]:null,!(!sn||sn.dom.parentNode==this.contentDOM);nn++,an=!1);return sn&&an&&!sn.border&&!sn.domAtom?sn.domFromPos(0,tn):{node:this.contentDOM,offset:sn?domIndex(sn.dom):this.contentDOM.childNodes.length}}}parseRange(ze,tn,nn=0){if(this.children.length==0)return{node:this.contentDOM,from:ze,to:tn,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let rn=-1,sn=-1;for(let an=nn,ln=0;;ln++){let cn=this.children[ln],un=an+cn.size;if(rn==-1&&ze<=un){let dn=an+cn.border;if(ze>=dn&&tn<=un-cn.border&&cn.node&&cn.contentDOM&&this.contentDOM.contains(cn.contentDOM))return cn.parseRange(ze,tn,dn);ze=an;for(let fn=ln;fn>0;fn--){let pn=this.children[fn-1];if(pn.size&&pn.dom.parentNode==this.contentDOM&&!pn.emptyChildAt(1)){rn=domIndex(pn.dom)+1;break}ze-=pn.size}rn==-1&&(rn=0)}if(rn>-1&&(un>tn||ln==this.children.length-1)){tn=un;for(let dn=ln+1;dn<this.children.length;dn++){let fn=this.children[dn];if(fn.size&&fn.dom.parentNode==this.contentDOM&&!fn.emptyChildAt(-1)){sn=domIndex(fn.dom);break}tn+=fn.size}sn==-1&&(sn=this.contentDOM.childNodes.length);break}an=un}return{node:this.contentDOM,from:ze,to:tn,fromOffset:rn,toOffset:sn}}emptyChildAt(ze){if(this.border||!this.contentDOM||!this.children.length)return!1;let tn=this.children[ze<0?0:this.children.length-1];return tn.size==0||tn.emptyChildAt(ze)}domAfterPos(ze){let{node:tn,offset:nn}=this.domFromPos(ze,0);if(tn.nodeType!=1||nn==tn.childNodes.length)throw new RangeError("No node after pos "+ze);return tn.childNodes[nn]}setSelection(ze,tn,nn,rn=!1){let sn=Math.min(ze,tn),an=Math.max(ze,tn);for(let pn=0,hn=0;pn<this.children.length;pn++){let gn=this.children[pn],En=hn+gn.size;if(sn>hn&&an<En)return gn.setSelection(ze-hn-gn.border,tn-hn-gn.border,nn,rn);hn=En}let ln=this.domFromPos(ze,ze?-1:1),cn=tn==ze?ln:this.domFromPos(tn,tn?-1:1),un=nn.getSelection(),dn=!1;if((gecko||safari)&&ze==tn){let{node:pn,offset:hn}=ln;if(pn.nodeType==3){if(dn=!!(hn&&pn.nodeValue[hn-1]==`
`),dn&&hn==pn.nodeValue.length)for(let gn=pn,En;gn;gn=gn.parentNode){if(En=gn.nextSibling){En.nodeName=="BR"&&(ln=cn={node:En.parentNode,offset:domIndex(En)+1});break}let mn=gn.pmViewDesc;if(mn&&mn.node&&mn.node.isBlock)break}}else{let gn=pn.childNodes[hn-1];dn=gn&&(gn.nodeName=="BR"||gn.contentEditable=="false")}}if(gecko&&un.focusNode&&un.focusNode!=cn.node&&un.focusNode.nodeType==1){let pn=un.focusNode.childNodes[un.focusOffset];pn&&pn.contentEditable=="false"&&(rn=!0)}if(!(rn||dn&&safari)&&isEquivalentPosition(ln.node,ln.offset,un.anchorNode,un.anchorOffset)&&isEquivalentPosition(cn.node,cn.offset,un.focusNode,un.focusOffset))return;let fn=!1;if((un.extend||ze==tn)&&!dn){un.collapse(ln.node,ln.offset);try{ze!=tn&&un.extend(cn.node,cn.offset),fn=!0}catch{}}if(!fn){if(ze>tn){let hn=ln;ln=cn,cn=hn}let pn=document.createRange();pn.setEnd(cn.node,cn.offset),pn.setStart(ln.node,ln.offset),un.removeAllRanges(),un.addRange(pn)}}ignoreMutation(ze){return!this.contentDOM&&ze.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(ze,tn){for(let nn=0,rn=0;rn<this.children.length;rn++){let sn=this.children[rn],an=nn+sn.size;if(nn==an?ze<=an&&tn>=nn:ze<an&&tn>nn){let ln=nn+sn.border,cn=an-sn.border;if(ze>=ln&&tn<=cn){this.dirty=ze==nn||tn==an?CONTENT_DIRTY:CHILD_DIRTY,ze==ln&&tn==cn&&(sn.contentLost||sn.dom.parentNode!=this.contentDOM)?sn.dirty=NODE_DIRTY:sn.markDirty(ze-ln,tn-ln);return}else sn.dirty=sn.dom==sn.contentDOM&&sn.dom.parentNode==this.contentDOM&&!sn.children.length?CONTENT_DIRTY:NODE_DIRTY}nn=an}this.dirty=CONTENT_DIRTY}markParentsDirty(){let ze=1;for(let tn=this.parent;tn;tn=tn.parent,ze++){let nn=ze==1?CONTENT_DIRTY:CHILD_DIRTY;tn.dirty<nn&&(tn.dirty=nn)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(ze){return!1}}class WidgetViewDesc extends ViewDesc{constructor(ze,tn,nn,rn){let sn,an=tn.type.toDOM;if(typeof an=="function"&&(an=an(nn,()=>{if(!sn)return rn;if(sn.parent)return sn.parent.posBeforeChild(sn)})),!tn.type.spec.raw){if(an.nodeType!=1){let ln=document.createElement("span");ln.appendChild(an),an=ln}an.contentEditable="false",an.classList.add("ProseMirror-widget")}super(ze,[],an,null),this.widget=tn,this.widget=tn,sn=this}matchesWidget(ze){return this.dirty==NOT_DIRTY&&ze.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(ze){let tn=this.widget.spec.stopEvent;return tn?tn(ze):!1}ignoreMutation(ze){return ze.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(ze,tn,nn,rn){super(ze,[],tn,null),this.textDOM=nn,this.text=rn}get size(){return this.text.length}localPosFromDOM(ze,tn){return ze!=this.textDOM?this.posAtStart+(tn?this.size:0):this.posAtStart+tn}domFromPos(ze){return{node:this.textDOM,offset:ze}}ignoreMutation(ze){return ze.type==="characterData"&&ze.target.nodeValue==ze.oldValue}}class MarkViewDesc extends ViewDesc{constructor(ze,tn,nn,rn){super(ze,[],nn,rn),this.mark=tn}static create(ze,tn,nn,rn){let sn=rn.nodeViews[tn.type.name],an=sn&&sn(tn,rn,nn);return(!an||!an.dom)&&(an=DOMSerializer.renderSpec(document,tn.type.spec.toDOM(tn,nn))),new MarkViewDesc(ze,tn,an.dom,an.contentDOM||an.dom)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(ze){return this.dirty!=NODE_DIRTY&&this.mark.eq(ze)}markDirty(ze,tn){if(super.markDirty(ze,tn),this.dirty!=NOT_DIRTY){let nn=this.parent;for(;!nn.node;)nn=nn.parent;nn.dirty<this.dirty&&(nn.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(ze,tn,nn){let rn=MarkViewDesc.create(this.parent,this.mark,!0,nn),sn=this.children,an=this.size;tn<an&&(sn=replaceNodes(sn,tn,an,nn)),ze>0&&(sn=replaceNodes(sn,0,ze,nn));for(let ln=0;ln<sn.length;ln++)sn[ln].parent=rn;return rn.children=sn,rn}}class NodeViewDesc extends ViewDesc{constructor(ze,tn,nn,rn,sn,an,ln,cn,un){super(ze,[],sn,an),this.node=tn,this.outerDeco=nn,this.innerDeco=rn,this.nodeDOM=ln}static create(ze,tn,nn,rn,sn,an){let ln=sn.nodeViews[tn.type.name],cn,un=ln&&ln(tn,sn,()=>{if(!cn)return an;if(cn.parent)return cn.parent.posBeforeChild(cn)},nn,rn),dn=un&&un.dom,fn=un&&un.contentDOM;if(tn.isText){if(!dn)dn=document.createTextNode(tn.text);else if(dn.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else dn||({dom:dn,contentDOM:fn}=DOMSerializer.renderSpec(document,tn.type.spec.toDOM(tn)));!fn&&!tn.isText&&dn.nodeName!="BR"&&(dn.hasAttribute("contenteditable")||(dn.contentEditable="false"),tn.type.spec.draggable&&(dn.draggable=!0));let pn=dn;return dn=applyOuterDeco(dn,nn,tn),un?cn=new CustomNodeViewDesc(ze,tn,nn,rn,dn,fn||null,pn,un,sn,an+1):tn.isText?new TextViewDesc(ze,tn,nn,rn,dn,pn,sn):new NodeViewDesc(ze,tn,nn,rn,dn,fn||null,pn,sn,an+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let ze={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(ze.preserveWhitespace="full"),!this.contentDOM)ze.getContent=()=>this.node.content;else if(!this.contentLost)ze.contentElement=this.contentDOM;else{for(let tn=this.children.length-1;tn>=0;tn--){let nn=this.children[tn];if(this.dom.contains(nn.dom.parentNode)){ze.contentElement=nn.dom.parentNode;break}}ze.contentElement||(ze.getContent=()=>Fragment.empty)}return ze}matchesNode(ze,tn,nn){return this.dirty==NOT_DIRTY&&ze.eq(this.node)&&sameOuterDeco(tn,this.outerDeco)&&nn.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(ze,tn){let nn=this.node.inlineContent,rn=tn,sn=ze.composing?this.localCompositionInfo(ze,tn):null,an=sn&&sn.pos>-1?sn:null,ln=sn&&sn.pos<0,cn=new ViewTreeUpdater(this,an&&an.node,ze);iterDeco(this.node,this.innerDeco,(un,dn,fn)=>{un.spec.marks?cn.syncToMarks(un.spec.marks,nn,ze):un.type.side>=0&&!fn&&cn.syncToMarks(dn==this.node.childCount?Mark$1.none:this.node.child(dn).marks,nn,ze),cn.placeWidget(un,ze,rn)},(un,dn,fn,pn)=>{cn.syncToMarks(un.marks,nn,ze);let hn;cn.findNodeMatch(un,dn,fn,pn)||ln&&ze.state.selection.from>rn&&ze.state.selection.to<rn+un.nodeSize&&(hn=cn.findIndexWithChild(sn.node))>-1&&cn.updateNodeAt(un,dn,fn,hn,ze)||cn.updateNextNode(un,dn,fn,ze,pn,rn)||cn.addNode(un,dn,fn,ze,rn),rn+=un.nodeSize}),cn.syncToMarks([],nn,ze),this.node.isTextblock&&cn.addTextblockHacks(),cn.destroyRest(),(cn.changed||this.dirty==CONTENT_DIRTY)&&(an&&this.protectLocalComposition(ze,an),renderDescs(this.contentDOM,this.children,ze),ios&&iosHacks(this.dom))}localCompositionInfo(ze,tn){let{from:nn,to:rn}=ze.state.selection;if(!(ze.state.selection instanceof TextSelection)||nn<tn||rn>tn+this.node.content.size)return null;let sn=ze.input.compositionNode;if(!sn||!this.dom.contains(sn.parentNode))return null;if(this.node.inlineContent){let an=sn.nodeValue,ln=findTextInFragment(this.node.content,an,nn-tn,rn-tn);return ln<0?null:{node:sn,pos:ln,text:an}}else return{node:sn,pos:-1,text:""}}protectLocalComposition(ze,{node:tn,pos:nn,text:rn}){if(this.getDesc(tn))return;let sn=tn;for(;sn.parentNode!=this.contentDOM;sn=sn.parentNode){for(;sn.previousSibling;)sn.parentNode.removeChild(sn.previousSibling);for(;sn.nextSibling;)sn.parentNode.removeChild(sn.nextSibling);sn.pmViewDesc&&(sn.pmViewDesc=void 0)}let an=new CompositionViewDesc(this,sn,tn,rn);ze.input.compositionNodes.push(an),this.children=replaceNodes(this.children,nn,nn+rn.length,ze,an)}update(ze,tn,nn,rn){return this.dirty==NODE_DIRTY||!ze.sameMarkup(this.node)?!1:(this.updateInner(ze,tn,nn,rn),!0)}updateInner(ze,tn,nn,rn){this.updateOuterDeco(tn),this.node=ze,this.innerDeco=nn,this.contentDOM&&this.updateChildren(rn,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(ze){if(sameOuterDeco(ze,this.outerDeco))return;let tn=this.nodeDOM.nodeType!=1,nn=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,tn),computeOuterDeco(ze,this.node,tn)),this.dom!=nn&&(nn.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=ze}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function docViewDesc(en,ze,tn,nn,rn){applyOuterDeco(nn,ze,en);let sn=new NodeViewDesc(void 0,en,ze,tn,nn,nn,nn,rn,0);return sn.contentDOM&&sn.updateChildren(rn,0),sn}class TextViewDesc extends NodeViewDesc{constructor(ze,tn,nn,rn,sn,an,ln){super(ze,tn,nn,rn,sn,null,an,ln,0)}parseRule(){let ze=this.nodeDOM.parentNode;for(;ze&&ze!=this.dom&&!ze.pmIsDeco;)ze=ze.parentNode;return{skip:ze||!0}}update(ze,tn,nn,rn){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!ze.sameMarkup(this.node)?!1:(this.updateOuterDeco(tn),(this.dirty!=NOT_DIRTY||ze.text!=this.node.text)&&ze.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=ze.text,rn.trackWrites==this.nodeDOM&&(rn.trackWrites=null)),this.node=ze,this.dirty=NOT_DIRTY,!0)}inParent(){let ze=this.parent.contentDOM;for(let tn=this.nodeDOM;tn;tn=tn.parentNode)if(tn==ze)return!0;return!1}domFromPos(ze){return{node:this.nodeDOM,offset:ze}}localPosFromDOM(ze,tn,nn){return ze==this.nodeDOM?this.posAtStart+Math.min(tn,this.node.text.length):super.localPosFromDOM(ze,tn,nn)}ignoreMutation(ze){return ze.type!="characterData"&&ze.type!="selection"}slice(ze,tn,nn){let rn=this.node.cut(ze,tn),sn=document.createTextNode(rn.text);return new TextViewDesc(this.parent,rn,this.outerDeco,this.innerDeco,sn,sn,nn)}markDirty(ze,tn){super.markDirty(ze,tn),this.dom!=this.nodeDOM&&(ze==0||tn==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(ze){return this.node.text==ze}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(ze){return this.dirty==NOT_DIRTY&&this.dom.nodeName==ze}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(ze,tn,nn,rn,sn,an,ln,cn,un,dn){super(ze,tn,nn,rn,sn,an,ln,un,dn),this.spec=cn}update(ze,tn,nn,rn){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update){let sn=this.spec.update(ze,tn,nn);return sn&&this.updateInner(ze,tn,nn,rn),sn}else return!this.contentDOM&&!ze.isLeaf?!1:super.update(ze,tn,nn,rn)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(ze,tn,nn,rn){this.spec.setSelection?this.spec.setSelection(ze,tn,nn):super.setSelection(ze,tn,nn,rn)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(ze){return this.spec.stopEvent?this.spec.stopEvent(ze):!1}ignoreMutation(ze){return this.spec.ignoreMutation?this.spec.ignoreMutation(ze):super.ignoreMutation(ze)}}function renderDescs(en,ze,tn){let nn=en.firstChild,rn=!1;for(let sn=0;sn<ze.length;sn++){let an=ze[sn],ln=an.dom;if(ln.parentNode==en){for(;ln!=nn;)nn=rm(nn),rn=!0;nn=nn.nextSibling}else rn=!0,en.insertBefore(ln,nn);if(an instanceof MarkViewDesc){let cn=nn?nn.previousSibling:en.lastChild;renderDescs(an.contentDOM,an.children,tn),nn=cn?cn.nextSibling:en.firstChild}}for(;nn;)nn=rm(nn),rn=!0;rn&&tn.trackWrites==en&&(tn.trackWrites=null)}const OuterDecoLevel=function(en){en&&(this.nodeName=en)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(en,ze,tn){if(en.length==0)return noDeco;let nn=tn?noDeco[0]:new OuterDecoLevel,rn=[nn];for(let sn=0;sn<en.length;sn++){let an=en[sn].type.attrs;if(an){an.nodeName&&rn.push(nn=new OuterDecoLevel(an.nodeName));for(let ln in an){let cn=an[ln];cn!=null&&(tn&&rn.length==1&&rn.push(nn=new OuterDecoLevel(ze.isInline?"span":"div")),ln=="class"?nn.class=(nn.class?nn.class+" ":"")+cn:ln=="style"?nn.style=(nn.style?nn.style+";":"")+cn:ln!="nodeName"&&(nn[ln]=cn))}}}return rn}function patchOuterDeco(en,ze,tn,nn){if(tn==noDeco&&nn==noDeco)return ze;let rn=ze;for(let sn=0;sn<nn.length;sn++){let an=nn[sn],ln=tn[sn];if(sn){let cn;ln&&ln.nodeName==an.nodeName&&rn!=en&&(cn=rn.parentNode)&&cn.nodeName.toLowerCase()==an.nodeName||(cn=document.createElement(an.nodeName),cn.pmIsDeco=!0,cn.appendChild(rn),ln=noDeco[0]),rn=cn}patchAttributes(rn,ln||noDeco[0],an)}return rn}function patchAttributes(en,ze,tn){for(let nn in ze)nn!="class"&&nn!="style"&&nn!="nodeName"&&!(nn in tn)&&en.removeAttribute(nn);for(let nn in tn)nn!="class"&&nn!="style"&&nn!="nodeName"&&tn[nn]!=ze[nn]&&en.setAttribute(nn,tn[nn]);if(ze.class!=tn.class){let nn=ze.class?ze.class.split(" ").filter(Boolean):[],rn=tn.class?tn.class.split(" ").filter(Boolean):[];for(let sn=0;sn<nn.length;sn++)rn.indexOf(nn[sn])==-1&&en.classList.remove(nn[sn]);for(let sn=0;sn<rn.length;sn++)nn.indexOf(rn[sn])==-1&&en.classList.add(rn[sn]);en.classList.length==0&&en.removeAttribute("class")}if(ze.style!=tn.style){if(ze.style){let nn=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,rn;for(;rn=nn.exec(ze.style);)en.style.removeProperty(rn[1])}tn.style&&(en.style.cssText+=tn.style)}}function applyOuterDeco(en,ze,tn){return patchOuterDeco(en,en,noDeco,computeOuterDeco(ze,tn,en.nodeType!=1))}function sameOuterDeco(en,ze){if(en.length!=ze.length)return!1;for(let tn=0;tn<en.length;tn++)if(!en[tn].type.eq(ze[tn].type))return!1;return!0}function rm(en){let ze=en.nextSibling;return en.parentNode.removeChild(en),ze}class ViewTreeUpdater{constructor(ze,tn,nn){this.lock=tn,this.view=nn,this.index=0,this.stack=[],this.changed=!1,this.top=ze,this.preMatch=preMatch(ze.node.content,ze)}destroyBetween(ze,tn){if(ze!=tn){for(let nn=ze;nn<tn;nn++)this.top.children[nn].destroy();this.top.children.splice(ze,tn-ze),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(ze,tn,nn){let rn=0,sn=this.stack.length>>1,an=Math.min(sn,ze.length);for(;rn<an&&(rn==sn-1?this.top:this.stack[rn+1<<1]).matchesMark(ze[rn])&&ze[rn].type.spec.spanning!==!1;)rn++;for(;rn<sn;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),sn--;for(;sn<ze.length;){this.stack.push(this.top,this.index+1);let ln=-1;for(let cn=this.index;cn<Math.min(this.index+3,this.top.children.length);cn++){let un=this.top.children[cn];if(un.matchesMark(ze[sn])&&!this.isLocked(un.dom)){ln=cn;break}}if(ln>-1)ln>this.index&&(this.changed=!0,this.destroyBetween(this.index,ln)),this.top=this.top.children[this.index];else{let cn=MarkViewDesc.create(this.top,ze[sn],tn,nn);this.top.children.splice(this.index,0,cn),this.top=cn,this.changed=!0}this.index=0,sn++}}findNodeMatch(ze,tn,nn,rn){let sn=-1,an;if(rn>=this.preMatch.index&&(an=this.preMatch.matches[rn-this.preMatch.index]).parent==this.top&&an.matchesNode(ze,tn,nn))sn=this.top.children.indexOf(an,this.index);else for(let ln=this.index,cn=Math.min(this.top.children.length,ln+5);ln<cn;ln++){let un=this.top.children[ln];if(un.matchesNode(ze,tn,nn)&&!this.preMatch.matched.has(un)){sn=ln;break}}return sn<0?!1:(this.destroyBetween(this.index,sn),this.index++,!0)}updateNodeAt(ze,tn,nn,rn,sn){let an=this.top.children[rn];return an.dirty==NODE_DIRTY&&an.dom==an.contentDOM&&(an.dirty=CONTENT_DIRTY),an.update(ze,tn,nn,sn)?(this.destroyBetween(this.index,rn),this.index++,!0):!1}findIndexWithChild(ze){for(;;){let tn=ze.parentNode;if(!tn)return-1;if(tn==this.top.contentDOM){let nn=ze.pmViewDesc;if(nn){for(let rn=this.index;rn<this.top.children.length;rn++)if(this.top.children[rn]==nn)return rn}return-1}ze=tn}}updateNextNode(ze,tn,nn,rn,sn,an){for(let ln=this.index;ln<this.top.children.length;ln++){let cn=this.top.children[ln];if(cn instanceof NodeViewDesc){let un=this.preMatch.matched.get(cn);if(un!=null&&un!=sn)return!1;let dn=cn.dom,fn,pn=this.isLocked(dn)&&!(ze.isText&&cn.node&&cn.node.isText&&cn.nodeDOM.nodeValue==ze.text&&cn.dirty!=NODE_DIRTY&&sameOuterDeco(tn,cn.outerDeco));if(!pn&&cn.update(ze,tn,nn,rn))return this.destroyBetween(this.index,ln),cn.dom!=dn&&(this.changed=!0),this.index++,!0;if(!pn&&(fn=this.recreateWrapper(cn,ze,tn,nn,rn,an)))return this.top.children[this.index]=fn,fn.contentDOM&&(fn.dirty=CONTENT_DIRTY,fn.updateChildren(rn,an+1),fn.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(ze,tn,nn,rn,sn,an){if(ze.dirty||tn.isAtom||!ze.children.length||!ze.node.content.eq(tn.content))return null;let ln=NodeViewDesc.create(this.top,tn,nn,rn,sn,an);if(ln.contentDOM){ln.children=ze.children,ze.children=[];for(let cn of ln.children)cn.parent=ln}return ze.destroy(),ln}addNode(ze,tn,nn,rn,sn){let an=NodeViewDesc.create(this.top,ze,tn,nn,rn,sn);an.contentDOM&&an.updateChildren(rn,sn+1),this.top.children.splice(this.index++,0,an),this.changed=!0}placeWidget(ze,tn,nn){let rn=this.index<this.top.children.length?this.top.children[this.index]:null;if(rn&&rn.matchesWidget(ze)&&(ze==rn.widget||!rn.widget.type.toDOM.parentNode))this.index++;else{let sn=new WidgetViewDesc(this.top,ze,tn,nn);this.top.children.splice(this.index++,0,sn),this.changed=!0}}addTextblockHacks(){let ze=this.top.children[this.index-1],tn=this.top;for(;ze instanceof MarkViewDesc;)tn=ze,ze=tn.children[tn.children.length-1];(!ze||!(ze instanceof TextViewDesc)||/\n$/.test(ze.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(ze.node.text))&&((safari||chrome)&&ze&&ze.dom.contentEditable=="false"&&this.addHackNode("IMG",tn),this.addHackNode("BR",this.top))}addHackNode(ze,tn){if(tn==this.top&&this.index<tn.children.length&&tn.children[this.index].matchesHack(ze))this.index++;else{let nn=document.createElement(ze);ze=="IMG"&&(nn.className="ProseMirror-separator",nn.alt=""),ze=="BR"&&(nn.className="ProseMirror-trailingBreak");let rn=new TrailingHackViewDesc(this.top,[],nn,null);tn!=this.top?tn.children.push(rn):tn.children.splice(this.index++,0,rn),this.changed=!0}}isLocked(ze){return this.lock&&(ze==this.lock||ze.nodeType==1&&ze.contains(this.lock.parentNode))}}function preMatch(en,ze){let tn=ze,nn=tn.children.length,rn=en.childCount,sn=new Map,an=[];e:for(;rn>0;){let ln;for(;;)if(nn){let un=tn.children[nn-1];if(un instanceof MarkViewDesc)tn=un,nn=un.children.length;else{ln=un,nn--;break}}else{if(tn==ze)break e;nn=tn.parent.children.indexOf(tn),tn=tn.parent}let cn=ln.node;if(cn){if(cn!=en.child(rn-1))break;--rn,sn.set(ln,rn),an.push(ln)}}return{index:rn,matched:sn,matches:an.reverse()}}function compareSide(en,ze){return en.type.side-ze.type.side}function iterDeco(en,ze,tn,nn){let rn=ze.locals(en),sn=0;if(rn.length==0){for(let un=0;un<en.childCount;un++){let dn=en.child(un);nn(dn,rn,ze.forChild(sn,dn),un),sn+=dn.nodeSize}return}let an=0,ln=[],cn=null;for(let un=0;;){let dn,fn;for(;an<rn.length&&rn[an].to==sn;){let mn=rn[an++];mn.widget&&(dn?(fn||(fn=[dn])).push(mn):dn=mn)}if(dn)if(fn){fn.sort(compareSide);for(let mn=0;mn<fn.length;mn++)tn(fn[mn],un,!!cn)}else tn(dn,un,!!cn);let pn,hn;if(cn)hn=-1,pn=cn,cn=null;else if(un<en.childCount)hn=un,pn=en.child(un++);else break;for(let mn=0;mn<ln.length;mn++)ln[mn].to<=sn&&ln.splice(mn--,1);for(;an<rn.length&&rn[an].from<=sn&&rn[an].to>sn;)ln.push(rn[an++]);let gn=sn+pn.nodeSize;if(pn.isText){let mn=gn;an<rn.length&&rn[an].from<mn&&(mn=rn[an].from);for(let bn=0;bn<ln.length;bn++)ln[bn].to<mn&&(mn=ln[bn].to);mn<gn&&(cn=pn.cut(mn-sn),pn=pn.cut(0,mn-sn),gn=mn,hn=-1)}else for(;an<rn.length&&rn[an].to<gn;)an++;let En=pn.isInline&&!pn.isLeaf?ln.filter(mn=>!mn.inline):ln.slice();nn(pn,En,ze.forChild(sn,pn),hn),sn=gn}}function iosHacks(en){if(en.nodeName=="UL"||en.nodeName=="OL"){let ze=en.style.cssText;en.style.cssText=ze+"; list-style: square !important",window.getComputedStyle(en).listStyle,en.style.cssText=ze}}function findTextInFragment(en,ze,tn,nn){for(let rn=0,sn=0;rn<en.childCount&&sn<=nn;){let an=en.child(rn++),ln=sn;if(sn+=an.nodeSize,!an.isText)continue;let cn=an.text;for(;rn<en.childCount;){let un=en.child(rn++);if(sn+=un.nodeSize,!un.isText)break;cn+=un.text}if(sn>=tn){if(sn>=nn&&cn.slice(nn-ze.length-ln,nn-ln)==ze)return nn-ze.length;let un=ln<nn?cn.lastIndexOf(ze,nn-ln-1):-1;if(un>=0&&un+ze.length+ln>=tn)return ln+un;if(tn==nn&&cn.length>=nn+ze.length-ln&&cn.slice(nn-ln,nn-ln+ze.length)==ze)return nn}}return-1}function replaceNodes(en,ze,tn,nn,rn){let sn=[];for(let an=0,ln=0;an<en.length;an++){let cn=en[an],un=ln,dn=ln+=cn.size;un>=tn||dn<=ze?sn.push(cn):(un<ze&&sn.push(cn.slice(0,ze-un,nn)),rn&&(sn.push(rn),rn=void 0),dn>tn&&sn.push(cn.slice(tn-un,cn.size,nn)))}return sn}function selectionFromDOM(en,ze=null){let tn=en.domSelectionRange(),nn=en.state.doc;if(!tn.focusNode)return null;let rn=en.docView.nearestDesc(tn.focusNode),sn=rn&&rn.size==0,an=en.docView.posFromDOM(tn.focusNode,tn.focusOffset,1);if(an<0)return null;let ln=nn.resolve(an),cn,un;if(selectionCollapsed(tn)){for(cn=ln;rn&&!rn.node;)rn=rn.parent;let dn=rn.node;if(rn&&dn.isAtom&&NodeSelection.isSelectable(dn)&&rn.parent&&!(dn.isInline&&isOnEdge(tn.focusNode,tn.focusOffset,rn.dom))){let fn=rn.posBefore;un=new NodeSelection(an==fn?ln:nn.resolve(fn))}}else{let dn=en.docView.posFromDOM(tn.anchorNode,tn.anchorOffset,1);if(dn<0)return null;cn=nn.resolve(dn)}if(!un){let dn=ze=="pointer"||en.state.selection.head<ln.pos&&!sn?1:-1;un=selectionBetween(en,cn,ln,dn)}return un}function editorOwnsSelection(en){return en.editable?en.hasFocus():hasSelection(en)&&document.activeElement&&document.activeElement.contains(en.dom)}function selectionToDOM(en,ze=!1){let tn=en.state.selection;if(syncNodeSelection(en,tn),!!editorOwnsSelection(en)){if(!ze&&en.input.mouseDown&&en.input.mouseDown.allowDefault&&chrome){let nn=en.domSelectionRange(),rn=en.domObserver.currentSelection;if(nn.anchorNode&&rn.anchorNode&&isEquivalentPosition(nn.anchorNode,nn.anchorOffset,rn.anchorNode,rn.anchorOffset)){en.input.mouseDown.delayedSelectionSync=!0,en.domObserver.setCurSelection();return}}if(en.domObserver.disconnectSelection(),en.cursorWrapper)selectCursorWrapper(en);else{let{anchor:nn,head:rn}=tn,sn,an;brokenSelectBetweenUneditable&&!(tn instanceof TextSelection)&&(tn.$from.parent.inlineContent||(sn=temporarilyEditableNear(en,tn.from)),!tn.empty&&!tn.$from.parent.inlineContent&&(an=temporarilyEditableNear(en,tn.to))),en.docView.setSelection(nn,rn,en.root,ze),brokenSelectBetweenUneditable&&(sn&&resetEditable(sn),an&&resetEditable(an)),tn.visible?en.dom.classList.remove("ProseMirror-hideselection"):(en.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(en))}en.domObserver.setCurSelection(),en.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(en,ze){let{node:tn,offset:nn}=en.docView.domFromPos(ze,0),rn=nn<tn.childNodes.length?tn.childNodes[nn]:null,sn=nn?tn.childNodes[nn-1]:null;if(safari&&rn&&rn.contentEditable=="false")return setEditable(rn);if((!rn||rn.contentEditable=="false")&&(!sn||sn.contentEditable=="false")){if(rn)return setEditable(rn);if(sn)return setEditable(sn)}}function setEditable(en){return en.contentEditable="true",safari&&en.draggable&&(en.draggable=!1,en.wasDraggable=!0),en}function resetEditable(en){en.contentEditable="false",en.wasDraggable&&(en.draggable=!0,en.wasDraggable=null)}function removeClassOnSelectionChange(en){let ze=en.dom.ownerDocument;ze.removeEventListener("selectionchange",en.input.hideSelectionGuard);let tn=en.domSelectionRange(),nn=tn.anchorNode,rn=tn.anchorOffset;ze.addEventListener("selectionchange",en.input.hideSelectionGuard=()=>{(tn.anchorNode!=nn||tn.anchorOffset!=rn)&&(ze.removeEventListener("selectionchange",en.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(en)||en.state.selection.visible)&&en.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(en){let ze=en.domSelection(),tn=document.createRange(),nn=en.cursorWrapper.dom,rn=nn.nodeName=="IMG";rn?tn.setEnd(nn.parentNode,domIndex(nn)+1):tn.setEnd(nn,0),tn.collapse(!1),ze.removeAllRanges(),ze.addRange(tn),!rn&&!en.state.selection.visible&&ie$1&&ie_version<=11&&(nn.disabled=!0,nn.disabled=!1)}function syncNodeSelection(en,ze){if(ze instanceof NodeSelection){let tn=en.docView.descAt(ze.from);tn!=en.lastSelectedViewDesc&&(clearNodeSelection(en),tn&&tn.selectNode(),en.lastSelectedViewDesc=tn)}else clearNodeSelection(en)}function clearNodeSelection(en){en.lastSelectedViewDesc&&(en.lastSelectedViewDesc.parent&&en.lastSelectedViewDesc.deselectNode(),en.lastSelectedViewDesc=void 0)}function selectionBetween(en,ze,tn,nn){return en.someProp("createSelectionBetween",rn=>rn(en,ze,tn))||TextSelection.between(ze,tn,nn)}function hasFocusAndSelection(en){return en.editable&&!en.hasFocus()?!1:hasSelection(en)}function hasSelection(en){let ze=en.domSelectionRange();if(!ze.anchorNode)return!1;try{return en.dom.contains(ze.anchorNode.nodeType==3?ze.anchorNode.parentNode:ze.anchorNode)&&(en.editable||en.dom.contains(ze.focusNode.nodeType==3?ze.focusNode.parentNode:ze.focusNode))}catch{return!1}}function anchorInRightPlace(en){let ze=en.docView.domFromPos(en.state.selection.anchor,0),tn=en.domSelectionRange();return isEquivalentPosition(ze.node,ze.offset,tn.anchorNode,tn.anchorOffset)}function moveSelectionBlock(en,ze){let{$anchor:tn,$head:nn}=en.selection,rn=ze>0?tn.max(nn):tn.min(nn),sn=rn.parent.inlineContent?rn.depth?en.doc.resolve(ze>0?rn.after():rn.before()):null:rn;return sn&&Selection.findFrom(sn,ze)}function apply(en,ze){return en.dispatch(en.state.tr.setSelection(ze).scrollIntoView()),!0}function selectHorizontally(en,ze,tn){let nn=en.state.selection;if(nn instanceof TextSelection)if(tn.indexOf("s")>-1){let{$head:rn}=nn,sn=rn.textOffset?null:ze<0?rn.nodeBefore:rn.nodeAfter;if(!sn||sn.isText||!sn.isLeaf)return!1;let an=en.state.doc.resolve(rn.pos+sn.nodeSize*(ze<0?-1:1));return apply(en,new TextSelection(nn.$anchor,an))}else if(nn.empty){if(en.endOfTextblock(ze>0?"forward":"backward")){let rn=moveSelectionBlock(en.state,ze);return rn&&rn instanceof NodeSelection?apply(en,rn):!1}else if(!(mac$2&&tn.indexOf("m")>-1)){let rn=nn.$head,sn=rn.textOffset?null:ze<0?rn.nodeBefore:rn.nodeAfter,an;if(!sn||sn.isText)return!1;let ln=ze<0?rn.pos-sn.nodeSize:rn.pos;return sn.isAtom||(an=en.docView.descAt(ln))&&!an.contentDOM?NodeSelection.isSelectable(sn)?apply(en,new NodeSelection(ze<0?en.state.doc.resolve(rn.pos-sn.nodeSize):rn)):webkit?apply(en,new TextSelection(en.state.doc.resolve(ze<0?ln:ln+sn.nodeSize))):!1:!1}}else return!1;else{if(nn instanceof NodeSelection&&nn.node.isInline)return apply(en,new TextSelection(ze>0?nn.$to:nn.$from));{let rn=moveSelectionBlock(en.state,ze);return rn?apply(en,rn):!1}}}function nodeLen(en){return en.nodeType==3?en.nodeValue.length:en.childNodes.length}function isIgnorable(en,ze){let tn=en.pmViewDesc;return tn&&tn.size==0&&(ze<0||en.nextSibling||en.nodeName!="BR")}function skipIgnoredNodes(en,ze){return ze<0?skipIgnoredNodesBefore(en):skipIgnoredNodesAfter(en)}function skipIgnoredNodesBefore(en){let ze=en.domSelectionRange(),tn=ze.focusNode,nn=ze.focusOffset;if(!tn)return;let rn,sn,an=!1;for(gecko&&tn.nodeType==1&&nn<nodeLen(tn)&&isIgnorable(tn.childNodes[nn],-1)&&(an=!0);;)if(nn>0){if(tn.nodeType!=1)break;{let ln=tn.childNodes[nn-1];if(isIgnorable(ln,-1))rn=tn,sn=--nn;else if(ln.nodeType==3)tn=ln,nn=tn.nodeValue.length;else break}}else{if(isBlockNode(tn))break;{let ln=tn.previousSibling;for(;ln&&isIgnorable(ln,-1);)rn=tn.parentNode,sn=domIndex(ln),ln=ln.previousSibling;if(ln)tn=ln,nn=nodeLen(tn);else{if(tn=tn.parentNode,tn==en.dom)break;nn=0}}}an?setSelFocus(en,tn,nn):rn&&setSelFocus(en,rn,sn)}function skipIgnoredNodesAfter(en){let ze=en.domSelectionRange(),tn=ze.focusNode,nn=ze.focusOffset;if(!tn)return;let rn=nodeLen(tn),sn,an;for(;;)if(nn<rn){if(tn.nodeType!=1)break;let ln=tn.childNodes[nn];if(isIgnorable(ln,1))sn=tn,an=++nn;else break}else{if(isBlockNode(tn))break;{let ln=tn.nextSibling;for(;ln&&isIgnorable(ln,1);)sn=ln.parentNode,an=domIndex(ln)+1,ln=ln.nextSibling;if(ln)tn=ln,nn=0,rn=nodeLen(tn);else{if(tn=tn.parentNode,tn==en.dom)break;nn=rn=0}}}sn&&setSelFocus(en,sn,an)}function isBlockNode(en){let ze=en.pmViewDesc;return ze&&ze.node&&ze.node.isBlock}function textNodeAfter(en,ze){for(;en&&ze==en.childNodes.length&&!hasBlockDesc(en);)ze=domIndex(en)+1,en=en.parentNode;for(;en&&ze<en.childNodes.length;){let tn=en.childNodes[ze];if(tn.nodeType==3)return tn;if(tn.nodeType==1&&tn.contentEditable=="false")break;en=tn,ze=0}}function textNodeBefore(en,ze){for(;en&&!ze&&!hasBlockDesc(en);)ze=domIndex(en),en=en.parentNode;for(;en&&ze;){let tn=en.childNodes[ze-1];if(tn.nodeType==3)return tn;if(tn.nodeType==1&&tn.contentEditable=="false")break;en=tn,ze=en.childNodes.length}}function setSelFocus(en,ze,tn){if(ze.nodeType!=3){let sn,an;(an=textNodeAfter(ze,tn))?(ze=an,tn=0):(sn=textNodeBefore(ze,tn))&&(ze=sn,tn=sn.nodeValue.length)}let nn=en.domSelection();if(selectionCollapsed(nn)){let sn=document.createRange();sn.setEnd(ze,tn),sn.setStart(ze,tn),nn.removeAllRanges(),nn.addRange(sn)}else nn.extend&&nn.extend(ze,tn);en.domObserver.setCurSelection();let{state:rn}=en;setTimeout(()=>{en.state==rn&&selectionToDOM(en)},50)}function findDirection(en,ze){let tn=en.state.doc.resolve(ze);if(!(chrome||windows)&&tn.parent.inlineContent){let rn=en.coordsAtPos(ze);if(ze>tn.start()){let sn=en.coordsAtPos(ze-1),an=(sn.top+sn.bottom)/2;if(an>rn.top&&an<rn.bottom&&Math.abs(sn.left-rn.left)>1)return sn.left<rn.left?"ltr":"rtl"}if(ze<tn.end()){let sn=en.coordsAtPos(ze+1),an=(sn.top+sn.bottom)/2;if(an>rn.top&&an<rn.bottom&&Math.abs(sn.left-rn.left)>1)return sn.left>rn.left?"ltr":"rtl"}}return getComputedStyle(en.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(en,ze,tn){let nn=en.state.selection;if(nn instanceof TextSelection&&!nn.empty||tn.indexOf("s")>-1||mac$2&&tn.indexOf("m")>-1)return!1;let{$from:rn,$to:sn}=nn;if(!rn.parent.inlineContent||en.endOfTextblock(ze<0?"up":"down")){let an=moveSelectionBlock(en.state,ze);if(an&&an instanceof NodeSelection)return apply(en,an)}if(!rn.parent.inlineContent){let an=ze<0?rn:sn,ln=nn instanceof AllSelection?Selection.near(an,ze):Selection.findFrom(an,ze);return ln?apply(en,ln):!1}return!1}function stopNativeHorizontalDelete(en,ze){if(!(en.state.selection instanceof TextSelection))return!0;let{$head:tn,$anchor:nn,empty:rn}=en.state.selection;if(!tn.sameParent(nn))return!0;if(!rn)return!1;if(en.endOfTextblock(ze>0?"forward":"backward"))return!0;let sn=!tn.textOffset&&(ze<0?tn.nodeBefore:tn.nodeAfter);if(sn&&!sn.isText){let an=en.state.tr;return ze<0?an.delete(tn.pos-sn.nodeSize,tn.pos):an.delete(tn.pos,tn.pos+sn.nodeSize),en.dispatch(an),!0}return!1}function switchEditable(en,ze,tn){en.domObserver.stop(),ze.contentEditable=tn,en.domObserver.start()}function safariDownArrowBug(en){if(!safari||en.state.selection.$head.parentOffset>0)return!1;let{focusNode:ze,focusOffset:tn}=en.domSelectionRange();if(ze&&ze.nodeType==1&&tn==0&&ze.firstChild&&ze.firstChild.contentEditable=="false"){let nn=ze.firstChild;switchEditable(en,nn,"true"),setTimeout(()=>switchEditable(en,nn,"false"),20)}return!1}function getMods(en){let ze="";return en.ctrlKey&&(ze+="c"),en.metaKey&&(ze+="m"),en.altKey&&(ze+="a"),en.shiftKey&&(ze+="s"),ze}function captureKeyDown(en,ze){let tn=ze.keyCode,nn=getMods(ze);if(tn==8||mac$2&&tn==72&&nn=="c")return stopNativeHorizontalDelete(en,-1)||skipIgnoredNodes(en,-1);if(tn==46&&!ze.shiftKey||mac$2&&tn==68&&nn=="c")return stopNativeHorizontalDelete(en,1)||skipIgnoredNodes(en,1);if(tn==13||tn==27)return!0;if(tn==37||mac$2&&tn==66&&nn=="c"){let rn=tn==37?findDirection(en,en.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(en,rn,nn)||skipIgnoredNodes(en,rn)}else if(tn==39||mac$2&&tn==70&&nn=="c"){let rn=tn==39?findDirection(en,en.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(en,rn,nn)||skipIgnoredNodes(en,rn)}else{if(tn==38||mac$2&&tn==80&&nn=="c")return selectVertically(en,-1,nn)||skipIgnoredNodes(en,-1);if(tn==40||mac$2&&tn==78&&nn=="c")return safariDownArrowBug(en)||selectVertically(en,1,nn)||skipIgnoredNodes(en,1);if(nn==(mac$2?"m":"c")&&(tn==66||tn==73||tn==89||tn==90))return!0}return!1}function serializeForClipboard(en,ze){en.someProp("transformCopied",hn=>{ze=hn(ze,en)});let tn=[],{content:nn,openStart:rn,openEnd:sn}=ze;for(;rn>1&&sn>1&&nn.childCount==1&&nn.firstChild.childCount==1;){rn--,sn--;let hn=nn.firstChild;tn.push(hn.type.name,hn.attrs!=hn.type.defaultAttrs?hn.attrs:null),nn=hn.content}let an=en.someProp("clipboardSerializer")||DOMSerializer.fromSchema(en.state.schema),ln=detachedDoc(),cn=ln.createElement("div");cn.appendChild(an.serializeFragment(nn,{document:ln}));let un=cn.firstChild,dn,fn=0;for(;un&&un.nodeType==1&&(dn=wrapMap[un.nodeName.toLowerCase()]);){for(let hn=dn.length-1;hn>=0;hn--){let gn=ln.createElement(dn[hn]);for(;cn.firstChild;)gn.appendChild(cn.firstChild);cn.appendChild(gn),fn++}un=cn.firstChild}un&&un.nodeType==1&&un.setAttribute("data-pm-slice",`${rn} ${sn}${fn?` -${fn}`:""} ${JSON.stringify(tn)}`);let pn=en.someProp("clipboardTextSerializer",hn=>hn(ze,en))||ze.content.textBetween(0,ze.content.size,`

`);return{dom:cn,text:pn}}function parseFromClipboard(en,ze,tn,nn,rn){let sn=rn.parent.type.spec.code,an,ln;if(!tn&&!ze)return null;let cn=ze&&(nn||sn||!tn);if(cn){if(en.someProp("transformPastedText",pn=>{ze=pn(ze,sn||nn,en)}),sn)return ze?new Slice(Fragment.from(en.state.schema.text(ze.replace(/\r\n?/g,`
`))),0,0):Slice.empty;let fn=en.someProp("clipboardTextParser",pn=>pn(ze,rn,nn,en));if(fn)ln=fn;else{let pn=rn.marks(),{schema:hn}=en.state,gn=DOMSerializer.fromSchema(hn);an=document.createElement("div"),ze.split(/(?:\r\n?|\n)+/).forEach(En=>{let mn=an.appendChild(document.createElement("p"));En&&mn.appendChild(gn.serializeNode(hn.text(En,pn)))})}}else en.someProp("transformPastedHTML",fn=>{tn=fn(tn,en)}),an=readHTML(tn),webkit&&restoreReplacedSpaces(an);let un=an&&an.querySelector("[data-pm-slice]"),dn=un&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(un.getAttribute("data-pm-slice")||"");if(dn&&dn[3])for(let fn=+dn[3];fn>0;fn--){let pn=an.firstChild;for(;pn&&pn.nodeType!=1;)pn=pn.nextSibling;if(!pn)break;an=pn}if(ln||(ln=(en.someProp("clipboardParser")||en.someProp("domParser")||DOMParser$1.fromSchema(en.state.schema)).parseSlice(an,{preserveWhitespace:!!(cn||dn),context:rn,ruleFromNode(pn){return pn.nodeName=="BR"&&!pn.nextSibling&&pn.parentNode&&!inlineParents.test(pn.parentNode.nodeName)?{ignore:!0}:null}})),dn)ln=addContext(closeSlice(ln,+dn[1],+dn[2]),dn[4]);else if(ln=Slice.maxOpen(normalizeSiblings(ln.content,rn),!0),ln.openStart||ln.openEnd){let fn=0,pn=0;for(let hn=ln.content.firstChild;fn<ln.openStart&&!hn.type.spec.isolating;fn++,hn=hn.firstChild);for(let hn=ln.content.lastChild;pn<ln.openEnd&&!hn.type.spec.isolating;pn++,hn=hn.lastChild);ln=closeSlice(ln,fn,pn)}return en.someProp("transformPasted",fn=>{ln=fn(ln,en)}),ln}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(en,ze){if(en.childCount<2)return en;for(let tn=ze.depth;tn>=0;tn--){let rn=ze.node(tn).contentMatchAt(ze.index(tn)),sn,an=[];if(en.forEach(ln=>{if(!an)return;let cn=rn.findWrapping(ln.type),un;if(!cn)return an=null;if(un=an.length&&sn.length&&addToSibling(cn,sn,ln,an[an.length-1],0))an[an.length-1]=un;else{an.length&&(an[an.length-1]=closeRight(an[an.length-1],sn.length));let dn=withWrappers(ln,cn);an.push(dn),rn=rn.matchType(dn.type),sn=cn}}),an)return Fragment.from(an)}return en}function withWrappers(en,ze,tn=0){for(let nn=ze.length-1;nn>=tn;nn--)en=ze[nn].create(null,Fragment.from(en));return en}function addToSibling(en,ze,tn,nn,rn){if(rn<en.length&&rn<ze.length&&en[rn]==ze[rn]){let sn=addToSibling(en,ze,tn,nn.lastChild,rn+1);if(sn)return nn.copy(nn.content.replaceChild(nn.childCount-1,sn));if(nn.contentMatchAt(nn.childCount).matchType(rn==en.length-1?tn.type:en[rn+1]))return nn.copy(nn.content.append(Fragment.from(withWrappers(tn,en,rn+1))))}}function closeRight(en,ze){if(ze==0)return en;let tn=en.content.replaceChild(en.childCount-1,closeRight(en.lastChild,ze-1)),nn=en.contentMatchAt(en.childCount).fillBefore(Fragment.empty,!0);return en.copy(tn.append(nn))}function closeRange(en,ze,tn,nn,rn,sn){let an=ze<0?en.firstChild:en.lastChild,ln=an.content;return en.childCount>1&&(sn=0),rn<nn-1&&(ln=closeRange(ln,ze,tn,nn,rn+1,sn)),rn>=tn&&(ln=ze<0?an.contentMatchAt(0).fillBefore(ln,sn<=rn).append(ln):ln.append(an.contentMatchAt(an.childCount).fillBefore(Fragment.empty,!0))),en.replaceChild(ze<0?0:en.childCount-1,an.copy(ln))}function closeSlice(en,ze,tn){return ze<en.openStart&&(en=new Slice(closeRange(en.content,-1,ze,en.openStart,0,en.openEnd),ze,en.openEnd)),tn<en.openEnd&&(en=new Slice(closeRange(en.content,1,tn,en.openEnd,0,0),en.openStart,tn)),en}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}function readHTML(en){let ze=/^(\s*<meta [^>]*>)*/.exec(en);ze&&(en=en.slice(ze[0].length));let tn=detachedDoc().createElement("div"),nn=/<([a-z][^>\s]+)/i.exec(en),rn;if((rn=nn&&wrapMap[nn[1].toLowerCase()])&&(en=rn.map(sn=>"<"+sn+">").join("")+en+rn.map(sn=>"</"+sn+">").reverse().join("")),tn.innerHTML=en,rn)for(let sn=0;sn<rn.length;sn++)tn=tn.querySelector(rn[sn])||tn;return tn}function restoreReplacedSpaces(en){let ze=en.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let tn=0;tn<ze.length;tn++){let nn=ze[tn];nn.childNodes.length==1&&nn.textContent==""&&nn.parentNode&&nn.parentNode.replaceChild(en.ownerDocument.createTextNode(" "),nn)}}function addContext(en,ze){if(!en.size)return en;let tn=en.content.firstChild.type.schema,nn;try{nn=JSON.parse(ze)}catch{return en}let{content:rn,openStart:sn,openEnd:an}=en;for(let ln=nn.length-2;ln>=0;ln-=2){let cn=tn.nodes[nn[ln]];if(!cn||cn.hasRequiredAttrs())break;rn=Fragment.from(cn.create(nn[ln+1],rn)),sn++,an++}return new Slice(rn,sn,an)}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(en){for(let ze in handlers){let tn=handlers[ze];en.dom.addEventListener(ze,en.input.eventHandlers[ze]=nn=>{eventBelongsToView(en,nn)&&!runCustomHandler(en,nn)&&(en.editable||!(nn.type in editHandlers))&&tn(en,nn)},passiveHandlers[ze]?{passive:!0}:void 0)}safari&&en.dom.addEventListener("input",()=>null),ensureListeners(en)}function setSelectionOrigin(en,ze){en.input.lastSelectionOrigin=ze,en.input.lastSelectionTime=Date.now()}function destroyInput(en){en.domObserver.stop();for(let ze in en.input.eventHandlers)en.dom.removeEventListener(ze,en.input.eventHandlers[ze]);clearTimeout(en.input.composingTimeout),clearTimeout(en.input.lastIOSEnterFallbackTimeout)}function ensureListeners(en){en.someProp("handleDOMEvents",ze=>{for(let tn in ze)en.input.eventHandlers[tn]||en.dom.addEventListener(tn,en.input.eventHandlers[tn]=nn=>runCustomHandler(en,nn))})}function runCustomHandler(en,ze){return en.someProp("handleDOMEvents",tn=>{let nn=tn[ze.type];return nn?nn(en,ze)||ze.defaultPrevented:!1})}function eventBelongsToView(en,ze){if(!ze.bubbles)return!0;if(ze.defaultPrevented)return!1;for(let tn=ze.target;tn!=en.dom;tn=tn.parentNode)if(!tn||tn.nodeType==11||tn.pmViewDesc&&tn.pmViewDesc.stopEvent(ze))return!1;return!0}function dispatchEvent(en,ze){!runCustomHandler(en,ze)&&handlers[ze.type]&&(en.editable||!(ze.type in editHandlers))&&handlers[ze.type](en,ze)}editHandlers.keydown=(en,ze)=>{let tn=ze;if(en.input.shiftKey=tn.keyCode==16||tn.shiftKey,!inOrNearComposition(en,tn)&&(en.input.lastKeyCode=tn.keyCode,en.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&tn.keyCode==13)))if(tn.keyCode!=229&&en.domObserver.forceFlush(),ios&&tn.keyCode==13&&!tn.ctrlKey&&!tn.altKey&&!tn.metaKey){let nn=Date.now();en.input.lastIOSEnter=nn,en.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{en.input.lastIOSEnter==nn&&(en.someProp("handleKeyDown",rn=>rn(en,keyEvent(13,"Enter"))),en.input.lastIOSEnter=0)},200)}else en.someProp("handleKeyDown",nn=>nn(en,tn))||captureKeyDown(en,tn)?tn.preventDefault():setSelectionOrigin(en,"key")};editHandlers.keyup=(en,ze)=>{ze.keyCode==16&&(en.input.shiftKey=!1)};editHandlers.keypress=(en,ze)=>{let tn=ze;if(inOrNearComposition(en,tn)||!tn.charCode||tn.ctrlKey&&!tn.altKey||mac$2&&tn.metaKey)return;if(en.someProp("handleKeyPress",rn=>rn(en,tn))){tn.preventDefault();return}let nn=en.state.selection;if(!(nn instanceof TextSelection)||!nn.$from.sameParent(nn.$to)){let rn=String.fromCharCode(tn.charCode);!/[\r\n]/.test(rn)&&!en.someProp("handleTextInput",sn=>sn(en,nn.$from.pos,nn.$to.pos,rn))&&en.dispatch(en.state.tr.insertText(rn).scrollIntoView()),tn.preventDefault()}};function eventCoords(en){return{left:en.clientX,top:en.clientY}}function isNear(en,ze){let tn=ze.x-en.clientX,nn=ze.y-en.clientY;return tn*tn+nn*nn<100}function runHandlerOnContext(en,ze,tn,nn,rn){if(nn==-1)return!1;let sn=en.state.doc.resolve(nn);for(let an=sn.depth+1;an>0;an--)if(en.someProp(ze,ln=>an>sn.depth?ln(en,tn,sn.nodeAfter,sn.before(an),rn,!0):ln(en,tn,sn.node(an),sn.before(an),rn,!1)))return!0;return!1}function updateSelection(en,ze,tn){en.focused||en.focus();let nn=en.state.tr.setSelection(ze);tn=="pointer"&&nn.setMeta("pointer",!0),en.dispatch(nn)}function selectClickedLeaf(en,ze){if(ze==-1)return!1;let tn=en.state.doc.resolve(ze),nn=tn.nodeAfter;return nn&&nn.isAtom&&NodeSelection.isSelectable(nn)?(updateSelection(en,new NodeSelection(tn),"pointer"),!0):!1}function selectClickedNode(en,ze){if(ze==-1)return!1;let tn=en.state.selection,nn,rn;tn instanceof NodeSelection&&(nn=tn.node);let sn=en.state.doc.resolve(ze);for(let an=sn.depth+1;an>0;an--){let ln=an>sn.depth?sn.nodeAfter:sn.node(an);if(NodeSelection.isSelectable(ln)){nn&&tn.$from.depth>0&&an>=tn.$from.depth&&sn.before(tn.$from.depth+1)==tn.$from.pos?rn=sn.before(tn.$from.depth):rn=sn.before(an);break}}return rn!=null?(updateSelection(en,NodeSelection.create(en.state.doc,rn),"pointer"),!0):!1}function handleSingleClick(en,ze,tn,nn,rn){return runHandlerOnContext(en,"handleClickOn",ze,tn,nn)||en.someProp("handleClick",sn=>sn(en,ze,nn))||(rn?selectClickedNode(en,tn):selectClickedLeaf(en,tn))}function handleDoubleClick(en,ze,tn,nn){return runHandlerOnContext(en,"handleDoubleClickOn",ze,tn,nn)||en.someProp("handleDoubleClick",rn=>rn(en,ze,nn))}function handleTripleClick(en,ze,tn,nn){return runHandlerOnContext(en,"handleTripleClickOn",ze,tn,nn)||en.someProp("handleTripleClick",rn=>rn(en,ze,nn))||defaultTripleClick(en,tn,nn)}function defaultTripleClick(en,ze,tn){if(tn.button!=0)return!1;let nn=en.state.doc;if(ze==-1)return nn.inlineContent?(updateSelection(en,TextSelection.create(nn,0,nn.content.size),"pointer"),!0):!1;let rn=nn.resolve(ze);for(let sn=rn.depth+1;sn>0;sn--){let an=sn>rn.depth?rn.nodeAfter:rn.node(sn),ln=rn.before(sn);if(an.inlineContent)updateSelection(en,TextSelection.create(nn,ln+1,ln+1+an.content.size),"pointer");else if(NodeSelection.isSelectable(an))updateSelection(en,NodeSelection.create(nn,ln),"pointer");else continue;return!0}}function forceDOMFlush(en){return endComposition(en)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers.mousedown=(en,ze)=>{let tn=ze;en.input.shiftKey=tn.shiftKey;let nn=forceDOMFlush(en),rn=Date.now(),sn="singleClick";rn-en.input.lastClick.time<500&&isNear(tn,en.input.lastClick)&&!tn[selectNodeModifier]&&(en.input.lastClick.type=="singleClick"?sn="doubleClick":en.input.lastClick.type=="doubleClick"&&(sn="tripleClick")),en.input.lastClick={time:rn,x:tn.clientX,y:tn.clientY,type:sn};let an=en.posAtCoords(eventCoords(tn));an&&(sn=="singleClick"?(en.input.mouseDown&&en.input.mouseDown.done(),en.input.mouseDown=new MouseDown(en,an,tn,!!nn)):(sn=="doubleClick"?handleDoubleClick:handleTripleClick)(en,an.pos,an.inside,tn)?tn.preventDefault():setSelectionOrigin(en,"pointer"))};class MouseDown{constructor(ze,tn,nn,rn){this.view=ze,this.pos=tn,this.event=nn,this.flushed=rn,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=ze.state.doc,this.selectNode=!!nn[selectNodeModifier],this.allowDefault=nn.shiftKey;let sn,an;if(tn.inside>-1)sn=ze.state.doc.nodeAt(tn.inside),an=tn.inside;else{let dn=ze.state.doc.resolve(tn.pos);sn=dn.parent,an=dn.depth?dn.before():0}const ln=rn?null:nn.target,cn=ln?ze.docView.nearestDesc(ln,!0):null;this.target=cn?cn.dom:null;let{selection:un}=ze.state;(nn.button==0&&sn.type.spec.draggable&&sn.type.spec.selectable!==!1||un instanceof NodeSelection&&un.from<=an&&un.to>an)&&(this.mightDrag={node:sn,pos:an,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),ze.root.addEventListener("mouseup",this.up=this.up.bind(this)),ze.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(ze,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(ze){if(this.done(),!this.view.dom.contains(ze.target))return;let tn=this.pos;this.view.state.doc!=this.startDoc&&(tn=this.view.posAtCoords(eventCoords(ze))),this.updateAllowDefault(ze),this.allowDefault||!tn?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,tn.pos,tn.inside,ze,this.selectNode)?ze.preventDefault():ze.button==0&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(tn.pos-this.view.state.selection.from),Math.abs(tn.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(tn.pos)),"pointer"),ze.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(ze){this.updateAllowDefault(ze),setSelectionOrigin(this.view,"pointer"),ze.buttons==0&&this.done()}updateAllowDefault(ze){!this.allowDefault&&(Math.abs(this.event.x-ze.clientX)>4||Math.abs(this.event.y-ze.clientY)>4)&&(this.allowDefault=!0)}}handlers.touchstart=en=>{en.input.lastTouch=Date.now(),forceDOMFlush(en),setSelectionOrigin(en,"pointer")};handlers.touchmove=en=>{en.input.lastTouch=Date.now(),setSelectionOrigin(en,"pointer")};handlers.contextmenu=en=>forceDOMFlush(en);function inOrNearComposition(en,ze){return en.composing?!0:safari&&Math.abs(ze.timeStamp-en.input.compositionEndedAt)<500?(en.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=en=>{if(!en.composing){en.domObserver.flush();let{state:ze}=en,tn=ze.selection.$from;if(ze.selection.empty&&(ze.storedMarks||!tn.textOffset&&tn.parentOffset&&tn.nodeBefore.marks.some(nn=>nn.type.spec.inclusive===!1)))en.markCursor=en.state.storedMarks||tn.marks(),endComposition(en,!0),en.markCursor=null;else if(endComposition(en),gecko&&ze.selection.empty&&tn.parentOffset&&!tn.textOffset&&tn.nodeBefore.marks.length){let nn=en.domSelectionRange();for(let rn=nn.focusNode,sn=nn.focusOffset;rn&&rn.nodeType==1&&sn!=0;){let an=sn<0?rn.lastChild:rn.childNodes[sn-1];if(!an)break;if(an.nodeType==3){en.domSelection().collapse(an,an.nodeValue.length);break}else rn=an,sn=-1}}en.input.composing=!0}scheduleComposeEnd(en,timeoutComposition)};editHandlers.compositionend=(en,ze)=>{en.composing&&(en.input.composing=!1,en.input.compositionEndedAt=ze.timeStamp,en.input.compositionPendingChanges=en.domObserver.pendingRecords().length?en.input.compositionID:0,en.input.compositionNode=null,en.input.compositionPendingChanges&&Promise.resolve().then(()=>en.domObserver.flush()),en.input.compositionID++,scheduleComposeEnd(en,20))};function scheduleComposeEnd(en,ze){clearTimeout(en.input.composingTimeout),ze>-1&&(en.input.composingTimeout=setTimeout(()=>endComposition(en),ze))}function clearComposition(en){for(en.composing&&(en.input.composing=!1,en.input.compositionEndedAt=timestampFromCustomEvent());en.input.compositionNodes.length>0;)en.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(en){let ze=en.domSelectionRange();if(!ze.focusNode)return null;let tn=textNodeBefore$1(ze.focusNode,ze.focusOffset),nn=textNodeAfter$1(ze.focusNode,ze.focusOffset);if(tn&&nn&&tn!=nn){let rn=nn.pmViewDesc;if(!rn||!rn.isText(nn.nodeValue))return nn;if(en.input.compositionNode==nn){let sn=tn.pmViewDesc;if(!(!sn||!sn.isText(tn.nodeValue)))return nn}}return tn}function timestampFromCustomEvent(){let en=document.createEvent("Event");return en.initEvent("event",!0,!0),en.timeStamp}function endComposition(en,ze=!1){if(!(android&&en.domObserver.flushingSoon>=0)){if(en.domObserver.forceFlush(),clearComposition(en),ze||en.docView&&en.docView.dirty){let tn=selectionFromDOM(en);return tn&&!tn.eq(en.state.selection)?en.dispatch(en.state.tr.setSelection(tn)):en.updateState(en.state),!0}return!1}}function captureCopy(en,ze){if(!en.dom.parentNode)return;let tn=en.dom.parentNode.appendChild(document.createElement("div"));tn.appendChild(ze),tn.style.cssText="position: fixed; left: -10000px; top: 10px";let nn=getSelection(),rn=document.createRange();rn.selectNodeContents(ze),en.dom.blur(),nn.removeAllRanges(),nn.addRange(rn),setTimeout(()=>{tn.parentNode&&tn.parentNode.removeChild(tn),en.focus()},50)}const brokenClipboardAPI=ie$1&&ie_version<15||ios&&webkit_version<604;handlers.copy=editHandlers.cut=(en,ze)=>{let tn=ze,nn=en.state.selection,rn=tn.type=="cut";if(nn.empty)return;let sn=brokenClipboardAPI?null:tn.clipboardData,an=nn.content(),{dom:ln,text:cn}=serializeForClipboard(en,an);sn?(tn.preventDefault(),sn.clearData(),sn.setData("text/html",ln.innerHTML),sn.setData("text/plain",cn)):captureCopy(en,ln),rn&&en.dispatch(en.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(en){return en.openStart==0&&en.openEnd==0&&en.content.childCount==1?en.content.firstChild:null}function capturePaste(en,ze){if(!en.dom.parentNode)return;let tn=en.input.shiftKey||en.state.selection.$from.parent.type.spec.code,nn=en.dom.parentNode.appendChild(document.createElement(tn?"textarea":"div"));tn||(nn.contentEditable="true"),nn.style.cssText="position: fixed; left: -10000px; top: 10px",nn.focus();let rn=en.input.shiftKey&&en.input.lastKeyCode!=45;setTimeout(()=>{en.focus(),nn.parentNode&&nn.parentNode.removeChild(nn),tn?doPaste(en,nn.value,null,rn,ze):doPaste(en,nn.textContent,nn.innerHTML,rn,ze)},50)}function doPaste(en,ze,tn,nn,rn){let sn=parseFromClipboard(en,ze,tn,nn,en.state.selection.$from);if(en.someProp("handlePaste",cn=>cn(en,rn,sn||Slice.empty)))return!0;if(!sn)return!1;let an=sliceSingleNode(sn),ln=an?en.state.tr.replaceSelectionWith(an,nn):en.state.tr.replaceSelection(sn);return en.dispatch(ln.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(en){let ze=en.getData("text/plain")||en.getData("Text");if(ze)return ze;let tn=en.getData("text/uri-list");return tn?tn.replace(/\r?\n/g," "):""}editHandlers.paste=(en,ze)=>{let tn=ze;if(en.composing&&!android)return;let nn=brokenClipboardAPI?null:tn.clipboardData,rn=en.input.shiftKey&&en.input.lastKeyCode!=45;nn&&doPaste(en,getText$1(nn),nn.getData("text/html"),rn,tn)?tn.preventDefault():capturePaste(en,tn)};class Dragging{constructor(ze,tn,nn){this.slice=ze,this.move=tn,this.node=nn}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";handlers.dragstart=(en,ze)=>{let tn=ze,nn=en.input.mouseDown;if(nn&&nn.done(),!tn.dataTransfer)return;let rn=en.state.selection,sn=rn.empty?null:en.posAtCoords(eventCoords(tn)),an;if(!(sn&&sn.pos>=rn.from&&sn.pos<=(rn instanceof NodeSelection?rn.to-1:rn.to))){if(nn&&nn.mightDrag)an=NodeSelection.create(en.state.doc,nn.mightDrag.pos);else if(tn.target&&tn.target.nodeType==1){let dn=en.docView.nearestDesc(tn.target,!0);dn&&dn.node.type.spec.draggable&&dn!=en.docView&&(an=NodeSelection.create(en.state.doc,dn.posBefore))}}let ln=(an||en.state.selection).content(),{dom:cn,text:un}=serializeForClipboard(en,ln);tn.dataTransfer.clearData(),tn.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",cn.innerHTML),tn.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||tn.dataTransfer.setData("text/plain",un),en.dragging=new Dragging(ln,!tn[dragCopyModifier],an)};handlers.dragend=en=>{let ze=en.dragging;window.setTimeout(()=>{en.dragging==ze&&(en.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(en,ze)=>ze.preventDefault();editHandlers.drop=(en,ze)=>{let tn=ze,nn=en.dragging;if(en.dragging=null,!tn.dataTransfer)return;let rn=en.posAtCoords(eventCoords(tn));if(!rn)return;let sn=en.state.doc.resolve(rn.pos),an=nn&&nn.slice;an?en.someProp("transformPasted",gn=>{an=gn(an,en)}):an=parseFromClipboard(en,getText$1(tn.dataTransfer),brokenClipboardAPI?null:tn.dataTransfer.getData("text/html"),!1,sn);let ln=!!(nn&&!tn[dragCopyModifier]);if(en.someProp("handleDrop",gn=>gn(en,tn,an||Slice.empty,ln))){tn.preventDefault();return}if(!an)return;tn.preventDefault();let cn=an?dropPoint(en.state.doc,sn.pos,an):sn.pos;cn==null&&(cn=sn.pos);let un=en.state.tr;if(ln){let{node:gn}=nn;gn?gn.replace(un):un.deleteSelection()}let dn=un.mapping.map(cn),fn=an.openStart==0&&an.openEnd==0&&an.content.childCount==1,pn=un.doc;if(fn?un.replaceRangeWith(dn,dn,an.content.firstChild):un.replaceRange(dn,dn,an),un.doc.eq(pn))return;let hn=un.doc.resolve(dn);if(fn&&NodeSelection.isSelectable(an.content.firstChild)&&hn.nodeAfter&&hn.nodeAfter.sameMarkup(an.content.firstChild))un.setSelection(new NodeSelection(hn));else{let gn=un.mapping.map(cn);un.mapping.maps[un.mapping.maps.length-1].forEach((En,mn,bn,Tn)=>gn=Tn),un.setSelection(selectionBetween(en,hn,un.doc.resolve(gn)))}en.focus(),en.dispatch(un.setMeta("uiEvent","drop"))};handlers.focus=en=>{en.input.lastFocus=Date.now(),en.focused||(en.domObserver.stop(),en.dom.classList.add("ProseMirror-focused"),en.domObserver.start(),en.focused=!0,setTimeout(()=>{en.docView&&en.hasFocus()&&!en.domObserver.currentSelection.eq(en.domSelectionRange())&&selectionToDOM(en)},20))};handlers.blur=(en,ze)=>{let tn=ze;en.focused&&(en.domObserver.stop(),en.dom.classList.remove("ProseMirror-focused"),en.domObserver.start(),tn.relatedTarget&&en.dom.contains(tn.relatedTarget)&&en.domObserver.currentSelection.clear(),en.focused=!1)};handlers.beforeinput=(en,ze)=>{if(chrome&&android&&ze.inputType=="deleteContentBackward"){en.domObserver.flushSoon();let{domChangeCount:nn}=en.input;setTimeout(()=>{if(en.input.domChangeCount!=nn||(en.dom.blur(),en.focus(),en.someProp("handleKeyDown",sn=>sn(en,keyEvent(8,"Backspace")))))return;let{$cursor:rn}=en.state.selection;rn&&rn.pos>0&&en.dispatch(en.state.tr.delete(rn.pos-1,rn.pos).scrollIntoView())},50)}};for(let en in editHandlers)handlers[en]=editHandlers[en];function compareObjs(en,ze){if(en==ze)return!0;for(let tn in en)if(en[tn]!==ze[tn])return!1;for(let tn in ze)if(!(tn in en))return!1;return!0}class WidgetType{constructor(ze,tn){this.toDOM=ze,this.spec=tn||noSpec,this.side=this.spec.side||0}map(ze,tn,nn,rn){let{pos:sn,deleted:an}=ze.mapResult(tn.from+rn,this.side<0?-1:1);return an?null:new Decoration(sn-nn,sn-nn,this)}valid(){return!0}eq(ze){return this==ze||ze instanceof WidgetType&&(this.spec.key&&this.spec.key==ze.spec.key||this.toDOM==ze.toDOM&&compareObjs(this.spec,ze.spec))}destroy(ze){this.spec.destroy&&this.spec.destroy(ze)}}class InlineType{constructor(ze,tn){this.attrs=ze,this.spec=tn||noSpec}map(ze,tn,nn,rn){let sn=ze.map(tn.from+rn,this.spec.inclusiveStart?-1:1)-nn,an=ze.map(tn.to+rn,this.spec.inclusiveEnd?1:-1)-nn;return sn>=an?null:new Decoration(sn,an,this)}valid(ze,tn){return tn.from<tn.to}eq(ze){return this==ze||ze instanceof InlineType&&compareObjs(this.attrs,ze.attrs)&&compareObjs(this.spec,ze.spec)}static is(ze){return ze.type instanceof InlineType}destroy(){}}class NodeType{constructor(ze,tn){this.attrs=ze,this.spec=tn||noSpec}map(ze,tn,nn,rn){let sn=ze.mapResult(tn.from+rn,1);if(sn.deleted)return null;let an=ze.mapResult(tn.to+rn,-1);return an.deleted||an.pos<=sn.pos?null:new Decoration(sn.pos-nn,an.pos-nn,this)}valid(ze,tn){let{index:nn,offset:rn}=ze.content.findIndex(tn.from),sn;return rn==tn.from&&!(sn=ze.child(nn)).isText&&rn+sn.nodeSize==tn.to}eq(ze){return this==ze||ze instanceof NodeType&&compareObjs(this.attrs,ze.attrs)&&compareObjs(this.spec,ze.spec)}destroy(){}}class Decoration{constructor(ze,tn,nn){this.from=ze,this.to=tn,this.type=nn}copy(ze,tn){return new Decoration(ze,tn,this.type)}eq(ze,tn=0){return this.type.eq(ze.type)&&this.from+tn==ze.from&&this.to+tn==ze.to}map(ze,tn,nn){return this.type.map(ze,this,tn,nn)}static widget(ze,tn,nn){return new Decoration(ze,ze,new WidgetType(tn,nn))}static inline(ze,tn,nn,rn){return new Decoration(ze,tn,new InlineType(nn,rn))}static node(ze,tn,nn,rn){return new Decoration(ze,tn,new NodeType(nn,rn))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none=[],noSpec={};class DecorationSet{constructor(ze,tn){this.local=ze.length?ze:none,this.children=tn.length?tn:none}static create(ze,tn){return tn.length?buildTree(tn,ze,0,noSpec):empty}find(ze,tn,nn){let rn=[];return this.findInner(ze??0,tn??1e9,rn,0,nn),rn}findInner(ze,tn,nn,rn,sn){for(let an=0;an<this.local.length;an++){let ln=this.local[an];ln.from<=tn&&ln.to>=ze&&(!sn||sn(ln.spec))&&nn.push(ln.copy(ln.from+rn,ln.to+rn))}for(let an=0;an<this.children.length;an+=3)if(this.children[an]<tn&&this.children[an+1]>ze){let ln=this.children[an]+1;this.children[an+2].findInner(ze-ln,tn-ln,nn,rn+ln,sn)}}map(ze,tn,nn){return this==empty||ze.maps.length==0?this:this.mapInner(ze,tn,0,0,nn||noSpec)}mapInner(ze,tn,nn,rn,sn){let an;for(let ln=0;ln<this.local.length;ln++){let cn=this.local[ln].map(ze,nn,rn);cn&&cn.type.valid(tn,cn)?(an||(an=[])).push(cn):sn.onRemove&&sn.onRemove(this.local[ln].spec)}return this.children.length?mapChildren(this.children,an||[],ze,tn,nn,rn,sn):an?new DecorationSet(an.sort(byPos),none):empty}add(ze,tn){return tn.length?this==empty?DecorationSet.create(ze,tn):this.addInner(ze,tn,0):this}addInner(ze,tn,nn){let rn,sn=0;ze.forEach((ln,cn)=>{let un=cn+nn,dn;if(dn=takeSpansForNode(tn,ln,un)){for(rn||(rn=this.children.slice());sn<rn.length&&rn[sn]<cn;)sn+=3;rn[sn]==cn?rn[sn+2]=rn[sn+2].addInner(ln,dn,un+1):rn.splice(sn,0,cn,cn+ln.nodeSize,buildTree(dn,ln,un+1,noSpec)),sn+=3}});let an=moveSpans(sn?withoutNulls(tn):tn,-nn);for(let ln=0;ln<an.length;ln++)an[ln].type.valid(ze,an[ln])||an.splice(ln--,1);return new DecorationSet(an.length?this.local.concat(an).sort(byPos):this.local,rn||this.children)}remove(ze){return ze.length==0||this==empty?this:this.removeInner(ze,0)}removeInner(ze,tn){let nn=this.children,rn=this.local;for(let sn=0;sn<nn.length;sn+=3){let an,ln=nn[sn]+tn,cn=nn[sn+1]+tn;for(let dn=0,fn;dn<ze.length;dn++)(fn=ze[dn])&&fn.from>ln&&fn.to<cn&&(ze[dn]=null,(an||(an=[])).push(fn));if(!an)continue;nn==this.children&&(nn=this.children.slice());let un=nn[sn+2].removeInner(an,ln+1);un!=empty?nn[sn+2]=un:(nn.splice(sn,3),sn-=3)}if(rn.length){for(let sn=0,an;sn<ze.length;sn++)if(an=ze[sn])for(let ln=0;ln<rn.length;ln++)rn[ln].eq(an,tn)&&(rn==this.local&&(rn=this.local.slice()),rn.splice(ln--,1))}return nn==this.children&&rn==this.local?this:rn.length||nn.length?new DecorationSet(rn,nn):empty}forChild(ze,tn){if(this==empty)return this;if(tn.isLeaf)return DecorationSet.empty;let nn,rn;for(let ln=0;ln<this.children.length;ln+=3)if(this.children[ln]>=ze){this.children[ln]==ze&&(nn=this.children[ln+2]);break}let sn=ze+1,an=sn+tn.content.size;for(let ln=0;ln<this.local.length;ln++){let cn=this.local[ln];if(cn.from<an&&cn.to>sn&&cn.type instanceof InlineType){let un=Math.max(sn,cn.from)-sn,dn=Math.min(an,cn.to)-sn;un<dn&&(rn||(rn=[])).push(cn.copy(un,dn))}}if(rn){let ln=new DecorationSet(rn.sort(byPos),none);return nn?new DecorationGroup([ln,nn]):ln}return nn||empty}eq(ze){if(this==ze)return!0;if(!(ze instanceof DecorationSet)||this.local.length!=ze.local.length||this.children.length!=ze.children.length)return!1;for(let tn=0;tn<this.local.length;tn++)if(!this.local[tn].eq(ze.local[tn]))return!1;for(let tn=0;tn<this.children.length;tn+=3)if(this.children[tn]!=ze.children[tn]||this.children[tn+1]!=ze.children[tn+1]||!this.children[tn+2].eq(ze.children[tn+2]))return!1;return!0}locals(ze){return removeOverlap(this.localsInner(ze))}localsInner(ze){if(this==empty)return none;if(ze.inlineContent||!this.local.some(InlineType.is))return this.local;let tn=[];for(let nn=0;nn<this.local.length;nn++)this.local[nn].type instanceof InlineType||tn.push(this.local[nn]);return tn}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(ze){this.members=ze}map(ze,tn){const nn=this.members.map(rn=>rn.map(ze,tn,noSpec));return DecorationGroup.from(nn)}forChild(ze,tn){if(tn.isLeaf)return DecorationSet.empty;let nn=[];for(let rn=0;rn<this.members.length;rn++){let sn=this.members[rn].forChild(ze,tn);sn!=empty&&(sn instanceof DecorationGroup?nn=nn.concat(sn.members):nn.push(sn))}return DecorationGroup.from(nn)}eq(ze){if(!(ze instanceof DecorationGroup)||ze.members.length!=this.members.length)return!1;for(let tn=0;tn<this.members.length;tn++)if(!this.members[tn].eq(ze.members[tn]))return!1;return!0}locals(ze){let tn,nn=!0;for(let rn=0;rn<this.members.length;rn++){let sn=this.members[rn].localsInner(ze);if(sn.length)if(!tn)tn=sn;else{nn&&(tn=tn.slice(),nn=!1);for(let an=0;an<sn.length;an++)tn.push(sn[an])}}return tn?removeOverlap(nn?tn:tn.sort(byPos)):none}static from(ze){switch(ze.length){case 0:return empty;case 1:return ze[0];default:return new DecorationGroup(ze.every(tn=>tn instanceof DecorationSet)?ze:ze.reduce((tn,nn)=>tn.concat(nn instanceof DecorationSet?nn:nn.members),[]))}}}function mapChildren(en,ze,tn,nn,rn,sn,an){let ln=en.slice();for(let un=0,dn=sn;un<tn.maps.length;un++){let fn=0;tn.maps[un].forEach((pn,hn,gn,En)=>{let mn=En-gn-(hn-pn);for(let bn=0;bn<ln.length;bn+=3){let Tn=ln[bn+1];if(Tn<0||pn>Tn+dn-fn)continue;let _n=ln[bn]+dn-fn;hn>=_n?ln[bn+1]=pn<=_n?-2:-1:pn>=dn&&mn&&(ln[bn]+=mn,ln[bn+1]+=mn)}fn+=mn}),dn=tn.maps[un].map(dn,-1)}let cn=!1;for(let un=0;un<ln.length;un+=3)if(ln[un+1]<0){if(ln[un+1]==-2){cn=!0,ln[un+1]=-1;continue}let dn=tn.map(en[un]+sn),fn=dn-rn;if(fn<0||fn>=nn.content.size){cn=!0;continue}let pn=tn.map(en[un+1]+sn,-1),hn=pn-rn,{index:gn,offset:En}=nn.content.findIndex(fn),mn=nn.maybeChild(gn);if(mn&&En==fn&&En+mn.nodeSize==hn){let bn=ln[un+2].mapInner(tn,mn,dn+1,en[un]+sn+1,an);bn!=empty?(ln[un]=fn,ln[un+1]=hn,ln[un+2]=bn):(ln[un+1]=-2,cn=!0)}else cn=!0}if(cn){let un=mapAndGatherRemainingDecorations(ln,en,ze,tn,rn,sn,an),dn=buildTree(un,nn,0,an);ze=dn.local;for(let fn=0;fn<ln.length;fn+=3)ln[fn+1]<0&&(ln.splice(fn,3),fn-=3);for(let fn=0,pn=0;fn<dn.children.length;fn+=3){let hn=dn.children[fn];for(;pn<ln.length&&ln[pn]<hn;)pn+=3;ln.splice(pn,0,dn.children[fn],dn.children[fn+1],dn.children[fn+2])}}return new DecorationSet(ze.sort(byPos),ln)}function moveSpans(en,ze){if(!ze||!en.length)return en;let tn=[];for(let nn=0;nn<en.length;nn++){let rn=en[nn];tn.push(new Decoration(rn.from+ze,rn.to+ze,rn.type))}return tn}function mapAndGatherRemainingDecorations(en,ze,tn,nn,rn,sn,an){function ln(cn,un){for(let dn=0;dn<cn.local.length;dn++){let fn=cn.local[dn].map(nn,rn,un);fn?tn.push(fn):an.onRemove&&an.onRemove(cn.local[dn].spec)}for(let dn=0;dn<cn.children.length;dn+=3)ln(cn.children[dn+2],cn.children[dn]+un+1)}for(let cn=0;cn<en.length;cn+=3)en[cn+1]==-1&&ln(en[cn+2],ze[cn]+sn+1);return tn}function takeSpansForNode(en,ze,tn){if(ze.isLeaf)return null;let nn=tn+ze.nodeSize,rn=null;for(let sn=0,an;sn<en.length;sn++)(an=en[sn])&&an.from>tn&&an.to<nn&&((rn||(rn=[])).push(an),en[sn]=null);return rn}function withoutNulls(en){let ze=[];for(let tn=0;tn<en.length;tn++)en[tn]!=null&&ze.push(en[tn]);return ze}function buildTree(en,ze,tn,nn){let rn=[],sn=!1;ze.forEach((ln,cn)=>{let un=takeSpansForNode(en,ln,cn+tn);if(un){sn=!0;let dn=buildTree(un,ln,tn+cn+1,nn);dn!=empty&&rn.push(cn,cn+ln.nodeSize,dn)}});let an=moveSpans(sn?withoutNulls(en):en,-tn).sort(byPos);for(let ln=0;ln<an.length;ln++)an[ln].type.valid(ze,an[ln])||(nn.onRemove&&nn.onRemove(an[ln].spec),an.splice(ln--,1));return an.length||rn.length?new DecorationSet(an,rn):empty}function byPos(en,ze){return en.from-ze.from||en.to-ze.to}function removeOverlap(en){let ze=en;for(let tn=0;tn<ze.length-1;tn++){let nn=ze[tn];if(nn.from!=nn.to)for(let rn=tn+1;rn<ze.length;rn++){let sn=ze[rn];if(sn.from==nn.from){sn.to!=nn.to&&(ze==en&&(ze=en.slice()),ze[rn]=sn.copy(sn.from,nn.to),insertAhead(ze,rn+1,sn.copy(nn.to,sn.to)));continue}else{sn.from<nn.to&&(ze==en&&(ze=en.slice()),ze[tn]=nn.copy(nn.from,sn.from),insertAhead(ze,rn,nn.copy(sn.from,nn.to)));break}}}return ze}function insertAhead(en,ze,tn){for(;ze<en.length&&byPos(tn,en[ze])>0;)ze++;en.splice(ze,0,tn)}function viewDecorations(en){let ze=[];return en.someProp("decorations",tn=>{let nn=tn(en.state);nn&&nn!=empty&&ze.push(nn)}),en.cursorWrapper&&ze.push(DecorationSet.create(en.state.doc,[en.cursorWrapper.deco])),DecorationGroup.from(ze)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$1&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(ze){this.anchorNode=ze.anchorNode,this.anchorOffset=ze.anchorOffset,this.focusNode=ze.focusNode,this.focusOffset=ze.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(ze){return ze.anchorNode==this.anchorNode&&ze.anchorOffset==this.anchorOffset&&ze.focusNode==this.focusNode&&ze.focusOffset==this.focusOffset}}class DOMObserver{constructor(ze,tn){this.view=ze,this.handleDOMChange=tn,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(nn=>{for(let rn=0;rn<nn.length;rn++)this.queue.push(nn[rn]);ie$1&&ie_version<=11&&nn.some(rn=>rn.type=="childList"&&rn.removedNodes.length||rn.type=="characterData"&&rn.oldValue.length>rn.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=nn=>{this.queue.push({target:nn.target,type:"characterData",oldValue:nn.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let ze=this.observer.takeRecords();if(ze.length){for(let tn=0;tn<ze.length;tn++)this.queue.push(ze[tn]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$1&&ie_version<=11&&!this.view.state.selection.empty){let ze=this.view.domSelectionRange();if(ze.focusNode&&isEquivalentPosition(ze.focusNode,ze.focusOffset,ze.anchorNode,ze.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(ze){if(!ze.focusNode)return!0;let tn=new Set,nn;for(let sn=ze.focusNode;sn;sn=parentNode(sn))tn.add(sn);for(let sn=ze.anchorNode;sn;sn=parentNode(sn))if(tn.has(sn)){nn=sn;break}let rn=nn&&this.view.docView.nearestDesc(nn);if(rn&&rn.ignoreMutation({type:"selection",target:nn.nodeType==3?nn.parentNode:nn}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let ze of this.observer.takeRecords())this.queue.push(ze);return this.queue}flush(){let{view:ze}=this;if(!ze.docView||this.flushingSoon>-1)return;let tn=this.pendingRecords();tn.length&&(this.queue=[]);let nn=ze.domSelectionRange(),rn=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(nn)&&hasFocusAndSelection(ze)&&!this.ignoreSelectionChange(nn),sn=-1,an=-1,ln=!1,cn=[];if(ze.editable)for(let dn=0;dn<tn.length;dn++){let fn=this.registerMutation(tn[dn],cn);fn&&(sn=sn<0?fn.from:Math.min(fn.from,sn),an=an<0?fn.to:Math.max(fn.to,an),fn.typeOver&&(ln=!0))}if(gecko&&cn.length>1){let dn=cn.filter(fn=>fn.nodeName=="BR");if(dn.length==2){let fn=dn[0],pn=dn[1];fn.parentNode&&fn.parentNode.parentNode==pn.parentNode?pn.remove():fn.remove()}}let un=null;sn<0&&rn&&ze.input.lastFocus>Date.now()-200&&Math.max(ze.input.lastTouch,ze.input.lastClick.time)<Date.now()-300&&selectionCollapsed(nn)&&(un=selectionFromDOM(ze))&&un.eq(Selection.near(ze.state.doc.resolve(0),1))?(ze.input.lastFocus=0,selectionToDOM(ze),this.currentSelection.set(nn),ze.scrollToSelection()):(sn>-1||rn)&&(sn>-1&&(ze.docView.markDirty(sn,an),checkCSS(ze)),this.handleDOMChange(sn,an,ln,cn),ze.docView&&ze.docView.dirty?ze.updateState(ze.state):this.currentSelection.eq(nn)||selectionToDOM(ze),this.currentSelection.set(nn))}registerMutation(ze,tn){if(tn.indexOf(ze.target)>-1)return null;let nn=this.view.docView.nearestDesc(ze.target);if(ze.type=="attributes"&&(nn==this.view.docView||ze.attributeName=="contenteditable"||ze.attributeName=="style"&&!ze.oldValue&&!ze.target.getAttribute("style"))||!nn||nn.ignoreMutation(ze))return null;if(ze.type=="childList"){for(let dn=0;dn<ze.addedNodes.length;dn++)tn.push(ze.addedNodes[dn]);if(nn.contentDOM&&nn.contentDOM!=nn.dom&&!nn.contentDOM.contains(ze.target))return{from:nn.posBefore,to:nn.posAfter};let rn=ze.previousSibling,sn=ze.nextSibling;if(ie$1&&ie_version<=11&&ze.addedNodes.length)for(let dn=0;dn<ze.addedNodes.length;dn++){let{previousSibling:fn,nextSibling:pn}=ze.addedNodes[dn];(!fn||Array.prototype.indexOf.call(ze.addedNodes,fn)<0)&&(rn=fn),(!pn||Array.prototype.indexOf.call(ze.addedNodes,pn)<0)&&(sn=pn)}let an=rn&&rn.parentNode==ze.target?domIndex(rn)+1:0,ln=nn.localPosFromDOM(ze.target,an,-1),cn=sn&&sn.parentNode==ze.target?domIndex(sn):ze.target.childNodes.length,un=nn.localPosFromDOM(ze.target,cn,1);return{from:ln,to:un}}else return ze.type=="attributes"?{from:nn.posAtStart-nn.border,to:nn.posAtEnd+nn.border}:{from:nn.posAtStart,to:nn.posAtEnd,typeOver:ze.target.nodeValue==ze.oldValue}}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(en){if(!cssChecked.has(en)&&(cssChecked.set(en,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(en.dom).whiteSpace)!==-1)){if(en.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function safariShadowSelectionRange(en){let ze;function tn(cn){cn.preventDefault(),cn.stopImmediatePropagation(),ze=cn.getTargetRanges()[0]}en.dom.addEventListener("beforeinput",tn,!0),document.execCommand("indent"),en.dom.removeEventListener("beforeinput",tn,!0);let nn=ze.startContainer,rn=ze.startOffset,sn=ze.endContainer,an=ze.endOffset,ln=en.domAtPos(en.state.selection.anchor);return isEquivalentPosition(ln.node,ln.offset,sn,an)&&([nn,rn,sn,an]=[sn,an,nn,rn]),{anchorNode:nn,anchorOffset:rn,focusNode:sn,focusOffset:an}}function parseBetween(en,ze,tn){let{node:nn,fromOffset:rn,toOffset:sn,from:an,to:ln}=en.docView.parseRange(ze,tn),cn=en.domSelectionRange(),un,dn=cn.anchorNode;if(dn&&en.dom.contains(dn.nodeType==1?dn:dn.parentNode)&&(un=[{node:dn,offset:cn.anchorOffset}],selectionCollapsed(cn)||un.push({node:cn.focusNode,offset:cn.focusOffset})),chrome&&en.input.lastKeyCode===8)for(let mn=sn;mn>rn;mn--){let bn=nn.childNodes[mn-1],Tn=bn.pmViewDesc;if(bn.nodeName=="BR"&&!Tn){sn=mn;break}if(!Tn||Tn.size)break}let fn=en.state.doc,pn=en.someProp("domParser")||DOMParser$1.fromSchema(en.state.schema),hn=fn.resolve(an),gn=null,En=pn.parse(nn,{topNode:hn.parent,topMatch:hn.parent.contentMatchAt(hn.index()),topOpen:!0,from:rn,to:sn,preserveWhitespace:hn.parent.type.whitespace=="pre"?"full":!0,findPositions:un,ruleFromNode,context:hn});if(un&&un[0].pos!=null){let mn=un[0].pos,bn=un[1]&&un[1].pos;bn==null&&(bn=mn),gn={anchor:mn+an,head:bn+an}}return{doc:En,sel:gn,from:an,to:ln}}function ruleFromNode(en){let ze=en.pmViewDesc;if(ze)return ze.parseRule();if(en.nodeName=="BR"&&en.parentNode){if(safari&&/^(ul|ol)$/i.test(en.parentNode.nodeName)){let tn=document.createElement("div");return tn.appendChild(document.createElement("li")),{skip:tn}}else if(en.parentNode.lastChild==en||safari&&/^(tr|table)$/i.test(en.parentNode.nodeName))return{ignore:!0}}else if(en.nodeName=="IMG"&&en.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(en,ze,tn,nn,rn){let sn=en.input.compositionPendingChanges||(en.composing?en.input.compositionID:0);if(en.input.compositionPendingChanges=0,ze<0){let xn=en.input.lastSelectionTime>Date.now()-50?en.input.lastSelectionOrigin:null,zn=selectionFromDOM(en,xn);if(zn&&!en.state.selection.eq(zn)){if(chrome&&android&&en.input.lastKeyCode===13&&Date.now()-100<en.input.lastKeyCodeTime&&en.someProp("handleKeyDown",Yn=>Yn(en,keyEvent(13,"Enter"))))return;let Hn=en.state.tr.setSelection(zn);xn=="pointer"?Hn.setMeta("pointer",!0):xn=="key"&&Hn.scrollIntoView(),sn&&Hn.setMeta("composition",sn),en.dispatch(Hn)}return}let an=en.state.doc.resolve(ze),ln=an.sharedDepth(tn);ze=an.before(ln+1),tn=en.state.doc.resolve(tn).after(ln+1);let cn=en.state.selection,un=parseBetween(en,ze,tn),dn=en.state.doc,fn=dn.slice(un.from,un.to),pn,hn;en.input.lastKeyCode===8&&Date.now()-100<en.input.lastKeyCodeTime?(pn=en.state.selection.to,hn="end"):(pn=en.state.selection.from,hn="start"),en.input.lastKeyCode=null;let gn=findDiff(fn.content,un.doc.content,un.from,pn,hn);if((ios&&en.input.lastIOSEnter>Date.now()-225||android)&&rn.some(xn=>xn.nodeType==1&&!isInline.test(xn.nodeName))&&(!gn||gn.endA>=gn.endB)&&en.someProp("handleKeyDown",xn=>xn(en,keyEvent(13,"Enter")))){en.input.lastIOSEnter=0;return}if(!gn)if(nn&&cn instanceof TextSelection&&!cn.empty&&cn.$head.sameParent(cn.$anchor)&&!en.composing&&!(un.sel&&un.sel.anchor!=un.sel.head))gn={start:cn.from,endA:cn.to,endB:cn.to};else{if(un.sel){let xn=resolveSelection(en,en.state.doc,un.sel);if(xn&&!xn.eq(en.state.selection)){let zn=en.state.tr.setSelection(xn);sn&&zn.setMeta("composition",sn),en.dispatch(zn)}}return}en.input.domChangeCount++,en.state.selection.from<en.state.selection.to&&gn.start==gn.endB&&en.state.selection instanceof TextSelection&&(gn.start>en.state.selection.from&&gn.start<=en.state.selection.from+2&&en.state.selection.from>=un.from?gn.start=en.state.selection.from:gn.endA<en.state.selection.to&&gn.endA>=en.state.selection.to-2&&en.state.selection.to<=un.to&&(gn.endB+=en.state.selection.to-gn.endA,gn.endA=en.state.selection.to)),ie$1&&ie_version<=11&&gn.endB==gn.start+1&&gn.endA==gn.start&&gn.start>un.from&&un.doc.textBetween(gn.start-un.from-1,gn.start-un.from+1)==" "&&(gn.start--,gn.endA--,gn.endB--);let En=un.doc.resolveNoCache(gn.start-un.from),mn=un.doc.resolveNoCache(gn.endB-un.from),bn=dn.resolve(gn.start),Tn=En.sameParent(mn)&&En.parent.inlineContent&&bn.end()>=gn.endA,_n;if((ios&&en.input.lastIOSEnter>Date.now()-225&&(!Tn||rn.some(xn=>xn.nodeName=="DIV"||xn.nodeName=="P"))||!Tn&&En.pos<un.doc.content.size&&!En.sameParent(mn)&&(_n=Selection.findFrom(un.doc.resolve(En.pos+1),1,!0))&&_n.head==mn.pos)&&en.someProp("handleKeyDown",xn=>xn(en,keyEvent(13,"Enter")))){en.input.lastIOSEnter=0;return}if(en.state.selection.anchor>gn.start&&looksLikeBackspace(dn,gn.start,gn.endA,En,mn)&&en.someProp("handleKeyDown",xn=>xn(en,keyEvent(8,"Backspace")))){android&&chrome&&en.domObserver.suppressSelectionUpdates();return}chrome&&android&&gn.endB==gn.start&&(en.input.lastAndroidDelete=Date.now()),android&&!Tn&&En.start()!=mn.start()&&mn.parentOffset==0&&En.depth==mn.depth&&un.sel&&un.sel.anchor==un.sel.head&&un.sel.head==gn.endA&&(gn.endB-=2,mn=un.doc.resolveNoCache(gn.endB-un.from),setTimeout(()=>{en.someProp("handleKeyDown",function(xn){return xn(en,keyEvent(13,"Enter"))})},20));let An=gn.start,Rn=gn.endA,Cn,wn,Fn;if(Tn){if(En.pos==mn.pos)ie$1&&ie_version<=11&&En.parentOffset==0&&(en.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(en),20)),Cn=en.state.tr.delete(An,Rn),wn=dn.resolve(gn.start).marksAcross(dn.resolve(gn.endA));else if(gn.endA==gn.endB&&(Fn=isMarkChange(En.parent.content.cut(En.parentOffset,mn.parentOffset),bn.parent.content.cut(bn.parentOffset,gn.endA-bn.start()))))Cn=en.state.tr,Fn.type=="add"?Cn.addMark(An,Rn,Fn.mark):Cn.removeMark(An,Rn,Fn.mark);else if(En.parent.child(En.index()).isText&&En.index()==mn.index()-(mn.textOffset?0:1)){let xn=En.parent.textBetween(En.parentOffset,mn.parentOffset);if(en.someProp("handleTextInput",zn=>zn(en,An,Rn,xn)))return;Cn=en.state.tr.insertText(xn,An,Rn)}}if(Cn||(Cn=en.state.tr.replace(An,Rn,un.doc.slice(gn.start-un.from,gn.endB-un.from))),un.sel){let xn=resolveSelection(en,Cn.doc,un.sel);xn&&!(chrome&&android&&en.composing&&xn.empty&&(gn.start!=gn.endB||en.input.lastAndroidDelete<Date.now()-100)&&(xn.head==An||xn.head==Cn.mapping.map(Rn)-1)||ie$1&&xn.empty&&xn.head==An)&&Cn.setSelection(xn)}wn&&Cn.ensureMarks(wn),sn&&Cn.setMeta("composition",sn),en.dispatch(Cn.scrollIntoView())}function resolveSelection(en,ze,tn){return Math.max(tn.anchor,tn.head)>ze.content.size?null:selectionBetween(en,ze.resolve(tn.anchor),ze.resolve(tn.head))}function isMarkChange(en,ze){let tn=en.firstChild.marks,nn=ze.firstChild.marks,rn=tn,sn=nn,an,ln,cn;for(let dn=0;dn<nn.length;dn++)rn=nn[dn].removeFromSet(rn);for(let dn=0;dn<tn.length;dn++)sn=tn[dn].removeFromSet(sn);if(rn.length==1&&sn.length==0)ln=rn[0],an="add",cn=dn=>dn.mark(ln.addToSet(dn.marks));else if(rn.length==0&&sn.length==1)ln=sn[0],an="remove",cn=dn=>dn.mark(ln.removeFromSet(dn.marks));else return null;let un=[];for(let dn=0;dn<ze.childCount;dn++)un.push(cn(ze.child(dn)));if(Fragment.from(un).eq(en))return{mark:ln,type:an}}function looksLikeBackspace(en,ze,tn,nn,rn){if(tn-ze<=rn.pos-nn.pos||skipClosingAndOpening(nn,!0,!1)<rn.pos)return!1;let sn=en.resolve(ze);if(!nn.parent.isTextblock){let ln=sn.nodeAfter;return ln!=null&&tn==ze+ln.nodeSize}if(sn.parentOffset<sn.parent.content.size||!sn.parent.isTextblock)return!1;let an=en.resolve(skipClosingAndOpening(sn,!0,!0));return!an.parent.isTextblock||an.pos>tn||skipClosingAndOpening(an,!0,!1)<tn?!1:nn.parent.content.cut(nn.parentOffset).eq(an.parent.content)}function skipClosingAndOpening(en,ze,tn){let nn=en.depth,rn=ze?en.end():en.pos;for(;nn>0&&(ze||en.indexAfter(nn)==en.node(nn).childCount);)nn--,rn++,ze=!1;if(tn){let sn=en.node(nn).maybeChild(en.indexAfter(nn));for(;sn&&!sn.isLeaf;)sn=sn.firstChild,rn++}return rn}function findDiff(en,ze,tn,nn,rn){let sn=en.findDiffStart(ze,tn);if(sn==null)return null;let{a:an,b:ln}=en.findDiffEnd(ze,tn+en.size,tn+ze.size);if(rn=="end"){let cn=Math.max(0,sn-Math.min(an,ln));nn-=an+cn-sn}if(an<sn&&en.size<ze.size){let cn=nn<=sn&&nn>=an?sn-nn:0;sn-=cn,sn&&sn<ze.size&&isSurrogatePair(ze.textBetween(sn-1,sn+1))&&(sn+=cn?1:-1),ln=sn+(ln-an),an=sn}else if(ln<sn){let cn=nn<=sn&&nn>=ln?sn-nn:0;sn-=cn,sn&&sn<en.size&&isSurrogatePair(en.textBetween(sn-1,sn+1))&&(sn+=cn?1:-1),an=sn+(an-ln),ln=sn}return{start:sn,endA:an,endB:ln}}function isSurrogatePair(en){if(en.length!=2)return!1;let ze=en.charCodeAt(0),tn=en.charCodeAt(1);return ze>=56320&&ze<=57343&&tn>=55296&&tn<=56319}class EditorView{constructor(ze,tn){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=tn,this.state=tn.state,this.directPlugins=tn.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=ze&&ze.mount||document.createElement("div"),ze&&(ze.appendChild?ze.appendChild(this.dom):typeof ze=="function"?ze(this.dom):ze.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(nn,rn,sn,an)=>readDOMChange(this,nn,rn,sn,an)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let ze=this._props;this._props={};for(let tn in ze)this._props[tn]=ze[tn];this._props.state=this.state}return this._props}update(ze){ze.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let tn=this._props;this._props=ze,ze.plugins&&(ze.plugins.forEach(checkStateComponent),this.directPlugins=ze.plugins),this.updateStateInner(ze.state,tn)}setProps(ze){let tn={};for(let nn in this._props)tn[nn]=this._props[nn];tn.state=this.state;for(let nn in ze)tn[nn]=ze[nn];this.update(tn)}updateState(ze){this.updateStateInner(ze,this._props)}updateStateInner(ze,tn){var nn;let rn=this.state,sn=!1,an=!1;ze.storedMarks&&this.composing&&(clearComposition(this),an=!0),this.state=ze;let ln=rn.plugins!=ze.plugins||this._props.plugins!=tn.plugins;if(ln||this._props.plugins!=tn.plugins||this._props.nodeViews!=tn.nodeViews){let hn=buildNodeViews(this);changedNodeViews(hn,this.nodeViews)&&(this.nodeViews=hn,sn=!0)}(ln||tn.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let cn=viewDecorations(this),un=computeDocDeco(this),dn=rn.plugins!=ze.plugins&&!rn.doc.eq(ze.doc)?"reset":ze.scrollToSelection>rn.scrollToSelection?"to selection":"preserve",fn=sn||!this.docView.matchesNode(ze.doc,un,cn);(fn||!ze.selection.eq(rn.selection))&&(an=!0);let pn=dn=="preserve"&&an&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(an){this.domObserver.stop();let hn=fn&&(ie$1||chrome)&&!this.composing&&!rn.selection.empty&&!ze.selection.empty&&selectionContextChanged(rn.selection,ze.selection);if(fn){let gn=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(sn||!this.docView.update(ze.doc,un,cn,this))&&(this.docView.updateOuterDeco(un),this.docView.destroy(),this.docView=docViewDesc(ze.doc,un,cn,this.dom,this)),gn&&!this.trackWrites&&(hn=!0)}hn||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,hn):(syncNodeSelection(this,ze.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(rn),!((nn=this.dragging)===null||nn===void 0)&&nn.node&&!rn.doc.eq(ze.doc)&&this.updateDraggedNode(this.dragging,rn),dn=="reset"?this.dom.scrollTop=0:dn=="to selection"?this.scrollToSelection():pn&&resetScrollPos(pn)}scrollToSelection(){let ze=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",tn=>tn(this)))if(this.state.selection instanceof NodeSelection){let tn=this.docView.domAfterPos(this.state.selection.from);tn.nodeType==1&&scrollRectIntoView(this,tn.getBoundingClientRect(),ze)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),ze)}destroyPluginViews(){let ze;for(;ze=this.pluginViews.pop();)ze.destroy&&ze.destroy()}updatePluginViews(ze){if(!ze||ze.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let tn=0;tn<this.directPlugins.length;tn++){let nn=this.directPlugins[tn];nn.spec.view&&this.pluginViews.push(nn.spec.view(this))}for(let tn=0;tn<this.state.plugins.length;tn++){let nn=this.state.plugins[tn];nn.spec.view&&this.pluginViews.push(nn.spec.view(this))}}else for(let tn=0;tn<this.pluginViews.length;tn++){let nn=this.pluginViews[tn];nn.update&&nn.update(this,ze)}}updateDraggedNode(ze,tn){let nn=ze.node,rn=-1;if(this.state.doc.nodeAt(nn.from)==nn.node)rn=nn.from;else{let sn=nn.from+(this.state.doc.content.size-tn.doc.content.size);(sn>0&&this.state.doc.nodeAt(sn))==nn.node&&(rn=sn)}this.dragging=new Dragging(ze.slice,ze.move,rn<0?void 0:NodeSelection.create(this.state.doc,rn))}someProp(ze,tn){let nn=this._props&&this._props[ze],rn;if(nn!=null&&(rn=tn?tn(nn):nn))return rn;for(let an=0;an<this.directPlugins.length;an++){let ln=this.directPlugins[an].props[ze];if(ln!=null&&(rn=tn?tn(ln):ln))return rn}let sn=this.state.plugins;if(sn)for(let an=0;an<sn.length;an++){let ln=sn[an].props[ze];if(ln!=null&&(rn=tn?tn(ln):ln))return rn}}hasFocus(){if(ie$1){let ze=this.root.activeElement;if(ze==this.dom)return!0;if(!ze||!this.dom.contains(ze))return!1;for(;ze&&this.dom!=ze&&this.dom.contains(ze);){if(ze.contentEditable=="false")return!1;ze=ze.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let ze=this._root;if(ze==null){for(let tn=this.dom.parentNode;tn;tn=tn.parentNode)if(tn.nodeType==9||tn.nodeType==11&&tn.host)return tn.getSelection||(Object.getPrototypeOf(tn).getSelection=()=>tn.ownerDocument.getSelection()),this._root=tn}return ze||document}updateRoot(){this._root=null}posAtCoords(ze){return posAtCoords(this,ze)}coordsAtPos(ze,tn=1){return coordsAtPos(this,ze,tn)}domAtPos(ze,tn=0){return this.docView.domFromPos(ze,tn)}nodeDOM(ze){let tn=this.docView.descAt(ze);return tn?tn.nodeDOM:null}posAtDOM(ze,tn,nn=-1){let rn=this.docView.posFromDOM(ze,tn,nn);if(rn==null)throw new RangeError("DOM position not inside the editor");return rn}endOfTextblock(ze,tn){return endOfTextblock(this,tn||this.state,ze)}pasteHTML(ze,tn){return doPaste(this,"",ze,!1,tn||new ClipboardEvent("paste"))}pasteText(ze,tn){return doPaste(this,ze,null,!0,tn||new ClipboardEvent("paste"))}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(ze){return dispatchEvent(this,ze)}dispatch(ze){let tn=this._props.dispatchTransaction;tn?tn.call(this,ze):this.updateState(this.state.apply(ze))}domSelectionRange(){return safari&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom?safariShadowSelectionRange(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function computeDocDeco(en){let ze=Object.create(null);return ze.class="ProseMirror",ze.contenteditable=String(en.editable),en.someProp("attributes",tn=>{if(typeof tn=="function"&&(tn=tn(en.state)),tn)for(let nn in tn)nn=="class"?ze.class+=" "+tn[nn]:nn=="style"?ze.style=(ze.style?ze.style+";":"")+tn[nn]:!ze[nn]&&nn!="contenteditable"&&nn!="nodeName"&&(ze[nn]=String(tn[nn]))}),ze.translate||(ze.translate="no"),[Decoration.node(0,en.state.doc.content.size,ze)]}function updateCursorWrapper(en){if(en.markCursor){let ze=document.createElement("img");ze.className="ProseMirror-separator",ze.setAttribute("mark-placeholder","true"),ze.setAttribute("alt",""),en.cursorWrapper={dom:ze,deco:Decoration.widget(en.state.selection.head,ze,{raw:!0,marks:en.markCursor})}}else en.cursorWrapper=null}function getEditable(en){return!en.someProp("editable",ze=>ze(en.state)===!1)}function selectionContextChanged(en,ze){let tn=Math.min(en.$anchor.sharedDepth(en.head),ze.$anchor.sharedDepth(ze.head));return en.$anchor.start(tn)!=ze.$anchor.start(tn)}function buildNodeViews(en){let ze=Object.create(null);function tn(nn){for(let rn in nn)Object.prototype.hasOwnProperty.call(ze,rn)||(ze[rn]=nn[rn])}return en.someProp("nodeViews",tn),en.someProp("markViews",tn),ze}function changedNodeViews(en,ze){let tn=0,nn=0;for(let rn in en){if(en[rn]!=ze[rn])return!0;tn++}for(let rn in ze)nn++;return tn!=nn}function checkStateComponent(en){if(en.spec.state||en.spec.filterTransaction||en.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(en){var ze=mac$1&&en.metaKey&&en.shiftKey&&!en.ctrlKey&&!en.altKey||ie&&en.shiftKey&&en.key&&en.key.length==1||en.key=="Unidentified",tn=!ze&&en.key||(en.shiftKey?shift:base)[en.keyCode]||en.key||"Unidentified";return tn=="Esc"&&(tn="Escape"),tn=="Del"&&(tn="Delete"),tn=="Left"&&(tn="ArrowLeft"),tn=="Up"&&(tn="ArrowUp"),tn=="Right"&&(tn="ArrowRight"),tn=="Down"&&(tn="ArrowDown"),tn}const mac=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function normalizeKeyName$1(en){let ze=en.split(/-(?!$)/),tn=ze[ze.length-1];tn=="Space"&&(tn=" ");let nn,rn,sn,an;for(let ln=0;ln<ze.length-1;ln++){let cn=ze[ln];if(/^(cmd|meta|m)$/i.test(cn))an=!0;else if(/^a(lt)?$/i.test(cn))nn=!0;else if(/^(c|ctrl|control)$/i.test(cn))rn=!0;else if(/^s(hift)?$/i.test(cn))sn=!0;else if(/^mod$/i.test(cn))mac?an=!0:rn=!0;else throw new Error("Unrecognized modifier name: "+cn)}return nn&&(tn="Alt-"+tn),rn&&(tn="Ctrl-"+tn),an&&(tn="Meta-"+tn),sn&&(tn="Shift-"+tn),tn}function normalize(en){let ze=Object.create(null);for(let tn in en)ze[normalizeKeyName$1(tn)]=en[tn];return ze}function modifiers(en,ze,tn=!0){return ze.altKey&&(en="Alt-"+en),ze.ctrlKey&&(en="Ctrl-"+en),ze.metaKey&&(en="Meta-"+en),tn&&ze.shiftKey&&(en="Shift-"+en),en}function keymap(en){return new Plugin({props:{handleKeyDown:keydownHandler(en)}})}function keydownHandler(en){let ze=normalize(en);return function(tn,nn){let rn=keyName(nn),sn,an=ze[modifiers(rn,nn)];if(an&&an(tn.state,tn.dispatch,tn))return!0;if(rn.length==1&&rn!=" "){if(nn.shiftKey){let ln=ze[modifiers(rn,nn,!1)];if(ln&&ln(tn.state,tn.dispatch,tn))return!0}if((nn.shiftKey||nn.altKey||nn.metaKey||rn.charCodeAt(0)>127)&&(sn=base[nn.keyCode])&&sn!=rn){let ln=ze[modifiers(sn,nn)];if(ln&&ln(tn.state,tn.dispatch,tn))return!0}}return!1}}const deleteSelection$1=(en,ze)=>en.selection.empty?!1:(ze&&ze(en.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(en,ze){let{$cursor:tn}=en.selection;return!tn||(ze?!ze.endOfTextblock("backward",en):tn.parentOffset>0)?null:tn}const joinBackward$1=(en,ze,tn)=>{let nn=atBlockStart(en,tn);if(!nn)return!1;let rn=findCutBefore(nn);if(!rn){let an=nn.blockRange(),ln=an&&liftTarget(an);return ln==null?!1:(ze&&ze(en.tr.lift(an,ln).scrollIntoView()),!0)}let sn=rn.nodeBefore;if(!sn.type.spec.isolating&&deleteBarrier(en,rn,ze))return!0;if(nn.parent.content.size==0&&(textblockAt(sn,"end")||NodeSelection.isSelectable(sn))){let an=replaceStep(en.doc,nn.before(),nn.after(),Slice.empty);if(an&&an.slice.size<an.to-an.from){if(ze){let ln=en.tr.step(an);ln.setSelection(textblockAt(sn,"end")?Selection.findFrom(ln.doc.resolve(ln.mapping.map(rn.pos,-1)),-1):NodeSelection.create(ln.doc,rn.pos-sn.nodeSize)),ze(ln.scrollIntoView())}return!0}}return sn.isAtom&&rn.depth==nn.depth-1?(ze&&ze(en.tr.delete(rn.pos-sn.nodeSize,rn.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(en,ze,tn)=>{let nn=atBlockStart(en,tn);if(!nn)return!1;let rn=findCutBefore(nn);return rn?joinTextblocksAround(en,rn,ze):!1},joinTextblockForward$1=(en,ze,tn)=>{let nn=atBlockEnd(en,tn);if(!nn)return!1;let rn=findCutAfter(nn);return rn?joinTextblocksAround(en,rn,ze):!1};function joinTextblocksAround(en,ze,tn){let nn=ze.nodeBefore,rn=nn,sn=ze.pos-1;for(;!rn.isTextblock;sn--){if(rn.type.spec.isolating)return!1;let dn=rn.lastChild;if(!dn)return!1;rn=dn}let an=ze.nodeAfter,ln=an,cn=ze.pos+1;for(;!ln.isTextblock;cn++){if(ln.type.spec.isolating)return!1;let dn=ln.firstChild;if(!dn)return!1;ln=dn}let un=replaceStep(en.doc,sn,cn,Slice.empty);if(!un||un.from!=sn||un instanceof ReplaceStep&&un.slice.size>=cn-sn)return!1;if(tn){let dn=en.tr.step(un);dn.setSelection(TextSelection.create(dn.doc,sn)),tn(dn.scrollIntoView())}return!0}function textblockAt(en,ze,tn=!1){for(let nn=en;nn;nn=ze=="start"?nn.firstChild:nn.lastChild){if(nn.isTextblock)return!0;if(tn&&nn.childCount!=1)return!1}return!1}const selectNodeBackward$1=(en,ze,tn)=>{let{$head:nn,empty:rn}=en.selection,sn=nn;if(!rn)return!1;if(nn.parent.isTextblock){if(tn?!tn.endOfTextblock("backward",en):nn.parentOffset>0)return!1;sn=findCutBefore(nn)}let an=sn&&sn.nodeBefore;return!an||!NodeSelection.isSelectable(an)?!1:(ze&&ze(en.tr.setSelection(NodeSelection.create(en.doc,sn.pos-an.nodeSize)).scrollIntoView()),!0)};function findCutBefore(en){if(!en.parent.type.spec.isolating)for(let ze=en.depth-1;ze>=0;ze--){if(en.index(ze)>0)return en.doc.resolve(en.before(ze+1));if(en.node(ze).type.spec.isolating)break}return null}function atBlockEnd(en,ze){let{$cursor:tn}=en.selection;return!tn||(ze?!ze.endOfTextblock("forward",en):tn.parentOffset<tn.parent.content.size)?null:tn}const joinForward$1=(en,ze,tn)=>{let nn=atBlockEnd(en,tn);if(!nn)return!1;let rn=findCutAfter(nn);if(!rn)return!1;let sn=rn.nodeAfter;if(deleteBarrier(en,rn,ze))return!0;if(nn.parent.content.size==0&&(textblockAt(sn,"start")||NodeSelection.isSelectable(sn))){let an=replaceStep(en.doc,nn.before(),nn.after(),Slice.empty);if(an&&an.slice.size<an.to-an.from){if(ze){let ln=en.tr.step(an);ln.setSelection(textblockAt(sn,"start")?Selection.findFrom(ln.doc.resolve(ln.mapping.map(rn.pos)),1):NodeSelection.create(ln.doc,ln.mapping.map(rn.pos))),ze(ln.scrollIntoView())}return!0}}return sn.isAtom&&rn.depth==nn.depth-1?(ze&&ze(en.tr.delete(rn.pos,rn.pos+sn.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(en,ze,tn)=>{let{$head:nn,empty:rn}=en.selection,sn=nn;if(!rn)return!1;if(nn.parent.isTextblock){if(tn?!tn.endOfTextblock("forward",en):nn.parentOffset<nn.parent.content.size)return!1;sn=findCutAfter(nn)}let an=sn&&sn.nodeAfter;return!an||!NodeSelection.isSelectable(an)?!1:(ze&&ze(en.tr.setSelection(NodeSelection.create(en.doc,sn.pos)).scrollIntoView()),!0)};function findCutAfter(en){if(!en.parent.type.spec.isolating)for(let ze=en.depth-1;ze>=0;ze--){let tn=en.node(ze);if(en.index(ze)+1<tn.childCount)return en.doc.resolve(en.after(ze+1));if(tn.type.spec.isolating)break}return null}const joinUp$1=(en,ze)=>{let tn=en.selection,nn=tn instanceof NodeSelection,rn;if(nn){if(tn.node.isTextblock||!canJoin(en.doc,tn.from))return!1;rn=tn.from}else if(rn=joinPoint(en.doc,tn.from,-1),rn==null)return!1;if(ze){let sn=en.tr.join(rn);nn&&sn.setSelection(NodeSelection.create(sn.doc,rn-en.doc.resolve(rn).nodeBefore.nodeSize)),ze(sn.scrollIntoView())}return!0},joinDown$1=(en,ze)=>{let tn=en.selection,nn;if(tn instanceof NodeSelection){if(tn.node.isTextblock||!canJoin(en.doc,tn.to))return!1;nn=tn.to}else if(nn=joinPoint(en.doc,tn.to,1),nn==null)return!1;return ze&&ze(en.tr.join(nn).scrollIntoView()),!0},lift$1=(en,ze)=>{let{$from:tn,$to:nn}=en.selection,rn=tn.blockRange(nn),sn=rn&&liftTarget(rn);return sn==null?!1:(ze&&ze(en.tr.lift(rn,sn).scrollIntoView()),!0)},newlineInCode$1=(en,ze)=>{let{$head:tn,$anchor:nn}=en.selection;return!tn.parent.type.spec.code||!tn.sameParent(nn)?!1:(ze&&ze(en.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(en){for(let ze=0;ze<en.edgeCount;ze++){let{type:tn}=en.edge(ze);if(tn.isTextblock&&!tn.hasRequiredAttrs())return tn}return null}const exitCode$1=(en,ze)=>{let{$head:tn,$anchor:nn}=en.selection;if(!tn.parent.type.spec.code||!tn.sameParent(nn))return!1;let rn=tn.node(-1),sn=tn.indexAfter(-1),an=defaultBlockAt$1(rn.contentMatchAt(sn));if(!an||!rn.canReplaceWith(sn,sn,an))return!1;if(ze){let ln=tn.after(),cn=en.tr.replaceWith(ln,ln,an.createAndFill());cn.setSelection(Selection.near(cn.doc.resolve(ln),1)),ze(cn.scrollIntoView())}return!0},createParagraphNear$1=(en,ze)=>{let tn=en.selection,{$from:nn,$to:rn}=tn;if(tn instanceof AllSelection||nn.parent.inlineContent||rn.parent.inlineContent)return!1;let sn=defaultBlockAt$1(rn.parent.contentMatchAt(rn.indexAfter()));if(!sn||!sn.isTextblock)return!1;if(ze){let an=(!nn.parentOffset&&rn.index()<rn.parent.childCount?nn:rn).pos,ln=en.tr.insert(an,sn.createAndFill());ln.setSelection(TextSelection.create(ln.doc,an+1)),ze(ln.scrollIntoView())}return!0},liftEmptyBlock$1=(en,ze)=>{let{$cursor:tn}=en.selection;if(!tn||tn.parent.content.size)return!1;if(tn.depth>1&&tn.after()!=tn.end(-1)){let sn=tn.before();if(canSplit(en.doc,sn))return ze&&ze(en.tr.split(sn).scrollIntoView()),!0}let nn=tn.blockRange(),rn=nn&&liftTarget(nn);return rn==null?!1:(ze&&ze(en.tr.lift(nn,rn).scrollIntoView()),!0)},selectParentNode$1=(en,ze)=>{let{$from:tn,to:nn}=en.selection,rn,sn=tn.sharedDepth(nn);return sn==0?!1:(rn=tn.before(sn),ze&&ze(en.tr.setSelection(NodeSelection.create(en.doc,rn))),!0)};function joinMaybeClear(en,ze,tn){let nn=ze.nodeBefore,rn=ze.nodeAfter,sn=ze.index();return!nn||!rn||!nn.type.compatibleContent(rn.type)?!1:!nn.content.size&&ze.parent.canReplace(sn-1,sn)?(tn&&tn(en.tr.delete(ze.pos-nn.nodeSize,ze.pos).scrollIntoView()),!0):!ze.parent.canReplace(sn,sn+1)||!(rn.isTextblock||canJoin(en.doc,ze.pos))?!1:(tn&&tn(en.tr.clearIncompatible(ze.pos,nn.type,nn.contentMatchAt(nn.childCount)).join(ze.pos).scrollIntoView()),!0)}function deleteBarrier(en,ze,tn){let nn=ze.nodeBefore,rn=ze.nodeAfter,sn,an;if(nn.type.spec.isolating||rn.type.spec.isolating)return!1;if(joinMaybeClear(en,ze,tn))return!0;let ln=ze.parent.canReplace(ze.index(),ze.index()+1);if(ln&&(sn=(an=nn.contentMatchAt(nn.childCount)).findWrapping(rn.type))&&an.matchType(sn[0]||rn.type).validEnd){if(tn){let fn=ze.pos+rn.nodeSize,pn=Fragment.empty;for(let En=sn.length-1;En>=0;En--)pn=Fragment.from(sn[En].create(null,pn));pn=Fragment.from(nn.copy(pn));let hn=en.tr.step(new ReplaceAroundStep(ze.pos-1,fn,ze.pos,fn,new Slice(pn,1,0),sn.length,!0)),gn=fn+2*sn.length;canJoin(hn.doc,gn)&&hn.join(gn),tn(hn.scrollIntoView())}return!0}let cn=Selection.findFrom(ze,1),un=cn&&cn.$from.blockRange(cn.$to),dn=un&&liftTarget(un);if(dn!=null&&dn>=ze.depth)return tn&&tn(en.tr.lift(un,dn).scrollIntoView()),!0;if(ln&&textblockAt(rn,"start",!0)&&textblockAt(nn,"end")){let fn=nn,pn=[];for(;pn.push(fn),!fn.isTextblock;)fn=fn.lastChild;let hn=rn,gn=1;for(;!hn.isTextblock;hn=hn.firstChild)gn++;if(fn.canReplace(fn.childCount,fn.childCount,hn.content)){if(tn){let En=Fragment.empty;for(let bn=pn.length-1;bn>=0;bn--)En=Fragment.from(pn[bn].copy(En));let mn=en.tr.step(new ReplaceAroundStep(ze.pos-pn.length,ze.pos+rn.nodeSize,ze.pos+gn,ze.pos+rn.nodeSize-gn,new Slice(En,pn.length,0),0,!0));tn(mn.scrollIntoView())}return!0}}return!1}function selectTextblockSide(en){return function(ze,tn){let nn=ze.selection,rn=en<0?nn.$from:nn.$to,sn=rn.depth;for(;rn.node(sn).isInline;){if(!sn)return!1;sn--}return rn.node(sn).isTextblock?(tn&&tn(ze.tr.setSelection(TextSelection.create(ze.doc,en<0?rn.start(sn):rn.end(sn)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(en,ze=null){return function(tn,nn){let{$from:rn,$to:sn}=tn.selection,an=rn.blockRange(sn),ln=an&&findWrapping(an,en,ze);return ln?(nn&&nn(tn.tr.wrap(an,ln).scrollIntoView()),!0):!1}}function setBlockType(en,ze=null){return function(tn,nn){let rn=!1;for(let sn=0;sn<tn.selection.ranges.length&&!rn;sn++){let{$from:{pos:an},$to:{pos:ln}}=tn.selection.ranges[sn];tn.doc.nodesBetween(an,ln,(cn,un)=>{if(rn)return!1;if(!(!cn.isTextblock||cn.hasMarkup(en,ze)))if(cn.type==en)rn=!0;else{let dn=tn.doc.resolve(un),fn=dn.index();rn=dn.parent.canReplaceWith(fn,fn+1,en)}})}if(!rn)return!1;if(nn){let sn=tn.tr;for(let an=0;an<tn.selection.ranges.length;an++){let{$from:{pos:ln},$to:{pos:cn}}=tn.selection.ranges[an];sn.setBlockType(ln,cn,en,ze)}nn(sn.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(en,ze=null){return function(tn,nn){let{$from:rn,$to:sn}=tn.selection,an=rn.blockRange(sn),ln=!1,cn=an;if(!an)return!1;if(an.depth>=2&&rn.node(an.depth-1).type.compatibleContent(en)&&an.startIndex==0){if(rn.index(an.depth-1)==0)return!1;let dn=tn.doc.resolve(an.start-2);cn=new NodeRange(dn,dn,an.depth),an.endIndex<an.parent.childCount&&(an=new NodeRange(rn,tn.doc.resolve(sn.end(an.depth)),an.depth)),ln=!0}let un=findWrapping(cn,en,ze,an);return un?(nn&&nn(doWrapInList(tn.tr,an,un,ln,en).scrollIntoView()),!0):!1}}function doWrapInList(en,ze,tn,nn,rn){let sn=Fragment.empty;for(let dn=tn.length-1;dn>=0;dn--)sn=Fragment.from(tn[dn].type.create(tn[dn].attrs,sn));en.step(new ReplaceAroundStep(ze.start-(nn?2:0),ze.end,ze.start,ze.end,new Slice(sn,0,0),tn.length,!0));let an=0;for(let dn=0;dn<tn.length;dn++)tn[dn].type==rn&&(an=dn+1);let ln=tn.length-an,cn=ze.start+tn.length-(nn?2:0),un=ze.parent;for(let dn=ze.startIndex,fn=ze.endIndex,pn=!0;dn<fn;dn++,pn=!1)!pn&&canSplit(en.doc,cn,ln)&&(en.split(cn,ln),cn+=2*ln),cn+=un.child(dn).nodeSize;return en}function liftListItem$1(en){return function(ze,tn){let{$from:nn,$to:rn}=ze.selection,sn=nn.blockRange(rn,an=>an.childCount>0&&an.firstChild.type==en);return sn?tn?nn.node(sn.depth-1).type==en?liftToOuterList(ze,tn,en,sn):liftOutOfList(ze,tn,sn):!0:!1}}function liftToOuterList(en,ze,tn,nn){let rn=en.tr,sn=nn.end,an=nn.$to.end(nn.depth);sn<an&&(rn.step(new ReplaceAroundStep(sn-1,an,sn,an,new Slice(Fragment.from(tn.create(null,nn.parent.copy())),1,0),1,!0)),nn=new NodeRange(rn.doc.resolve(nn.$from.pos),rn.doc.resolve(an),nn.depth));const ln=liftTarget(nn);if(ln==null)return!1;rn.lift(nn,ln);let cn=rn.mapping.map(sn,-1)-1;return canJoin(rn.doc,cn)&&rn.join(cn),ze(rn.scrollIntoView()),!0}function liftOutOfList(en,ze,tn){let nn=en.tr,rn=tn.parent;for(let hn=tn.end,gn=tn.endIndex-1,En=tn.startIndex;gn>En;gn--)hn-=rn.child(gn).nodeSize,nn.delete(hn-1,hn+1);let sn=nn.doc.resolve(tn.start),an=sn.nodeAfter;if(nn.mapping.map(tn.end)!=tn.start+sn.nodeAfter.nodeSize)return!1;let ln=tn.startIndex==0,cn=tn.endIndex==rn.childCount,un=sn.node(-1),dn=sn.index(-1);if(!un.canReplace(dn+(ln?0:1),dn+1,an.content.append(cn?Fragment.empty:Fragment.from(rn))))return!1;let fn=sn.pos,pn=fn+an.nodeSize;return nn.step(new ReplaceAroundStep(fn-(ln?1:0),pn+(cn?1:0),fn+1,pn-1,new Slice((ln?Fragment.empty:Fragment.from(rn.copy(Fragment.empty))).append(cn?Fragment.empty:Fragment.from(rn.copy(Fragment.empty))),ln?0:1,cn?0:1),ln?0:1)),ze(nn.scrollIntoView()),!0}function sinkListItem$1(en){return function(ze,tn){let{$from:nn,$to:rn}=ze.selection,sn=nn.blockRange(rn,un=>un.childCount>0&&un.firstChild.type==en);if(!sn)return!1;let an=sn.startIndex;if(an==0)return!1;let ln=sn.parent,cn=ln.child(an-1);if(cn.type!=en)return!1;if(tn){let un=cn.lastChild&&cn.lastChild.type==ln.type,dn=Fragment.from(un?en.create():null),fn=new Slice(Fragment.from(en.create(null,Fragment.from(ln.type.create(null,dn)))),un?3:1,0),pn=sn.start,hn=sn.end;tn(ze.tr.step(new ReplaceAroundStep(pn-(un?3:1),hn,pn,hn,fn,1,!0)).scrollIntoView())}return!0}}function createChainableState(en){const{state:ze,transaction:tn}=en;let{selection:nn}=tn,{doc:rn}=tn,{storedMarks:sn}=tn;return{...ze,apply:ze.apply.bind(ze),applyTransaction:ze.applyTransaction.bind(ze),plugins:ze.plugins,schema:ze.schema,reconfigure:ze.reconfigure.bind(ze),toJSON:ze.toJSON.bind(ze),get storedMarks(){return sn},get selection(){return nn},get doc(){return rn},get tr(){return nn=tn.selection,rn=tn.doc,sn=tn.storedMarks,tn}}}class CommandManager{constructor(ze){this.editor=ze.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=ze.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:ze,editor:tn,state:nn}=this,{view:rn}=tn,{tr:sn}=nn,an=this.buildProps(sn);return Object.fromEntries(Object.entries(ze).map(([ln,cn])=>[ln,(...dn)=>{const fn=cn(...dn)(an);return!sn.getMeta("preventDispatch")&&!this.hasCustomState&&rn.dispatch(sn),fn}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(ze,tn=!0){const{rawCommands:nn,editor:rn,state:sn}=this,{view:an}=rn,ln=[],cn=!!ze,un=ze||sn.tr,dn=()=>(!cn&&tn&&!un.getMeta("preventDispatch")&&!this.hasCustomState&&an.dispatch(un),ln.every(pn=>pn===!0)),fn={...Object.fromEntries(Object.entries(nn).map(([pn,hn])=>[pn,(...En)=>{const mn=this.buildProps(un,tn),bn=hn(...En)(mn);return ln.push(bn),fn}])),run:dn};return fn}createCan(ze){const{rawCommands:tn,state:nn}=this,rn=!1,sn=ze||nn.tr,an=this.buildProps(sn,rn);return{...Object.fromEntries(Object.entries(tn).map(([cn,un])=>[cn,(...dn)=>un(...dn)({...an,dispatch:void 0})])),chain:()=>this.createChain(sn,rn)}}buildProps(ze,tn=!0){const{rawCommands:nn,editor:rn,state:sn}=this,{view:an}=rn,ln={tr:ze,editor:rn,view:an,state:createChainableState({state:sn,transaction:ze}),dispatch:tn?()=>{}:void 0,chain:()=>this.createChain(ze,tn),can:()=>this.createCan(ze),get commands(){return Object.fromEntries(Object.entries(nn).map(([cn,un])=>[cn,(...dn)=>un(...dn)(ln)]))}};return ln}}class EventEmitter{constructor(){this.callbacks={}}on(ze,tn){return this.callbacks[ze]||(this.callbacks[ze]=[]),this.callbacks[ze].push(tn),this}emit(ze,...tn){const nn=this.callbacks[ze];return nn&&nn.forEach(rn=>rn.apply(this,tn)),this}off(ze,tn){const nn=this.callbacks[ze];return nn&&(tn?this.callbacks[ze]=nn.filter(rn=>rn!==tn):delete this.callbacks[ze]),this}removeAllListeners(){this.callbacks={}}}function getExtensionField(en,ze,tn){return en.config[ze]===void 0&&en.parent?getExtensionField(en.parent,ze,tn):typeof en.config[ze]=="function"?en.config[ze].bind({...tn,parent:en.parent?getExtensionField(en.parent,ze,tn):null}):en.config[ze]}function splitExtensions(en){const ze=en.filter(rn=>rn.type==="extension"),tn=en.filter(rn=>rn.type==="node"),nn=en.filter(rn=>rn.type==="mark");return{baseExtensions:ze,nodeExtensions:tn,markExtensions:nn}}function getAttributesFromExtensions(en){const ze=[],{nodeExtensions:tn,markExtensions:nn}=splitExtensions(en),rn=[...tn,...nn],sn={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return en.forEach(an=>{const ln={name:an.name,options:an.options,storage:an.storage},cn=getExtensionField(an,"addGlobalAttributes",ln);if(!cn)return;cn().forEach(dn=>{dn.types.forEach(fn=>{Object.entries(dn.attributes).forEach(([pn,hn])=>{ze.push({type:fn,name:pn,attribute:{...sn,...hn}})})})})}),rn.forEach(an=>{const ln={name:an.name,options:an.options,storage:an.storage},cn=getExtensionField(an,"addAttributes",ln);if(!cn)return;const un=cn();Object.entries(un).forEach(([dn,fn])=>{const pn={...sn,...fn};typeof(pn==null?void 0:pn.default)=="function"&&(pn.default=pn.default()),pn!=null&&pn.isRequired&&(pn==null?void 0:pn.default)===void 0&&delete pn.default,ze.push({type:an.name,name:dn,attribute:pn})})}),ze}function getNodeType(en,ze){if(typeof en=="string"){if(!ze.nodes[en])throw Error(`There is no node type named '${en}'. Maybe you forgot to add the extension?`);return ze.nodes[en]}return en}function mergeAttributes(...en){return en.filter(ze=>!!ze).reduce((ze,tn)=>{const nn={...ze};return Object.entries(tn).forEach(([rn,sn])=>{if(!nn[rn]){nn[rn]=sn;return}if(rn==="class"){const ln=sn?sn.split(" "):[],cn=nn[rn]?nn[rn].split(" "):[],un=ln.filter(dn=>!cn.includes(dn));nn[rn]=[...cn,...un].join(" ")}else rn==="style"?nn[rn]=[nn[rn],sn].join("; "):nn[rn]=sn}),nn},{})}function getRenderedAttributes(en,ze){return ze.filter(tn=>tn.attribute.rendered).map(tn=>tn.attribute.renderHTML?tn.attribute.renderHTML(en.attrs)||{}:{[tn.name]:en.attrs[tn.name]}).reduce((tn,nn)=>mergeAttributes(tn,nn),{})}function isFunction$2(en){return typeof en=="function"}function callOrReturn(en,ze=void 0,...tn){return isFunction$2(en)?ze?en.bind(ze)(...tn):en(...tn):en}function isEmptyObject(en={}){return Object.keys(en).length===0&&en.constructor===Object}function fromString(en){return typeof en!="string"?en:en.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(en):en==="true"?!0:en==="false"?!1:en}function injectExtensionAttributesToParseRule(en,ze){return en.style?en:{...en,getAttrs:tn=>{const nn=en.getAttrs?en.getAttrs(tn):en.attrs;if(nn===!1)return!1;const rn=ze.reduce((sn,an)=>{const ln=an.attribute.parseHTML?an.attribute.parseHTML(tn):fromString(tn.getAttribute(an.name));return ln==null?sn:{...sn,[an.name]:ln}},{});return{...nn,...rn}}}}function cleanUpSchemaItem(en){return Object.fromEntries(Object.entries(en).filter(([ze,tn])=>ze==="attrs"&&isEmptyObject(tn)?!1:tn!=null))}function getSchemaByResolvedExtensions(en,ze){var tn;const nn=getAttributesFromExtensions(en),{nodeExtensions:rn,markExtensions:sn}=splitExtensions(en),an=(tn=rn.find(un=>getExtensionField(un,"topNode")))===null||tn===void 0?void 0:tn.name,ln=Object.fromEntries(rn.map(un=>{const dn=nn.filter(bn=>bn.type===un.name),fn={name:un.name,options:un.options,storage:un.storage,editor:ze},pn=en.reduce((bn,Tn)=>{const _n=getExtensionField(Tn,"extendNodeSchema",fn);return{...bn,..._n?_n(un):{}}},{}),hn=cleanUpSchemaItem({...pn,content:callOrReturn(getExtensionField(un,"content",fn)),marks:callOrReturn(getExtensionField(un,"marks",fn)),group:callOrReturn(getExtensionField(un,"group",fn)),inline:callOrReturn(getExtensionField(un,"inline",fn)),atom:callOrReturn(getExtensionField(un,"atom",fn)),selectable:callOrReturn(getExtensionField(un,"selectable",fn)),draggable:callOrReturn(getExtensionField(un,"draggable",fn)),code:callOrReturn(getExtensionField(un,"code",fn)),defining:callOrReturn(getExtensionField(un,"defining",fn)),isolating:callOrReturn(getExtensionField(un,"isolating",fn)),attrs:Object.fromEntries(dn.map(bn=>{var Tn;return[bn.name,{default:(Tn=bn==null?void 0:bn.attribute)===null||Tn===void 0?void 0:Tn.default}]}))}),gn=callOrReturn(getExtensionField(un,"parseHTML",fn));gn&&(hn.parseDOM=gn.map(bn=>injectExtensionAttributesToParseRule(bn,dn)));const En=getExtensionField(un,"renderHTML",fn);En&&(hn.toDOM=bn=>En({node:bn,HTMLAttributes:getRenderedAttributes(bn,dn)}));const mn=getExtensionField(un,"renderText",fn);return mn&&(hn.toText=mn),[un.name,hn]})),cn=Object.fromEntries(sn.map(un=>{const dn=nn.filter(mn=>mn.type===un.name),fn={name:un.name,options:un.options,storage:un.storage,editor:ze},pn=en.reduce((mn,bn)=>{const Tn=getExtensionField(bn,"extendMarkSchema",fn);return{...mn,...Tn?Tn(un):{}}},{}),hn=cleanUpSchemaItem({...pn,inclusive:callOrReturn(getExtensionField(un,"inclusive",fn)),excludes:callOrReturn(getExtensionField(un,"excludes",fn)),group:callOrReturn(getExtensionField(un,"group",fn)),spanning:callOrReturn(getExtensionField(un,"spanning",fn)),code:callOrReturn(getExtensionField(un,"code",fn)),attrs:Object.fromEntries(dn.map(mn=>{var bn;return[mn.name,{default:(bn=mn==null?void 0:mn.attribute)===null||bn===void 0?void 0:bn.default}]}))}),gn=callOrReturn(getExtensionField(un,"parseHTML",fn));gn&&(hn.parseDOM=gn.map(mn=>injectExtensionAttributesToParseRule(mn,dn)));const En=getExtensionField(un,"renderHTML",fn);return En&&(hn.toDOM=mn=>En({mark:mn,HTMLAttributes:getRenderedAttributes(mn,dn)})),[un.name,hn]}));return new Schema({topNode:an,nodes:ln,marks:cn})}function getSchemaTypeByName(en,ze){return ze.nodes[en]||ze.marks[en]||null}function isExtensionRulesEnabled(en,ze){return Array.isArray(ze)?ze.some(tn=>(typeof tn=="string"?tn:tn.name)===en.name):ze}const getTextContentFromNodes=(en,ze=500)=>{let tn="";const nn=en.parentOffset;return en.parent.nodesBetween(Math.max(0,nn-ze),nn,(rn,sn,an,ln)=>{var cn,un;const dn=((un=(cn=rn.type.spec).toText)===null||un===void 0?void 0:un.call(cn,{node:rn,pos:sn,parent:an,index:ln}))||rn.textContent||"%leaf%";tn+=dn.slice(0,Math.max(0,nn-sn))}),tn};function isRegExp(en){return Object.prototype.toString.call(en)==="[object RegExp]"}class InputRule{constructor(ze){this.find=ze.find,this.handler=ze.handler}}const inputRuleMatcherHandler=(en,ze)=>{if(isRegExp(ze))return ze.exec(en);const tn=ze(en);if(!tn)return null;const nn=[tn.text];return nn.index=tn.index,nn.input=en,nn.data=tn.data,tn.replaceWith&&(tn.text.includes(tn.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),nn.push(tn.replaceWith)),nn};function run$1$1(en){var ze;const{editor:tn,from:nn,to:rn,text:sn,rules:an,plugin:ln}=en,{view:cn}=tn;if(cn.composing)return!1;const un=cn.state.doc.resolve(nn);if(un.parent.type.spec.code||!((ze=un.nodeBefore||un.nodeAfter)===null||ze===void 0)&&ze.marks.find(pn=>pn.type.spec.code))return!1;let dn=!1;const fn=getTextContentFromNodes(un)+sn;return an.forEach(pn=>{if(dn)return;const hn=inputRuleMatcherHandler(fn,pn.find);if(!hn)return;const gn=cn.state.tr,En=createChainableState({state:cn.state,transaction:gn}),mn={from:nn-(hn[0].length-sn.length),to:rn},{commands:bn,chain:Tn,can:_n}=new CommandManager({editor:tn,state:En});pn.handler({state:En,range:mn,match:hn,commands:bn,chain:Tn,can:_n})===null||!gn.steps.length||(gn.setMeta(ln,{transform:gn,from:nn,to:rn,text:sn}),cn.dispatch(gn),dn=!0)}),dn}function inputRulesPlugin(en){const{editor:ze,rules:tn}=en,nn=new Plugin({state:{init(){return null},apply(rn,sn){const an=rn.getMeta(nn);return an||(rn.selectionSet||rn.docChanged?null:sn)}},props:{handleTextInput(rn,sn,an,ln){return run$1$1({editor:ze,from:sn,to:an,text:ln,rules:tn,plugin:nn})},handleDOMEvents:{compositionend:rn=>(setTimeout(()=>{const{$cursor:sn}=rn.state.selection;sn&&run$1$1({editor:ze,from:sn.pos,to:sn.pos,text:"",rules:tn,plugin:nn})}),!1)},handleKeyDown(rn,sn){if(sn.key!=="Enter")return!1;const{$cursor:an}=rn.state.selection;return an?run$1$1({editor:ze,from:an.pos,to:an.pos,text:`
`,rules:tn,plugin:nn}):!1}},isInputRules:!0});return nn}function isNumber(en){return typeof en=="number"}class PasteRule{constructor(ze){this.find=ze.find,this.handler=ze.handler}}const pasteRuleMatcherHandler=(en,ze,tn)=>{if(isRegExp(ze))return[...en.matchAll(ze)];const nn=ze(en,tn);return nn?nn.map(rn=>{const sn=[rn.text];return sn.index=rn.index,sn.input=en,sn.data=rn.data,rn.replaceWith&&(rn.text.includes(rn.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),sn.push(rn.replaceWith)),sn}):[]};function run$2(en){const{editor:ze,state:tn,from:nn,to:rn,rule:sn,pasteEvent:an,dropEvent:ln}=en,{commands:cn,chain:un,can:dn}=new CommandManager({editor:ze,state:tn}),fn=[];return tn.doc.nodesBetween(nn,rn,(hn,gn)=>{if(!hn.isTextblock||hn.type.spec.code)return;const En=Math.max(nn,gn),mn=Math.min(rn,gn+hn.content.size),bn=hn.textBetween(En-gn,mn-gn,void 0,"");pasteRuleMatcherHandler(bn,sn.find,an).forEach(_n=>{if(_n.index===void 0)return;const An=En+_n.index+1,Rn=An+_n[0].length,Cn={from:tn.tr.mapping.map(An),to:tn.tr.mapping.map(Rn)},wn=sn.handler({state:tn,range:Cn,match:_n,commands:cn,chain:un,can:dn,pasteEvent:an,dropEvent:ln});fn.push(wn)})}),fn.every(hn=>hn!==null)}function pasteRulesPlugin(en){const{editor:ze,rules:tn}=en;let nn=null,rn=!1,sn=!1,an=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,ln=typeof DragEvent<"u"?new DragEvent("drop"):null;return tn.map(un=>new Plugin({view(dn){const fn=pn=>{var hn;nn=!((hn=dn.dom.parentElement)===null||hn===void 0)&&hn.contains(pn.target)?dn.dom.parentElement:null};return window.addEventListener("dragstart",fn),{destroy(){window.removeEventListener("dragstart",fn)}}},props:{handleDOMEvents:{drop:(dn,fn)=>(sn=nn===dn.dom.parentElement,ln=fn,!1),paste:(dn,fn)=>{var pn;const hn=(pn=fn.clipboardData)===null||pn===void 0?void 0:pn.getData("text/html");return an=fn,rn=!!(hn!=null&&hn.includes("data-pm-slice")),!1}}},appendTransaction:(dn,fn,pn)=>{const hn=dn[0],gn=hn.getMeta("uiEvent")==="paste"&&!rn,En=hn.getMeta("uiEvent")==="drop"&&!sn;if(!gn&&!En)return;const mn=fn.doc.content.findDiffStart(pn.doc.content),bn=fn.doc.content.findDiffEnd(pn.doc.content);if(!isNumber(mn)||!bn||mn===bn.b)return;const Tn=pn.tr,_n=createChainableState({state:pn,transaction:Tn});if(!(!run$2({editor:ze,state:_n,from:Math.max(mn-1,0),to:bn.b-1,rule:un,pasteEvent:an,dropEvent:ln})||!Tn.steps.length))return ln=typeof DragEvent<"u"?new DragEvent("drop"):null,an=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,Tn}}))}function findDuplicates(en){const ze=en.filter((tn,nn)=>en.indexOf(tn)!==nn);return[...new Set(ze)]}class ExtensionManager{constructor(ze,tn){this.splittableMarks=[],this.editor=tn,this.extensions=ExtensionManager.resolve(ze),this.schema=getSchemaByResolvedExtensions(this.extensions,tn),this.extensions.forEach(nn=>{var rn;this.editor.extensionStorage[nn.name]=nn.storage;const sn={name:nn.name,options:nn.options,storage:nn.storage,editor:this.editor,type:getSchemaTypeByName(nn.name,this.schema)};nn.type==="mark"&&(!((rn=callOrReturn(getExtensionField(nn,"keepOnSplit",sn)))!==null&&rn!==void 0)||rn)&&this.splittableMarks.push(nn.name);const an=getExtensionField(nn,"onBeforeCreate",sn);an&&this.editor.on("beforeCreate",an);const ln=getExtensionField(nn,"onCreate",sn);ln&&this.editor.on("create",ln);const cn=getExtensionField(nn,"onUpdate",sn);cn&&this.editor.on("update",cn);const un=getExtensionField(nn,"onSelectionUpdate",sn);un&&this.editor.on("selectionUpdate",un);const dn=getExtensionField(nn,"onTransaction",sn);dn&&this.editor.on("transaction",dn);const fn=getExtensionField(nn,"onFocus",sn);fn&&this.editor.on("focus",fn);const pn=getExtensionField(nn,"onBlur",sn);pn&&this.editor.on("blur",pn);const hn=getExtensionField(nn,"onDestroy",sn);hn&&this.editor.on("destroy",hn)})}static resolve(ze){const tn=ExtensionManager.sort(ExtensionManager.flatten(ze)),nn=findDuplicates(tn.map(rn=>rn.name));return nn.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${nn.map(rn=>`'${rn}'`).join(", ")}]. This can lead to issues.`),tn}static flatten(ze){return ze.map(tn=>{const nn={name:tn.name,options:tn.options,storage:tn.storage},rn=getExtensionField(tn,"addExtensions",nn);return rn?[tn,...this.flatten(rn())]:tn}).flat(10)}static sort(ze){return ze.sort((nn,rn)=>{const sn=getExtensionField(nn,"priority")||100,an=getExtensionField(rn,"priority")||100;return sn>an?-1:sn<an?1:0})}get commands(){return this.extensions.reduce((ze,tn)=>{const nn={name:tn.name,options:tn.options,storage:tn.storage,editor:this.editor,type:getSchemaTypeByName(tn.name,this.schema)},rn=getExtensionField(tn,"addCommands",nn);return rn?{...ze,...rn()}:ze},{})}get plugins(){const{editor:ze}=this,tn=ExtensionManager.sort([...this.extensions].reverse()),nn=[],rn=[],sn=tn.map(an=>{const ln={name:an.name,options:an.options,storage:an.storage,editor:ze,type:getSchemaTypeByName(an.name,this.schema)},cn=[],un=getExtensionField(an,"addKeyboardShortcuts",ln);let dn={};if(an.type==="mark"&&an.config.exitable&&(dn.ArrowRight=()=>Mark.handleExit({editor:ze,mark:an})),un){const En=Object.fromEntries(Object.entries(un()).map(([mn,bn])=>[mn,()=>bn({editor:ze})]));dn={...dn,...En}}const fn=keymap(dn);cn.push(fn);const pn=getExtensionField(an,"addInputRules",ln);isExtensionRulesEnabled(an,ze.options.enableInputRules)&&pn&&nn.push(...pn());const hn=getExtensionField(an,"addPasteRules",ln);isExtensionRulesEnabled(an,ze.options.enablePasteRules)&&hn&&rn.push(...hn());const gn=getExtensionField(an,"addProseMirrorPlugins",ln);if(gn){const En=gn();cn.push(...En)}return cn}).flat();return[inputRulesPlugin({editor:ze,rules:nn}),...pasteRulesPlugin({editor:ze,rules:rn}),...sn]}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:ze}=this,{nodeExtensions:tn}=splitExtensions(this.extensions);return Object.fromEntries(tn.filter(nn=>!!getExtensionField(nn,"addNodeView")).map(nn=>{const rn=this.attributes.filter(cn=>cn.type===nn.name),sn={name:nn.name,options:nn.options,storage:nn.storage,editor:ze,type:getNodeType(nn.name,this.schema)},an=getExtensionField(nn,"addNodeView",sn);if(!an)return[];const ln=(cn,un,dn,fn)=>{const pn=getRenderedAttributes(cn,rn);return an()({editor:ze,node:cn,getPos:dn,decorations:fn,HTMLAttributes:pn,extension:nn})};return[nn.name,ln]}))}}function getType(en){return Object.prototype.toString.call(en).slice(8,-1)}function isPlainObject(en){return getType(en)!=="Object"?!1:en.constructor===Object&&Object.getPrototypeOf(en)===Object.prototype}function mergeDeep(en,ze){const tn={...en};return isPlainObject(en)&&isPlainObject(ze)&&Object.keys(ze).forEach(nn=>{isPlainObject(ze[nn])?nn in en?tn[nn]=mergeDeep(en[nn],ze[nn]):Object.assign(tn,{[nn]:ze[nn]}):Object.assign(tn,{[nn]:ze[nn]})}),tn}class Extension{constructor(ze={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...ze},this.name=this.config.name,ze.defaultOptions&&Object.keys(ze.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(ze={}){return new Extension(ze)}configure(ze={}){const tn=this.extend();return tn.options=mergeDeep(this.options,ze),tn.storage=callOrReturn(getExtensionField(tn,"addStorage",{name:tn.name,options:tn.options})),tn}extend(ze={}){const tn=new Extension({...this.config,...ze});return tn.parent=this,this.child=tn,tn.name=ze.name?ze.name:tn.parent.name,ze.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${tn.name}".`),tn.options=callOrReturn(getExtensionField(tn,"addOptions",{name:tn.name})),tn.storage=callOrReturn(getExtensionField(tn,"addStorage",{name:tn.name,options:tn.options})),tn}}function getTextBetween(en,ze,tn){const{from:nn,to:rn}=ze,{blockSeparator:sn=`

`,textSerializers:an={}}=tn||{};let ln="",cn=!0;return en.nodesBetween(nn,rn,(un,dn,fn,pn)=>{var hn;const gn=an==null?void 0:an[un.type.name];gn?(un.isBlock&&!cn&&(ln+=sn,cn=!0),fn&&(ln+=gn({node:un,pos:dn,parent:fn,index:pn,range:ze}))):un.isText?(ln+=(hn=un==null?void 0:un.text)===null||hn===void 0?void 0:hn.slice(Math.max(nn,dn)-dn,rn-dn),cn=!1):un.isBlock&&!cn&&(ln+=sn,cn=!0)}),ln}function getTextSerializersFromSchema(en){return Object.fromEntries(Object.entries(en.nodes).filter(([,ze])=>ze.spec.toText).map(([ze,tn])=>[ze,tn.spec.toText]))}const ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:en}=this,{state:ze,schema:tn}=en,{doc:nn,selection:rn}=ze,{ranges:sn}=rn,an=Math.min(...sn.map(dn=>dn.$from.pos)),ln=Math.max(...sn.map(dn=>dn.$to.pos)),cn=getTextSerializersFromSchema(tn);return getTextBetween(nn,{from:an,to:ln},{textSerializers:cn})}}})]}}),blur=()=>({editor:en,view:ze})=>(requestAnimationFrame(()=>{var tn;en.isDestroyed||(ze.dom.blur(),(tn=window==null?void 0:window.getSelection())===null||tn===void 0||tn.removeAllRanges())}),!0),clearContent=(en=!1)=>({commands:ze})=>ze.setContent("",en),clearNodes=()=>({state:en,tr:ze,dispatch:tn})=>{const{selection:nn}=ze,{ranges:rn}=nn;return tn&&rn.forEach(({$from:sn,$to:an})=>{en.doc.nodesBetween(sn.pos,an.pos,(ln,cn)=>{if(ln.type.isText)return;const{doc:un,mapping:dn}=ze,fn=un.resolve(dn.map(cn)),pn=un.resolve(dn.map(cn+ln.nodeSize)),hn=fn.blockRange(pn);if(!hn)return;const gn=liftTarget(hn);if(ln.type.isTextblock){const{defaultType:En}=fn.parent.contentMatchAt(fn.index());ze.setNodeMarkup(hn.start,En)}(gn||gn===0)&&ze.lift(hn,gn)})}),!0},command=en=>ze=>en(ze),createParagraphNear=()=>({state:en,dispatch:ze})=>createParagraphNear$1(en,ze),cut=(en,ze)=>({editor:tn,tr:nn})=>{const{state:rn}=tn,sn=rn.doc.slice(en.from,en.to);nn.deleteRange(en.from,en.to);const an=nn.mapping.map(ze);return nn.insert(an,sn.content),nn.setSelection(new TextSelection(nn.doc.resolve(an-1))),!0},deleteCurrentNode=()=>({tr:en,dispatch:ze})=>{const{selection:tn}=en,nn=tn.$anchor.node();if(nn.content.size>0)return!1;const rn=en.selection.$anchor;for(let sn=rn.depth;sn>0;sn-=1)if(rn.node(sn).type===nn.type){if(ze){const ln=rn.before(sn),cn=rn.after(sn);en.delete(ln,cn).scrollIntoView()}return!0}return!1},deleteNode=en=>({tr:ze,state:tn,dispatch:nn})=>{const rn=getNodeType(en,tn.schema),sn=ze.selection.$anchor;for(let an=sn.depth;an>0;an-=1)if(sn.node(an).type===rn){if(nn){const cn=sn.before(an),un=sn.after(an);ze.delete(cn,un).scrollIntoView()}return!0}return!1},deleteRange=en=>({tr:ze,dispatch:tn})=>{const{from:nn,to:rn}=en;return tn&&ze.delete(nn,rn),!0},deleteSelection=()=>({state:en,dispatch:ze})=>deleteSelection$1(en,ze),enter=()=>({commands:en})=>en.keyboardShortcut("Enter"),exitCode=()=>({state:en,dispatch:ze})=>exitCode$1(en,ze);function objectIncludes(en,ze,tn={strict:!0}){const nn=Object.keys(ze);return nn.length?nn.every(rn=>tn.strict?ze[rn]===en[rn]:isRegExp(ze[rn])?ze[rn].test(en[rn]):ze[rn]===en[rn]):!0}function findMarkInSet(en,ze,tn={}){return en.find(nn=>nn.type===ze&&objectIncludes(nn.attrs,tn))}function isMarkInSet(en,ze,tn={}){return!!findMarkInSet(en,ze,tn)}function getMarkRange(en,ze,tn={}){if(!en||!ze)return;let nn=en.parent.childAfter(en.parentOffset);if(en.parentOffset===nn.offset&&nn.offset!==0&&(nn=en.parent.childBefore(en.parentOffset)),!nn.node)return;const rn=findMarkInSet([...nn.node.marks],ze,tn);if(!rn)return;let sn=nn.index,an=en.start()+nn.offset,ln=sn+1,cn=an+nn.node.nodeSize;for(findMarkInSet([...nn.node.marks],ze,tn);sn>0&&rn.isInSet(en.parent.child(sn-1).marks);)sn-=1,an-=en.parent.child(sn).nodeSize;for(;ln<en.parent.childCount&&isMarkInSet([...en.parent.child(ln).marks],ze,tn);)cn+=en.parent.child(ln).nodeSize,ln+=1;return{from:an,to:cn}}function getMarkType(en,ze){if(typeof en=="string"){if(!ze.marks[en])throw Error(`There is no mark type named '${en}'. Maybe you forgot to add the extension?`);return ze.marks[en]}return en}const extendMarkRange=(en,ze={})=>({tr:tn,state:nn,dispatch:rn})=>{const sn=getMarkType(en,nn.schema),{doc:an,selection:ln}=tn,{$from:cn,from:un,to:dn}=ln;if(rn){const fn=getMarkRange(cn,sn,ze);if(fn&&fn.from<=un&&fn.to>=dn){const pn=TextSelection.create(an,fn.from,fn.to);tn.setSelection(pn)}}return!0},first=en=>ze=>{const tn=typeof en=="function"?en(ze):en;for(let nn=0;nn<tn.length;nn+=1)if(tn[nn](ze))return!0;return!1};function isTextSelection(en){return en instanceof TextSelection}function minMax(en=0,ze=0,tn=0){return Math.min(Math.max(en,ze),tn)}function resolveFocusPosition(en,ze=null){if(!ze)return null;const tn=Selection.atStart(en),nn=Selection.atEnd(en);if(ze==="start"||ze===!0)return tn;if(ze==="end")return nn;const rn=tn.from,sn=nn.to;return ze==="all"?TextSelection.create(en,minMax(0,rn,sn),minMax(en.content.size,rn,sn)):TextSelection.create(en,minMax(ze,rn,sn),minMax(ze,rn,sn))}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const focus=(en=null,ze={})=>({editor:tn,view:nn,tr:rn,dispatch:sn})=>{ze={scrollIntoView:!0,...ze};const an=()=>{isiOS()&&nn.dom.focus(),requestAnimationFrame(()=>{tn.isDestroyed||(nn.focus(),ze!=null&&ze.scrollIntoView&&tn.commands.scrollIntoView())})};if(nn.hasFocus()&&en===null||en===!1)return!0;if(sn&&en===null&&!isTextSelection(tn.state.selection))return an(),!0;const ln=resolveFocusPosition(rn.doc,en)||tn.state.selection,cn=tn.state.selection.eq(ln);return sn&&(cn||rn.setSelection(ln),cn&&rn.storedMarks&&rn.setStoredMarks(rn.storedMarks),an()),!0},forEach=(en,ze)=>tn=>en.every((nn,rn)=>ze(nn,{...tn,index:rn})),insertContent=(en,ze)=>({tr:tn,commands:nn})=>nn.insertContentAt({from:tn.selection.from,to:tn.selection.to},en,ze),removeWhitespaces=en=>{const ze=en.childNodes;for(let tn=ze.length-1;tn>=0;tn-=1){const nn=ze[tn];nn.nodeType===3&&nn.nodeValue&&/^(\n\s\s|\n)$/.test(nn.nodeValue)?en.removeChild(nn):nn.nodeType===1&&removeWhitespaces(nn)}return en};function elementFromString(en){const ze=`<body>${en}</body>`,tn=new window.DOMParser().parseFromString(ze,"text/html").body;return removeWhitespaces(tn)}function createNodeFromContent(en,ze,tn){if(tn={slice:!0,parseOptions:{},...tn},typeof en=="object"&&en!==null)try{return Array.isArray(en)&&en.length>0?Fragment.fromArray(en.map(nn=>ze.nodeFromJSON(nn))):ze.nodeFromJSON(en)}catch(nn){return console.warn("[tiptap warn]: Invalid content.","Passed value:",en,"Error:",nn),createNodeFromContent("",ze,tn)}if(typeof en=="string"){const nn=DOMParser$1.fromSchema(ze);return tn.slice?nn.parseSlice(elementFromString(en),tn.parseOptions).content:nn.parse(elementFromString(en),tn.parseOptions)}return createNodeFromContent("",ze,tn)}function selectionToInsertionEnd(en,ze,tn){const nn=en.steps.length-1;if(nn<ze)return;const rn=en.steps[nn];if(!(rn instanceof ReplaceStep||rn instanceof ReplaceAroundStep))return;const sn=en.mapping.maps[nn];let an=0;sn.forEach((ln,cn,un,dn)=>{an===0&&(an=dn)}),en.setSelection(Selection.near(en.doc.resolve(an),tn))}const isFragment=en=>en.toString().startsWith("<"),insertContentAt=(en,ze,tn)=>({tr:nn,dispatch:rn,editor:sn})=>{if(rn){tn={parseOptions:{},updateSelection:!0,...tn};const an=createNodeFromContent(ze,sn.schema,{parseOptions:{preserveWhitespace:"full",...tn.parseOptions}});if(an.toString()==="<>")return!0;let{from:ln,to:cn}=typeof en=="number"?{from:en,to:en}:{from:en.from,to:en.to},un=!0,dn=!0;if((isFragment(an)?an:[an]).forEach(pn=>{pn.check(),un=un?pn.isText&&pn.marks.length===0:!1,dn=dn?pn.isBlock:!1}),ln===cn&&dn){const{parent:pn}=nn.doc.resolve(ln);pn.isTextblock&&!pn.type.spec.code&&!pn.childCount&&(ln-=1,cn+=1)}un?Array.isArray(ze)?nn.insertText(ze.map(pn=>pn.text||"").join(""),ln,cn):typeof ze=="object"&&ze&&ze.text?nn.insertText(ze.text,ln,cn):nn.insertText(ze,ln,cn):nn.replaceWith(ln,cn,an),tn.updateSelection&&selectionToInsertionEnd(nn,nn.steps.length-1,-1)}return!0},joinUp=()=>({state:en,dispatch:ze})=>joinUp$1(en,ze),joinDown=()=>({state:en,dispatch:ze})=>joinDown$1(en,ze),joinBackward=()=>({state:en,dispatch:ze})=>joinBackward$1(en,ze),joinForward=()=>({state:en,dispatch:ze})=>joinForward$1(en,ze),joinItemBackward=()=>({tr:en,state:ze,dispatch:tn})=>{try{const nn=joinPoint(ze.doc,ze.selection.$from.pos,-1);return nn==null?!1:(en.join(nn,2),tn&&tn(en),!0)}catch{return!1}},joinItemForward=()=>({state:en,dispatch:ze,tr:tn})=>{try{const nn=joinPoint(en.doc,en.selection.$from.pos,1);return nn==null?!1:(tn.join(nn,2),ze&&ze(tn),!0)}catch{return!1}},joinTextblockBackward=()=>({state:en,dispatch:ze})=>joinTextblockBackward$1(en,ze),joinTextblockForward=()=>({state:en,dispatch:ze})=>joinTextblockForward$1(en,ze);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(en){const ze=en.split(/-(?!$)/);let tn=ze[ze.length-1];tn==="Space"&&(tn=" ");let nn,rn,sn,an;for(let ln=0;ln<ze.length-1;ln+=1){const cn=ze[ln];if(/^(cmd|meta|m)$/i.test(cn))an=!0;else if(/^a(lt)?$/i.test(cn))nn=!0;else if(/^(c|ctrl|control)$/i.test(cn))rn=!0;else if(/^s(hift)?$/i.test(cn))sn=!0;else if(/^mod$/i.test(cn))isiOS()||isMacOS()?an=!0:rn=!0;else throw new Error(`Unrecognized modifier name: ${cn}`)}return nn&&(tn=`Alt-${tn}`),rn&&(tn=`Ctrl-${tn}`),an&&(tn=`Meta-${tn}`),sn&&(tn=`Shift-${tn}`),tn}const keyboardShortcut=en=>({editor:ze,view:tn,tr:nn,dispatch:rn})=>{const sn=normalizeKeyName(en).split(/-(?!$)/),an=sn.find(un=>!["Alt","Ctrl","Meta","Shift"].includes(un)),ln=new KeyboardEvent("keydown",{key:an==="Space"?" ":an,altKey:sn.includes("Alt"),ctrlKey:sn.includes("Ctrl"),metaKey:sn.includes("Meta"),shiftKey:sn.includes("Shift"),bubbles:!0,cancelable:!0}),cn=ze.captureTransaction(()=>{tn.someProp("handleKeyDown",un=>un(tn,ln))});return cn==null||cn.steps.forEach(un=>{const dn=un.map(nn.mapping);dn&&rn&&nn.maybeStep(dn)}),!0};function isNodeActive(en,ze,tn={}){const{from:nn,to:rn,empty:sn}=en.selection,an=ze?getNodeType(ze,en.schema):null,ln=[];en.doc.nodesBetween(nn,rn,(fn,pn)=>{if(fn.isText)return;const hn=Math.max(nn,pn),gn=Math.min(rn,pn+fn.nodeSize);ln.push({node:fn,from:hn,to:gn})});const cn=rn-nn,un=ln.filter(fn=>an?an.name===fn.node.type.name:!0).filter(fn=>objectIncludes(fn.node.attrs,tn,{strict:!1}));return sn?!!un.length:un.reduce((fn,pn)=>fn+pn.to-pn.from,0)>=cn}const lift=(en,ze={})=>({state:tn,dispatch:nn})=>{const rn=getNodeType(en,tn.schema);return isNodeActive(tn,rn,ze)?lift$1(tn,nn):!1},liftEmptyBlock=()=>({state:en,dispatch:ze})=>liftEmptyBlock$1(en,ze),liftListItem=en=>({state:ze,dispatch:tn})=>{const nn=getNodeType(en,ze.schema);return liftListItem$1(nn)(ze,tn)},newlineInCode=()=>({state:en,dispatch:ze})=>newlineInCode$1(en,ze);function getSchemaTypeNameByName(en,ze){return ze.nodes[en]?"node":ze.marks[en]?"mark":null}function deleteProps(en,ze){const tn=typeof ze=="string"?[ze]:ze;return Object.keys(en).reduce((nn,rn)=>(tn.includes(rn)||(nn[rn]=en[rn]),nn),{})}const resetAttributes=(en,ze)=>({tr:tn,state:nn,dispatch:rn})=>{let sn=null,an=null;const ln=getSchemaTypeNameByName(typeof en=="string"?en:en.name,nn.schema);return ln?(ln==="node"&&(sn=getNodeType(en,nn.schema)),ln==="mark"&&(an=getMarkType(en,nn.schema)),rn&&tn.selection.ranges.forEach(cn=>{nn.doc.nodesBetween(cn.$from.pos,cn.$to.pos,(un,dn)=>{sn&&sn===un.type&&tn.setNodeMarkup(dn,void 0,deleteProps(un.attrs,ze)),an&&un.marks.length&&un.marks.forEach(fn=>{an===fn.type&&tn.addMark(dn,dn+un.nodeSize,an.create(deleteProps(fn.attrs,ze)))})})}),!0):!1},scrollIntoView=()=>({tr:en,dispatch:ze})=>(ze&&en.scrollIntoView(),!0),selectAll=()=>({tr:en,commands:ze})=>ze.setTextSelection({from:0,to:en.doc.content.size}),selectNodeBackward=()=>({state:en,dispatch:ze})=>selectNodeBackward$1(en,ze),selectNodeForward=()=>({state:en,dispatch:ze})=>selectNodeForward$1(en,ze),selectParentNode=()=>({state:en,dispatch:ze})=>selectParentNode$1(en,ze),selectTextblockEnd=()=>({state:en,dispatch:ze})=>selectTextblockEnd$1(en,ze),selectTextblockStart=()=>({state:en,dispatch:ze})=>selectTextblockStart$1(en,ze);function createDocument(en,ze,tn={}){return createNodeFromContent(en,ze,{slice:!1,parseOptions:tn})}const setContent=(en,ze=!1,tn={})=>({tr:nn,editor:rn,dispatch:sn})=>{const{doc:an}=nn,ln=createDocument(en,rn.schema,tn);return sn&&nn.replaceWith(0,an.content.size,ln).setMeta("preventUpdate",!ze),!0};function getMarkAttributes(en,ze){const tn=getMarkType(ze,en.schema),{from:nn,to:rn,empty:sn}=en.selection,an=[];sn?(en.storedMarks&&an.push(...en.storedMarks),an.push(...en.selection.$head.marks())):en.doc.nodesBetween(nn,rn,cn=>{an.push(...cn.marks)});const ln=an.find(cn=>cn.type.name===tn.name);return ln?{...ln.attrs}:{}}function combineTransactionSteps(en,ze){const tn=new Transform(en);return ze.forEach(nn=>{nn.steps.forEach(rn=>{tn.step(rn)})}),tn}function defaultBlockAt(en){for(let ze=0;ze<en.edgeCount;ze+=1){const{type:tn}=en.edge(ze);if(tn.isTextblock&&!tn.hasRequiredAttrs())return tn}return null}function findChildren(en,ze){const tn=[];return en.descendants((nn,rn)=>{ze(nn)&&tn.push({node:nn,pos:rn})}),tn}function findChildrenInRange(en,ze,tn){const nn=[];return en.nodesBetween(ze.from,ze.to,(rn,sn)=>{tn(rn)&&nn.push({node:rn,pos:sn})}),nn}function findParentNodeClosestToPos(en,ze){for(let tn=en.depth;tn>0;tn-=1){const nn=en.node(tn);if(ze(nn))return{pos:tn>0?en.before(tn):0,start:en.start(tn),depth:tn,node:nn}}}function findParentNode(en){return ze=>findParentNodeClosestToPos(ze.$from,en)}function getHTMLFromFragment(en,ze){const tn=DOMSerializer.fromSchema(ze).serializeFragment(en),rn=document.implementation.createHTMLDocument().createElement("div");return rn.appendChild(tn),rn.innerHTML}function getText(en,ze){const tn={from:0,to:en.content.size};return getTextBetween(en,tn,ze)}function getNodeAttributes(en,ze){const tn=getNodeType(ze,en.schema),{from:nn,to:rn}=en.selection,sn=[];en.doc.nodesBetween(nn,rn,ln=>{sn.push(ln)});const an=sn.reverse().find(ln=>ln.type.name===tn.name);return an?{...an.attrs}:{}}function getAttributes(en,ze){const tn=getSchemaTypeNameByName(typeof ze=="string"?ze:ze.name,en.schema);return tn==="node"?getNodeAttributes(en,ze):tn==="mark"?getMarkAttributes(en,ze):{}}function removeDuplicates(en,ze=JSON.stringify){const tn={};return en.filter(nn=>{const rn=ze(nn);return Object.prototype.hasOwnProperty.call(tn,rn)?!1:tn[rn]=!0})}function simplifyChangedRanges(en){const ze=removeDuplicates(en);return ze.length===1?ze:ze.filter((tn,nn)=>!ze.filter((sn,an)=>an!==nn).some(sn=>tn.oldRange.from>=sn.oldRange.from&&tn.oldRange.to<=sn.oldRange.to&&tn.newRange.from>=sn.newRange.from&&tn.newRange.to<=sn.newRange.to))}function getChangedRanges(en){const{mapping:ze,steps:tn}=en,nn=[];return ze.maps.forEach((rn,sn)=>{const an=[];if(rn.ranges.length)rn.forEach((ln,cn)=>{an.push({from:ln,to:cn})});else{const{from:ln,to:cn}=tn[sn];if(ln===void 0||cn===void 0)return;an.push({from:ln,to:cn})}an.forEach(({from:ln,to:cn})=>{const un=ze.slice(sn).map(ln,-1),dn=ze.slice(sn).map(cn),fn=ze.invert().map(un,-1),pn=ze.invert().map(dn);nn.push({oldRange:{from:fn,to:pn},newRange:{from:un,to:dn}})})}),simplifyChangedRanges(nn)}function getMarksBetween(en,ze,tn){const nn=[];return en===ze?tn.resolve(en).marks().forEach(rn=>{const sn=tn.resolve(en-1),an=getMarkRange(sn,rn.type);an&&nn.push({mark:rn,...an})}):tn.nodesBetween(en,ze,(rn,sn)=>{!rn||(rn==null?void 0:rn.nodeSize)===void 0||nn.push(...rn.marks.map(an=>({from:sn,to:sn+rn.nodeSize,mark:an})))}),nn}function getSplittedAttributes(en,ze,tn){return Object.fromEntries(Object.entries(tn).filter(([nn])=>{const rn=en.find(sn=>sn.type===ze&&sn.name===nn);return rn?rn.attribute.keepOnSplit:!1}))}function isMarkActive(en,ze,tn={}){const{empty:nn,ranges:rn}=en.selection,sn=ze?getMarkType(ze,en.schema):null;if(nn)return!!(en.storedMarks||en.selection.$from.marks()).filter(fn=>sn?sn.name===fn.type.name:!0).find(fn=>objectIncludes(fn.attrs,tn,{strict:!1}));let an=0;const ln=[];if(rn.forEach(({$from:fn,$to:pn})=>{const hn=fn.pos,gn=pn.pos;en.doc.nodesBetween(hn,gn,(En,mn)=>{if(!En.isText&&!En.marks.length)return;const bn=Math.max(hn,mn),Tn=Math.min(gn,mn+En.nodeSize),_n=Tn-bn;an+=_n,ln.push(...En.marks.map(An=>({mark:An,from:bn,to:Tn})))})}),an===0)return!1;const cn=ln.filter(fn=>sn?sn.name===fn.mark.type.name:!0).filter(fn=>objectIncludes(fn.mark.attrs,tn,{strict:!1})).reduce((fn,pn)=>fn+pn.to-pn.from,0),un=ln.filter(fn=>sn?fn.mark.type!==sn&&fn.mark.type.excludes(sn):!0).reduce((fn,pn)=>fn+pn.to-pn.from,0);return(cn>0?cn+un:cn)>=an}function isActive(en,ze,tn={}){if(!ze)return isNodeActive(en,null,tn)||isMarkActive(en,null,tn);const nn=getSchemaTypeNameByName(ze,en.schema);return nn==="node"?isNodeActive(en,ze,tn):nn==="mark"?isMarkActive(en,ze,tn):!1}function isList(en,ze){const{nodeExtensions:tn}=splitExtensions(ze),nn=tn.find(an=>an.name===en);if(!nn)return!1;const rn={name:nn.name,options:nn.options,storage:nn.storage},sn=callOrReturn(getExtensionField(nn,"group",rn));return typeof sn!="string"?!1:sn.split(" ").includes("list")}function isNodeEmpty(en){var ze;const tn=(ze=en.type.createAndFill())===null||ze===void 0?void 0:ze.toJSON(),nn=en.toJSON();return JSON.stringify(tn)===JSON.stringify(nn)}function canSetMark(en,ze,tn){var nn;const{selection:rn}=ze;let sn=null;if(isTextSelection(rn)&&(sn=rn.$cursor),sn){const ln=(nn=en.storedMarks)!==null&&nn!==void 0?nn:sn.marks();return!!tn.isInSet(ln)||!ln.some(cn=>cn.type.excludes(tn))}const{ranges:an}=rn;return an.some(({$from:ln,$to:cn})=>{let un=ln.depth===0?en.doc.inlineContent&&en.doc.type.allowsMarkType(tn):!1;return en.doc.nodesBetween(ln.pos,cn.pos,(dn,fn,pn)=>{if(un)return!1;if(dn.isInline){const hn=!pn||pn.type.allowsMarkType(tn),gn=!!tn.isInSet(dn.marks)||!dn.marks.some(En=>En.type.excludes(tn));un=hn&&gn}return!un}),un})}const setMark=(en,ze={})=>({tr:tn,state:nn,dispatch:rn})=>{const{selection:sn}=tn,{empty:an,ranges:ln}=sn,cn=getMarkType(en,nn.schema);if(rn)if(an){const un=getMarkAttributes(nn,cn);tn.addStoredMark(cn.create({...un,...ze}))}else ln.forEach(un=>{const dn=un.$from.pos,fn=un.$to.pos;nn.doc.nodesBetween(dn,fn,(pn,hn)=>{const gn=Math.max(hn,dn),En=Math.min(hn+pn.nodeSize,fn);pn.marks.find(bn=>bn.type===cn)?pn.marks.forEach(bn=>{cn===bn.type&&tn.addMark(gn,En,cn.create({...bn.attrs,...ze}))}):tn.addMark(gn,En,cn.create(ze))})});return canSetMark(nn,tn,cn)},setMeta=(en,ze)=>({tr:tn})=>(tn.setMeta(en,ze),!0),setNode=(en,ze={})=>({state:tn,dispatch:nn,chain:rn})=>{const sn=getNodeType(en,tn.schema);return sn.isTextblock?rn().command(({commands:an})=>setBlockType(sn,ze)(tn)?!0:an.clearNodes()).command(({state:an})=>setBlockType(sn,ze)(an,nn)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=en=>({tr:ze,dispatch:tn})=>{if(tn){const{doc:nn}=ze,rn=minMax(en,0,nn.content.size),sn=NodeSelection.create(nn,rn);ze.setSelection(sn)}return!0},setTextSelection=en=>({tr:ze,dispatch:tn})=>{if(tn){const{doc:nn}=ze,{from:rn,to:sn}=typeof en=="number"?{from:en,to:en}:en,an=TextSelection.atStart(nn).from,ln=TextSelection.atEnd(nn).to,cn=minMax(rn,an,ln),un=minMax(sn,an,ln),dn=TextSelection.create(nn,cn,un);ze.setSelection(dn)}return!0},sinkListItem=en=>({state:ze,dispatch:tn})=>{const nn=getNodeType(en,ze.schema);return sinkListItem$1(nn)(ze,tn)};function ensureMarks(en,ze){const tn=en.storedMarks||en.selection.$to.parentOffset&&en.selection.$from.marks();if(tn){const nn=tn.filter(rn=>ze==null?void 0:ze.includes(rn.type.name));en.tr.ensureMarks(nn)}}const splitBlock=({keepMarks:en=!0}={})=>({tr:ze,state:tn,dispatch:nn,editor:rn})=>{const{selection:sn,doc:an}=ze,{$from:ln,$to:cn}=sn,un=rn.extensionManager.attributes,dn=getSplittedAttributes(un,ln.node().type.name,ln.node().attrs);if(sn instanceof NodeSelection&&sn.node.isBlock)return!ln.parentOffset||!canSplit(an,ln.pos)?!1:(nn&&(en&&ensureMarks(tn,rn.extensionManager.splittableMarks),ze.split(ln.pos).scrollIntoView()),!0);if(!ln.parent.isBlock)return!1;if(nn){const fn=cn.parentOffset===cn.parent.content.size;sn instanceof TextSelection&&ze.deleteSelection();const pn=ln.depth===0?void 0:defaultBlockAt(ln.node(-1).contentMatchAt(ln.indexAfter(-1)));let hn=fn&&pn?[{type:pn,attrs:dn}]:void 0,gn=canSplit(ze.doc,ze.mapping.map(ln.pos),1,hn);if(!hn&&!gn&&canSplit(ze.doc,ze.mapping.map(ln.pos),1,pn?[{type:pn}]:void 0)&&(gn=!0,hn=pn?[{type:pn,attrs:dn}]:void 0),gn&&(ze.split(ze.mapping.map(ln.pos),1,hn),pn&&!fn&&!ln.parentOffset&&ln.parent.type!==pn)){const En=ze.mapping.map(ln.before()),mn=ze.doc.resolve(En);ln.node(-1).canReplaceWith(mn.index(),mn.index()+1,pn)&&ze.setNodeMarkup(ze.mapping.map(ln.before()),pn)}en&&ensureMarks(tn,rn.extensionManager.splittableMarks),ze.scrollIntoView()}return!0},splitListItem=en=>({tr:ze,state:tn,dispatch:nn,editor:rn})=>{var sn;const an=getNodeType(en,tn.schema),{$from:ln,$to:cn}=tn.selection,un=tn.selection.node;if(un&&un.isBlock||ln.depth<2||!ln.sameParent(cn))return!1;const dn=ln.node(-1);if(dn.type!==an)return!1;const fn=rn.extensionManager.attributes;if(ln.parent.content.size===0&&ln.node(-1).childCount===ln.indexAfter(-1)){if(ln.depth===2||ln.node(-3).type!==an||ln.index(-2)!==ln.node(-2).childCount-1)return!1;if(nn){let mn=Fragment.empty;const bn=ln.index(-1)?1:ln.index(-2)?2:3;for(let wn=ln.depth-bn;wn>=ln.depth-3;wn-=1)mn=Fragment.from(ln.node(wn).copy(mn));const Tn=ln.indexAfter(-1)<ln.node(-2).childCount?1:ln.indexAfter(-2)<ln.node(-3).childCount?2:3,_n=getSplittedAttributes(fn,ln.node().type.name,ln.node().attrs),An=((sn=an.contentMatch.defaultType)===null||sn===void 0?void 0:sn.createAndFill(_n))||void 0;mn=mn.append(Fragment.from(an.createAndFill(null,An)||void 0));const Rn=ln.before(ln.depth-(bn-1));ze.replace(Rn,ln.after(-Tn),new Slice(mn,4-bn,0));let Cn=-1;ze.doc.nodesBetween(Rn,ze.doc.content.size,(wn,Fn)=>{if(Cn>-1)return!1;wn.isTextblock&&wn.content.size===0&&(Cn=Fn+1)}),Cn>-1&&ze.setSelection(TextSelection.near(ze.doc.resolve(Cn))),ze.scrollIntoView()}return!0}const pn=cn.pos===ln.end()?dn.contentMatchAt(0).defaultType:null,hn=getSplittedAttributes(fn,dn.type.name,dn.attrs),gn=getSplittedAttributes(fn,ln.node().type.name,ln.node().attrs);ze.delete(ln.pos,cn.pos);const En=pn?[{type:an,attrs:hn},{type:pn,attrs:gn}]:[{type:an,attrs:hn}];if(!canSplit(ze.doc,ln.pos,2))return!1;if(nn){const{selection:mn,storedMarks:bn}=tn,{splittableMarks:Tn}=rn.extensionManager,_n=bn||mn.$to.parentOffset&&mn.$from.marks();if(ze.split(ln.pos,2,En).scrollIntoView(),!_n||!nn)return!0;const An=_n.filter(Rn=>Tn.includes(Rn.type.name));ze.ensureMarks(An)}return!0},joinListBackwards=(en,ze)=>{const tn=findParentNode(an=>an.type===ze)(en.selection);if(!tn)return!0;const nn=en.doc.resolve(Math.max(0,tn.pos-1)).before(tn.depth);if(nn===void 0)return!0;const rn=en.doc.nodeAt(nn);return tn.node.type===(rn==null?void 0:rn.type)&&canJoin(en.doc,tn.pos)&&en.join(tn.pos),!0},joinListForwards=(en,ze)=>{const tn=findParentNode(an=>an.type===ze)(en.selection);if(!tn)return!0;const nn=en.doc.resolve(tn.start).after(tn.depth);if(nn===void 0)return!0;const rn=en.doc.nodeAt(nn);return tn.node.type===(rn==null?void 0:rn.type)&&canJoin(en.doc,nn)&&en.join(nn),!0},toggleList=(en,ze,tn,nn={})=>({editor:rn,tr:sn,state:an,dispatch:ln,chain:cn,commands:un,can:dn})=>{const{extensions:fn,splittableMarks:pn}=rn.extensionManager,hn=getNodeType(en,an.schema),gn=getNodeType(ze,an.schema),{selection:En,storedMarks:mn}=an,{$from:bn,$to:Tn}=En,_n=bn.blockRange(Tn),An=mn||En.$to.parentOffset&&En.$from.marks();if(!_n)return!1;const Rn=findParentNode(Cn=>isList(Cn.type.name,fn))(En);if(_n.depth>=1&&Rn&&_n.depth-Rn.depth<=1){if(Rn.node.type===hn)return un.liftListItem(gn);if(isList(Rn.node.type.name,fn)&&hn.validContent(Rn.node.content)&&ln)return cn().command(()=>(sn.setNodeMarkup(Rn.pos,hn),!0)).command(()=>joinListBackwards(sn,hn)).command(()=>joinListForwards(sn,hn)).run()}return!tn||!An||!ln?cn().command(()=>dn().wrapInList(hn,nn)?!0:un.clearNodes()).wrapInList(hn,nn).command(()=>joinListBackwards(sn,hn)).command(()=>joinListForwards(sn,hn)).run():cn().command(()=>{const Cn=dn().wrapInList(hn,nn),wn=An.filter(Fn=>pn.includes(Fn.type.name));return sn.ensureMarks(wn),Cn?!0:un.clearNodes()}).wrapInList(hn,nn).command(()=>joinListBackwards(sn,hn)).command(()=>joinListForwards(sn,hn)).run()},toggleMark=(en,ze={},tn={})=>({state:nn,commands:rn})=>{const{extendEmptyMarkRange:sn=!1}=tn,an=getMarkType(en,nn.schema);return isMarkActive(nn,an,ze)?rn.unsetMark(an,{extendEmptyMarkRange:sn}):rn.setMark(an,ze)},toggleNode=(en,ze,tn={})=>({state:nn,commands:rn})=>{const sn=getNodeType(en,nn.schema),an=getNodeType(ze,nn.schema);return isNodeActive(nn,sn,tn)?rn.setNode(an):rn.setNode(sn,tn)},toggleWrap=(en,ze={})=>({state:tn,commands:nn})=>{const rn=getNodeType(en,tn.schema);return isNodeActive(tn,rn,ze)?nn.lift(rn):nn.wrapIn(rn,ze)},undoInputRule=()=>({state:en,dispatch:ze})=>{const tn=en.plugins;for(let nn=0;nn<tn.length;nn+=1){const rn=tn[nn];let sn;if(rn.spec.isInputRules&&(sn=rn.getState(en))){if(ze){const an=en.tr,ln=sn.transform;for(let cn=ln.steps.length-1;cn>=0;cn-=1)an.step(ln.steps[cn].invert(ln.docs[cn]));if(sn.text){const cn=an.doc.resolve(sn.from).marks();an.replaceWith(sn.from,sn.to,en.schema.text(sn.text,cn))}else an.delete(sn.from,sn.to)}return!0}}return!1},unsetAllMarks=()=>({tr:en,dispatch:ze})=>{const{selection:tn}=en,{empty:nn,ranges:rn}=tn;return nn||ze&&rn.forEach(sn=>{en.removeMark(sn.$from.pos,sn.$to.pos)}),!0},unsetMark=(en,ze={})=>({tr:tn,state:nn,dispatch:rn})=>{var sn;const{extendEmptyMarkRange:an=!1}=ze,{selection:ln}=tn,cn=getMarkType(en,nn.schema),{$from:un,empty:dn,ranges:fn}=ln;if(!rn)return!0;if(dn&&an){let{from:pn,to:hn}=ln;const gn=(sn=un.marks().find(mn=>mn.type===cn))===null||sn===void 0?void 0:sn.attrs,En=getMarkRange(un,cn,gn);En&&(pn=En.from,hn=En.to),tn.removeMark(pn,hn,cn)}else fn.forEach(pn=>{tn.removeMark(pn.$from.pos,pn.$to.pos,cn)});return tn.removeStoredMark(cn),!0},updateAttributes=(en,ze={})=>({tr:tn,state:nn,dispatch:rn})=>{let sn=null,an=null;const ln=getSchemaTypeNameByName(typeof en=="string"?en:en.name,nn.schema);return ln?(ln==="node"&&(sn=getNodeType(en,nn.schema)),ln==="mark"&&(an=getMarkType(en,nn.schema)),rn&&tn.selection.ranges.forEach(cn=>{const un=cn.$from.pos,dn=cn.$to.pos;nn.doc.nodesBetween(un,dn,(fn,pn)=>{sn&&sn===fn.type&&tn.setNodeMarkup(pn,void 0,{...fn.attrs,...ze}),an&&fn.marks.length&&fn.marks.forEach(hn=>{if(an===hn.type){const gn=Math.max(pn,un),En=Math.min(pn+fn.nodeSize,dn);tn.addMark(gn,En,an.create({...hn.attrs,...ze}))}})})}),!0):!1},wrapIn=(en,ze={})=>({state:tn,dispatch:nn})=>{const rn=getNodeType(en,tn.schema);return wrapIn$1(rn,ze)(tn,nn)},wrapInList=(en,ze={})=>({state:tn,dispatch:nn})=>{const rn=getNodeType(en,tn.schema);return wrapInList$1(rn,ze)(tn,nn)};var commands=Object.freeze({__proto__:null,blur,clearContent,clearNodes,command,createParagraphNear,cut,deleteCurrentNode,deleteNode,deleteRange,deleteSelection,enter,exitCode,extendMarkRange,first,focus,forEach,insertContent,insertContentAt,joinUp,joinDown,joinBackward,joinForward,joinItemBackward,joinItemForward,joinTextblockBackward,joinTextblockForward,keyboardShortcut,lift,liftEmptyBlock,liftListItem,newlineInCode,resetAttributes,scrollIntoView,selectAll,selectNodeBackward,selectNodeForward,selectParentNode,selectTextblockEnd,selectTextblockStart,setContent,setMark,setMeta,setNode,setNodeSelection,setTextSelection,sinkListItem,splitBlock,splitListItem,toggleList,toggleMark,toggleNode,toggleWrap,undoInputRule,unsetAllMarks,unsetMark,updateAttributes,wrapIn,wrapInList});const Commands=Extension.create({name:"commands",addCommands(){return{...commands}}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:en}=this;return[new Plugin({key:new PluginKey("focusEvents"),props:{handleDOMEvents:{focus:(ze,tn)=>{en.isFocused=!0;const nn=en.state.tr.setMeta("focus",{event:tn}).setMeta("addToHistory",!1);return ze.dispatch(nn),!1},blur:(ze,tn)=>{en.isFocused=!1;const nn=en.state.tr.setMeta("blur",{event:tn}).setMeta("addToHistory",!1);return ze.dispatch(nn),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const en=()=>this.editor.commands.first(({commands:an})=>[()=>an.undoInputRule(),()=>an.command(({tr:ln})=>{const{selection:cn,doc:un}=ln,{empty:dn,$anchor:fn}=cn,{pos:pn,parent:hn}=fn,gn=fn.parent.isTextblock?ln.doc.resolve(pn-1):fn,En=gn.parent.type.spec.isolating,mn=fn.pos-fn.parentOffset,bn=En&&gn.parent.childCount===1?mn===fn.pos:Selection.atStart(un).from===pn;return!dn||!bn||!hn.type.isTextblock||hn.textContent.length?!1:an.clearNodes()}),()=>an.deleteSelection(),()=>an.joinBackward(),()=>an.selectNodeBackward()]),ze=()=>this.editor.commands.first(({commands:an})=>[()=>an.deleteSelection(),()=>an.deleteCurrentNode(),()=>an.joinForward(),()=>an.selectNodeForward()]),nn={Enter:()=>this.editor.commands.first(({commands:an})=>[()=>an.newlineInCode(),()=>an.createParagraphNear(),()=>an.liftEmptyBlock(),()=>an.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:en,"Mod-Backspace":en,"Shift-Backspace":en,Delete:ze,"Mod-Delete":ze,"Mod-a":()=>this.editor.commands.selectAll()},rn={...nn},sn={...nn,"Ctrl-h":en,"Alt-Backspace":en,"Ctrl-d":ze,"Ctrl-Alt-Backspace":ze,"Alt-Delete":ze,"Alt-d":ze,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?sn:rn},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(en,ze,tn)=>{if(!(en.some(gn=>gn.docChanged)&&!ze.doc.eq(tn.doc)))return;const{empty:rn,from:sn,to:an}=ze.selection,ln=Selection.atStart(ze.doc).from,cn=Selection.atEnd(ze.doc).to;if(rn||!(sn===ln&&an===cn)||!(tn.doc.textBetween(0,tn.doc.content.size," "," ").length===0))return;const fn=tn.tr,pn=createChainableState({state:tn,transaction:fn}),{commands:hn}=new CommandManager({editor:this.editor,state:pn});if(hn.clearNodes(),!!fn.steps.length)return fn}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var extensions=Object.freeze({__proto__:null,ClipboardTextSerializer,Commands,Editable,FocusEvents,Keymap,Tabindex});class NodePos{constructor(ze,tn,nn=!1,rn=null){this.currentNode=null,this.actualDepth=null,this.isBlock=nn,this.resolvedPos=ze,this.editor=tn,this.currentNode=rn}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var ze;return(ze=this.actualDepth)!==null&&ze!==void 0?ze:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(ze){let tn=this.from,nn=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}tn=this.from+1,nn=this.to-1}this.editor.commands.insertContentAt({from:tn,to:nn},ze)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const ze=this.resolvedPos.start(this.resolvedPos.depth-1),tn=this.resolvedPos.doc.resolve(ze);return new NodePos(tn,this.editor)}get before(){let ze=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return ze.depth!==this.depth&&(ze=this.resolvedPos.doc.resolve(this.from-3)),new NodePos(ze,this.editor)}get after(){let ze=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return ze.depth!==this.depth&&(ze=this.resolvedPos.doc.resolve(this.to+3)),new NodePos(ze,this.editor)}get children(){const ze=[];return this.node.content.forEach((tn,nn)=>{const rn=tn.isBlock&&!tn.isTextblock,sn=this.pos+nn+(rn?0:1),an=this.resolvedPos.doc.resolve(sn);if(!rn&&an.depth<=this.depth)return;const ln=new NodePos(an,this.editor,rn,rn?tn:null);rn&&(ln.actualDepth=this.depth+1),ze.push(new NodePos(an,this.editor,rn,rn?tn:null))}),ze}get firstChild(){return this.children[0]||null}get lastChild(){const ze=this.children;return ze[ze.length-1]||null}closest(ze,tn={}){let nn=null,rn=this.parent;for(;rn&&!nn;){if(rn.node.type.name===ze)if(Object.keys(tn).length>0){const sn=rn.node.attrs,an=Object.keys(tn);for(let ln=0;ln<an.length;ln+=1){const cn=an[ln];if(sn[cn]!==tn[cn])break}}else nn=rn;rn=rn.parent}return nn}querySelector(ze,tn={}){return this.querySelectorAll(ze,tn,!0)[0]||null}querySelectorAll(ze,tn={},nn=!1){let rn=[];return this.isBlock||!this.children||this.children.length===0||this.children.forEach(sn=>{if(sn.node.type.name===ze){if(Object.keys(tn).length>0){const an=sn.node.attrs,ln=Object.keys(tn);for(let cn=0;cn<ln.length;cn+=1){const un=ln[cn];if(an[un]!==tn[un])return}}if(rn.push(sn),nn)return}rn=rn.concat(sn.querySelectorAll(ze))}),rn}setAttribute(ze){const tn=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,ze).setTextSelection(tn.from).run()}}const style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function createStyleTag(en,ze,tn){const nn=document.querySelector(`style[data-tiptap-style${tn?`-${tn}`:""}]`);if(nn!==null)return nn;const rn=document.createElement("style");return ze&&rn.setAttribute("nonce",ze),rn.setAttribute(`data-tiptap-style${tn?`-${tn}`:""}`,""),rn.innerHTML=en,document.getElementsByTagName("head")[0].appendChild(rn),rn}class Editor extends EventEmitter{constructor(ze={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(ze),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(ze={}){this.options={...this.options,...ze},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(ze,tn=!0){this.setOptions({editable:ze}),tn&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(ze,tn){const nn=isFunction$2(tn)?tn(ze,[...this.state.plugins]):[...this.state.plugins,ze],rn=this.state.reconfigure({plugins:nn});this.view.updateState(rn)}unregisterPlugin(ze){if(this.isDestroyed)return;const tn=typeof ze=="string"?`${ze}$`:ze.key,nn=this.state.reconfigure({plugins:this.state.plugins.filter(rn=>!rn.key.startsWith(tn))});this.view.updateState(nn)}createExtensionManager(){const tn=[...this.options.enableCoreExtensions?Object.values(extensions):[],...this.options.extensions].filter(nn=>["extension","node","mark"].includes(nn==null?void 0:nn.type));this.extensionManager=new ExtensionManager(tn,this)}createCommandManager(){this.commandManager=new CommandManager({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const ze=createDocument(this.options.content,this.schema,this.options.parseOptions),tn=resolveFocusPosition(ze,this.options.autofocus);this.view=new EditorView(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:EditorState.create({doc:ze,selection:tn||void 0})});const nn=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(nn),this.createNodeViews(),this.prependClass();const rn=this.view.dom;rn.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(ze){this.isCapturingTransaction=!0,ze(),this.isCapturingTransaction=!1;const tn=this.capturedTransaction;return this.capturedTransaction=null,tn}dispatchTransaction(ze){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=ze;return}ze.steps.forEach(an=>{var ln;return(ln=this.capturedTransaction)===null||ln===void 0?void 0:ln.step(an)});return}const tn=this.state.apply(ze),nn=!this.state.selection.eq(tn.selection);this.view.updateState(tn),this.emit("transaction",{editor:this,transaction:ze}),nn&&this.emit("selectionUpdate",{editor:this,transaction:ze});const rn=ze.getMeta("focus"),sn=ze.getMeta("blur");rn&&this.emit("focus",{editor:this,event:rn.event,transaction:ze}),sn&&this.emit("blur",{editor:this,event:sn.event,transaction:ze}),!(!ze.docChanged||ze.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:ze})}getAttributes(ze){return getAttributes(this.state,ze)}isActive(ze,tn){const nn=typeof ze=="string"?ze:null,rn=typeof ze=="string"?tn:ze;return isActive(this.state,nn,rn)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(ze){const{blockSeparator:tn=`

`,textSerializers:nn={}}=ze||{};return getText(this.state.doc,{blockSeparator:tn,textSerializers:{...getTextSerializersFromSchema(this.schema),...nn}})}get isEmpty(){return isNodeEmpty(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var ze;return!(!((ze=this.view)===null||ze===void 0)&&ze.docView)}$node(ze,tn){var nn;return((nn=this.$doc)===null||nn===void 0?void 0:nn.querySelector(ze,tn))||null}$nodes(ze,tn){var nn;return((nn=this.$doc)===null||nn===void 0?void 0:nn.querySelectorAll(ze,tn))||null}$pos(ze){const tn=this.state.doc.resolve(ze);return new NodePos(tn,this)}get $doc(){return this.$pos(0)}}function markInputRule(en){return new InputRule({find:en.find,handler:({state:ze,range:tn,match:nn})=>{const rn=callOrReturn(en.getAttributes,void 0,nn);if(rn===!1||rn===null)return null;const{tr:sn}=ze,an=nn[nn.length-1],ln=nn[0];if(an){const cn=ln.search(/\S/),un=tn.from+ln.indexOf(an),dn=un+an.length;if(getMarksBetween(tn.from,tn.to,ze.doc).filter(hn=>hn.mark.type.excluded.find(En=>En===en.type&&En!==hn.mark.type)).filter(hn=>hn.to>un).length)return null;dn<tn.to&&sn.delete(dn,tn.to),un>tn.from&&sn.delete(tn.from+cn,un);const pn=tn.from+cn+an.length;sn.addMark(tn.from+cn,pn,en.type.create(rn||{})),sn.removeStoredMark(en.type)}}})}function nodeInputRule(en){return new InputRule({find:en.find,handler:({state:ze,range:tn,match:nn})=>{const rn=callOrReturn(en.getAttributes,void 0,nn)||{},{tr:sn}=ze,an=tn.from;let ln=tn.to;const cn=en.type.create(rn);if(nn[1]){const un=nn[0].lastIndexOf(nn[1]);let dn=an+un;dn>ln?dn=ln:ln=dn+nn[1].length;const fn=nn[0][nn[0].length-1];sn.insertText(fn,an+nn[0].length-1),sn.replaceWith(dn,ln,cn)}else nn[0]&&sn.insert(an-1,en.type.create(rn)).delete(sn.mapping.map(an),sn.mapping.map(ln));sn.scrollIntoView()}})}function textblockTypeInputRule(en){return new InputRule({find:en.find,handler:({state:ze,range:tn,match:nn})=>{const rn=ze.doc.resolve(tn.from),sn=callOrReturn(en.getAttributes,void 0,nn)||{};if(!rn.node(-1).canReplaceWith(rn.index(-1),rn.indexAfter(-1),en.type))return null;ze.tr.delete(tn.from,tn.to).setBlockType(tn.from,tn.from,en.type,sn)}})}function textInputRule(en){return new InputRule({find:en.find,handler:({state:ze,range:tn,match:nn})=>{let rn=en.replace,sn=tn.from;const an=tn.to;if(nn[1]){const ln=nn[0].lastIndexOf(nn[1]);rn+=nn[0].slice(ln+nn[1].length),sn+=ln;const cn=sn-an;cn>0&&(rn=nn[0].slice(ln-cn,ln)+rn,sn=an)}ze.tr.insertText(rn,sn,an)}})}function wrappingInputRule(en){return new InputRule({find:en.find,handler:({state:ze,range:tn,match:nn,chain:rn})=>{const sn=callOrReturn(en.getAttributes,void 0,nn)||{},an=ze.tr.delete(tn.from,tn.to),cn=an.doc.resolve(tn.from).blockRange(),un=cn&&findWrapping(cn,en.type,sn);if(!un)return null;if(an.wrap(cn,un),en.keepMarks&&en.editor){const{selection:fn,storedMarks:pn}=ze,{splittableMarks:hn}=en.editor.extensionManager,gn=pn||fn.$to.parentOffset&&fn.$from.marks();if(gn){const En=gn.filter(mn=>hn.includes(mn.type.name));an.ensureMarks(En)}}if(en.keepAttributes){const fn=en.type.name==="bulletList"||en.type.name==="orderedList"?"listItem":"taskList";rn().updateAttributes(fn,sn).run()}const dn=an.doc.resolve(tn.from-1).nodeBefore;dn&&dn.type===en.type&&canJoin(an.doc,tn.from-1)&&(!en.joinPredicate||en.joinPredicate(nn,dn))&&an.join(tn.from-1)}})}class Mark{constructor(ze={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...ze},this.name=this.config.name,ze.defaultOptions&&Object.keys(ze.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(ze={}){return new Mark(ze)}configure(ze={}){const tn=this.extend();return tn.options=mergeDeep(this.options,ze),tn.storage=callOrReturn(getExtensionField(tn,"addStorage",{name:tn.name,options:tn.options})),tn}extend(ze={}){const tn=new Mark({...this.config,...ze});return tn.parent=this,this.child=tn,tn.name=ze.name?ze.name:tn.parent.name,ze.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${tn.name}".`),tn.options=callOrReturn(getExtensionField(tn,"addOptions",{name:tn.name})),tn.storage=callOrReturn(getExtensionField(tn,"addStorage",{name:tn.name,options:tn.options})),tn}static handleExit({editor:ze,mark:tn}){const{tr:nn}=ze.state,rn=ze.state.selection.$from;if(rn.pos===rn.end()){const an=rn.marks();if(!!!an.find(un=>(un==null?void 0:un.type.name)===tn.name))return!1;const cn=an.find(un=>(un==null?void 0:un.type.name)===tn.name);return cn&&nn.removeStoredMark(cn),nn.insertText(" ",rn.pos),ze.view.dispatch(nn),!0}return!1}}let Node$1=class fi{constructor(ze={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...ze},this.name=this.config.name,ze.defaultOptions&&Object.keys(ze.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(ze={}){return new fi(ze)}configure(ze={}){const tn=this.extend();return tn.options=mergeDeep(this.options,ze),tn.storage=callOrReturn(getExtensionField(tn,"addStorage",{name:tn.name,options:tn.options})),tn}extend(ze={}){const tn=new fi({...this.config,...ze});return tn.parent=this,this.child=tn,tn.name=ze.name?ze.name:tn.parent.name,ze.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${tn.name}".`),tn.options=callOrReturn(getExtensionField(tn,"addOptions",{name:tn.name})),tn.storage=callOrReturn(getExtensionField(tn,"addStorage",{name:tn.name,options:tn.options})),tn}};function markPasteRule(en){return new PasteRule({find:en.find,handler:({state:ze,range:tn,match:nn,pasteEvent:rn})=>{const sn=callOrReturn(en.getAttributes,void 0,nn,rn);if(sn===!1||sn===null)return null;const{tr:an}=ze,ln=nn[nn.length-1],cn=nn[0];let un=tn.to;if(ln){const dn=cn.search(/\S/),fn=tn.from+cn.indexOf(ln),pn=fn+ln.length;if(getMarksBetween(tn.from,tn.to,ze.doc).filter(gn=>gn.mark.type.excluded.find(mn=>mn===en.type&&mn!==gn.mark.type)).filter(gn=>gn.to>fn).length)return null;pn<tn.to&&an.delete(pn,tn.to),fn>tn.from&&an.delete(tn.from+dn,fn),un=tn.from+dn+ln.length,an.addMark(tn.from+dn,un,en.type.create(sn||{})),an.removeStoredMark(en.type)}}})}const inputRegex$5=/^\s*>\s$/,Blockquote=Node$1.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:en}){return["blockquote",mergeAttributes(this.options.HTMLAttributes,en),0]},addCommands(){return{setBlockquote:()=>({commands:en})=>en.wrapIn(this.name),toggleBlockquote:()=>({commands:en})=>en.toggleWrap(this.name),unsetBlockquote:()=>({commands:en})=>en.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$5,type:this.type})]}}),starInputRegex$1=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,starPasteRegex$1=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,underscoreInputRegex$1=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,underscorePasteRegex$1=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:en=>en.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:en=>/^(bold(er)?|[5-9]\d{2,})$/.test(en)&&null}]},renderHTML({HTMLAttributes:en}){return["strong",mergeAttributes(this.options.HTMLAttributes,en),0]},addCommands(){return{setBold:()=>({commands:en})=>en.setMark(this.name),toggleBold:()=>({commands:en})=>en.toggleMark(this.name),unsetBold:()=>({commands:en})=>en.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),ListItem$2=Node$1.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:en}){return["li",mergeAttributes(this.options.HTMLAttributes,en),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),TextStyle$1=Mark.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:en=>en.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:en}){return["span",mergeAttributes(this.options.HTMLAttributes,en),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:en,commands:ze})=>{const tn=getMarkAttributes(en,this.type);return Object.entries(tn).some(([,rn])=>!!rn)?!0:ze.unsetMark(this.name)}}}}),inputRegex$4=/^\s*([-+*])\s$/,BulletList=Node$1.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:en}){return["ul",mergeAttributes(this.options.HTMLAttributes,en),0]},addCommands(){return{toggleBulletList:()=>({commands:en,chain:ze})=>this.options.keepAttributes?ze().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItem$2.name,this.editor.getAttributes(TextStyle$1.name)).run():en.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let en=wrappingInputRule({find:inputRegex$4,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(en=wrappingInputRule({find:inputRegex$4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyle$1.name),editor:this.editor})),[en]}}),inputRegex$3=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,pasteRegex$1=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:en}){return["code",mergeAttributes(this.options.HTMLAttributes,en),0]},addCommands(){return{setCode:()=>({commands:en})=>en.setMark(this.name),toggleCode:()=>({commands:en})=>en.toggleMark(this.name),unsetCode:()=>({commands:en})=>en.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$3,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node$1.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:en=>{var ze;const{languageClassPrefix:tn}=this.options,sn=[...((ze=en.firstElementChild)===null||ze===void 0?void 0:ze.classList)||[]].filter(an=>an.startsWith(tn)).map(an=>an.replace(tn,""))[0];return sn||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:en,HTMLAttributes:ze}){return["pre",mergeAttributes(this.options.HTMLAttributes,ze),["code",{class:en.attrs.language?this.options.languageClassPrefix+en.attrs.language:null},0]]},addCommands(){return{setCodeBlock:en=>({commands:ze})=>ze.setNode(this.name,en),toggleCodeBlock:en=>({commands:ze})=>ze.toggleNode(this.name,"paragraph",en)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:en,$anchor:ze}=this.editor.state.selection,tn=ze.pos===1;return!en||ze.parent.type.name!==this.name?!1:tn||!ze.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:en})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:ze}=en,{selection:tn}=ze,{$from:nn,empty:rn}=tn;if(!rn||nn.parent.type!==this.type)return!1;const sn=nn.parentOffset===nn.parent.nodeSize-2,an=nn.parent.textContent.endsWith(`

`);return!sn||!an?!1:en.chain().command(({tr:ln})=>(ln.delete(nn.pos-2,nn.pos),!0)).exitCode().run()},ArrowDown:({editor:en})=>{if(!this.options.exitOnArrowDown)return!1;const{state:ze}=en,{selection:tn,doc:nn}=ze,{$from:rn,empty:sn}=tn;if(!sn||rn.parent.type!==this.type||!(rn.parentOffset===rn.parent.nodeSize-2))return!1;const ln=rn.after();return ln===void 0||nn.nodeAt(ln)?!1:en.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:en=>({language:en[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:en=>({language:en[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(en,ze)=>{if(!ze.clipboardData||this.editor.isActive(this.type.name))return!1;const tn=ze.clipboardData.getData("text/plain"),nn=ze.clipboardData.getData("vscode-editor-data"),rn=nn?JSON.parse(nn):void 0,sn=rn==null?void 0:rn.mode;if(!tn||!sn)return!1;const{tr:an}=en.state;return an.replaceSelectionWith(this.type.create({language:sn})),an.setSelection(TextSelection.near(an.doc.resolve(Math.max(0,an.selection.from-2)))),an.insertText(tn.replace(/\r\n?/g,`
`)),an.setMeta("paste",!0),en.dispatch(an),!0}}})]}}),Document=Node$1.create({name:"doc",topNode:!0,content:"block+"});function dropCursor(en={}){return new Plugin({view(ze){return new DropCursorView(ze,en)}})}class DropCursorView{constructor(ze,tn){var nn;this.editorView=ze,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(nn=tn.width)!==null&&nn!==void 0?nn:1,this.color=tn.color===!1?void 0:tn.color||"black",this.class=tn.class,this.handlers=["dragover","dragend","drop","dragleave"].map(rn=>{let sn=an=>{this[rn](an)};return ze.dom.addEventListener(rn,sn),{name:rn,handler:sn}})}destroy(){this.handlers.forEach(({name:ze,handler:tn})=>this.editorView.dom.removeEventListener(ze,tn))}update(ze,tn){this.cursorPos!=null&&tn.doc!=ze.state.doc&&(this.cursorPos>ze.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(ze){ze!=this.cursorPos&&(this.cursorPos=ze,ze==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let ze=this.editorView.state.doc.resolve(this.cursorPos),tn=!ze.parent.inlineContent,nn;if(tn){let ln=ze.nodeBefore,cn=ze.nodeAfter;if(ln||cn){let un=this.editorView.nodeDOM(this.cursorPos-(ln?ln.nodeSize:0));if(un){let dn=un.getBoundingClientRect(),fn=ln?dn.bottom:dn.top;ln&&cn&&(fn=(fn+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),nn={left:dn.left,right:dn.right,top:fn-this.width/2,bottom:fn+this.width/2}}}}if(!nn){let ln=this.editorView.coordsAtPos(this.cursorPos);nn={left:ln.left-this.width/2,right:ln.left+this.width/2,top:ln.top,bottom:ln.bottom}}let rn=this.editorView.dom.offsetParent;this.element||(this.element=rn.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",tn),this.element.classList.toggle("prosemirror-dropcursor-inline",!tn);let sn,an;if(!rn||rn==document.body&&getComputedStyle(rn).position=="static")sn=-pageXOffset,an=-pageYOffset;else{let ln=rn.getBoundingClientRect();sn=ln.left-rn.scrollLeft,an=ln.top-rn.scrollTop}this.element.style.left=nn.left-sn+"px",this.element.style.top=nn.top-an+"px",this.element.style.width=nn.right-nn.left+"px",this.element.style.height=nn.bottom-nn.top+"px"}scheduleRemoval(ze){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),ze)}dragover(ze){if(!this.editorView.editable)return;let tn=this.editorView.posAtCoords({left:ze.clientX,top:ze.clientY}),nn=tn&&tn.inside>=0&&this.editorView.state.doc.nodeAt(tn.inside),rn=nn&&nn.type.spec.disableDropCursor,sn=typeof rn=="function"?rn(this.editorView,tn,ze):rn;if(tn&&!sn){let an=tn.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let ln=dropPoint(this.editorView.state.doc,an,this.editorView.dragging.slice);ln!=null&&(an=ln)}this.setCursor(an),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(ze){(ze.target==this.editorView.dom||!this.editorView.dom.contains(ze.relatedTarget))&&this.setCursor(null)}}const Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});class GapCursor extends Selection{constructor(ze){super(ze,ze)}map(ze,tn){let nn=ze.resolve(tn.map(this.head));return GapCursor.valid(nn)?new GapCursor(nn):Selection.near(nn)}content(){return Slice.empty}eq(ze){return ze instanceof GapCursor&&ze.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(ze,tn){if(typeof tn.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(ze.resolve(tn.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(ze){let tn=ze.parent;if(tn.isTextblock||!closedBefore(ze)||!closedAfter(ze))return!1;let nn=tn.type.spec.allowGapCursor;if(nn!=null)return nn;let rn=tn.contentMatchAt(ze.index()).defaultType;return rn&&rn.isTextblock}static findGapCursorFrom(ze,tn,nn=!1){e:for(;;){if(!nn&&GapCursor.valid(ze))return ze;let rn=ze.pos,sn=null;for(let an=ze.depth;;an--){let ln=ze.node(an);if(tn>0?ze.indexAfter(an)<ln.childCount:ze.index(an)>0){sn=ln.child(tn>0?ze.indexAfter(an):ze.index(an)-1);break}else if(an==0)return null;rn+=tn;let cn=ze.doc.resolve(rn);if(GapCursor.valid(cn))return cn}for(;;){let an=tn>0?sn.firstChild:sn.lastChild;if(!an){if(sn.isAtom&&!sn.isText&&!NodeSelection.isSelectable(sn)){ze=ze.doc.resolve(rn+sn.nodeSize*tn),nn=!1;continue e}break}sn=an,rn+=tn;let ln=ze.doc.resolve(rn);if(GapCursor.valid(ln))return ln}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(ze){this.pos=ze}map(ze){return new GapBookmark(ze.map(this.pos))}resolve(ze){let tn=ze.resolve(this.pos);return GapCursor.valid(tn)?new GapCursor(tn):Selection.near(tn)}}function closedBefore(en){for(let ze=en.depth;ze>=0;ze--){let tn=en.index(ze),nn=en.node(ze);if(tn==0){if(nn.type.spec.isolating)return!0;continue}for(let rn=nn.child(tn-1);;rn=rn.lastChild){if(rn.childCount==0&&!rn.inlineContent||rn.isAtom||rn.type.spec.isolating)return!0;if(rn.inlineContent)return!1}}return!0}function closedAfter(en){for(let ze=en.depth;ze>=0;ze--){let tn=en.indexAfter(ze),nn=en.node(ze);if(tn==nn.childCount){if(nn.type.spec.isolating)return!0;continue}for(let rn=nn.child(tn);;rn=rn.firstChild){if(rn.childCount==0&&!rn.inlineContent||rn.isAtom||rn.type.spec.isolating)return!0;if(rn.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(en,ze,tn){return ze.pos==tn.pos&&GapCursor.valid(tn)?new GapCursor(tn):null},handleClick,handleKeyDown,handleDOMEvents:{beforeinput}}})}const handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1)});function arrow(en,ze){const tn=en=="vert"?ze>0?"down":"up":ze>0?"right":"left";return function(nn,rn,sn){let an=nn.selection,ln=ze>0?an.$to:an.$from,cn=an.empty;if(an instanceof TextSelection){if(!sn.endOfTextblock(tn)||ln.depth==0)return!1;cn=!1,ln=nn.doc.resolve(ze>0?ln.after():ln.before())}let un=GapCursor.findGapCursorFrom(ln,ze,cn);return un?(rn&&rn(nn.tr.setSelection(new GapCursor(un))),!0):!1}}function handleClick(en,ze,tn){if(!en||!en.editable)return!1;let nn=en.state.doc.resolve(ze);if(!GapCursor.valid(nn))return!1;let rn=en.posAtCoords({left:tn.clientX,top:tn.clientY});return rn&&rn.inside>-1&&NodeSelection.isSelectable(en.state.doc.nodeAt(rn.inside))?!1:(en.dispatch(en.state.tr.setSelection(new GapCursor(nn))),!0)}function beforeinput(en,ze){if(ze.inputType!="insertCompositionText"||!(en.state.selection instanceof GapCursor))return!1;let{$from:tn}=en.state.selection,nn=tn.parent.contentMatchAt(tn.index()).findWrapping(en.state.schema.nodes.text);if(!nn)return!1;let rn=Fragment.empty;for(let an=nn.length-1;an>=0;an--)rn=Fragment.from(nn[an].createAndFill(null,rn));let sn=en.state.tr.replace(tn.pos,tn.pos,new Slice(rn,0,0));return sn.setSelection(TextSelection.near(sn.doc.resolve(tn.pos+1))),en.dispatch(sn),!1}function drawGapCursor(en){if(!(en.selection instanceof GapCursor))return null;let ze=document.createElement("div");return ze.className="ProseMirror-gapcursor",DecorationSet.create(en.doc,[Decoration.widget(en.selection.head,ze,{key:"gapcursor"})])}const Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(en){var ze;const tn={name:en.name,options:en.options,storage:en.storage};return{allowGapCursor:(ze=callOrReturn(getExtensionField(en,"allowGapCursor",tn)))!==null&&ze!==void 0?ze:null}}}),HardBreak=Node$1.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:en}){return["br",mergeAttributes(this.options.HTMLAttributes,en)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:en,chain:ze,state:tn,editor:nn})=>en.first([()=>en.exitCode(),()=>en.command(()=>{const{selection:rn,storedMarks:sn}=tn;if(rn.$from.parent.type.spec.isolating)return!1;const{keepMarks:an}=this.options,{splittableMarks:ln}=nn.extensionManager,cn=sn||rn.$to.parentOffset&&rn.$from.marks();return ze().insertContent({type:this.name}).command(({tr:un,dispatch:dn})=>{if(dn&&cn&&an){const fn=cn.filter(pn=>ln.includes(pn.type.name));un.ensureMarks(fn)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node$1.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(en=>({tag:`h${en}`,attrs:{level:en}}))},renderHTML({node:en,HTMLAttributes:ze}){return[`h${this.options.levels.includes(en.attrs.level)?en.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,ze),0]},addCommands(){return{setHeading:en=>({commands:ze})=>this.options.levels.includes(en.level)?ze.setNode(this.name,en):!1,toggleHeading:en=>({commands:ze})=>this.options.levels.includes(en.level)?ze.toggleNode(this.name,"paragraph",en):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((en,ze)=>({...en,[`Mod-Alt-${ze}`]:()=>this.editor.commands.toggleHeading({level:ze})}),{})},addInputRules(){return this.options.levels.map(en=>textblockTypeInputRule({find:new RegExp(`^(#{1,${en}})\\s$`),type:this.type,getAttributes:{level:en}}))}});var GOOD_LEAF_SIZE=200,RopeSequence=function en(){};RopeSequence.prototype.append=function en(ze){return ze.length?(ze=RopeSequence.from(ze),!this.length&&ze||ze.length<GOOD_LEAF_SIZE&&this.leafAppend(ze)||this.length<GOOD_LEAF_SIZE&&ze.leafPrepend(this)||this.appendInner(ze)):this};RopeSequence.prototype.prepend=function en(ze){return ze.length?RopeSequence.from(ze).append(this):this};RopeSequence.prototype.appendInner=function en(ze){return new Append(this,ze)};RopeSequence.prototype.slice=function en(ze,tn){return ze===void 0&&(ze=0),tn===void 0&&(tn=this.length),ze>=tn?RopeSequence.empty:this.sliceInner(Math.max(0,ze),Math.min(this.length,tn))};RopeSequence.prototype.get=function en(ze){if(!(ze<0||ze>=this.length))return this.getInner(ze)};RopeSequence.prototype.forEach=function en(ze,tn,nn){tn===void 0&&(tn=0),nn===void 0&&(nn=this.length),tn<=nn?this.forEachInner(ze,tn,nn,0):this.forEachInvertedInner(ze,tn,nn,0)};RopeSequence.prototype.map=function en(ze,tn,nn){tn===void 0&&(tn=0),nn===void 0&&(nn=this.length);var rn=[];return this.forEach(function(sn,an){return rn.push(ze(sn,an))},tn,nn),rn};RopeSequence.from=function en(ze){return ze instanceof RopeSequence?ze:ze&&ze.length?new Leaf(ze):RopeSequence.empty};var Leaf=function(en){function ze(nn){en.call(this),this.values=nn}en&&(ze.__proto__=en),ze.prototype=Object.create(en&&en.prototype),ze.prototype.constructor=ze;var tn={length:{configurable:!0},depth:{configurable:!0}};return ze.prototype.flatten=function(){return this.values},ze.prototype.sliceInner=function(rn,sn){return rn==0&&sn==this.length?this:new ze(this.values.slice(rn,sn))},ze.prototype.getInner=function(rn){return this.values[rn]},ze.prototype.forEachInner=function(rn,sn,an,ln){for(var cn=sn;cn<an;cn++)if(rn(this.values[cn],ln+cn)===!1)return!1},ze.prototype.forEachInvertedInner=function(rn,sn,an,ln){for(var cn=sn-1;cn>=an;cn--)if(rn(this.values[cn],ln+cn)===!1)return!1},ze.prototype.leafAppend=function(rn){if(this.length+rn.length<=GOOD_LEAF_SIZE)return new ze(this.values.concat(rn.flatten()))},ze.prototype.leafPrepend=function(rn){if(this.length+rn.length<=GOOD_LEAF_SIZE)return new ze(rn.flatten().concat(this.values))},tn.length.get=function(){return this.values.length},tn.depth.get=function(){return 0},Object.defineProperties(ze.prototype,tn),ze}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(en){function ze(tn,nn){en.call(this),this.left=tn,this.right=nn,this.length=tn.length+nn.length,this.depth=Math.max(tn.depth,nn.depth)+1}return en&&(ze.__proto__=en),ze.prototype=Object.create(en&&en.prototype),ze.prototype.constructor=ze,ze.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},ze.prototype.getInner=function(nn){return nn<this.left.length?this.left.get(nn):this.right.get(nn-this.left.length)},ze.prototype.forEachInner=function(nn,rn,sn,an){var ln=this.left.length;if(rn<ln&&this.left.forEachInner(nn,rn,Math.min(sn,ln),an)===!1||sn>ln&&this.right.forEachInner(nn,Math.max(rn-ln,0),Math.min(this.length,sn)-ln,an+ln)===!1)return!1},ze.prototype.forEachInvertedInner=function(nn,rn,sn,an){var ln=this.left.length;if(rn>ln&&this.right.forEachInvertedInner(nn,rn-ln,Math.max(sn,ln)-ln,an+ln)===!1||sn<ln&&this.left.forEachInvertedInner(nn,Math.min(rn,ln),sn,an)===!1)return!1},ze.prototype.sliceInner=function(nn,rn){if(nn==0&&rn==this.length)return this;var sn=this.left.length;return rn<=sn?this.left.slice(nn,rn):nn>=sn?this.right.slice(nn-sn,rn-sn):this.left.slice(nn,sn).append(this.right.slice(0,rn-sn))},ze.prototype.leafAppend=function(nn){var rn=this.right.leafAppend(nn);if(rn)return new ze(this.left,rn)},ze.prototype.leafPrepend=function(nn){var rn=this.left.leafPrepend(nn);if(rn)return new ze(rn,this.right)},ze.prototype.appendInner=function(nn){return this.left.depth>=Math.max(this.right.depth,nn.depth)+1?new ze(this.left,new ze(this.right,nn)):new ze(this,nn)},ze}(RopeSequence);const max_empty_items=500;class Branch{constructor(ze,tn){this.items=ze,this.eventCount=tn}popEvent(ze,tn){if(this.eventCount==0)return null;let nn=this.items.length;for(;;nn--)if(this.items.get(nn-1).selection){--nn;break}let rn,sn;tn&&(rn=this.remapping(nn,this.items.length),sn=rn.maps.length);let an=ze.tr,ln,cn,un=[],dn=[];return this.items.forEach((fn,pn)=>{if(!fn.step){rn||(rn=this.remapping(nn,pn+1),sn=rn.maps.length),sn--,dn.push(fn);return}if(rn){dn.push(new Item(fn.map));let hn=fn.step.map(rn.slice(sn)),gn;hn&&an.maybeStep(hn).doc&&(gn=an.mapping.maps[an.mapping.maps.length-1],un.push(new Item(gn,void 0,void 0,un.length+dn.length))),sn--,gn&&rn.appendMap(gn,sn)}else an.maybeStep(fn.step);if(fn.selection)return ln=rn?fn.selection.map(rn.slice(sn)):fn.selection,cn=new Branch(this.items.slice(0,nn).append(dn.reverse().concat(un)),this.eventCount-1),!1},this.items.length,0),{remaining:cn,transform:an,selection:ln}}addTransform(ze,tn,nn,rn){let sn=[],an=this.eventCount,ln=this.items,cn=!rn&&ln.length?ln.get(ln.length-1):null;for(let dn=0;dn<ze.steps.length;dn++){let fn=ze.steps[dn].invert(ze.docs[dn]),pn=new Item(ze.mapping.maps[dn],fn,tn),hn;(hn=cn&&cn.merge(pn))&&(pn=hn,dn?sn.pop():ln=ln.slice(0,ln.length-1)),sn.push(pn),tn&&(an++,tn=void 0),rn||(cn=pn)}let un=an-nn.depth;return un>DEPTH_OVERFLOW&&(ln=cutOffEvents(ln,un),an-=un),new Branch(ln.append(sn),an)}remapping(ze,tn){let nn=new Mapping;return this.items.forEach((rn,sn)=>{let an=rn.mirrorOffset!=null&&sn-rn.mirrorOffset>=ze?nn.maps.length-rn.mirrorOffset:void 0;nn.appendMap(rn.map,an)},ze,tn),nn}addMaps(ze){return this.eventCount==0?this:new Branch(this.items.append(ze.map(tn=>new Item(tn))),this.eventCount)}rebased(ze,tn){if(!this.eventCount)return this;let nn=[],rn=Math.max(0,this.items.length-tn),sn=ze.mapping,an=ze.steps.length,ln=this.eventCount;this.items.forEach(pn=>{pn.selection&&ln--},rn);let cn=tn;this.items.forEach(pn=>{let hn=sn.getMirror(--cn);if(hn==null)return;an=Math.min(an,hn);let gn=sn.maps[hn];if(pn.step){let En=ze.steps[hn].invert(ze.docs[hn]),mn=pn.selection&&pn.selection.map(sn.slice(cn+1,hn));mn&&ln++,nn.push(new Item(gn,En,mn))}else nn.push(new Item(gn))},rn);let un=[];for(let pn=tn;pn<an;pn++)un.push(new Item(sn.maps[pn]));let dn=this.items.slice(0,rn).append(un).append(nn),fn=new Branch(dn,ln);return fn.emptyItemCount()>max_empty_items&&(fn=fn.compress(this.items.length-nn.length)),fn}emptyItemCount(){let ze=0;return this.items.forEach(tn=>{tn.step||ze++}),ze}compress(ze=this.items.length){let tn=this.remapping(0,ze),nn=tn.maps.length,rn=[],sn=0;return this.items.forEach((an,ln)=>{if(ln>=ze)rn.push(an),an.selection&&sn++;else if(an.step){let cn=an.step.map(tn.slice(nn)),un=cn&&cn.getMap();if(nn--,un&&tn.appendMap(un,nn),cn){let dn=an.selection&&an.selection.map(tn.slice(nn));dn&&sn++;let fn=new Item(un.invert(),cn,dn),pn,hn=rn.length-1;(pn=rn.length&&rn[hn].merge(fn))?rn[hn]=pn:rn.push(fn)}}else an.map&&nn--},this.items.length,0),new Branch(RopeSequence.from(rn.reverse()),sn)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(en,ze){let tn;return en.forEach((nn,rn)=>{if(nn.selection&&ze--==0)return tn=rn,!1}),en.slice(tn)}class Item{constructor(ze,tn,nn,rn){this.map=ze,this.step=tn,this.selection=nn,this.mirrorOffset=rn}merge(ze){if(this.step&&ze.step&&!ze.selection){let tn=ze.step.merge(this.step);if(tn)return new Item(tn.getMap().invert(),tn,this.selection)}}}class HistoryState{constructor(ze,tn,nn,rn,sn){this.done=ze,this.undone=tn,this.prevRanges=nn,this.prevTime=rn,this.prevComposition=sn}}const DEPTH_OVERFLOW=20;function applyTransaction(en,ze,tn,nn){let rn=tn.getMeta(historyKey),sn;if(rn)return rn.historyState;tn.getMeta(closeHistoryKey)&&(en=new HistoryState(en.done,en.undone,null,0,-1));let an=tn.getMeta("appendedTransaction");if(tn.steps.length==0)return en;if(an&&an.getMeta(historyKey))return an.getMeta(historyKey).redo?new HistoryState(en.done.addTransform(tn,void 0,nn,mustPreserveItems(ze)),en.undone,rangesFor(tn.mapping.maps[tn.steps.length-1]),en.prevTime,en.prevComposition):new HistoryState(en.done,en.undone.addTransform(tn,void 0,nn,mustPreserveItems(ze)),null,en.prevTime,en.prevComposition);if(tn.getMeta("addToHistory")!==!1&&!(an&&an.getMeta("addToHistory")===!1)){let ln=tn.getMeta("composition"),cn=en.prevTime==0||!an&&en.prevComposition!=ln&&(en.prevTime<(tn.time||0)-nn.newGroupDelay||!isAdjacentTo(tn,en.prevRanges)),un=an?mapRanges(en.prevRanges,tn.mapping):rangesFor(tn.mapping.maps[tn.steps.length-1]);return new HistoryState(en.done.addTransform(tn,cn?ze.selection.getBookmark():void 0,nn,mustPreserveItems(ze)),Branch.empty,un,tn.time,ln??en.prevComposition)}else return(sn=tn.getMeta("rebased"))?new HistoryState(en.done.rebased(tn,sn),en.undone.rebased(tn,sn),mapRanges(en.prevRanges,tn.mapping),en.prevTime,en.prevComposition):new HistoryState(en.done.addMaps(tn.mapping.maps),en.undone.addMaps(tn.mapping.maps),mapRanges(en.prevRanges,tn.mapping),en.prevTime,en.prevComposition)}function isAdjacentTo(en,ze){if(!ze)return!1;if(!en.docChanged)return!0;let tn=!1;return en.mapping.maps[0].forEach((nn,rn)=>{for(let sn=0;sn<ze.length;sn+=2)nn<=ze[sn+1]&&rn>=ze[sn]&&(tn=!0)}),tn}function rangesFor(en){let ze=[];return en.forEach((tn,nn,rn,sn)=>ze.push(rn,sn)),ze}function mapRanges(en,ze){if(!en)return null;let tn=[];for(let nn=0;nn<en.length;nn+=2){let rn=ze.map(en[nn],1),sn=ze.map(en[nn+1],-1);rn<=sn&&tn.push(rn,sn)}return tn}function histTransaction(en,ze,tn){let nn=mustPreserveItems(ze),rn=historyKey.get(ze).spec.config,sn=(tn?en.undone:en.done).popEvent(ze,nn);if(!sn)return null;let an=sn.selection.resolve(sn.transform.doc),ln=(tn?en.done:en.undone).addTransform(sn.transform,ze.selection.getBookmark(),rn,nn),cn=new HistoryState(tn?ln:sn.remaining,tn?sn.remaining:ln,null,0,-1);return sn.transform.setSelection(an).setMeta(historyKey,{redo:tn,historyState:cn})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(en){let ze=en.plugins;if(cachedPreserveItemsPlugins!=ze){cachedPreserveItems=!1,cachedPreserveItemsPlugins=ze;for(let tn=0;tn<ze.length;tn++)if(ze[tn].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history$1(en={}){return en={depth:en.depth||100,newGroupDelay:en.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(ze,tn,nn){return applyTransaction(tn,nn,ze,en)}},config:en,props:{handleDOMEvents:{beforeinput(ze,tn){let nn=tn.inputType,rn=nn=="historyUndo"?undo:nn=="historyRedo"?redo:null;return rn?(tn.preventDefault(),rn(ze.state,ze.dispatch)):!1}}}})}function buildCommand(en,ze){return(tn,nn)=>{let rn=historyKey.getState(tn);if(!rn||(en?rn.undone:rn.done).eventCount==0)return!1;if(nn){let sn=histTransaction(rn,tn,en);sn&&nn(ze?sn.scrollIntoView():sn)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0),History=Extension.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:en,dispatch:ze})=>undo(en,ze),redo:()=>({state:en,dispatch:ze})=>redo(en,ze)}},addProseMirrorPlugins(){return[history$1(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),HorizontalRule=Node$1.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:en}){return["hr",mergeAttributes(this.options.HTMLAttributes,en)]},addCommands(){return{setHorizontalRule:()=>({chain:en,state:ze})=>{const{$to:tn}=ze.selection,nn=en();return tn.parentOffset===0?nn.insertContentAt(Math.max(tn.pos-2,0),{type:this.name}):nn.insertContent({type:this.name}),nn.command(({tr:rn,dispatch:sn})=>{var an;if(sn){const{$to:ln}=rn.selection,cn=ln.end();if(ln.nodeAfter)ln.nodeAfter.isTextblock?rn.setSelection(TextSelection.create(rn.doc,ln.pos+1)):ln.nodeAfter.isBlock?rn.setSelection(NodeSelection.create(rn.doc,ln.pos)):rn.setSelection(TextSelection.create(rn.doc,ln.pos));else{const un=(an=ln.parent.type.contentMatch.defaultType)===null||an===void 0?void 0:an.create();un&&(rn.insert(cn,un),rn.setSelection(TextSelection.create(rn.doc,cn+1)))}rn.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),starInputRegex=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,starPasteRegex=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,underscoreInputRegex=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,underscorePasteRegex=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:en=>en.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:en}){return["em",mergeAttributes(this.options.HTMLAttributes,en),0]},addCommands(){return{setItalic:()=>({commands:en})=>en.setMark(this.name),toggleItalic:()=>({commands:en})=>en.toggleMark(this.name),unsetItalic:()=>({commands:en})=>en.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}}),ListItem$1=Node$1.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:en}){return["li",mergeAttributes(this.options.HTMLAttributes,en),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ListItem=Node$1.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:en}){return["li",mergeAttributes(this.options.HTMLAttributes,en),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),TextStyle=Mark.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:en=>en.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:en}){return["span",mergeAttributes(this.options.HTMLAttributes,en),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:en,commands:ze})=>{const tn=getMarkAttributes(en,this.type);return Object.entries(tn).some(([,rn])=>!!rn)?!0:ze.unsetMark(this.name)}}}}),inputRegex$2=/^(\d+)\.\s$/,OrderedList=Node$1.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:en=>en.hasAttribute("start")?parseInt(en.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:en}){const{start:ze,...tn}=en;return ze===1?["ol",mergeAttributes(this.options.HTMLAttributes,tn),0]:["ol",mergeAttributes(this.options.HTMLAttributes,en),0]},addCommands(){return{toggleOrderedList:()=>({commands:en,chain:ze})=>this.options.keepAttributes?ze().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItem.name,this.editor.getAttributes(TextStyle.name)).run():en.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let en=wrappingInputRule({find:inputRegex$2,type:this.type,getAttributes:ze=>({start:+ze[1]}),joinPredicate:(ze,tn)=>tn.childCount+tn.attrs.start===+ze[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(en=wrappingInputRule({find:inputRegex$2,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:ze=>({start:+ze[1],...this.editor.getAttributes(TextStyle.name)}),joinPredicate:(ze,tn)=>tn.childCount+tn.attrs.start===+ze[1],editor:this.editor})),[en]}}),Paragraph=Node$1.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:en}){return["p",mergeAttributes(this.options.HTMLAttributes,en),0]},addCommands(){return{setParagraph:()=>({commands:en})=>en.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex$1=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,pasteRegex=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:en=>en.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:en}){return["s",mergeAttributes(this.options.HTMLAttributes,en),0]},addCommands(){return{setStrike:()=>({commands:en})=>en.setMark(this.name),toggleStrike:()=>({commands:en})=>en.toggleMark(this.name),unsetStrike:()=>({commands:en})=>en.unsetMark(this.name)}},addKeyboardShortcuts(){const en={};return isMacOS()?en["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():en["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),en},addInputRules(){return[markInputRule({find:inputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),Text$1=Node$1.create({name:"text",group:"inline"}),StarterKit=Extension.create({name:"starterKit",addExtensions(){var en,ze,tn,nn,rn,sn,an,ln,cn,un,dn,fn,pn,hn,gn,En,mn,bn;const Tn=[];return this.options.blockquote!==!1&&Tn.push(Blockquote.configure((en=this.options)===null||en===void 0?void 0:en.blockquote)),this.options.bold!==!1&&Tn.push(Bold.configure((ze=this.options)===null||ze===void 0?void 0:ze.bold)),this.options.bulletList!==!1&&Tn.push(BulletList.configure((tn=this.options)===null||tn===void 0?void 0:tn.bulletList)),this.options.code!==!1&&Tn.push(Code.configure((nn=this.options)===null||nn===void 0?void 0:nn.code)),this.options.codeBlock!==!1&&Tn.push(CodeBlock.configure((rn=this.options)===null||rn===void 0?void 0:rn.codeBlock)),this.options.document!==!1&&Tn.push(Document.configure((sn=this.options)===null||sn===void 0?void 0:sn.document)),this.options.dropcursor!==!1&&Tn.push(Dropcursor.configure((an=this.options)===null||an===void 0?void 0:an.dropcursor)),this.options.gapcursor!==!1&&Tn.push(Gapcursor.configure((ln=this.options)===null||ln===void 0?void 0:ln.gapcursor)),this.options.hardBreak!==!1&&Tn.push(HardBreak.configure((cn=this.options)===null||cn===void 0?void 0:cn.hardBreak)),this.options.heading!==!1&&Tn.push(Heading.configure((un=this.options)===null||un===void 0?void 0:un.heading)),this.options.history!==!1&&Tn.push(History.configure((dn=this.options)===null||dn===void 0?void 0:dn.history)),this.options.horizontalRule!==!1&&Tn.push(HorizontalRule.configure((fn=this.options)===null||fn===void 0?void 0:fn.horizontalRule)),this.options.italic!==!1&&Tn.push(Italic.configure((pn=this.options)===null||pn===void 0?void 0:pn.italic)),this.options.listItem!==!1&&Tn.push(ListItem$1.configure((hn=this.options)===null||hn===void 0?void 0:hn.listItem)),this.options.orderedList!==!1&&Tn.push(OrderedList.configure((gn=this.options)===null||gn===void 0?void 0:gn.orderedList)),this.options.paragraph!==!1&&Tn.push(Paragraph.configure((En=this.options)===null||En===void 0?void 0:En.paragraph)),this.options.strike!==!1&&Tn.push(Strike.configure((mn=this.options)===null||mn===void 0?void 0:mn.strike)),this.options.text!==!1&&Tn.push(Text$1.configure((bn=this.options)===null||bn===void 0?void 0:bn.text)),Tn}}),emDash=en=>textInputRule({find:/--$/,replace:en??""}),ellipsis=en=>textInputRule({find:/\.\.\.$/,replace:en??""}),openDoubleQuote=en=>textInputRule({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:en??""}),closeDoubleQuote=en=>textInputRule({find:/"$/,replace:en??""}),openSingleQuote=en=>textInputRule({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:en??""}),closeSingleQuote=en=>textInputRule({find:/'$/,replace:en??""}),leftArrow=en=>textInputRule({find:/<-$/,replace:en??""}),rightArrow=en=>textInputRule({find:/->$/,replace:en??""}),copyright=en=>textInputRule({find:/\(c\)$/,replace:en??""}),trademark=en=>textInputRule({find:/\(tm\)$/,replace:en??""}),servicemark=en=>textInputRule({find:/\(sm\)$/,replace:en??""}),registeredTrademark=en=>textInputRule({find:/\(r\)$/,replace:en??""}),oneHalf=en=>textInputRule({find:/(?:^|\s)(1\/2)\s$/,replace:en??""}),plusMinus=en=>textInputRule({find:/\+\/-$/,replace:en??""}),notEqual=en=>textInputRule({find:/!=$/,replace:en??""}),laquo=en=>textInputRule({find:/<<$/,replace:en??""}),raquo=en=>textInputRule({find:/>>$/,replace:en??""}),multiplication=en=>textInputRule({find:/\d+\s?([*x])\s?\d+$/,replace:en??""}),superscriptTwo=en=>textInputRule({find:/\^2$/,replace:en??""}),superscriptThree=en=>textInputRule({find:/\^3$/,replace:en??""}),oneQuarter=en=>textInputRule({find:/(?:^|\s)(1\/4)\s$/,replace:en??""}),threeQuarters=en=>textInputRule({find:/(?:^|\s)(3\/4)\s$/,replace:en??""}),Typography=Extension.create({name:"typography",addInputRules(){const en=[];return this.options.emDash!==!1&&en.push(emDash(this.options.emDash)),this.options.ellipsis!==!1&&en.push(ellipsis(this.options.ellipsis)),this.options.openDoubleQuote!==!1&&en.push(openDoubleQuote(this.options.openDoubleQuote)),this.options.closeDoubleQuote!==!1&&en.push(closeDoubleQuote(this.options.closeDoubleQuote)),this.options.openSingleQuote!==!1&&en.push(openSingleQuote(this.options.openSingleQuote)),this.options.closeSingleQuote!==!1&&en.push(closeSingleQuote(this.options.closeSingleQuote)),this.options.leftArrow!==!1&&en.push(leftArrow(this.options.leftArrow)),this.options.rightArrow!==!1&&en.push(rightArrow(this.options.rightArrow)),this.options.copyright!==!1&&en.push(copyright(this.options.copyright)),this.options.trademark!==!1&&en.push(trademark(this.options.trademark)),this.options.servicemark!==!1&&en.push(servicemark(this.options.servicemark)),this.options.registeredTrademark!==!1&&en.push(registeredTrademark(this.options.registeredTrademark)),this.options.oneHalf!==!1&&en.push(oneHalf(this.options.oneHalf)),this.options.plusMinus!==!1&&en.push(plusMinus(this.options.plusMinus)),this.options.notEqual!==!1&&en.push(notEqual(this.options.notEqual)),this.options.laquo!==!1&&en.push(laquo(this.options.laquo)),this.options.raquo!==!1&&en.push(raquo(this.options.raquo)),this.options.multiplication!==!1&&en.push(multiplication(this.options.multiplication)),this.options.superscriptTwo!==!1&&en.push(superscriptTwo(this.options.superscriptTwo)),this.options.superscriptThree!==!1&&en.push(superscriptThree(this.options.superscriptThree)),this.options.oneQuarter!==!1&&en.push(oneQuarter(this.options.oneQuarter)),this.options.threeQuarters!==!1&&en.push(threeQuarters(this.options.threeQuarters)),en}}),encodedTlds="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",encodedUtlds="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",assign=(en,ze)=>{for(const tn in ze)en[tn]=ze[tn];return en},numeric="numeric",ascii="ascii",alpha="alpha",asciinumeric="asciinumeric",alphanumeric="alphanumeric",domain="domain",emoji="emoji",scheme="scheme",slashscheme="slashscheme",whitespace="whitespace";function registerGroup(en,ze){return en in ze||(ze[en]=[]),ze[en]}function addToGroups(en,ze,tn){ze[numeric]&&(ze[asciinumeric]=!0,ze[alphanumeric]=!0),ze[ascii]&&(ze[asciinumeric]=!0,ze[alpha]=!0),ze[asciinumeric]&&(ze[alphanumeric]=!0),ze[alpha]&&(ze[alphanumeric]=!0),ze[alphanumeric]&&(ze[domain]=!0),ze[emoji]&&(ze[domain]=!0);for(const nn in ze){const rn=registerGroup(nn,tn);rn.indexOf(en)<0&&rn.push(en)}}function flagsForToken(en,ze){const tn={};for(const nn in ze)ze[nn].indexOf(en)>=0&&(tn[nn]=!0);return tn}function State(en){en===void 0&&(en=null),this.j={},this.jr=[],this.jd=null,this.t=en}State.groups={};State.prototype={accepts(){return!!this.t},go(en){const ze=this,tn=ze.j[en];if(tn)return tn;for(let nn=0;nn<ze.jr.length;nn++){const rn=ze.jr[nn][0],sn=ze.jr[nn][1];if(sn&&rn.test(en))return sn}return ze.jd},has(en,ze){return ze===void 0&&(ze=!1),ze?en in this.j:!!this.go(en)},ta(en,ze,tn,nn){for(let rn=0;rn<en.length;rn++)this.tt(en[rn],ze,tn,nn)},tr(en,ze,tn,nn){nn=nn||State.groups;let rn;return ze&&ze.j?rn=ze:(rn=new State(ze),tn&&nn&&addToGroups(ze,tn,nn)),this.jr.push([en,rn]),rn},ts(en,ze,tn,nn){let rn=this;const sn=en.length;if(!sn)return rn;for(let an=0;an<sn-1;an++)rn=rn.tt(en[an]);return rn.tt(en[sn-1],ze,tn,nn)},tt(en,ze,tn,nn){nn=nn||State.groups;const rn=this;if(ze&&ze.j)return rn.j[en]=ze,ze;const sn=ze;let an,ln=rn.go(en);if(ln?(an=new State,assign(an.j,ln.j),an.jr.push.apply(an.jr,ln.jr),an.jd=ln.jd,an.t=ln.t):an=new State,sn){if(nn)if(an.t&&typeof an.t=="string"){const cn=assign(flagsForToken(an.t,nn),tn);addToGroups(sn,cn,nn)}else tn&&addToGroups(sn,tn,nn);an.t=sn}return rn.j[en]=an,an}};const ta=(en,ze,tn,nn,rn)=>en.ta(ze,tn,nn,rn),tr=(en,ze,tn,nn,rn)=>en.tr(ze,tn,nn,rn),ts=(en,ze,tn,nn,rn)=>en.ts(ze,tn,nn,rn),tt=(en,ze,tn,nn,rn)=>en.tt(ze,tn,nn,rn),WORD="WORD",UWORD="UWORD",LOCALHOST="LOCALHOST",TLD="TLD",UTLD="UTLD",SCHEME="SCHEME",SLASH_SCHEME="SLASH_SCHEME",NUM="NUM",WS="WS",NL$1="NL",OPENBRACE="OPENBRACE",CLOSEBRACE="CLOSEBRACE",OPENBRACKET="OPENBRACKET",CLOSEBRACKET="CLOSEBRACKET",OPENPAREN="OPENPAREN",CLOSEPAREN="CLOSEPAREN",OPENANGLEBRACKET="OPENANGLEBRACKET",CLOSEANGLEBRACKET="CLOSEANGLEBRACKET",FULLWIDTHLEFTPAREN="FULLWIDTHLEFTPAREN",FULLWIDTHRIGHTPAREN="FULLWIDTHRIGHTPAREN",LEFTCORNERBRACKET="LEFTCORNERBRACKET",RIGHTCORNERBRACKET="RIGHTCORNERBRACKET",LEFTWHITECORNERBRACKET="LEFTWHITECORNERBRACKET",RIGHTWHITECORNERBRACKET="RIGHTWHITECORNERBRACKET",FULLWIDTHLESSTHAN="FULLWIDTHLESSTHAN",FULLWIDTHGREATERTHAN="FULLWIDTHGREATERTHAN",AMPERSAND="AMPERSAND",APOSTROPHE="APOSTROPHE",ASTERISK="ASTERISK",AT="AT",BACKSLASH="BACKSLASH",BACKTICK="BACKTICK",CARET="CARET",COLON="COLON",COMMA="COMMA",DOLLAR="DOLLAR",DOT="DOT",EQUALS="EQUALS",EXCLAMATION="EXCLAMATION",HYPHEN="HYPHEN",PERCENT="PERCENT",PIPE="PIPE",PLUS="PLUS",POUND="POUND",QUERY="QUERY",QUOTE="QUOTE",SEMI="SEMI",SLASH="SLASH",TILDE="TILDE",UNDERSCORE="UNDERSCORE",EMOJI$1="EMOJI",SYM="SYM";var tk=Object.freeze({__proto__:null,WORD,UWORD,LOCALHOST,TLD,UTLD,SCHEME,SLASH_SCHEME,NUM,WS,NL:NL$1,OPENBRACE,CLOSEBRACE,OPENBRACKET,CLOSEBRACKET,OPENPAREN,CLOSEPAREN,OPENANGLEBRACKET,CLOSEANGLEBRACKET,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN,AMPERSAND,APOSTROPHE,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,COLON,COMMA,DOLLAR,DOT,EQUALS,EXCLAMATION,HYPHEN,PERCENT,PIPE,PLUS,POUND,QUERY,QUOTE,SEMI,SLASH,TILDE,UNDERSCORE,EMOJI:EMOJI$1,SYM});const ASCII_LETTER=/[a-z]/,LETTER=new RegExp("\\p{L}","u"),EMOJI=new RegExp("\\p{Emoji}","u"),DIGIT=/\d/,SPACE=/\s/,NL=`
`,EMOJI_VARIATION="",EMOJI_JOINER="";let tlds=null,utlds=null;function init$2(en){en===void 0&&(en=[]);const ze={};State.groups=ze;const tn=new State;tlds==null&&(tlds=decodeTlds(encodedTlds)),utlds==null&&(utlds=decodeTlds(encodedUtlds)),tt(tn,"'",APOSTROPHE),tt(tn,"{",OPENBRACE),tt(tn,"}",CLOSEBRACE),tt(tn,"[",OPENBRACKET),tt(tn,"]",CLOSEBRACKET),tt(tn,"(",OPENPAREN),tt(tn,")",CLOSEPAREN),tt(tn,"<",OPENANGLEBRACKET),tt(tn,">",CLOSEANGLEBRACKET),tt(tn,"",FULLWIDTHLEFTPAREN),tt(tn,"",FULLWIDTHRIGHTPAREN),tt(tn,"",LEFTCORNERBRACKET),tt(tn,"",RIGHTCORNERBRACKET),tt(tn,"",LEFTWHITECORNERBRACKET),tt(tn,"",RIGHTWHITECORNERBRACKET),tt(tn,"",FULLWIDTHLESSTHAN),tt(tn,"",FULLWIDTHGREATERTHAN),tt(tn,"&",AMPERSAND),tt(tn,"*",ASTERISK),tt(tn,"@",AT),tt(tn,"`",BACKTICK),tt(tn,"^",CARET),tt(tn,":",COLON),tt(tn,",",COMMA),tt(tn,"$",DOLLAR),tt(tn,".",DOT),tt(tn,"=",EQUALS),tt(tn,"!",EXCLAMATION),tt(tn,"-",HYPHEN),tt(tn,"%",PERCENT),tt(tn,"|",PIPE),tt(tn,"+",PLUS),tt(tn,"#",POUND),tt(tn,"?",QUERY),tt(tn,'"',QUOTE),tt(tn,"/",SLASH),tt(tn,";",SEMI),tt(tn,"~",TILDE),tt(tn,"_",UNDERSCORE),tt(tn,"\\",BACKSLASH);const nn=tr(tn,DIGIT,NUM,{[numeric]:!0});tr(nn,DIGIT,nn);const rn=tr(tn,ASCII_LETTER,WORD,{[ascii]:!0});tr(rn,ASCII_LETTER,rn);const sn=tr(tn,LETTER,UWORD,{[alpha]:!0});tr(sn,ASCII_LETTER),tr(sn,LETTER,sn);const an=tr(tn,SPACE,WS,{[whitespace]:!0});tt(tn,NL,NL$1,{[whitespace]:!0}),tt(an,NL),tr(an,SPACE,an);const ln=tr(tn,EMOJI,EMOJI$1,{[emoji]:!0});tr(ln,EMOJI,ln),tt(ln,EMOJI_VARIATION,ln);const cn=tt(ln,EMOJI_JOINER);tr(cn,EMOJI,ln);const un=[[ASCII_LETTER,rn]],dn=[[ASCII_LETTER,null],[LETTER,sn]];for(let fn=0;fn<tlds.length;fn++)fastts(tn,tlds[fn],TLD,WORD,un);for(let fn=0;fn<utlds.length;fn++)fastts(tn,utlds[fn],UTLD,UWORD,dn);addToGroups(TLD,{tld:!0,ascii:!0},ze),addToGroups(UTLD,{utld:!0,alpha:!0},ze),fastts(tn,"file",SCHEME,WORD,un),fastts(tn,"mailto",SCHEME,WORD,un),fastts(tn,"http",SLASH_SCHEME,WORD,un),fastts(tn,"https",SLASH_SCHEME,WORD,un),fastts(tn,"ftp",SLASH_SCHEME,WORD,un),fastts(tn,"ftps",SLASH_SCHEME,WORD,un),addToGroups(SCHEME,{scheme:!0,ascii:!0},ze),addToGroups(SLASH_SCHEME,{slashscheme:!0,ascii:!0},ze),en=en.sort((fn,pn)=>fn[0]>pn[0]?1:-1);for(let fn=0;fn<en.length;fn++){const pn=en[fn][0],gn=en[fn][1]?{[scheme]:!0}:{[slashscheme]:!0};pn.indexOf("-")>=0?gn[domain]=!0:ASCII_LETTER.test(pn)?DIGIT.test(pn)?gn[asciinumeric]=!0:gn[ascii]=!0:gn[numeric]=!0,ts(tn,pn,pn,gn)}return ts(tn,"localhost",LOCALHOST,{ascii:!0}),tn.jd=new State(SYM),{start:tn,tokens:assign({groups:ze},tk)}}function run$1(en,ze){const tn=stringToArray(ze.replace(/[A-Z]/g,ln=>ln.toLowerCase())),nn=tn.length,rn=[];let sn=0,an=0;for(;an<nn;){let ln=en,cn=null,un=0,dn=null,fn=-1,pn=-1;for(;an<nn&&(cn=ln.go(tn[an]));)ln=cn,ln.accepts()?(fn=0,pn=0,dn=ln):fn>=0&&(fn+=tn[an].length,pn++),un+=tn[an].length,sn+=tn[an].length,an++;sn-=fn,an-=pn,un-=fn,rn.push({t:dn.t,v:ze.slice(sn-un,sn),s:sn-un,e:sn})}return rn}function stringToArray(en){const ze=[],tn=en.length;let nn=0;for(;nn<tn;){let rn=en.charCodeAt(nn),sn,an=rn<55296||rn>56319||nn+1===tn||(sn=en.charCodeAt(nn+1))<56320||sn>57343?en[nn]:en.slice(nn,nn+2);ze.push(an),nn+=an.length}return ze}function fastts(en,ze,tn,nn,rn){let sn;const an=ze.length;for(let ln=0;ln<an-1;ln++){const cn=ze[ln];en.j[cn]?sn=en.j[cn]:(sn=new State(nn),sn.jr=rn.slice(),en.j[cn]=sn),en=sn}return sn=new State(tn),sn.jr=rn.slice(),en.j[ze[an-1]]=sn,sn}function decodeTlds(en){const ze=[],tn=[];let nn=0,rn="0123456789";for(;nn<en.length;){let sn=0;for(;rn.indexOf(en[nn+sn])>=0;)sn++;if(sn>0){ze.push(tn.join(""));for(let an=parseInt(en.substring(nn,nn+sn),10);an>0;an--)tn.pop();nn+=sn}else tn.push(en[nn]),nn++}return ze}const defaults={defaultProtocol:"http",events:null,format:noop,formatHref:noop,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Options(en,ze){ze===void 0&&(ze=null);let tn=assign({},defaults);en&&(tn=assign(tn,en instanceof Options?en.o:en));const nn=tn.ignoreTags,rn=[];for(let sn=0;sn<nn.length;sn++)rn.push(nn[sn].toUpperCase());this.o=tn,ze&&(this.defaultRender=ze),this.ignoreTags=rn}Options.prototype={o:defaults,ignoreTags:[],defaultRender(en){return en},check(en){return this.get("validate",en.toString(),en)},get(en,ze,tn){const nn=ze!=null;let rn=this.o[en];return rn&&(typeof rn=="object"?(rn=tn.t in rn?rn[tn.t]:defaults[en],typeof rn=="function"&&nn&&(rn=rn(ze,tn))):typeof rn=="function"&&nn&&(rn=rn(ze,tn.t,tn)),rn)},getObj(en,ze,tn){let nn=this.o[en];return typeof nn=="function"&&ze!=null&&(nn=nn(ze,tn.t,tn)),nn},render(en){const ze=en.render(this);return(this.get("render",null,en)||this.defaultRender)(ze,en.t,en)}};function noop(en){return en}function MultiToken(en,ze){this.t="token",this.v=en,this.tk=ze}MultiToken.prototype={isLink:!1,toString(){return this.v},toHref(en){return this.toString()},toFormattedString(en){const ze=this.toString(),tn=en.get("truncate",ze,this),nn=en.get("format",ze,this);return tn&&nn.length>tn?nn.substring(0,tn)+"":nn},toFormattedHref(en){return en.get("formatHref",this.toHref(en.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(en){return en===void 0&&(en=defaults.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(en),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(en){return{type:this.t,value:this.toFormattedString(en),isLink:this.isLink,href:this.toFormattedHref(en),start:this.startIndex(),end:this.endIndex()}},validate(en){return en.get("validate",this.toString(),this)},render(en){const ze=this,tn=this.toHref(en.get("defaultProtocol")),nn=en.get("formatHref",tn,this),rn=en.get("tagName",tn,ze),sn=this.toFormattedString(en),an={},ln=en.get("className",tn,ze),cn=en.get("target",tn,ze),un=en.get("rel",tn,ze),dn=en.getObj("attributes",tn,ze),fn=en.getObj("events",tn,ze);return an.href=nn,ln&&(an.class=ln),cn&&(an.target=cn),un&&(an.rel=un),dn&&assign(an,dn),{tagName:rn,attributes:an,content:sn,eventListeners:fn}}};function createTokenClass(en,ze){class tn extends MultiToken{constructor(rn,sn){super(rn,sn),this.t=en}}for(const nn in ze)tn.prototype[nn]=ze[nn];return tn.t=en,tn}const Email=createTokenClass("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Text=createTokenClass("text"),Nl=createTokenClass("nl"),Url=createTokenClass("url",{isLink:!0,toHref(en){return en===void 0&&(en=defaults.defaultProtocol),this.hasProtocol()?this.v:`${en}://${this.v}`},hasProtocol(){const en=this.tk;return en.length>=2&&en[0].t!==LOCALHOST&&en[1].t===COLON}}),makeState=en=>new State(en);function init$1(en){let{groups:ze}=en;const tn=ze.domain.concat([AMPERSAND,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,NUM,PERCENT,PIPE,PLUS,POUND,SLASH,SYM,TILDE,UNDERSCORE]),nn=[APOSTROPHE,COLON,COMMA,DOT,EXCLAMATION,QUERY,QUOTE,SEMI,OPENANGLEBRACKET,CLOSEANGLEBRACKET,OPENBRACE,CLOSEBRACE,CLOSEBRACKET,OPENBRACKET,OPENPAREN,CLOSEPAREN,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN],rn=[AMPERSAND,APOSTROPHE,ASTERISK,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,OPENBRACE,CLOSEBRACE,PERCENT,PIPE,PLUS,POUND,QUERY,SLASH,SYM,TILDE,UNDERSCORE],sn=makeState(),an=tt(sn,TILDE);ta(an,rn,an),ta(an,ze.domain,an);const ln=makeState(),cn=makeState(),un=makeState();ta(sn,ze.domain,ln),ta(sn,ze.scheme,cn),ta(sn,ze.slashscheme,un),ta(ln,rn,an),ta(ln,ze.domain,ln);const dn=tt(ln,AT);tt(an,AT,dn),tt(cn,AT,dn),tt(un,AT,dn);const fn=tt(an,DOT);ta(fn,rn,an),ta(fn,ze.domain,an);const pn=makeState();ta(dn,ze.domain,pn),ta(pn,ze.domain,pn);const hn=tt(pn,DOT);ta(hn,ze.domain,pn);const gn=makeState(Email);ta(hn,ze.tld,gn),ta(hn,ze.utld,gn),tt(dn,LOCALHOST,gn);const En=tt(pn,HYPHEN);ta(En,ze.domain,pn),ta(gn,ze.domain,pn),tt(gn,DOT,hn),tt(gn,HYPHEN,En);const mn=tt(gn,COLON);ta(mn,ze.numeric,Email);const bn=tt(ln,HYPHEN),Tn=tt(ln,DOT);ta(bn,ze.domain,ln),ta(Tn,rn,an),ta(Tn,ze.domain,ln);const _n=makeState(Url);ta(Tn,ze.tld,_n),ta(Tn,ze.utld,_n),ta(_n,ze.domain,ln),ta(_n,rn,an),tt(_n,DOT,Tn),tt(_n,HYPHEN,bn),tt(_n,AT,dn);const An=tt(_n,COLON),Rn=makeState(Url);ta(An,ze.numeric,Rn);const Cn=makeState(Url),wn=makeState();ta(Cn,tn,Cn),ta(Cn,nn,wn),ta(wn,tn,Cn),ta(wn,nn,wn),tt(_n,SLASH,Cn),tt(Rn,SLASH,Cn);const Fn=tt(cn,COLON),xn=tt(un,COLON),zn=tt(xn,SLASH),Hn=tt(zn,SLASH);ta(cn,ze.domain,ln),tt(cn,DOT,Tn),tt(cn,HYPHEN,bn),ta(un,ze.domain,ln),tt(un,DOT,Tn),tt(un,HYPHEN,bn),ta(Fn,ze.domain,Cn),tt(Fn,SLASH,Cn),ta(Hn,ze.domain,Cn),ta(Hn,tn,Cn),tt(Hn,SLASH,Cn);const Yn=[[OPENBRACE,CLOSEBRACE],[OPENBRACKET,CLOSEBRACKET],[OPENPAREN,CLOSEPAREN],[OPENANGLEBRACKET,CLOSEANGLEBRACKET],[FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN],[LEFTCORNERBRACKET,RIGHTCORNERBRACKET],[LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET],[FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN]];for(let Xn=0;Xn<Yn.length;Xn++){const[Kn,Un]=Yn[Xn],On=tt(Cn,Kn);tt(wn,Kn,On),tt(On,Un,Cn);const Sn=makeState(Url);ta(On,tn,Sn);const Nn=makeState();ta(On,nn),ta(Sn,tn,Sn),ta(Sn,nn,Nn),ta(Nn,tn,Sn),ta(Nn,nn,Nn),tt(Sn,Un,Cn),tt(Nn,Un,Cn)}return tt(sn,LOCALHOST,_n),tt(sn,NL$1,Nl),{start:sn,tokens:tk}}function run(en,ze,tn){let nn=tn.length,rn=0,sn=[],an=[];for(;rn<nn;){let ln=en,cn=null,un=null,dn=0,fn=null,pn=-1;for(;rn<nn&&!(cn=ln.go(tn[rn].t));)an.push(tn[rn++]);for(;rn<nn&&(un=cn||ln.go(tn[rn].t));)cn=null,ln=un,ln.accepts()?(pn=0,fn=ln):pn>=0&&pn++,rn++,dn++;if(pn<0)rn-=dn,rn<nn&&(an.push(tn[rn]),rn++);else{an.length>0&&(sn.push(initMultiToken(Text,ze,an)),an=[]),rn-=pn,dn-=pn;const hn=fn.t,gn=tn.slice(rn-dn,rn);sn.push(initMultiToken(hn,ze,gn))}}return an.length>0&&sn.push(initMultiToken(Text,ze,an)),sn}function initMultiToken(en,ze,tn){const nn=tn[0].s,rn=tn[tn.length-1].e,sn=ze.slice(nn,rn);return new en(sn,tn)}const warn$2=typeof console<"u"&&console&&console.warn||(()=>{}),warnAdvice="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",INIT={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function reset(){State.groups={},INIT.scanner=null,INIT.parser=null,INIT.tokenQueue=[],INIT.pluginQueue=[],INIT.customSchemes=[],INIT.initialized=!1}function registerCustomProtocol(en,ze){if(ze===void 0&&(ze=!1),INIT.initialized&&warn$2(`linkifyjs: already initialized - will not register custom scheme "${en}" ${warnAdvice}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(en))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);INIT.customSchemes.push([en,ze])}function init(){INIT.scanner=init$2(INIT.customSchemes);for(let en=0;en<INIT.tokenQueue.length;en++)INIT.tokenQueue[en][1]({scanner:INIT.scanner});INIT.parser=init$1(INIT.scanner.tokens);for(let en=0;en<INIT.pluginQueue.length;en++)INIT.pluginQueue[en][1]({scanner:INIT.scanner,parser:INIT.parser});INIT.initialized=!0}function tokenize(en){return INIT.initialized||init(),run(INIT.parser.start,en,run$1(INIT.scanner.start,en))}function find(en,ze,tn){if(ze===void 0&&(ze=null),tn===void 0&&(tn=null),ze&&typeof ze=="object"){if(tn)throw Error(`linkifyjs: Invalid link type ${ze}; must be a string`);tn=ze,ze=null}const nn=new Options(tn),rn=tokenize(en),sn=[];for(let an=0;an<rn.length;an++){const ln=rn[an];ln.isLink&&(!ze||ln.t===ze)&&nn.check(ln)&&sn.push(ln.toFormattedObject(nn))}return sn}function autolink(en){return new Plugin({key:new PluginKey("autolink"),appendTransaction:(ze,tn,nn)=>{const rn=ze.some(un=>un.docChanged)&&!tn.doc.eq(nn.doc),sn=ze.some(un=>un.getMeta("preventAutolink"));if(!rn||sn)return;const{tr:an}=nn,ln=combineTransactionSteps(tn.doc,[...ze]);if(getChangedRanges(ln).forEach(({newRange:un})=>{const dn=findChildrenInRange(nn.doc,un,hn=>hn.isTextblock);let fn,pn;if(dn.length>1?(fn=dn[0],pn=nn.doc.textBetween(fn.pos,fn.pos+fn.node.nodeSize,void 0," ")):dn.length&&nn.doc.textBetween(un.from,un.to," "," ").endsWith(" ")&&(fn=dn[0],pn=nn.doc.textBetween(fn.pos,un.to,void 0," ")),fn&&pn){const hn=pn.split(" ").filter(mn=>mn!=="");if(hn.length<=0)return!1;const gn=hn[hn.length-1],En=fn.pos+pn.lastIndexOf(gn);if(!gn)return!1;find(gn).filter(mn=>mn.isLink).map(mn=>({...mn,from:En+mn.start+1,to:En+mn.end+1})).filter(mn=>nn.schema.marks.code?!nn.doc.rangeHasMark(mn.from,mn.to,nn.schema.marks.code):!0).filter(mn=>en.validate?en.validate(mn.value):!0).forEach(mn=>{getMarksBetween(mn.from,mn.to,nn.doc).some(bn=>bn.mark.type===en.type)||an.addMark(mn.from,mn.to,en.type.create({href:mn.href}))})}}),!!an.steps.length)return an}})}function clickHandler(en){return new Plugin({key:new PluginKey("handleClickLink"),props:{handleClick:(ze,tn,nn)=>{var rn,sn;if(nn.button!==0)return!1;let an=nn.target;const ln=[];for(;an.nodeName!=="DIV";)ln.push(an),an=an.parentNode;if(!ln.find(pn=>pn.nodeName==="A"))return!1;const cn=getAttributes(ze.state,en.type.name),un=nn.target,dn=(rn=un==null?void 0:un.href)!==null&&rn!==void 0?rn:cn.href,fn=(sn=un==null?void 0:un.target)!==null&&sn!==void 0?sn:cn.target;return un&&dn?(window.open(dn,fn),!0):!1}}})}function pasteHandler(en){return new Plugin({key:new PluginKey("handlePasteLink"),props:{handlePaste:(ze,tn,nn)=>{const{state:rn}=ze,{selection:sn}=rn,{empty:an}=sn;if(an)return!1;let ln="";nn.content.forEach(un=>{ln+=un.textContent});const cn=find(ln).find(un=>un.isLink&&un.value===ln);return!ln||!cn?!1:(en.editor.commands.setMark(en.type,{href:cn.href}),!0)}}})}const Link=Mark.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(en=>{if(typeof en=="string"){registerCustomProtocol(en);return}registerCustomProtocol(en.scheme,en.optionalSlashes)})},onDestroy(){reset()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:en}){var ze;return!((ze=en.href)===null||ze===void 0)&&ze.startsWith("javascript:")?["a",mergeAttributes(this.options.HTMLAttributes,{...en,href:""}),0]:["a",mergeAttributes(this.options.HTMLAttributes,en),0]},addCommands(){return{setLink:en=>({chain:ze})=>ze().setMark(this.name,en).setMeta("preventAutolink",!0).run(),toggleLink:en=>({chain:ze})=>ze().toggleMark(this.name,en,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:en})=>en().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[markPasteRule({find:en=>{const ze=[];if(en){const tn=find(en).filter(nn=>nn.isLink);tn.length&&tn.forEach(nn=>ze.push({text:nn.value,data:{href:nn.href},index:nn.start}))}return ze},type:this.type,getAttributes:en=>{var ze;return{href:(ze=en.data)===null||ze===void 0?void 0:ze.href}}})]},addProseMirrorPlugins(){const en=[];return this.options.autolink&&en.push(autolink({type:this.type,validate:this.options.validate})),this.options.openOnClick&&en.push(clickHandler({type:this.type})),this.options.linkOnPaste&&en.push(pasteHandler({editor:this.editor,type:this.type})),en}}),TextAlign=Extension.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:en=>en.style.textAlign||this.options.defaultAlignment,renderHTML:en=>en.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${en.textAlign}`}}}}]},addCommands(){return{setTextAlign:en=>({commands:ze})=>this.options.alignments.includes(en)?this.options.types.every(tn=>ze.updateAttributes(tn,{textAlign:en})):!1,unsetTextAlign:()=>({commands:en})=>this.options.types.every(ze=>en.resetAttributes(ze,"textAlign"))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});var deepFreezeEs6={exports:{}};function deepFreeze$1(en){return en instanceof Map?en.clear=en.delete=en.set=function(){throw new Error("map is read-only")}:en instanceof Set&&(en.add=en.clear=en.delete=function(){throw new Error("set is read-only")}),Object.freeze(en),Object.getOwnPropertyNames(en).forEach(function(ze){var tn=en[ze];typeof tn=="object"&&!Object.isFrozen(tn)&&deepFreeze$1(tn)}),en}deepFreezeEs6.exports=deepFreeze$1;deepFreezeEs6.exports.default=deepFreeze$1;let Response$1=class{constructor(ze){ze.data===void 0&&(ze.data={}),this.data=ze.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}};function escapeHTML$1(en){return en.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function inherit$1$1(en,...ze){const tn=Object.create(null);for(const nn in en)tn[nn]=en[nn];return ze.forEach(function(nn){for(const rn in nn)tn[rn]=nn[rn]}),tn}const SPAN_CLOSE$1="</span>",emitsWrappingTags$1=en=>!!en.scope||en.sublanguage&&en.language,scopeToCSSClass$1=(en,{prefix:ze})=>{if(en.includes(".")){const tn=en.split(".");return[`${ze}${tn.shift()}`,...tn.map((nn,rn)=>`${nn}${"_".repeat(rn+1)}`)].join(" ")}return`${ze}${en}`};let HTMLRenderer$1=class{constructor(ze,tn){this.buffer="",this.classPrefix=tn.classPrefix,ze.walk(this)}addText(ze){this.buffer+=escapeHTML$1(ze)}openNode(ze){if(!emitsWrappingTags$1(ze))return;let tn="";ze.sublanguage?tn=`language-${ze.language}`:tn=scopeToCSSClass$1(ze.scope,{prefix:this.classPrefix}),this.span(tn)}closeNode(ze){emitsWrappingTags$1(ze)&&(this.buffer+=SPAN_CLOSE$1)}value(){return this.buffer}span(ze){this.buffer+=`<span class="${ze}">`}};const newNode$1=(en={})=>{const ze={children:[]};return Object.assign(ze,en),ze};let TokenTree$1=class hi{constructor(){this.rootNode=newNode$1(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(ze){this.top.children.push(ze)}openNode(ze){const tn=newNode$1({scope:ze});this.add(tn),this.stack.push(tn)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(ze){return this.constructor._walk(ze,this.rootNode)}static _walk(ze,tn){return typeof tn=="string"?ze.addText(tn):tn.children&&(ze.openNode(tn),tn.children.forEach(nn=>this._walk(ze,nn)),ze.closeNode(tn)),ze}static _collapse(ze){typeof ze!="string"&&ze.children&&(ze.children.every(tn=>typeof tn=="string")?ze.children=[ze.children.join("")]:ze.children.forEach(tn=>{hi._collapse(tn)}))}},TokenTreeEmitter$1=class extends TokenTree$1{constructor(ze){super(),this.options=ze}addKeyword(ze,tn){ze!==""&&(this.openNode(tn),this.addText(ze),this.closeNode())}addText(ze){ze!==""&&this.add(ze)}addSublanguage(ze,tn){const nn=ze.root;nn.sublanguage=!0,nn.language=tn,this.add(nn)}toHTML(){return new HTMLRenderer$1(this,this.options).value()}finalize(){return!0}};function source$2(en){return en?typeof en=="string"?en:en.source:null}function lookahead$2(en){return concat$2("(?=",en,")")}function anyNumberOfTimes$1(en){return concat$2("(?:",en,")*")}function optional$1(en){return concat$2("(?:",en,")?")}function concat$2(...en){return en.map(tn=>source$2(tn)).join("")}function stripOptionsFromArgs$2(en){const ze=en[en.length-1];return typeof ze=="object"&&ze.constructor===Object?(en.splice(en.length-1,1),ze):{}}function either$2(...en){return"("+(stripOptionsFromArgs$2(en).capture?"":"?:")+en.map(nn=>source$2(nn)).join("|")+")"}function countMatchGroups$1(en){return new RegExp(en.toString()+"|").exec("").length-1}function startsWith$1(en,ze){const tn=en&&en.exec(ze);return tn&&tn.index===0}const BACKREF_RE$1=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function _rewriteBackreferences$1(en,{joinWith:ze}){let tn=0;return en.map(nn=>{tn+=1;const rn=tn;let sn=source$2(nn),an="";for(;sn.length>0;){const ln=BACKREF_RE$1.exec(sn);if(!ln){an+=sn;break}an+=sn.substring(0,ln.index),sn=sn.substring(ln.index+ln[0].length),ln[0][0]==="\\"&&ln[1]?an+="\\"+String(Number(ln[1])+rn):(an+=ln[0],ln[0]==="("&&tn++)}return an}).map(nn=>`(${nn})`).join(ze)}const MATCH_NOTHING_RE$1=/\b\B/,IDENT_RE$3="[a-zA-Z]\\w*",UNDERSCORE_IDENT_RE$1="[a-zA-Z_]\\w*",NUMBER_RE$1="\\b\\d+(\\.\\d+)?",C_NUMBER_RE$1="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",BINARY_NUMBER_RE$1="\\b(0b[01]+)",RE_STARTERS_RE$1="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG$1=(en={})=>{const ze=/^#![ ]*\//;return en.binary&&(en.begin=concat$2(ze,/.*\b/,en.binary,/\b.*/)),inherit$1$1({scope:"meta",begin:ze,end:/$/,relevance:0,"on:begin":(tn,nn)=>{tn.index!==0&&nn.ignoreMatch()}},en)},BACKSLASH_ESCAPE$1={begin:"\\\\[\\s\\S]",relevance:0},APOS_STRING_MODE$1={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[BACKSLASH_ESCAPE$1]},QUOTE_STRING_MODE$1={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[BACKSLASH_ESCAPE$1]},PHRASAL_WORDS_MODE$1={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},COMMENT$1=function(en,ze,tn={}){const nn=inherit$1$1({scope:"comment",begin:en,end:ze,contains:[]},tn);nn.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const rn=either$2("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return nn.contains.push({begin:concat$2(/[ ]+/,"(",rn,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),nn},C_LINE_COMMENT_MODE$1=COMMENT$1("//","$"),C_BLOCK_COMMENT_MODE$1=COMMENT$1("/\\*","\\*/"),HASH_COMMENT_MODE$1=COMMENT$1("#","$"),NUMBER_MODE$1={scope:"number",begin:NUMBER_RE$1,relevance:0},C_NUMBER_MODE$1={scope:"number",begin:C_NUMBER_RE$1,relevance:0},BINARY_NUMBER_MODE$1={scope:"number",begin:BINARY_NUMBER_RE$1,relevance:0},REGEXP_MODE$1={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[BACKSLASH_ESCAPE$1,{begin:/\[/,end:/\]/,relevance:0,contains:[BACKSLASH_ESCAPE$1]}]}]},TITLE_MODE$1={scope:"title",begin:IDENT_RE$3,relevance:0},UNDERSCORE_TITLE_MODE$1={scope:"title",begin:UNDERSCORE_IDENT_RE$1,relevance:0},METHOD_GUARD$1={begin:"\\.\\s*"+UNDERSCORE_IDENT_RE$1,relevance:0},END_SAME_AS_BEGIN$1=function(en){return Object.assign(en,{"on:begin":(ze,tn)=>{tn.data._beginMatch=ze[1]},"on:end":(ze,tn)=>{tn.data._beginMatch!==ze[1]&&tn.ignoreMatch()}})};var MODES$4=Object.freeze({__proto__:null,MATCH_NOTHING_RE:MATCH_NOTHING_RE$1,IDENT_RE:IDENT_RE$3,UNDERSCORE_IDENT_RE:UNDERSCORE_IDENT_RE$1,NUMBER_RE:NUMBER_RE$1,C_NUMBER_RE:C_NUMBER_RE$1,BINARY_NUMBER_RE:BINARY_NUMBER_RE$1,RE_STARTERS_RE:RE_STARTERS_RE$1,SHEBANG:SHEBANG$1,BACKSLASH_ESCAPE:BACKSLASH_ESCAPE$1,APOS_STRING_MODE:APOS_STRING_MODE$1,QUOTE_STRING_MODE:QUOTE_STRING_MODE$1,PHRASAL_WORDS_MODE:PHRASAL_WORDS_MODE$1,COMMENT:COMMENT$1,C_LINE_COMMENT_MODE:C_LINE_COMMENT_MODE$1,C_BLOCK_COMMENT_MODE:C_BLOCK_COMMENT_MODE$1,HASH_COMMENT_MODE:HASH_COMMENT_MODE$1,NUMBER_MODE:NUMBER_MODE$1,C_NUMBER_MODE:C_NUMBER_MODE$1,BINARY_NUMBER_MODE:BINARY_NUMBER_MODE$1,REGEXP_MODE:REGEXP_MODE$1,TITLE_MODE:TITLE_MODE$1,UNDERSCORE_TITLE_MODE:UNDERSCORE_TITLE_MODE$1,METHOD_GUARD:METHOD_GUARD$1,END_SAME_AS_BEGIN:END_SAME_AS_BEGIN$1});function skipIfHasPrecedingDot$1(en,ze){en.input[en.index-1]==="."&&ze.ignoreMatch()}function scopeClassName$1(en,ze){en.className!==void 0&&(en.scope=en.className,delete en.className)}function beginKeywords$1(en,ze){ze&&en.beginKeywords&&(en.begin="\\b("+en.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",en.__beforeBegin=skipIfHasPrecedingDot$1,en.keywords=en.keywords||en.beginKeywords,delete en.beginKeywords,en.relevance===void 0&&(en.relevance=0))}function compileIllegal$1(en,ze){Array.isArray(en.illegal)&&(en.illegal=either$2(...en.illegal))}function compileMatch$1(en,ze){if(en.match){if(en.begin||en.end)throw new Error("begin & end are not supported with match");en.begin=en.match,delete en.match}}function compileRelevance$1(en,ze){en.relevance===void 0&&(en.relevance=1)}const beforeMatchExt$1=(en,ze)=>{if(!en.beforeMatch)return;if(en.starts)throw new Error("beforeMatch cannot be used with starts");const tn=Object.assign({},en);Object.keys(en).forEach(nn=>{delete en[nn]}),en.keywords=tn.keywords,en.begin=concat$2(tn.beforeMatch,lookahead$2(tn.begin)),en.starts={relevance:0,contains:[Object.assign(tn,{endsParent:!0})]},en.relevance=0,delete tn.beforeMatch},COMMON_KEYWORDS$1=["of","and","for","in","not","or","if","then","parent","list","value"],DEFAULT_KEYWORD_SCOPE$1="keyword";function compileKeywords$1(en,ze,tn=DEFAULT_KEYWORD_SCOPE$1){const nn=Object.create(null);return typeof en=="string"?rn(tn,en.split(" ")):Array.isArray(en)?rn(tn,en):Object.keys(en).forEach(function(sn){Object.assign(nn,compileKeywords$1(en[sn],ze,sn))}),nn;function rn(sn,an){ze&&(an=an.map(ln=>ln.toLowerCase())),an.forEach(function(ln){const cn=ln.split("|");nn[cn[0]]=[sn,scoreForKeyword$1(cn[0],cn[1])]})}}function scoreForKeyword$1(en,ze){return ze?Number(ze):commonKeyword$1(en)?0:1}function commonKeyword$1(en){return COMMON_KEYWORDS$1.includes(en.toLowerCase())}const seenDeprecations$1={},error$2=en=>{console.error(en)},warn$1=(en,...ze)=>{console.log(`WARN: ${en}`,...ze)},deprecated$1=(en,ze)=>{seenDeprecations$1[`${en}/${ze}`]||(console.log(`Deprecated as of ${en}. ${ze}`),seenDeprecations$1[`${en}/${ze}`]=!0)},MultiClassError$1=new Error;function remapScopeNames$1(en,ze,{key:tn}){let nn=0;const rn=en[tn],sn={},an={};for(let ln=1;ln<=ze.length;ln++)an[ln+nn]=rn[ln],sn[ln+nn]=!0,nn+=countMatchGroups$1(ze[ln-1]);en[tn]=an,en[tn]._emit=sn,en[tn]._multi=!0}function beginMultiClass$1(en){if(Array.isArray(en.begin)){if(en.skip||en.excludeBegin||en.returnBegin)throw error$2("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),MultiClassError$1;if(typeof en.beginScope!="object"||en.beginScope===null)throw error$2("beginScope must be object"),MultiClassError$1;remapScopeNames$1(en,en.begin,{key:"beginScope"}),en.begin=_rewriteBackreferences$1(en.begin,{joinWith:""})}}function endMultiClass$1(en){if(Array.isArray(en.end)){if(en.skip||en.excludeEnd||en.returnEnd)throw error$2("skip, excludeEnd, returnEnd not compatible with endScope: {}"),MultiClassError$1;if(typeof en.endScope!="object"||en.endScope===null)throw error$2("endScope must be object"),MultiClassError$1;remapScopeNames$1(en,en.end,{key:"endScope"}),en.end=_rewriteBackreferences$1(en.end,{joinWith:""})}}function scopeSugar$1(en){en.scope&&typeof en.scope=="object"&&en.scope!==null&&(en.beginScope=en.scope,delete en.scope)}function MultiClass$1(en){scopeSugar$1(en),typeof en.beginScope=="string"&&(en.beginScope={_wrap:en.beginScope}),typeof en.endScope=="string"&&(en.endScope={_wrap:en.endScope}),beginMultiClass$1(en),endMultiClass$1(en)}function compileLanguage$1(en){function ze(an,ln){return new RegExp(source$2(an),"m"+(en.case_insensitive?"i":"")+(en.unicodeRegex?"u":"")+(ln?"g":""))}class tn{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(ln,cn){cn.position=this.position++,this.matchIndexes[this.matchAt]=cn,this.regexes.push([cn,ln]),this.matchAt+=countMatchGroups$1(ln)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const ln=this.regexes.map(cn=>cn[1]);this.matcherRe=ze(_rewriteBackreferences$1(ln,{joinWith:"|"}),!0),this.lastIndex=0}exec(ln){this.matcherRe.lastIndex=this.lastIndex;const cn=this.matcherRe.exec(ln);if(!cn)return null;const un=cn.findIndex((fn,pn)=>pn>0&&fn!==void 0),dn=this.matchIndexes[un];return cn.splice(0,un),Object.assign(cn,dn)}}class nn{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(ln){if(this.multiRegexes[ln])return this.multiRegexes[ln];const cn=new tn;return this.rules.slice(ln).forEach(([un,dn])=>cn.addRule(un,dn)),cn.compile(),this.multiRegexes[ln]=cn,cn}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(ln,cn){this.rules.push([ln,cn]),cn.type==="begin"&&this.count++}exec(ln){const cn=this.getMatcher(this.regexIndex);cn.lastIndex=this.lastIndex;let un=cn.exec(ln);if(this.resumingScanAtSamePosition()&&!(un&&un.index===this.lastIndex)){const dn=this.getMatcher(0);dn.lastIndex=this.lastIndex+1,un=dn.exec(ln)}return un&&(this.regexIndex+=un.position+1,this.regexIndex===this.count&&this.considerAll()),un}}function rn(an){const ln=new nn;return an.contains.forEach(cn=>ln.addRule(cn.begin,{rule:cn,type:"begin"})),an.terminatorEnd&&ln.addRule(an.terminatorEnd,{type:"end"}),an.illegal&&ln.addRule(an.illegal,{type:"illegal"}),ln}function sn(an,ln){const cn=an;if(an.isCompiled)return cn;[scopeClassName$1,compileMatch$1,MultiClass$1,beforeMatchExt$1].forEach(dn=>dn(an,ln)),en.compilerExtensions.forEach(dn=>dn(an,ln)),an.__beforeBegin=null,[beginKeywords$1,compileIllegal$1,compileRelevance$1].forEach(dn=>dn(an,ln)),an.isCompiled=!0;let un=null;return typeof an.keywords=="object"&&an.keywords.$pattern&&(an.keywords=Object.assign({},an.keywords),un=an.keywords.$pattern,delete an.keywords.$pattern),un=un||/\w+/,an.keywords&&(an.keywords=compileKeywords$1(an.keywords,en.case_insensitive)),cn.keywordPatternRe=ze(un,!0),ln&&(an.begin||(an.begin=/\B|\b/),cn.beginRe=ze(cn.begin),!an.end&&!an.endsWithParent&&(an.end=/\B|\b/),an.end&&(cn.endRe=ze(cn.end)),cn.terminatorEnd=source$2(cn.end)||"",an.endsWithParent&&ln.terminatorEnd&&(cn.terminatorEnd+=(an.end?"|":"")+ln.terminatorEnd)),an.illegal&&(cn.illegalRe=ze(an.illegal)),an.contains||(an.contains=[]),an.contains=[].concat(...an.contains.map(function(dn){return expandOrCloneMode$1(dn==="self"?an:dn)})),an.contains.forEach(function(dn){sn(dn,cn)}),an.starts&&sn(an.starts,ln),cn.matcher=rn(cn),cn}if(en.compilerExtensions||(en.compilerExtensions=[]),en.contains&&en.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return en.classNameAliases=inherit$1$1(en.classNameAliases||{}),sn(en)}function dependencyOnParent$1(en){return en?en.endsWithParent||dependencyOnParent$1(en.starts):!1}function expandOrCloneMode$1(en){return en.variants&&!en.cachedVariants&&(en.cachedVariants=en.variants.map(function(ze){return inherit$1$1(en,{variants:null},ze)})),en.cachedVariants?en.cachedVariants:dependencyOnParent$1(en)?inherit$1$1(en,{starts:en.starts?inherit$1$1(en.starts):null}):Object.isFrozen(en)?inherit$1$1(en):en}var version$1="11.6.0";let HTMLInjectionError$1=class extends Error{constructor(ze,tn){super(ze),this.name="HTMLInjectionError",this.html=tn}};const escape$1=escapeHTML$1,inherit$2=inherit$1$1,NO_MATCH$1=Symbol("nomatch"),MAX_KEYWORD_HITS$1=7,HLJS$1=function(en){const ze=Object.create(null),tn=Object.create(null),nn=[];let rn=!0;const sn="Could not find the language '{}', did you forget to load/include a language module?",an={disableAutodetect:!0,name:"Plain text",contains:[]};let ln={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:TokenTreeEmitter$1};function cn(On){return ln.noHighlightRe.test(On)}function un(On){let Sn=On.className+" ";Sn+=On.parentNode?On.parentNode.className:"";const Nn=ln.languageDetectRe.exec(Sn);if(Nn){const Mn=xn(Nn[1]);return Mn||(warn$1(sn.replace("{}",Nn[1])),warn$1("Falling back to no-highlight mode for this block.",On)),Mn?Nn[1]:"no-highlight"}return Sn.split(/\s+/).find(Mn=>cn(Mn)||xn(Mn))}function dn(On,Sn,Nn){let Mn="",Dn="";typeof Sn=="object"?(Mn=On,Nn=Sn.ignoreIllegals,Dn=Sn.language):(deprecated$1("10.7.0","highlight(lang, code, ...args) has been deprecated."),deprecated$1("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Dn=On,Mn=Sn),Nn===void 0&&(Nn=!0);const $n={code:Mn,language:Dn};Kn("before:highlight",$n);const Vn=$n.result?$n.result:fn($n.language,$n.code,Nn);return Vn.code=$n.code,Kn("after:highlight",Vn),Vn}function fn(On,Sn,Nn,Mn){const Dn=Object.create(null);function $n(vn,Ln){return vn.keywords[Ln]}function Vn(){if(!Pn.keywords){kn.addText(jn);return}let vn=0;Pn.keywordPatternRe.lastIndex=0;let Ln=Pn.keywordPatternRe.exec(jn),yn="";for(;Ln;){yn+=jn.substring(vn,Ln.index);const In=Gr.case_insensitive?Ln[0].toLowerCase():Ln[0],Bn=$n(Pn,In);if(Bn){const[qn,Jr]=Bn;if(kn.addText(yn),yn="",Dn[In]=(Dn[In]||0)+1,Dn[In]<=MAX_KEYWORD_HITS$1&&(Kr+=Jr),qn.startsWith("_"))yn+=Ln[0];else{const ri=Gr.classNameAliases[qn]||qn;kn.addKeyword(Ln[0],ri)}}else yn+=Ln[0];vn=Pn.keywordPatternRe.lastIndex,Ln=Pn.keywordPatternRe.exec(jn)}yn+=jn.substring(vn),kn.addText(yn)}function Zn(){if(jn==="")return;let vn=null;if(typeof Pn.subLanguage=="string"){if(!ze[Pn.subLanguage]){kn.addText(jn);return}vn=fn(Pn.subLanguage,jn,!0,Zr[Pn.subLanguage]),Zr[Pn.subLanguage]=vn._top}else vn=hn(jn,Pn.subLanguage.length?Pn.subLanguage:null);Pn.relevance>0&&(Kr+=vn.relevance),kn.addSublanguage(vn._emitter,vn.language)}function Qn(){Pn.subLanguage!=null?Zn():Vn(),jn=""}function Wn(vn,Ln){let yn=1;const In=Ln.length-1;for(;yn<=In;){if(!vn._emit[yn]){yn++;continue}const Bn=Gr.classNameAliases[vn[yn]]||vn[yn],qn=Ln[yn];Bn?kn.addKeyword(qn,Bn):(jn=qn,Vn(),jn=""),yn++}}function Wr(vn,Ln){return vn.scope&&typeof vn.scope=="string"&&kn.openNode(Gr.classNameAliases[vn.scope]||vn.scope),vn.beginScope&&(vn.beginScope._wrap?(kn.addKeyword(jn,Gr.classNameAliases[vn.beginScope._wrap]||vn.beginScope._wrap),jn=""):vn.beginScope._multi&&(Wn(vn.beginScope,Ln),jn="")),Pn=Object.create(vn,{parent:{value:Pn}}),Pn}function si(vn,Ln,yn){let In=startsWith$1(vn.endRe,yn);if(In){if(vn["on:end"]){const Bn=new Response$1(vn);vn["on:end"](Ln,Bn),Bn.isMatchIgnored&&(In=!1)}if(In){for(;vn.endsParent&&vn.parent;)vn=vn.parent;return vn}}if(vn.endsWithParent)return si(vn.parent,Ln,yn)}function ti(vn){return Pn.matcher.regexIndex===0?(jn+=vn[0],1):(ni=!0,0)}function Qr(vn){const Ln=vn[0],yn=vn.rule,In=new Response$1(yn),Bn=[yn.__beforeBegin,yn["on:begin"]];for(const qn of Bn)if(qn&&(qn(vn,In),In.isMatchIgnored))return ti(Ln);return yn.skip?jn+=Ln:(yn.excludeBegin&&(jn+=Ln),Qn(),!yn.returnBegin&&!yn.excludeBegin&&(jn=Ln)),Wr(yn,vn),yn.returnBegin?0:Ln.length}function li(vn){const Ln=vn[0],yn=Sn.substring(vn.index),In=si(Pn,vn,yn);if(!In)return NO_MATCH$1;const Bn=Pn;Pn.endScope&&Pn.endScope._wrap?(Qn(),kn.addKeyword(Ln,Pn.endScope._wrap)):Pn.endScope&&Pn.endScope._multi?(Qn(),Wn(Pn.endScope,vn)):Bn.skip?jn+=Ln:(Bn.returnEnd||Bn.excludeEnd||(jn+=Ln),Qn(),Bn.excludeEnd&&(jn=Ln));do Pn.scope&&kn.closeNode(),!Pn.skip&&!Pn.subLanguage&&(Kr+=Pn.relevance),Pn=Pn.parent;while(Pn!==In.parent);return In.starts&&Wr(In.starts,vn),Bn.returnEnd?0:Ln.length}function oi(){const vn=[];for(let Ln=Pn;Ln!==Gr;Ln=Ln.parent)Ln.scope&&vn.unshift(Ln.scope);vn.forEach(Ln=>kn.openNode(Ln))}let ii={};function Gn(vn,Ln){const yn=Ln&&Ln[0];if(jn+=vn,yn==null)return Qn(),0;if(ii.type==="begin"&&Ln.type==="end"&&ii.index===Ln.index&&yn===""){if(jn+=Sn.slice(Ln.index,Ln.index+1),!rn){const In=new Error(`0 width match regex (${On})`);throw In.languageName=On,In.badRule=ii.rule,In}return 1}if(ii=Ln,Ln.type==="begin")return Qr(Ln);if(Ln.type==="illegal"&&!Nn){const In=new Error('Illegal lexeme "'+yn+'" for mode "'+(Pn.scope||"<unnamed>")+'"');throw In.mode=Pn,In}else if(Ln.type==="end"){const In=li(Ln);if(In!==NO_MATCH$1)return In}if(Ln.type==="illegal"&&yn==="")return 1;if(ai>1e5&&ai>Ln.index*3)throw new Error("potential infinite loop, way more iterations than matches");return jn+=yn,yn.length}const Gr=xn(On);if(!Gr)throw error$2(sn.replace("{}",On)),new Error('Unknown language: "'+On+'"');const ei=compileLanguage$1(Gr);let Yr="",Pn=Mn||ei;const Zr={},kn=new ln.__emitter(ln);oi();let jn="",Kr=0,Jn=0,ai=0,ni=!1;try{for(Pn.matcher.considerAll();;){ai++,ni?ni=!1:Pn.matcher.considerAll(),Pn.matcher.lastIndex=Jn;const vn=Pn.matcher.exec(Sn);if(!vn)break;const Ln=Sn.substring(Jn,vn.index),yn=Gn(Ln,vn);Jn=vn.index+yn}return Gn(Sn.substring(Jn)),kn.closeAllNodes(),kn.finalize(),Yr=kn.toHTML(),{language:On,value:Yr,relevance:Kr,illegal:!1,_emitter:kn,_top:Pn}}catch(vn){if(vn.message&&vn.message.includes("Illegal"))return{language:On,value:escape$1(Sn),illegal:!0,relevance:0,_illegalBy:{message:vn.message,index:Jn,context:Sn.slice(Jn-100,Jn+100),mode:vn.mode,resultSoFar:Yr},_emitter:kn};if(rn)return{language:On,value:escape$1(Sn),illegal:!1,relevance:0,errorRaised:vn,_emitter:kn,_top:Pn};throw vn}}function pn(On){const Sn={value:escape$1(On),illegal:!1,relevance:0,_top:an,_emitter:new ln.__emitter(ln)};return Sn._emitter.addText(On),Sn}function hn(On,Sn){Sn=Sn||ln.languages||Object.keys(ze);const Nn=pn(On),Mn=Sn.filter(xn).filter(Hn).map(Qn=>fn(Qn,On,!1));Mn.unshift(Nn);const Dn=Mn.sort((Qn,Wn)=>{if(Qn.relevance!==Wn.relevance)return Wn.relevance-Qn.relevance;if(Qn.language&&Wn.language){if(xn(Qn.language).supersetOf===Wn.language)return 1;if(xn(Wn.language).supersetOf===Qn.language)return-1}return 0}),[$n,Vn]=Dn,Zn=$n;return Zn.secondBest=Vn,Zn}function gn(On,Sn,Nn){const Mn=Sn&&tn[Sn]||Nn;On.classList.add("hljs"),On.classList.add(`language-${Mn}`)}function En(On){let Sn=null;const Nn=un(On);if(cn(Nn))return;if(Kn("before:highlightElement",{el:On,language:Nn}),On.children.length>0&&(ln.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(On)),ln.throwUnescapedHTML))throw new HTMLInjectionError$1("One of your code blocks includes unescaped HTML.",On.innerHTML);Sn=On;const Mn=Sn.textContent,Dn=Nn?dn(Mn,{language:Nn,ignoreIllegals:!0}):hn(Mn);On.innerHTML=Dn.value,gn(On,Nn,Dn.language),On.result={language:Dn.language,re:Dn.relevance,relevance:Dn.relevance},Dn.secondBest&&(On.secondBest={language:Dn.secondBest.language,relevance:Dn.secondBest.relevance}),Kn("after:highlightElement",{el:On,result:Dn,text:Mn})}function mn(On){ln=inherit$2(ln,On)}const bn=()=>{An(),deprecated$1("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Tn(){An(),deprecated$1("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let _n=!1;function An(){if(document.readyState==="loading"){_n=!0;return}document.querySelectorAll(ln.cssSelector).forEach(En)}function Rn(){_n&&An()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",Rn,!1);function Cn(On,Sn){let Nn=null;try{Nn=Sn(en)}catch(Mn){if(error$2("Language definition for '{}' could not be registered.".replace("{}",On)),rn)error$2(Mn);else throw Mn;Nn=an}Nn.name||(Nn.name=On),ze[On]=Nn,Nn.rawDefinition=Sn.bind(null,en),Nn.aliases&&zn(Nn.aliases,{languageName:On})}function wn(On){delete ze[On];for(const Sn of Object.keys(tn))tn[Sn]===On&&delete tn[Sn]}function Fn(){return Object.keys(ze)}function xn(On){return On=(On||"").toLowerCase(),ze[On]||ze[tn[On]]}function zn(On,{languageName:Sn}){typeof On=="string"&&(On=[On]),On.forEach(Nn=>{tn[Nn.toLowerCase()]=Sn})}function Hn(On){const Sn=xn(On);return Sn&&!Sn.disableAutodetect}function Yn(On){On["before:highlightBlock"]&&!On["before:highlightElement"]&&(On["before:highlightElement"]=Sn=>{On["before:highlightBlock"](Object.assign({block:Sn.el},Sn))}),On["after:highlightBlock"]&&!On["after:highlightElement"]&&(On["after:highlightElement"]=Sn=>{On["after:highlightBlock"](Object.assign({block:Sn.el},Sn))})}function Xn(On){Yn(On),nn.push(On)}function Kn(On,Sn){const Nn=On;nn.forEach(function(Mn){Mn[Nn]&&Mn[Nn](Sn)})}function Un(On){return deprecated$1("10.7.0","highlightBlock will be removed entirely in v12.0"),deprecated$1("10.7.0","Please use highlightElement now."),En(On)}Object.assign(en,{highlight:dn,highlightAuto:hn,highlightAll:An,highlightElement:En,highlightBlock:Un,configure:mn,initHighlighting:bn,initHighlightingOnLoad:Tn,registerLanguage:Cn,unregisterLanguage:wn,listLanguages:Fn,getLanguage:xn,registerAliases:zn,autoDetection:Hn,inherit:inherit$2,addPlugin:Xn}),en.debugMode=function(){rn=!1},en.safeMode=function(){rn=!0},en.versionString=version$1,en.regex={concat:concat$2,lookahead:lookahead$2,either:either$2,optional:optional$1,anyNumberOfTimes:anyNumberOfTimes$1};for(const On in MODES$4)typeof MODES$4[On]=="object"&&deepFreezeEs6.exports(MODES$4[On]);return Object.assign(en,MODES$4),en};var highlight$1=HLJS$1({}),core$1=highlight$1;highlight$1.HighlightJS=highlight$1;highlight$1.default=highlight$1;var HighlightJS$1=core$1;function parseNodes$2(en,ze=[]){return en.map(tn=>{const nn=[...ze,...tn.properties?tn.properties.className:[]];return tn.children?parseNodes$2(tn.children,nn):{text:tn.value,classes:nn}}).flat()}function getHighlightNodes$2(en){return en.value||en.children||[]}function registered(en){return!!HighlightJS$1.getLanguage(en)}function getDecorations$2({doc:en,name:ze,lowlight:tn,defaultLanguage:nn}){const rn=[];return findChildren(en,sn=>sn.type.name===ze).forEach(sn=>{let an=sn.pos+1;const ln=sn.node.attrs.language||nn,cn=tn.listLanguages(),un=ln&&(cn.includes(ln)||registered(ln))?getHighlightNodes$2(tn.highlight(ln,sn.node.textContent)):getHighlightNodes$2(tn.highlightAuto(sn.node.textContent));parseNodes$2(un).forEach(dn=>{const fn=an+dn.text.length;if(dn.classes.length){const pn=Decoration.inline(an,fn,{class:dn.classes.join(" ")});rn.push(pn)}an=fn})}),DecorationSet.create(en,rn)}function isFunction$1(en){return typeof en=="function"}function LowlightPlugin({name:en,lowlight:ze,defaultLanguage:tn}){if(!["highlight","highlightAuto","listLanguages"].every(rn=>isFunction$1(ze[rn])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const nn=new Plugin({key:new PluginKey("lowlight"),state:{init:(rn,{doc:sn})=>getDecorations$2({doc:sn,name:en,lowlight:ze,defaultLanguage:tn}),apply:(rn,sn,an,ln)=>{const cn=an.selection.$head.parent.type.name,un=ln.selection.$head.parent.type.name,dn=findChildren(an.doc,pn=>pn.type.name===en),fn=findChildren(ln.doc,pn=>pn.type.name===en);return rn.docChanged&&([cn,un].includes(en)||fn.length!==dn.length||rn.steps.some(pn=>pn.from!==void 0&&pn.to!==void 0&&dn.some(hn=>hn.pos>=pn.from&&hn.pos+hn.node.nodeSize<=pn.to)))?getDecorations$2({doc:rn.doc,name:en,lowlight:ze,defaultLanguage:tn}):sn.map(rn.mapping,rn.doc)}},props:{decorations(rn){return nn.getState(rn)}}});return nn}const CodeBlockLowlight=CodeBlock.extend({addOptions(){var en;return{...(en=this.parent)===null||en===void 0?void 0:en.call(this),lowlight:{},defaultLanguage:null}},addProseMirrorPlugins(){var en;return[...((en=this.parent)===null||en===void 0?void 0:en.call(this))||[],LowlightPlugin({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),inputRegex=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Image=Node$1.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:en}){return["img",mergeAttributes(this.options.HTMLAttributes,en)]},addCommands(){return{setImage:en=>({commands:ze})=>ze.insertContent({type:this.name,attrs:en})}},addInputRules(){return[nodeInputRule({find:inputRegex,type:this.type,getAttributes:en=>{const[,,ze,tn,nn]=en;return{src:tn,alt:ze,title:nn}}})]}});function deepFreeze(en){return en instanceof Map?en.clear=en.delete=en.set=function(){throw new Error("map is read-only")}:en instanceof Set&&(en.add=en.clear=en.delete=function(){throw new Error("set is read-only")}),Object.freeze(en),Object.getOwnPropertyNames(en).forEach(ze=>{const tn=en[ze],nn=typeof tn;(nn==="object"||nn==="function")&&!Object.isFrozen(tn)&&deepFreeze(tn)}),en}class Response{constructor(ze){ze.data===void 0&&(ze.data={}),this.data=ze.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function escapeHTML(en){return en.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function inherit$1(en,...ze){const tn=Object.create(null);for(const nn in en)tn[nn]=en[nn];return ze.forEach(function(nn){for(const rn in nn)tn[rn]=nn[rn]}),tn}const SPAN_CLOSE="</span>",emitsWrappingTags=en=>!!en.scope,scopeToCSSClass=(en,{prefix:ze})=>{if(en.startsWith("language:"))return en.replace("language:","language-");if(en.includes(".")){const tn=en.split(".");return[`${ze}${tn.shift()}`,...tn.map((nn,rn)=>`${nn}${"_".repeat(rn+1)}`)].join(" ")}return`${ze}${en}`};class HTMLRenderer{constructor(ze,tn){this.buffer="",this.classPrefix=tn.classPrefix,ze.walk(this)}addText(ze){this.buffer+=escapeHTML(ze)}openNode(ze){if(!emitsWrappingTags(ze))return;const tn=scopeToCSSClass(ze.scope,{prefix:this.classPrefix});this.span(tn)}closeNode(ze){emitsWrappingTags(ze)&&(this.buffer+=SPAN_CLOSE)}value(){return this.buffer}span(ze){this.buffer+=`<span class="${ze}">`}}const newNode=(en={})=>{const ze={children:[]};return Object.assign(ze,en),ze};class TokenTree{constructor(){this.rootNode=newNode(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(ze){this.top.children.push(ze)}openNode(ze){const tn=newNode({scope:ze});this.add(tn),this.stack.push(tn)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(ze){return this.constructor._walk(ze,this.rootNode)}static _walk(ze,tn){return typeof tn=="string"?ze.addText(tn):tn.children&&(ze.openNode(tn),tn.children.forEach(nn=>this._walk(ze,nn)),ze.closeNode(tn)),ze}static _collapse(ze){typeof ze!="string"&&ze.children&&(ze.children.every(tn=>typeof tn=="string")?ze.children=[ze.children.join("")]:ze.children.forEach(tn=>{TokenTree._collapse(tn)}))}}class TokenTreeEmitter extends TokenTree{constructor(ze){super(),this.options=ze}addText(ze){ze!==""&&this.add(ze)}startScope(ze){this.openNode(ze)}endScope(){this.closeNode()}__addSublanguage(ze,tn){const nn=ze.root;tn&&(nn.scope=`language:${tn}`),this.add(nn)}toHTML(){return new HTMLRenderer(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function source$1(en){return en?typeof en=="string"?en:en.source:null}function lookahead$1(en){return concat$1("(?=",en,")")}function anyNumberOfTimes(en){return concat$1("(?:",en,")*")}function optional(en){return concat$1("(?:",en,")?")}function concat$1(...en){return en.map(tn=>source$1(tn)).join("")}function stripOptionsFromArgs$1(en){const ze=en[en.length-1];return typeof ze=="object"&&ze.constructor===Object?(en.splice(en.length-1,1),ze):{}}function either$1(...en){return"("+(stripOptionsFromArgs$1(en).capture?"":"?:")+en.map(nn=>source$1(nn)).join("|")+")"}function countMatchGroups(en){return new RegExp(en.toString()+"|").exec("").length-1}function startsWith(en,ze){const tn=en&&en.exec(ze);return tn&&tn.index===0}const BACKREF_RE=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function _rewriteBackreferences(en,{joinWith:ze}){let tn=0;return en.map(nn=>{tn+=1;const rn=tn;let sn=source$1(nn),an="";for(;sn.length>0;){const ln=BACKREF_RE.exec(sn);if(!ln){an+=sn;break}an+=sn.substring(0,ln.index),sn=sn.substring(ln.index+ln[0].length),ln[0][0]==="\\"&&ln[1]?an+="\\"+String(Number(ln[1])+rn):(an+=ln[0],ln[0]==="("&&tn++)}return an}).map(nn=>`(${nn})`).join(ze)}const MATCH_NOTHING_RE=/\b\B/,IDENT_RE$2="[a-zA-Z]\\w*",UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",NUMBER_RE="\\b\\d+(\\.\\d+)?",C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",BINARY_NUMBER_RE="\\b(0b[01]+)",RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG=(en={})=>{const ze=/^#![ ]*\//;return en.binary&&(en.begin=concat$1(ze,/.*\b/,en.binary,/\b.*/)),inherit$1({scope:"meta",begin:ze,end:/$/,relevance:0,"on:begin":(tn,nn)=>{tn.index!==0&&nn.ignoreMatch()}},en)},BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},APOS_STRING_MODE={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[BACKSLASH_ESCAPE]},QUOTE_STRING_MODE={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[BACKSLASH_ESCAPE]},PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},COMMENT=function(en,ze,tn={}){const nn=inherit$1({scope:"comment",begin:en,end:ze,contains:[]},tn);nn.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const rn=either$1("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return nn.contains.push({begin:concat$1(/[ ]+/,"(",rn,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),nn},C_LINE_COMMENT_MODE=COMMENT("//","$"),C_BLOCK_COMMENT_MODE=COMMENT("/\\*","\\*/"),HASH_COMMENT_MODE=COMMENT("#","$"),NUMBER_MODE={scope:"number",begin:NUMBER_RE,relevance:0},C_NUMBER_MODE={scope:"number",begin:C_NUMBER_RE,relevance:0},BINARY_NUMBER_MODE={scope:"number",begin:BINARY_NUMBER_RE,relevance:0},REGEXP_MODE={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[BACKSLASH_ESCAPE]}]},TITLE_MODE={scope:"title",begin:IDENT_RE$2,relevance:0},UNDERSCORE_TITLE_MODE={scope:"title",begin:UNDERSCORE_IDENT_RE,relevance:0},METHOD_GUARD={begin:"\\.\\s*"+UNDERSCORE_IDENT_RE,relevance:0},END_SAME_AS_BEGIN=function(en){return Object.assign(en,{"on:begin":(ze,tn)=>{tn.data._beginMatch=ze[1]},"on:end":(ze,tn)=>{tn.data._beginMatch!==ze[1]&&tn.ignoreMatch()}})};var MODES$3=Object.freeze({__proto__:null,APOS_STRING_MODE,BACKSLASH_ESCAPE,BINARY_NUMBER_MODE,BINARY_NUMBER_RE,COMMENT,C_BLOCK_COMMENT_MODE,C_LINE_COMMENT_MODE,C_NUMBER_MODE,C_NUMBER_RE,END_SAME_AS_BEGIN,HASH_COMMENT_MODE,IDENT_RE:IDENT_RE$2,MATCH_NOTHING_RE,METHOD_GUARD,NUMBER_MODE,NUMBER_RE,PHRASAL_WORDS_MODE,QUOTE_STRING_MODE,REGEXP_MODE,RE_STARTERS_RE,SHEBANG,TITLE_MODE,UNDERSCORE_IDENT_RE,UNDERSCORE_TITLE_MODE});function skipIfHasPrecedingDot(en,ze){en.input[en.index-1]==="."&&ze.ignoreMatch()}function scopeClassName(en,ze){en.className!==void 0&&(en.scope=en.className,delete en.className)}function beginKeywords(en,ze){ze&&en.beginKeywords&&(en.begin="\\b("+en.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",en.__beforeBegin=skipIfHasPrecedingDot,en.keywords=en.keywords||en.beginKeywords,delete en.beginKeywords,en.relevance===void 0&&(en.relevance=0))}function compileIllegal(en,ze){Array.isArray(en.illegal)&&(en.illegal=either$1(...en.illegal))}function compileMatch(en,ze){if(en.match){if(en.begin||en.end)throw new Error("begin & end are not supported with match");en.begin=en.match,delete en.match}}function compileRelevance(en,ze){en.relevance===void 0&&(en.relevance=1)}const beforeMatchExt=(en,ze)=>{if(!en.beforeMatch)return;if(en.starts)throw new Error("beforeMatch cannot be used with starts");const tn=Object.assign({},en);Object.keys(en).forEach(nn=>{delete en[nn]}),en.keywords=tn.keywords,en.begin=concat$1(tn.beforeMatch,lookahead$1(tn.begin)),en.starts={relevance:0,contains:[Object.assign(tn,{endsParent:!0})]},en.relevance=0,delete tn.beforeMatch},COMMON_KEYWORDS=["of","and","for","in","not","or","if","then","parent","list","value"],DEFAULT_KEYWORD_SCOPE="keyword";function compileKeywords(en,ze,tn=DEFAULT_KEYWORD_SCOPE){const nn=Object.create(null);return typeof en=="string"?rn(tn,en.split(" ")):Array.isArray(en)?rn(tn,en):Object.keys(en).forEach(function(sn){Object.assign(nn,compileKeywords(en[sn],ze,sn))}),nn;function rn(sn,an){ze&&(an=an.map(ln=>ln.toLowerCase())),an.forEach(function(ln){const cn=ln.split("|");nn[cn[0]]=[sn,scoreForKeyword(cn[0],cn[1])]})}}function scoreForKeyword(en,ze){return ze?Number(ze):commonKeyword(en)?0:1}function commonKeyword(en){return COMMON_KEYWORDS.includes(en.toLowerCase())}const seenDeprecations={},error$1=en=>{console.error(en)},warn=(en,...ze)=>{console.log(`WARN: ${en}`,...ze)},deprecated=(en,ze)=>{seenDeprecations[`${en}/${ze}`]||(console.log(`Deprecated as of ${en}. ${ze}`),seenDeprecations[`${en}/${ze}`]=!0)},MultiClassError=new Error;function remapScopeNames(en,ze,{key:tn}){let nn=0;const rn=en[tn],sn={},an={};for(let ln=1;ln<=ze.length;ln++)an[ln+nn]=rn[ln],sn[ln+nn]=!0,nn+=countMatchGroups(ze[ln-1]);en[tn]=an,en[tn]._emit=sn,en[tn]._multi=!0}function beginMultiClass(en){if(Array.isArray(en.begin)){if(en.skip||en.excludeBegin||en.returnBegin)throw error$1("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),MultiClassError;if(typeof en.beginScope!="object"||en.beginScope===null)throw error$1("beginScope must be object"),MultiClassError;remapScopeNames(en,en.begin,{key:"beginScope"}),en.begin=_rewriteBackreferences(en.begin,{joinWith:""})}}function endMultiClass(en){if(Array.isArray(en.end)){if(en.skip||en.excludeEnd||en.returnEnd)throw error$1("skip, excludeEnd, returnEnd not compatible with endScope: {}"),MultiClassError;if(typeof en.endScope!="object"||en.endScope===null)throw error$1("endScope must be object"),MultiClassError;remapScopeNames(en,en.end,{key:"endScope"}),en.end=_rewriteBackreferences(en.end,{joinWith:""})}}function scopeSugar(en){en.scope&&typeof en.scope=="object"&&en.scope!==null&&(en.beginScope=en.scope,delete en.scope)}function MultiClass(en){scopeSugar(en),typeof en.beginScope=="string"&&(en.beginScope={_wrap:en.beginScope}),typeof en.endScope=="string"&&(en.endScope={_wrap:en.endScope}),beginMultiClass(en),endMultiClass(en)}function compileLanguage(en){function ze(an,ln){return new RegExp(source$1(an),"m"+(en.case_insensitive?"i":"")+(en.unicodeRegex?"u":"")+(ln?"g":""))}class tn{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(ln,cn){cn.position=this.position++,this.matchIndexes[this.matchAt]=cn,this.regexes.push([cn,ln]),this.matchAt+=countMatchGroups(ln)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const ln=this.regexes.map(cn=>cn[1]);this.matcherRe=ze(_rewriteBackreferences(ln,{joinWith:"|"}),!0),this.lastIndex=0}exec(ln){this.matcherRe.lastIndex=this.lastIndex;const cn=this.matcherRe.exec(ln);if(!cn)return null;const un=cn.findIndex((fn,pn)=>pn>0&&fn!==void 0),dn=this.matchIndexes[un];return cn.splice(0,un),Object.assign(cn,dn)}}class nn{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(ln){if(this.multiRegexes[ln])return this.multiRegexes[ln];const cn=new tn;return this.rules.slice(ln).forEach(([un,dn])=>cn.addRule(un,dn)),cn.compile(),this.multiRegexes[ln]=cn,cn}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(ln,cn){this.rules.push([ln,cn]),cn.type==="begin"&&this.count++}exec(ln){const cn=this.getMatcher(this.regexIndex);cn.lastIndex=this.lastIndex;let un=cn.exec(ln);if(this.resumingScanAtSamePosition()&&!(un&&un.index===this.lastIndex)){const dn=this.getMatcher(0);dn.lastIndex=this.lastIndex+1,un=dn.exec(ln)}return un&&(this.regexIndex+=un.position+1,this.regexIndex===this.count&&this.considerAll()),un}}function rn(an){const ln=new nn;return an.contains.forEach(cn=>ln.addRule(cn.begin,{rule:cn,type:"begin"})),an.terminatorEnd&&ln.addRule(an.terminatorEnd,{type:"end"}),an.illegal&&ln.addRule(an.illegal,{type:"illegal"}),ln}function sn(an,ln){const cn=an;if(an.isCompiled)return cn;[scopeClassName,compileMatch,MultiClass,beforeMatchExt].forEach(dn=>dn(an,ln)),en.compilerExtensions.forEach(dn=>dn(an,ln)),an.__beforeBegin=null,[beginKeywords,compileIllegal,compileRelevance].forEach(dn=>dn(an,ln)),an.isCompiled=!0;let un=null;return typeof an.keywords=="object"&&an.keywords.$pattern&&(an.keywords=Object.assign({},an.keywords),un=an.keywords.$pattern,delete an.keywords.$pattern),un=un||/\w+/,an.keywords&&(an.keywords=compileKeywords(an.keywords,en.case_insensitive)),cn.keywordPatternRe=ze(un,!0),ln&&(an.begin||(an.begin=/\B|\b/),cn.beginRe=ze(cn.begin),!an.end&&!an.endsWithParent&&(an.end=/\B|\b/),an.end&&(cn.endRe=ze(cn.end)),cn.terminatorEnd=source$1(cn.end)||"",an.endsWithParent&&ln.terminatorEnd&&(cn.terminatorEnd+=(an.end?"|":"")+ln.terminatorEnd)),an.illegal&&(cn.illegalRe=ze(an.illegal)),an.contains||(an.contains=[]),an.contains=[].concat(...an.contains.map(function(dn){return expandOrCloneMode(dn==="self"?an:dn)})),an.contains.forEach(function(dn){sn(dn,cn)}),an.starts&&sn(an.starts,ln),cn.matcher=rn(cn),cn}if(en.compilerExtensions||(en.compilerExtensions=[]),en.contains&&en.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return en.classNameAliases=inherit$1(en.classNameAliases||{}),sn(en)}function dependencyOnParent(en){return en?en.endsWithParent||dependencyOnParent(en.starts):!1}function expandOrCloneMode(en){return en.variants&&!en.cachedVariants&&(en.cachedVariants=en.variants.map(function(ze){return inherit$1(en,{variants:null},ze)})),en.cachedVariants?en.cachedVariants:dependencyOnParent(en)?inherit$1(en,{starts:en.starts?inherit$1(en.starts):null}):Object.isFrozen(en)?inherit$1(en):en}var version="11.9.0";class HTMLInjectionError extends Error{constructor(ze,tn){super(ze),this.name="HTMLInjectionError",this.html=tn}}const escape=escapeHTML,inherit=inherit$1,NO_MATCH=Symbol("nomatch"),MAX_KEYWORD_HITS=7,HLJS=function(en){const ze=Object.create(null),tn=Object.create(null),nn=[];let rn=!0;const sn="Could not find the language '{}', did you forget to load/include a language module?",an={disableAutodetect:!0,name:"Plain text",contains:[]};let ln={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:TokenTreeEmitter};function cn(Sn){return ln.noHighlightRe.test(Sn)}function un(Sn){let Nn=Sn.className+" ";Nn+=Sn.parentNode?Sn.parentNode.className:"";const Mn=ln.languageDetectRe.exec(Nn);if(Mn){const Dn=xn(Mn[1]);return Dn||(warn(sn.replace("{}",Mn[1])),warn("Falling back to no-highlight mode for this block.",Sn)),Dn?Mn[1]:"no-highlight"}return Nn.split(/\s+/).find(Dn=>cn(Dn)||xn(Dn))}function dn(Sn,Nn,Mn){let Dn="",$n="";typeof Nn=="object"?(Dn=Sn,Mn=Nn.ignoreIllegals,$n=Nn.language):(deprecated("10.7.0","highlight(lang, code, ...args) has been deprecated."),deprecated("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),$n=Sn,Dn=Nn),Mn===void 0&&(Mn=!0);const Vn={code:Dn,language:$n};Un("before:highlight",Vn);const Zn=Vn.result?Vn.result:fn(Vn.language,Vn.code,Mn);return Zn.code=Vn.code,Un("after:highlight",Zn),Zn}function fn(Sn,Nn,Mn,Dn){const $n=Object.create(null);function Vn(yn,In){return yn.keywords[In]}function Zn(){if(!kn.keywords){Kr.addText(Jn);return}let yn=0;kn.keywordPatternRe.lastIndex=0;let In=kn.keywordPatternRe.exec(Jn),Bn="";for(;In;){Bn+=Jn.substring(yn,In.index);const qn=Yr.case_insensitive?In[0].toLowerCase():In[0],Jr=Vn(kn,qn);if(Jr){const[ri,gi]=Jr;if(Kr.addText(Bn),Bn="",$n[qn]=($n[qn]||0)+1,$n[qn]<=MAX_KEYWORD_HITS&&(ai+=gi),ri.startsWith("_"))Bn+=In[0];else{const mi=Yr.classNameAliases[ri]||ri;Wr(In[0],mi)}}else Bn+=In[0];yn=kn.keywordPatternRe.lastIndex,In=kn.keywordPatternRe.exec(Jn)}Bn+=Jn.substring(yn),Kr.addText(Bn)}function Qn(){if(Jn==="")return;let yn=null;if(typeof kn.subLanguage=="string"){if(!ze[kn.subLanguage]){Kr.addText(Jn);return}yn=fn(kn.subLanguage,Jn,!0,jn[kn.subLanguage]),jn[kn.subLanguage]=yn._top}else yn=hn(Jn,kn.subLanguage.length?kn.subLanguage:null);kn.relevance>0&&(ai+=yn.relevance),Kr.__addSublanguage(yn._emitter,yn.language)}function Wn(){kn.subLanguage!=null?Qn():Zn(),Jn=""}function Wr(yn,In){yn!==""&&(Kr.startScope(In),Kr.addText(yn),Kr.endScope())}function si(yn,In){let Bn=1;const qn=In.length-1;for(;Bn<=qn;){if(!yn._emit[Bn]){Bn++;continue}const Jr=Yr.classNameAliases[yn[Bn]]||yn[Bn],ri=In[Bn];Jr?Wr(ri,Jr):(Jn=ri,Zn(),Jn=""),Bn++}}function ti(yn,In){return yn.scope&&typeof yn.scope=="string"&&Kr.openNode(Yr.classNameAliases[yn.scope]||yn.scope),yn.beginScope&&(yn.beginScope._wrap?(Wr(Jn,Yr.classNameAliases[yn.beginScope._wrap]||yn.beginScope._wrap),Jn=""):yn.beginScope._multi&&(si(yn.beginScope,In),Jn="")),kn=Object.create(yn,{parent:{value:kn}}),kn}function Qr(yn,In,Bn){let qn=startsWith(yn.endRe,Bn);if(qn){if(yn["on:end"]){const Jr=new Response(yn);yn["on:end"](In,Jr),Jr.isMatchIgnored&&(qn=!1)}if(qn){for(;yn.endsParent&&yn.parent;)yn=yn.parent;return yn}}if(yn.endsWithParent)return Qr(yn.parent,In,Bn)}function li(yn){return kn.matcher.regexIndex===0?(Jn+=yn[0],1):(Ln=!0,0)}function oi(yn){const In=yn[0],Bn=yn.rule,qn=new Response(Bn),Jr=[Bn.__beforeBegin,Bn["on:begin"]];for(const ri of Jr)if(ri&&(ri(yn,qn),qn.isMatchIgnored))return li(In);return Bn.skip?Jn+=In:(Bn.excludeBegin&&(Jn+=In),Wn(),!Bn.returnBegin&&!Bn.excludeBegin&&(Jn=In)),ti(Bn,yn),Bn.returnBegin?0:In.length}function ii(yn){const In=yn[0],Bn=Nn.substring(yn.index),qn=Qr(kn,yn,Bn);if(!qn)return NO_MATCH;const Jr=kn;kn.endScope&&kn.endScope._wrap?(Wn(),Wr(In,kn.endScope._wrap)):kn.endScope&&kn.endScope._multi?(Wn(),si(kn.endScope,yn)):Jr.skip?Jn+=In:(Jr.returnEnd||Jr.excludeEnd||(Jn+=In),Wn(),Jr.excludeEnd&&(Jn=In));do kn.scope&&Kr.closeNode(),!kn.skip&&!kn.subLanguage&&(ai+=kn.relevance),kn=kn.parent;while(kn!==qn.parent);return qn.starts&&ti(qn.starts,yn),Jr.returnEnd?0:In.length}function Gn(){const yn=[];for(let In=kn;In!==Yr;In=In.parent)In.scope&&yn.unshift(In.scope);yn.forEach(In=>Kr.openNode(In))}let Gr={};function ei(yn,In){const Bn=In&&In[0];if(Jn+=yn,Bn==null)return Wn(),0;if(Gr.type==="begin"&&In.type==="end"&&Gr.index===In.index&&Bn===""){if(Jn+=Nn.slice(In.index,In.index+1),!rn){const qn=new Error(`0 width match regex (${Sn})`);throw qn.languageName=Sn,qn.badRule=Gr.rule,qn}return 1}if(Gr=In,In.type==="begin")return oi(In);if(In.type==="illegal"&&!Mn){const qn=new Error('Illegal lexeme "'+Bn+'" for mode "'+(kn.scope||"<unnamed>")+'"');throw qn.mode=kn,qn}else if(In.type==="end"){const qn=ii(In);if(qn!==NO_MATCH)return qn}if(In.type==="illegal"&&Bn==="")return 1;if(vn>1e5&&vn>In.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Jn+=Bn,Bn.length}const Yr=xn(Sn);if(!Yr)throw error$1(sn.replace("{}",Sn)),new Error('Unknown language: "'+Sn+'"');const Pn=compileLanguage(Yr);let Zr="",kn=Dn||Pn;const jn={},Kr=new ln.__emitter(ln);Gn();let Jn="",ai=0,ni=0,vn=0,Ln=!1;try{if(Yr.__emitTokens)Yr.__emitTokens(Nn,Kr);else{for(kn.matcher.considerAll();;){vn++,Ln?Ln=!1:kn.matcher.considerAll(),kn.matcher.lastIndex=ni;const yn=kn.matcher.exec(Nn);if(!yn)break;const In=Nn.substring(ni,yn.index),Bn=ei(In,yn);ni=yn.index+Bn}ei(Nn.substring(ni))}return Kr.finalize(),Zr=Kr.toHTML(),{language:Sn,value:Zr,relevance:ai,illegal:!1,_emitter:Kr,_top:kn}}catch(yn){if(yn.message&&yn.message.includes("Illegal"))return{language:Sn,value:escape(Nn),illegal:!0,relevance:0,_illegalBy:{message:yn.message,index:ni,context:Nn.slice(ni-100,ni+100),mode:yn.mode,resultSoFar:Zr},_emitter:Kr};if(rn)return{language:Sn,value:escape(Nn),illegal:!1,relevance:0,errorRaised:yn,_emitter:Kr,_top:kn};throw yn}}function pn(Sn){const Nn={value:escape(Sn),illegal:!1,relevance:0,_top:an,_emitter:new ln.__emitter(ln)};return Nn._emitter.addText(Sn),Nn}function hn(Sn,Nn){Nn=Nn||ln.languages||Object.keys(ze);const Mn=pn(Sn),Dn=Nn.filter(xn).filter(Hn).map(Wn=>fn(Wn,Sn,!1));Dn.unshift(Mn);const $n=Dn.sort((Wn,Wr)=>{if(Wn.relevance!==Wr.relevance)return Wr.relevance-Wn.relevance;if(Wn.language&&Wr.language){if(xn(Wn.language).supersetOf===Wr.language)return 1;if(xn(Wr.language).supersetOf===Wn.language)return-1}return 0}),[Vn,Zn]=$n,Qn=Vn;return Qn.secondBest=Zn,Qn}function gn(Sn,Nn,Mn){const Dn=Nn&&tn[Nn]||Mn;Sn.classList.add("hljs"),Sn.classList.add(`language-${Dn}`)}function En(Sn){let Nn=null;const Mn=un(Sn);if(cn(Mn))return;if(Un("before:highlightElement",{el:Sn,language:Mn}),Sn.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",Sn);return}if(Sn.children.length>0&&(ln.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(Sn)),ln.throwUnescapedHTML))throw new HTMLInjectionError("One of your code blocks includes unescaped HTML.",Sn.innerHTML);Nn=Sn;const Dn=Nn.textContent,$n=Mn?dn(Dn,{language:Mn,ignoreIllegals:!0}):hn(Dn);Sn.innerHTML=$n.value,Sn.dataset.highlighted="yes",gn(Sn,Mn,$n.language),Sn.result={language:$n.language,re:$n.relevance,relevance:$n.relevance},$n.secondBest&&(Sn.secondBest={language:$n.secondBest.language,relevance:$n.secondBest.relevance}),Un("after:highlightElement",{el:Sn,result:$n,text:Dn})}function mn(Sn){ln=inherit(ln,Sn)}const bn=()=>{An(),deprecated("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Tn(){An(),deprecated("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let _n=!1;function An(){if(document.readyState==="loading"){_n=!0;return}document.querySelectorAll(ln.cssSelector).forEach(En)}function Rn(){_n&&An()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",Rn,!1);function Cn(Sn,Nn){let Mn=null;try{Mn=Nn(en)}catch(Dn){if(error$1("Language definition for '{}' could not be registered.".replace("{}",Sn)),rn)error$1(Dn);else throw Dn;Mn=an}Mn.name||(Mn.name=Sn),ze[Sn]=Mn,Mn.rawDefinition=Nn.bind(null,en),Mn.aliases&&zn(Mn.aliases,{languageName:Sn})}function wn(Sn){delete ze[Sn];for(const Nn of Object.keys(tn))tn[Nn]===Sn&&delete tn[Nn]}function Fn(){return Object.keys(ze)}function xn(Sn){return Sn=(Sn||"").toLowerCase(),ze[Sn]||ze[tn[Sn]]}function zn(Sn,{languageName:Nn}){typeof Sn=="string"&&(Sn=[Sn]),Sn.forEach(Mn=>{tn[Mn.toLowerCase()]=Nn})}function Hn(Sn){const Nn=xn(Sn);return Nn&&!Nn.disableAutodetect}function Yn(Sn){Sn["before:highlightBlock"]&&!Sn["before:highlightElement"]&&(Sn["before:highlightElement"]=Nn=>{Sn["before:highlightBlock"](Object.assign({block:Nn.el},Nn))}),Sn["after:highlightBlock"]&&!Sn["after:highlightElement"]&&(Sn["after:highlightElement"]=Nn=>{Sn["after:highlightBlock"](Object.assign({block:Nn.el},Nn))})}function Xn(Sn){Yn(Sn),nn.push(Sn)}function Kn(Sn){const Nn=nn.indexOf(Sn);Nn!==-1&&nn.splice(Nn,1)}function Un(Sn,Nn){const Mn=Sn;nn.forEach(function(Dn){Dn[Mn]&&Dn[Mn](Nn)})}function On(Sn){return deprecated("10.7.0","highlightBlock will be removed entirely in v12.0"),deprecated("10.7.0","Please use highlightElement now."),En(Sn)}Object.assign(en,{highlight:dn,highlightAuto:hn,highlightAll:An,highlightElement:En,highlightBlock:On,configure:mn,initHighlighting:bn,initHighlightingOnLoad:Tn,registerLanguage:Cn,unregisterLanguage:wn,listLanguages:Fn,getLanguage:xn,registerAliases:zn,autoDetection:Hn,inherit,addPlugin:Xn,removePlugin:Kn}),en.debugMode=function(){rn=!1},en.safeMode=function(){rn=!0},en.versionString=version,en.regex={concat:concat$1,lookahead:lookahead$1,either:either$1,optional,anyNumberOfTimes};for(const Sn in MODES$3)typeof MODES$3[Sn]=="object"&&deepFreeze(MODES$3[Sn]);return Object.assign(en,MODES$3),en},highlight=HLJS({});highlight.newInstance=()=>HLJS({});var core=highlight;highlight.HighlightJS=highlight;highlight.default=highlight;const HighlightJS=getDefaultExportFromCjs(core);Extension.create({name:"cursorPosition",addProseMirrorPlugins(){return[new Plugin({view:en=>{const ze=()=>{const{from:tn,to:nn}=en.state.selection;console.log(`Cursor from: ${tn}, to: ${nn}`)};return ze(),{update:(tn,nn)=>{tn.state.selection!==nn.selection&&ze()}}}})]}});const DynamicCharInsertionExtension=Extension.create({name:"dynamicCharInsertion",addOptions(){return{char:""}},addCommands(){return{setChar:en=>({commands:ze})=>ze.insertContent(en)}}});Extension.create({name:"codeCheck",addProseMirrorPlugins(){return[new Plugin({view:()=>({update:(en,ze)=>{const tn=()=>{const{state:nn}=en,{selection:rn}=nn,{$anchor:sn}=rn,an=sn.parent.type.name==="codeBlock";an?console.log("Within code block: ",an):console.log("Within code block: ",!1)};(en.state.doc!==ze.doc||en.state.selection!==ze.selection)&&tn()}})})]}});Extension.create({name:"inlineCodeCheck",addProseMirrorPlugins(){return[new Plugin({view:()=>({update:(en,ze)=>{const{state:tn}=en,{selection:nn}=tn,{$from:rn}=nn,sn=rn.marks().some(ln=>ln.type.name==="code"),an=rn.node(rn.depth).type.name==="codeBlock";console.log("Within inline code: ",sn&&!an)}})})]}});Extension.create({name:"inlineCodeTransform",addGlobalAttributes(){return[{types:["textStyle"],attributes:{inlineCodeTransform:{default:null,parseHTML:en=>({inlineCodeTransform:en.getAttribute("data-inline-code-transform")}),renderHTML:en=>en.inlineCodeTransform?{"data-inline-code-transform":en.inlineCodeTransform}:{}}}}]},addCommands(){return{transformInlineCode:()=>({state:en,dispatch:ze,commands:tn})=>{const{tr:nn}=en;let rn=!1;return en.doc.descendants((sn,an)=>{if(sn.isText&&sn.marks.some(ln=>ln.type.name==="code")){const ln=HighlightJS.highlightAuto(sn.text).value,cn=en.schema.text(ln,[en.schema.marks.code.create()]);console.log("new content: ",ln);const un=nn.doc.resolve(an),dn=nn.doc.resolve(an+sn.nodeSize);nn.setSelection(new TextSelection(un,dn)),nn.replaceWith(un.pos,dn.pos,cn),rn=!0}}),rn?(ze(nn),!0):!1}}}});Extension.create({name:"highlightCode",addDecorations(){return({doc:en,tr:ze})=>{const tn=[],nn=(rn,sn)=>{if(rn.isText&&rn.marks.some(an=>an.type.name==="code")){const an=HighlightJS.highlightAuto(rn.text).value,ln=document.createElement("span");console.log("decoration: ",an),ln.innerHTML=an,tn.push(ze.doc.type.schema.marks.code.create({},ln))}};return en.descendants(nn),tn}}});Extension.create({name:"testPluggin",addProseMirrorPlugins(){const en=new PluginKey("testPluggin");return[new Plugin({key:en,state:{init(ze,{doc:tn}){return DecorationSet.empty},apply:(ze,tn)=>{if(ze.selectionSet){const{selection:nn}=ze,{$head:rn}=nn,sn=rn.before(rn.depth),an=rn.node(rn.depth);if(an.type.name==="paragraph"){const ln=Decoration.node(sn,sn+an.nodeSize,{style:"background: yellow"});tn=DecorationSet.create(ze.doc,[ln])}else tn=DecorationSet.empty}else tn=tn.map(ze.mapping,ze.doc);return tn}},props:{decorations(ze){return en.getState(ze)}}})]}});function getHighlightNodes$1(en){return en.value||en.children||[]}function parseNodes$1(en,ze=[]){return en.map(tn=>{const nn=[...ze,...tn.properties?tn.properties.className:[]];return tn.children?parseNodes$1(tn.children,nn):{text:tn.value,classes:nn}}).flat()}function getDecorations$1({doc:en,lowlight:ze,defaultLanguage:tn}){const nn=[];return findInlineCode$1(en,"code").forEach(rn=>{let sn=rn.from;rn.to,rn.node.attrs.language,ze.listLanguages();const an=getHighlightNodes$1(ze.highlightAuto(rn.text));console.log("----text",rn.text,an),console.log("-----------------",an.length,an),parseNodes$1(an).forEach(ln=>{if(console.log("------node-----",ln,ln.classes),ln.classes.length){const cn=Decoration.inline(sn,sn+ln.text.length,{class:ln.classes.join(" ")});nn.push(cn)}sn+=ln.text.length})}),DecorationSet.create(en,nn)}function findInlineCode$1(en,ze){const tn=[];return en.descendants((nn,rn)=>{if(!nn.isText)return!0;nn.marks.forEach(sn=>{sn.type.name===ze&&tn.push({from:rn,to:rn+nn.nodeSize,text:nn.text,node:sn})})}),tn}Extension.create({name:"testPluggin",addProseMirrorPlugins(){const en=new PluginKey("testPluggin");return[new Plugin({key:en,state:{init(ze,{doc:tn}){return DecorationSet.empty},apply(ze,tn,nn,rn){nn.selection.$head.parent.type.name,rn.selection.$head.parent.type.name;const sn=findInlineCode$1(nn.doc,"code"),an=findInlineCode$1(rn.doc,"code");return console.log("oldNodes",sn),console.log("newNodes",an),console.log("include",an.length!==sn.length),ze.docChanged&&(an.length!==sn.length||ze.steps.some(ln=>(console.log("changed"),ln.from!==void 0&&ln.to!==void 0&&sn.some(cn=>ln.from>=cn.from&&ln.to<=cn.to))))?(console.log("return decoration"),getDecorations$1({doc:ze.doc,name:"code",lowlight,defaultLanguage:""})):tn.map(ze.mapping,ze.doc)}},props:{decorations(ze){return en.getState(ze)}}})]}});const CODE_MARK_TYPE="code";function getHighlightNodes(en){return en.value||en.children||[]}function parseNodes(en,ze=[]){return en.map(tn=>{const nn=[...ze,...tn.properties?tn.properties.className:[]];return tn.children?parseNodes(tn.children,nn):{text:tn.value,classes:nn}}).flat()}function getDecorations({doc:en,name:ze,lowlight:tn}){const nn=[];return findInlineCode(en,ze).forEach(rn=>{let sn=rn.from;const an=getHighlightNodes(tn.highlightAuto(rn.text));parseNodes(an).forEach(ln=>{const cn=sn+ln.text.length;if(ln.classes.length){const un=Decoration.inline(sn,cn,{class:ln.classes.join(" ")});nn.push(un)}sn=cn})}),DecorationSet.create(en,nn)}function findInlineCode(en,ze){const tn=[];return en.descendants((nn,rn)=>{if(!nn.isText)return!0;nn.marks.forEach(sn=>{sn.type.name===ze&&tn.push({from:rn,to:rn+nn.nodeSize,text:nn.text})})}),tn}function isFunction(en){return typeof en=="function"}function validateLowlight(en){return["highlight","highlightAuto","listLanguages"].every(tn=>isFunction(en[tn]))}const CodeInlineLowlight=Extension.create({name:"codeInlineLowlight",addOptions(){return{lowlight:{}}},addProseMirrorPlugins(){if(!validateLowlight(this.options.lowlight))return console.warn("You should provide an instance of lowlight to use the @nartix/tiptap-code-inline-highlight extension. No syntax highlighting is applied."),[];const en=new PluginKey(this.name);return[new Plugin({key:en,state:{init:(ze,{doc:tn})=>getDecorations({doc:tn,name:CODE_MARK_TYPE,lowlight:this.options.lowlight}),apply:(ze,tn,nn,rn)=>{const sn=findInlineCode(nn.doc,CODE_MARK_TYPE),an=findInlineCode(rn.doc,CODE_MARK_TYPE);return ze.docChanged&&(an.length!==sn.length||ze.steps.some(ln=>ln.from!==void 0&&ln.to!==void 0&&sn.some(cn=>ln.from>=cn.from&&ln.to<=cn.to)))?getDecorations({doc:ze.doc,name:CODE_MARK_TYPE,lowlight:this.options.lowlight}):tn.map(ze.mapping,ze.doc)}},props:{decorations(ze){return en.getState(ze)}}})]}}),IDENT_RE$1="[A-Za-z$_][0-9A-Za-z$_]*",KEYWORDS$1=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],LITERALS$1=["true","false","null","undefined","NaN","Infinity"],TYPES$1=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ERROR_TYPES$1=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],BUILT_IN_GLOBALS$1=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],BUILT_IN_VARIABLES$1=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],BUILT_INS$1=[].concat(BUILT_IN_GLOBALS$1,TYPES$1,ERROR_TYPES$1);function javascript$1(en){const ze=en.regex,tn=(Nn,{after:Mn})=>{const Dn="</"+Nn[0].slice(1);return Nn.input.indexOf(Dn,Mn)!==-1},nn=IDENT_RE$1,rn={begin:"<>",end:"</>"},sn=/<[A-Za-z0-9\\._:-]+\s*\/>/,an={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(Nn,Mn)=>{const Dn=Nn[0].length+Nn.index,$n=Nn.input[Dn];if($n==="<"||$n===","){Mn.ignoreMatch();return}$n===">"&&(tn(Nn,{after:Dn})||Mn.ignoreMatch());let Vn;const Zn=Nn.input.substring(Dn);if(Vn=Zn.match(/^\s*=/)){Mn.ignoreMatch();return}if((Vn=Zn.match(/^\s+extends\s+/))&&Vn.index===0){Mn.ignoreMatch();return}}},ln={$pattern:IDENT_RE$1,keyword:KEYWORDS$1,literal:LITERALS$1,built_in:BUILT_INS$1,"variable.language":BUILT_IN_VARIABLES$1},cn="[0-9](_?[0-9])*",un=`\\.(${cn})`,dn="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",fn={className:"number",variants:[{begin:`(\\b(${dn})((${un})|\\.)?|(${un}))[eE][+-]?(${cn})\\b`},{begin:`\\b(${dn})\\b((${un})\\b|\\.)?|(${un})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},pn={className:"subst",begin:"\\$\\{",end:"\\}",keywords:ln,contains:[]},hn={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[en.BACKSLASH_ESCAPE,pn],subLanguage:"xml"}},gn={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[en.BACKSLASH_ESCAPE,pn],subLanguage:"css"}},En={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[en.BACKSLASH_ESCAPE,pn],subLanguage:"graphql"}},mn={className:"string",begin:"`",end:"`",contains:[en.BACKSLASH_ESCAPE,pn]},Tn={className:"comment",variants:[en.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:nn+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),en.C_BLOCK_COMMENT_MODE,en.C_LINE_COMMENT_MODE]},_n=[en.APOS_STRING_MODE,en.QUOTE_STRING_MODE,hn,gn,En,mn,{match:/\$\d+/},fn];pn.contains=_n.concat({begin:/\{/,end:/\}/,keywords:ln,contains:["self"].concat(_n)});const An=[].concat(Tn,pn.contains),Rn=An.concat([{begin:/\(/,end:/\)/,keywords:ln,contains:["self"].concat(An)}]),Cn={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:ln,contains:Rn},wn={variants:[{match:[/class/,/\s+/,nn,/\s+/,/extends/,/\s+/,ze.concat(nn,"(",ze.concat(/\./,nn),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,nn],scope:{1:"keyword",3:"title.class"}}]},Fn={relevance:0,match:ze.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...TYPES$1,...ERROR_TYPES$1]}},xn={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},zn={variants:[{match:[/function/,/\s+/,nn,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[Cn],illegal:/%/},Hn={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function Yn(Nn){return ze.concat("(?!",Nn.join("|"),")")}const Xn={match:ze.concat(/\b/,Yn([...BUILT_IN_GLOBALS$1,"super","import"]),nn,ze.lookahead(/\(/)),className:"title.function",relevance:0},Kn={begin:ze.concat(/\./,ze.lookahead(ze.concat(nn,/(?![0-9A-Za-z$_(])/))),end:nn,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Un={match:[/get|set/,/\s+/,nn,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},Cn]},On="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+en.UNDERSCORE_IDENT_RE+")\\s*=>",Sn={match:[/const|var|let/,/\s+/,nn,/\s*/,/=\s*/,/(async\s*)?/,ze.lookahead(On)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[Cn]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:ln,exports:{PARAMS_CONTAINS:Rn,CLASS_REFERENCE:Fn},illegal:/#(?![$_A-z])/,contains:[en.SHEBANG({label:"shebang",binary:"node",relevance:5}),xn,en.APOS_STRING_MODE,en.QUOTE_STRING_MODE,hn,gn,En,mn,Tn,{match:/\$\d+/},fn,Fn,{className:"attr",begin:nn+ze.lookahead(":"),relevance:0},Sn,{begin:"("+en.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[Tn,en.REGEXP_MODE,{className:"function",begin:On,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:en.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:ln,contains:Rn}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:rn.begin,end:rn.end},{match:sn},{begin:an.begin,"on:begin":an.isTrulyOpeningTag,end:an.end}],subLanguage:"xml",contains:[{begin:an.begin,end:an.end,skip:!0,contains:["self"]}]}]},zn,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+en.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[Cn,en.inherit(en.TITLE_MODE,{begin:nn,className:"title.function"})]},{match:/\.\.\./,relevance:0},Kn,{match:"\\$"+nn,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[Cn]},Xn,Hn,wn,Un,{match:/\$[(.]/}]}}function python(en){const ze=en.regex,tn=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),nn=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],ln={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:nn,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},cn={className:"meta",begin:/^(>>>|\.\.\.) /},un={className:"subst",begin:/\{/,end:/\}/,keywords:ln,illegal:/#/},dn={begin:/\{\{/,relevance:0},fn={className:"string",contains:[en.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[en.BACKSLASH_ESCAPE,cn],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[en.BACKSLASH_ESCAPE,cn],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[en.BACKSLASH_ESCAPE,cn,dn,un]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[en.BACKSLASH_ESCAPE,cn,dn,un]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[en.BACKSLASH_ESCAPE,dn,un]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[en.BACKSLASH_ESCAPE,dn,un]},en.APOS_STRING_MODE,en.QUOTE_STRING_MODE]},pn="[0-9](_?[0-9])*",hn=`(\\b(${pn}))?\\.(${pn})|\\b(${pn})\\.`,gn=`\\b|${nn.join("|")}`,En={className:"number",relevance:0,variants:[{begin:`(\\b(${pn})|(${hn}))[eE][+-]?(${pn})[jJ]?(?=${gn})`},{begin:`(${hn})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${gn})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${gn})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${gn})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${gn})`},{begin:`\\b(${pn})[jJ](?=${gn})`}]},mn={className:"comment",begin:ze.lookahead(/# type:/),end:/$/,keywords:ln,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},bn={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:ln,contains:["self",cn,En,fn,en.HASH_COMMENT_MODE]}]};return un.contains=[fn,En,cn],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:ln,illegal:/(<\/|\?)|=>/,contains:[cn,En,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},fn,mn,en.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,tn],scope:{1:"keyword",3:"title.function"},contains:[bn]},{variants:[{match:[/\bclass/,/\s+/,tn,/\s*/,/\(\s*/,tn,/\s*\)/]},{match:[/\bclass/,/\s+/,tn]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[En,bn,fn]}]}}function xml(en){const ze=en.regex,tn=ze.concat(/[\p{L}_]/u,ze.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),nn=/[\p{L}0-9._:-]+/u,rn={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},sn={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},an=en.inherit(sn,{begin:/\(/,end:/\)/}),ln=en.inherit(en.APOS_STRING_MODE,{className:"string"}),cn=en.inherit(en.QUOTE_STRING_MODE,{className:"string"}),un={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:nn,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[rn]},{begin:/'/,end:/'/,contains:[rn]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[sn,cn,ln,an,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[sn,an,cn,ln]}]}]},en.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},rn,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[cn]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[un],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[un],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:ze.concat(/</,ze.lookahead(ze.concat(tn,ze.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:tn,relevance:0,starts:un}]},{className:"tag",begin:ze.concat(/<\//,ze.lookahead(ze.concat(tn,/>/))),contains:[{className:"name",begin:tn,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}const MODES$2=en=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:en.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[en.APOS_STRING_MODE,en.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:en.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),TAGS$2=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES$2=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES$2=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS$2=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES$2=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function css(en){const ze=en.regex,tn=MODES$2(en),nn={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},rn="and or not only",sn=/@-?\w[\w]*(-\w+)*/,an="[a-zA-Z-][a-zA-Z0-9_-]*",ln=[en.APOS_STRING_MODE,en.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[tn.BLOCK_COMMENT,nn,tn.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+an,relevance:0},tn.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+PSEUDO_CLASSES$2.join("|")+")"},{begin:":(:)?("+PSEUDO_ELEMENTS$2.join("|")+")"}]},tn.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES$2.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[tn.BLOCK_COMMENT,tn.HEXCOLOR,tn.IMPORTANT,tn.CSS_NUMBER_MODE,...ln,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...ln,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},tn.FUNCTION_DISPATCH]},{begin:ze.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:sn},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:rn,attribute:MEDIA_FEATURES$2.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...ln,tn.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+TAGS$2.join("|")+")\\b"}]}}var decimalDigits$1="[0-9](_*[0-9])*",frac$1=`\\.(${decimalDigits$1})`,hexDigits$1="[0-9a-fA-F](_*[0-9a-fA-F])*",NUMERIC$1={className:"number",variants:[{begin:`(\\b(${decimalDigits$1})((${frac$1})|\\.)?|(${frac$1}))[eE][+-]?(${decimalDigits$1})[fFdD]?\\b`},{begin:`\\b(${decimalDigits$1})((${frac$1})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${frac$1})[fFdD]?\\b`},{begin:`\\b(${decimalDigits$1})[fFdD]\\b`},{begin:`\\b0[xX]((${hexDigits$1})\\.?|(${hexDigits$1})?\\.(${hexDigits$1}))[pP][+-]?(${decimalDigits$1})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${hexDigits$1})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function recurRegex(en,ze,tn){return tn===-1?"":en.replace(ze,nn=>recurRegex(en,ze,tn-1))}function java(en){const ze=en.regex,tn="[-a-zA-Z_$][-a-zA-Z_$0-9]*",nn=tn+recurRegex("(?:<"+tn+"~~~(?:\\s*,\\s*"+tn+"~~~)*>)?",/~~~/g,2),cn={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},un={className:"meta",begin:"@"+tn,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},dn={className:"params",begin:/\(/,end:/\)/,keywords:cn,relevance:0,contains:[en.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:cn,illegal:/<\/|#/,contains:[en.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[en.BACKSLASH_ESCAPE]},en.APOS_STRING_MODE,en.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,tn],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[ze.concat(/(?!else)/,tn),/\s+/,tn,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,tn],className:{1:"keyword",3:"title.class"},contains:[dn,en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+nn+"\\s+)",en.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:cn,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:cn,relevance:0,contains:[un,en.APOS_STRING_MODE,en.QUOTE_STRING_MODE,NUMERIC$1,en.C_BLOCK_COMMENT_MODE]},en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE]},NUMERIC$1,un]}}function ruby(en){const ze=en.regex,tn="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",nn=ze.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),rn=ze.concat(nn,/(::\w+)*/),an={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},ln={className:"doctag",begin:"@[A-Za-z]+"},cn={begin:"#<",end:">"},un=[en.COMMENT("#","$",{contains:[ln]}),en.COMMENT("^=begin","^=end",{contains:[ln],relevance:10}),en.COMMENT("^__END__",en.MATCH_NOTHING_RE)],dn={className:"subst",begin:/#\{/,end:/\}/,keywords:an},fn={className:"string",contains:[en.BACKSLASH_ESCAPE,dn],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:ze.concat(/<<[-~]?'?/,ze.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[en.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[en.BACKSLASH_ESCAPE,dn]})]}]},pn="[1-9](_?[0-9])*|0",hn="[0-9](_?[0-9])*",gn={className:"number",relevance:0,variants:[{begin:`\\b(${pn})(\\.(${hn}))?([eE][+-]?(${hn})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},En={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:an}]},Cn=[fn,{variants:[{match:[/class\s+/,rn,/\s+<\s+/,rn]},{match:[/\b(class|module)\s+/,rn]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:an},{match:[/(include|extend)\s+/,rn],scope:{2:"title.class"},keywords:an},{relevance:0,match:[rn,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:nn,scope:"title.class"},{match:[/def/,/\s+/,tn],scope:{1:"keyword",3:"title.function"},contains:[En]},{begin:en.IDENT_RE+"::"},{className:"symbol",begin:en.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[fn,{begin:tn}],relevance:0},gn,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:an},{begin:"("+en.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[en.BACKSLASH_ESCAPE,dn],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(cn,un),relevance:0}].concat(cn,un);dn.contains=Cn,En.contains=Cn;const zn=[{begin:/^\s*=>/,starts:{end:"$",contains:Cn}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:an,contains:Cn}}];return un.unshift(cn),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:an,illegal:/\/\*/,contains:[en.SHEBANG({binary:"ruby"})].concat(zn).concat(un).concat(Cn)}}function php(en){const ze=en.regex,tn=/(?![A-Za-z0-9])(?![$])/,nn=ze.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,tn),rn=ze.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,tn),sn={scope:"variable",match:"\\$+"+nn},an={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},ln={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},cn=en.inherit(en.APOS_STRING_MODE,{illegal:null}),un=en.inherit(en.QUOTE_STRING_MODE,{illegal:null,contains:en.QUOTE_STRING_MODE.contains.concat(ln)}),dn={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:en.QUOTE_STRING_MODE.contains.concat(ln),"on:begin":(Xn,Kn)=>{Kn.data._beginMatch=Xn[1]||Xn[2]},"on:end":(Xn,Kn)=>{Kn.data._beginMatch!==Xn[1]&&Kn.ignoreMatch()}},fn=en.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),pn=`[ 	
]`,hn={scope:"string",variants:[un,cn,dn,fn]},gn={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},En=["false","null","true"],mn=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],bn=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],_n={keyword:mn,literal:(Xn=>{const Kn=[];return Xn.forEach(Un=>{Kn.push(Un),Un.toLowerCase()===Un?Kn.push(Un.toUpperCase()):Kn.push(Un.toLowerCase())}),Kn})(En),built_in:bn},An=Xn=>Xn.map(Kn=>Kn.replace(/\|\d+$/,"")),Rn={variants:[{match:[/new/,ze.concat(pn,"+"),ze.concat("(?!",An(bn).join("\\b|"),"\\b)"),rn],scope:{1:"keyword",4:"title.class"}}]},Cn=ze.concat(nn,"\\b(?!\\()"),wn={variants:[{match:[ze.concat(/::/,ze.lookahead(/(?!class\b)/)),Cn],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[rn,ze.concat(/::/,ze.lookahead(/(?!class\b)/)),Cn],scope:{1:"title.class",3:"variable.constant"}},{match:[rn,ze.concat("::",ze.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[rn,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},Fn={scope:"attr",match:ze.concat(nn,ze.lookahead(":"),ze.lookahead(/(?!::)/))},xn={relevance:0,begin:/\(/,end:/\)/,keywords:_n,contains:[Fn,sn,wn,en.C_BLOCK_COMMENT_MODE,hn,gn,Rn]},zn={relevance:0,match:[/\b/,ze.concat("(?!fn\\b|function\\b|",An(mn).join("\\b|"),"|",An(bn).join("\\b|"),"\\b)"),nn,ze.concat(pn,"*"),ze.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[xn]};xn.contains.push(zn);const Hn=[Fn,wn,en.C_BLOCK_COMMENT_MODE,hn,gn,Rn],Yn={begin:ze.concat(/#\[\s*/,rn),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:En,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:En,keyword:["new","array"]},contains:["self",...Hn]},...Hn,{scope:"meta",match:rn}]};return{case_insensitive:!1,keywords:_n,contains:[Yn,en.HASH_COMMENT_MODE,en.COMMENT("//","$"),en.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:en.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},an,{scope:"variable.language",match:/\$this\b/},sn,zn,wn,{match:[/const/,/\s/,nn],scope:{1:"keyword",3:"variable.constant"}},Rn,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},en.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:_n,contains:["self",sn,wn,en.C_BLOCK_COMMENT_MODE,hn,gn]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},en.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[en.inherit(en.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},en.UNDERSCORE_TITLE_MODE]},hn,gn]}}function c(en){const ze=en.regex,tn=en.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),nn="decltype\\(auto\\)",rn="[a-zA-Z_]\\w*::",an="("+nn+"|"+ze.optional(rn)+"[a-zA-Z_]\\w*"+ze.optional("<[^<>]+>")+")",ln={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},un={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[en.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},en.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},dn={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},fn={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},en.inherit(un,{className:"string"}),{className:"string",begin:/<.*?>/},tn,en.C_BLOCK_COMMENT_MODE]},pn={className:"title",begin:ze.optional(rn)+en.IDENT_RE,relevance:0},hn=ze.optional(rn)+en.IDENT_RE+"\\s*\\(",mn={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal128","const","static","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},bn=[fn,ln,tn,en.C_BLOCK_COMMENT_MODE,dn,un],Tn={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:mn,contains:bn.concat([{begin:/\(/,end:/\)/,keywords:mn,contains:bn.concat(["self"]),relevance:0}]),relevance:0},_n={begin:"("+an+"[\\*&\\s]+)+"+hn,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:mn,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:nn,keywords:mn,relevance:0},{begin:hn,returnBegin:!0,contains:[en.inherit(pn,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:mn,relevance:0,contains:[tn,en.C_BLOCK_COMMENT_MODE,un,dn,ln,{begin:/\(/,end:/\)/,keywords:mn,relevance:0,contains:["self",tn,en.C_BLOCK_COMMENT_MODE,un,dn,ln]}]},ln,tn,en.C_BLOCK_COMMENT_MODE,fn]};return{name:"C",aliases:["h"],keywords:mn,disableAutodetect:!0,illegal:"</",contains:[].concat(Tn,_n,bn,[fn,{begin:en.IDENT_RE+"::",keywords:mn},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},en.TITLE_MODE]}]),exports:{preprocessor:fn,strings:un,keywords:mn}}}function cpp(en){const ze=en.regex,tn=en.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),nn="decltype\\(auto\\)",rn="[a-zA-Z_]\\w*::",an="(?!struct)("+nn+"|"+ze.optional(rn)+"[a-zA-Z_]\\w*"+ze.optional("<[^<>]+>")+")",ln={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},un={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[en.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},en.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},dn={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},fn={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},en.inherit(un,{className:"string"}),{className:"string",begin:/<.*?>/},tn,en.C_BLOCK_COMMENT_MODE]},pn={className:"title",begin:ze.optional(rn)+en.IDENT_RE,relevance:0},hn=ze.optional(rn)+en.IDENT_RE+"\\s*\\(",gn=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],En=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],mn=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],bn=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],An={type:En,keyword:gn,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:mn},Rn={className:"function.dispatch",relevance:0,keywords:{_hint:bn},begin:ze.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,en.IDENT_RE,ze.lookahead(/(<[^<>]+>|)\s*\(/))},Cn=[Rn,fn,ln,tn,en.C_BLOCK_COMMENT_MODE,dn,un],wn={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:An,contains:Cn.concat([{begin:/\(/,end:/\)/,keywords:An,contains:Cn.concat(["self"]),relevance:0}]),relevance:0},Fn={className:"function",begin:"("+an+"[\\*&\\s]+)+"+hn,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:An,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:nn,keywords:An,relevance:0},{begin:hn,returnBegin:!0,contains:[pn],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[un,dn]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:An,relevance:0,contains:[tn,en.C_BLOCK_COMMENT_MODE,un,dn,ln,{begin:/\(/,end:/\)/,keywords:An,relevance:0,contains:["self",tn,en.C_BLOCK_COMMENT_MODE,un,dn,ln]}]},ln,tn,en.C_BLOCK_COMMENT_MODE,fn]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:An,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(wn,Fn,Rn,Cn,[fn,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function)\\s*<(?!<)",end:">",keywords:An,contains:["self",ln]},{begin:en.IDENT_RE+"::",keywords:An},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function csharp(en){const ze=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],tn=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],nn=["default","false","null","true"],rn=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],sn=["add","alias","and","ascending","async","await","by","descending","equals","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","remove","select","set","unmanaged","value|0","var","when","where","with","yield"],an={keyword:rn.concat(sn),built_in:ze,literal:nn},ln=en.inherit(en.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),cn={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},un={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},dn=en.inherit(un,{illegal:/\n/}),fn={className:"subst",begin:/\{/,end:/\}/,keywords:an},pn=en.inherit(fn,{illegal:/\n/}),hn={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},en.BACKSLASH_ESCAPE,pn]},gn={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},fn]},En=en.inherit(gn,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},pn]});fn.contains=[gn,hn,un,en.APOS_STRING_MODE,en.QUOTE_STRING_MODE,cn,en.C_BLOCK_COMMENT_MODE],pn.contains=[En,hn,dn,en.APOS_STRING_MODE,en.QUOTE_STRING_MODE,cn,en.inherit(en.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const mn={variants:[gn,hn,un,en.APOS_STRING_MODE,en.QUOTE_STRING_MODE]},bn={begin:"<",end:">",contains:[{beginKeywords:"in out"},ln]},Tn=en.IDENT_RE+"(<"+en.IDENT_RE+"(\\s*,\\s*"+en.IDENT_RE+")*>)?(\\[\\])?",_n={begin:"@"+en.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:an,illegal:/::/,contains:[en.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},mn,cn,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},ln,bn,en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[ln,en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[ln,bn,en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+Tn+"\\s+)+"+en.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:an,contains:[{beginKeywords:tn.join(" "),relevance:0},{begin:en.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[en.TITLE_MODE,bn],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:an,relevance:0,contains:[mn,cn,en.C_BLOCK_COMMENT_MODE]},en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE]},_n]}}function go(en){const sn={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:sn,illegal:"</",contains:[en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE,{className:"string",variants:[en.QUOTE_STRING_MODE,en.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:en.C_NUMBER_RE+"[i]",relevance:1},en.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[en.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:sn,illegal:/["']/}]}]}}function rust(en){const ze=en.regex,tn={className:"title.function.invoke",relevance:0,begin:ze.concat(/\b/,/(?!let|for|while|if|else|match\b)/,en.IDENT_RE,ze.lookahead(/\s*\(/))},nn="([ui](8|16|32|64|128|size)|f(32|64))?",rn=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","unsafe","unsized","use","virtual","where","while","yield"],sn=["true","false","Some","None","Ok","Err"],an=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],ln=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:en.IDENT_RE+"!?",type:ln,keyword:rn,literal:sn,built_in:an},illegal:"</",contains:[en.C_LINE_COMMENT_MODE,en.COMMENT("/\\*","\\*/",{contains:["self"]}),en.inherit(en.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*/},{className:"number",variants:[{begin:"\\b0b([01_]+)"+nn},{begin:"\\b0o([0-7_]+)"+nn},{begin:"\\b0x([A-Fa-f0-9_]+)"+nn},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+nn}],relevance:0},{begin:[/fn/,/\s+/,en.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,en.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,en.UNDERSCORE_IDENT_RE,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,en.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,en.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.class"}},{begin:en.IDENT_RE+"::",keywords:{keyword:"Self",built_in:an,type:ln}},{className:"punctuation",begin:"->"},tn]}}function bash(en){const ze=en.regex,tn={},nn={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[tn]}]};Object.assign(tn,{className:"variable",variants:[{begin:ze.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},nn]});const rn={className:"subst",begin:/\$\(/,end:/\)/,contains:[en.BACKSLASH_ESCAPE]},sn={begin:/<<-?\s*(?=\w+)/,starts:{contains:[en.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},an={className:"string",begin:/"/,end:/"/,contains:[en.BACKSLASH_ESCAPE,tn,rn]};rn.contains.push(an);const ln={match:/\\"/},cn={className:"string",begin:/'/,end:/'/},un={match:/\\'/},dn={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},en.NUMBER_MODE,tn]},fn=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],pn=en.SHEBANG({binary:`(${fn.join("|")})`,relevance:10}),hn={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[en.inherit(en.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},gn=["if","then","else","elif","fi","for","while","until","in","do","done","case","esac","function","select"],En=["true","false"],mn={match:/(\/[a-z._-]+)+/},bn=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],Tn=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","type","typeset","ulimit","unalias"],_n=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],An=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:gn,literal:En,built_in:[...bn,...Tn,"set","shopt",..._n,...An]},contains:[pn,en.SHEBANG(),hn,dn,en.HASH_COMMENT_MODE,sn,mn,an,ln,cn,un,tn]}}function sql(en){const ze=en.regex,tn=en.COMMENT("--","$"),nn={className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},rn={begin:/"/,end:/"/,contains:[{begin:/""/}]},sn=["true","false","unknown"],an=["double precision","large object","with timezone","without timezone"],ln=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],cn=["add","asc","collation","desc","final","first","last","view"],un=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],dn=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],fn=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],pn=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],hn=dn,gn=[...un,...cn].filter(_n=>!dn.includes(_n)),En={className:"variable",begin:/@[a-z0-9][a-z0-9_]*/},mn={className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},bn={begin:ze.concat(/\b/,ze.either(...hn),/\s*\(/),relevance:0,keywords:{built_in:hn}};function Tn(_n,{exceptions:An,when:Rn}={}){const Cn=Rn;return An=An||[],_n.map(wn=>wn.match(/\|\d+$/)||An.includes(wn)?wn:Cn(wn)?`${wn}|0`:wn)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:Tn(gn,{when:_n=>_n.length<3}),literal:sn,type:ln,built_in:fn},contains:[{begin:ze.either(...pn),relevance:0,keywords:{$pattern:/[\w\.]+/,keyword:gn.concat(pn),literal:sn,type:ln}},{className:"type",begin:ze.either(...an)},bn,En,nn,rn,en.C_NUMBER_MODE,en.C_BLOCK_COMMENT_MODE,tn,mn]}}function json(en){const ze={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},tn={match:/[{}[\],:]/,className:"punctuation",relevance:0},nn=["true","false","null"],rn={scope:"literal",beginKeywords:nn.join(" ")};return{name:"JSON",keywords:{literal:nn},contains:[ze,tn,en.QUOTE_STRING_MODE,rn,en.C_NUMBER_MODE,en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}function markdown(en){const ze=en.regex,tn={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},nn={begin:"^[-\\*]{3,}",end:"$"},rn={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},sn={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},an={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},ln=/[A-Za-z][A-Za-z0-9+.-]*/,cn={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:ze.concat(/\[.+?\]\(/,ln,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},un={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},dn={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},fn=en.inherit(un,{contains:[]}),pn=en.inherit(dn,{contains:[]});un.contains.push(pn),dn.contains.push(fn);let hn=[tn,cn];return[un,dn,fn,pn].forEach(mn=>{mn.contains=mn.contains.concat(hn)}),hn=hn.concat(un,dn),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:hn},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:hn}]}]},tn,sn,un,dn,{className:"quote",begin:"^>\\s+",contains:hn,end:"$"},rn,nn,cn,an]}}const IDENT_RE="[A-Za-z$_][0-9A-Za-z$_]*",KEYWORDS=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],LITERALS=["true","false","null","undefined","NaN","Infinity"],TYPES=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ERROR_TYPES=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],BUILT_IN_GLOBALS=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],BUILT_IN_VARIABLES=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],BUILT_INS=[].concat(BUILT_IN_GLOBALS,TYPES,ERROR_TYPES);function javascript(en){const ze=en.regex,tn=(Nn,{after:Mn})=>{const Dn="</"+Nn[0].slice(1);return Nn.input.indexOf(Dn,Mn)!==-1},nn=IDENT_RE,rn={begin:"<>",end:"</>"},sn=/<[A-Za-z0-9\\._:-]+\s*\/>/,an={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(Nn,Mn)=>{const Dn=Nn[0].length+Nn.index,$n=Nn.input[Dn];if($n==="<"||$n===","){Mn.ignoreMatch();return}$n===">"&&(tn(Nn,{after:Dn})||Mn.ignoreMatch());let Vn;const Zn=Nn.input.substring(Dn);if(Vn=Zn.match(/^\s*=/)){Mn.ignoreMatch();return}if((Vn=Zn.match(/^\s+extends\s+/))&&Vn.index===0){Mn.ignoreMatch();return}}},ln={$pattern:IDENT_RE,keyword:KEYWORDS,literal:LITERALS,built_in:BUILT_INS,"variable.language":BUILT_IN_VARIABLES},cn="[0-9](_?[0-9])*",un=`\\.(${cn})`,dn="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",fn={className:"number",variants:[{begin:`(\\b(${dn})((${un})|\\.)?|(${un}))[eE][+-]?(${cn})\\b`},{begin:`\\b(${dn})\\b((${un})\\b|\\.)?|(${un})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},pn={className:"subst",begin:"\\$\\{",end:"\\}",keywords:ln,contains:[]},hn={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[en.BACKSLASH_ESCAPE,pn],subLanguage:"xml"}},gn={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[en.BACKSLASH_ESCAPE,pn],subLanguage:"css"}},En={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[en.BACKSLASH_ESCAPE,pn],subLanguage:"graphql"}},mn={className:"string",begin:"`",end:"`",contains:[en.BACKSLASH_ESCAPE,pn]},Tn={className:"comment",variants:[en.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:nn+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),en.C_BLOCK_COMMENT_MODE,en.C_LINE_COMMENT_MODE]},_n=[en.APOS_STRING_MODE,en.QUOTE_STRING_MODE,hn,gn,En,mn,{match:/\$\d+/},fn];pn.contains=_n.concat({begin:/\{/,end:/\}/,keywords:ln,contains:["self"].concat(_n)});const An=[].concat(Tn,pn.contains),Rn=An.concat([{begin:/\(/,end:/\)/,keywords:ln,contains:["self"].concat(An)}]),Cn={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:ln,contains:Rn},wn={variants:[{match:[/class/,/\s+/,nn,/\s+/,/extends/,/\s+/,ze.concat(nn,"(",ze.concat(/\./,nn),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,nn],scope:{1:"keyword",3:"title.class"}}]},Fn={relevance:0,match:ze.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...TYPES,...ERROR_TYPES]}},xn={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},zn={variants:[{match:[/function/,/\s+/,nn,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[Cn],illegal:/%/},Hn={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function Yn(Nn){return ze.concat("(?!",Nn.join("|"),")")}const Xn={match:ze.concat(/\b/,Yn([...BUILT_IN_GLOBALS,"super","import"]),nn,ze.lookahead(/\(/)),className:"title.function",relevance:0},Kn={begin:ze.concat(/\./,ze.lookahead(ze.concat(nn,/(?![0-9A-Za-z$_(])/))),end:nn,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Un={match:[/get|set/,/\s+/,nn,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},Cn]},On="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+en.UNDERSCORE_IDENT_RE+")\\s*=>",Sn={match:[/const|var|let/,/\s+/,nn,/\s*/,/=\s*/,/(async\s*)?/,ze.lookahead(On)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[Cn]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:ln,exports:{PARAMS_CONTAINS:Rn,CLASS_REFERENCE:Fn},illegal:/#(?![$_A-z])/,contains:[en.SHEBANG({label:"shebang",binary:"node",relevance:5}),xn,en.APOS_STRING_MODE,en.QUOTE_STRING_MODE,hn,gn,En,mn,Tn,{match:/\$\d+/},fn,Fn,{className:"attr",begin:nn+ze.lookahead(":"),relevance:0},Sn,{begin:"("+en.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[Tn,en.REGEXP_MODE,{className:"function",begin:On,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:en.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:ln,contains:Rn}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:rn.begin,end:rn.end},{match:sn},{begin:an.begin,"on:begin":an.isTrulyOpeningTag,end:an.end}],subLanguage:"xml",contains:[{begin:an.begin,end:an.end,skip:!0,contains:["self"]}]}]},zn,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+en.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[Cn,en.inherit(en.TITLE_MODE,{begin:nn,className:"title.function"})]},{match:/\.\.\./,relevance:0},Kn,{match:"\\$"+nn,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[Cn]},Xn,Hn,wn,Un,{match:/\$[(.]/}]}}function typescript(en){const ze=javascript(en),tn=IDENT_RE,nn=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],rn={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[ze.exports.CLASS_REFERENCE]},sn={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:nn},contains:[ze.exports.CLASS_REFERENCE]},an={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},ln=["type","namespace","interface","public","private","protected","implements","declare","abstract","readonly","enum","override"],cn={$pattern:IDENT_RE,keyword:KEYWORDS.concat(ln),literal:LITERALS,built_in:BUILT_INS.concat(nn),"variable.language":BUILT_IN_VARIABLES},un={className:"meta",begin:"@"+tn},dn=(pn,hn,gn)=>{const En=pn.contains.findIndex(mn=>mn.label===hn);if(En===-1)throw new Error("can not find mode to replace");pn.contains.splice(En,1,gn)};Object.assign(ze.keywords,cn),ze.exports.PARAMS_CONTAINS.push(un),ze.contains=ze.contains.concat([un,rn,sn]),dn(ze,"shebang",en.SHEBANG()),dn(ze,"use_strict",an);const fn=ze.contains.find(pn=>pn.label==="func.def");return fn.relevance=0,Object.assign(ze,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),ze}function yaml(en){const ze="true false yes no null",tn="[\\w#;/?:@&=+$,.~*'()[\\]]+",nn={className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ 	]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ 	]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ 	]|$)"}]},rn={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},sn={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[en.BACKSLASH_ESCAPE,rn]},an=en.inherit(sn,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),fn={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},pn={end:",",endsWithParent:!0,excludeEnd:!0,keywords:ze,relevance:0},hn={begin:/\{/,end:/\}/,contains:[pn],illegal:"\\n",relevance:0},gn={begin:"\\[",end:"\\]",contains:[pn],illegal:"\\n",relevance:0},En=[nn,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+tn},{className:"type",begin:"!<"+tn+">"},{className:"type",begin:"!"+tn},{className:"type",begin:"!!"+tn},{className:"meta",begin:"&"+en.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+en.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},en.HASH_COMMENT_MODE,{beginKeywords:ze,keywords:{literal:ze}},fn,{className:"number",begin:en.C_NUMBER_RE+"\\b",relevance:0},hn,gn,sn],mn=[...En];return mn.pop(),mn.push(an),pn.contains=mn,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:En}}function shell(en){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function diff(en){const ze=en.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:ze.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:ze.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function graphql(en){const ze=en.regex,tn=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[en.HASH_COMMENT_MODE,en.QUOTE_STRING_MODE,en.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:ze.concat(tn,ze.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function ini(en){const ze=en.regex,tn={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:en.NUMBER_RE}]},nn=en.COMMENT();nn.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const rn={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},sn={className:"literal",begin:/\bon|off|true|false|yes|no\b/},an={className:"string",contains:[en.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},ln={begin:/\[/,end:/\]/,contains:[nn,sn,rn,an,tn,"self"],relevance:0},cn=/[A-Za-z0-9_-]+/,un=/"(\\"|[^"])*"/,dn=/'[^']*'/,fn=ze.either(cn,un,dn),pn=ze.concat(fn,"(\\s*\\.\\s*",fn,")*",ze.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[nn,{className:"section",begin:/\[+/,end:/\]+/},{begin:pn,className:"attr",starts:{end:/$/,contains:[nn,ln,sn,rn,an,tn]}}]}}var decimalDigits="[0-9](_*[0-9])*",frac=`\\.(${decimalDigits})`,hexDigits="[0-9a-fA-F](_*[0-9a-fA-F])*",NUMERIC={className:"number",variants:[{begin:`(\\b(${decimalDigits})((${frac})|\\.)?|(${frac}))[eE][+-]?(${decimalDigits})[fFdD]?\\b`},{begin:`\\b(${decimalDigits})((${frac})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${frac})[fFdD]?\\b`},{begin:`\\b(${decimalDigits})[fFdD]\\b`},{begin:`\\b0[xX]((${hexDigits})\\.?|(${hexDigits})?\\.(${hexDigits}))[pP][+-]?(${decimalDigits})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${hexDigits})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function kotlin(en){const ze={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},tn={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},nn={className:"symbol",begin:en.UNDERSCORE_IDENT_RE+"@"},rn={className:"subst",begin:/\$\{/,end:/\}/,contains:[en.C_NUMBER_MODE]},sn={className:"variable",begin:"\\$"+en.UNDERSCORE_IDENT_RE},an={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[sn,rn]},{begin:"'",end:"'",illegal:/\n/,contains:[en.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[en.BACKSLASH_ESCAPE,sn,rn]}]};rn.contains.push(an);const ln={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+en.UNDERSCORE_IDENT_RE+")?"},cn={className:"meta",begin:"@"+en.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[en.inherit(an,{className:"string"}),"self"]}]},un=NUMERIC,dn=en.COMMENT("/\\*","\\*/",{contains:[en.C_BLOCK_COMMENT_MODE]}),fn={variants:[{className:"type",begin:en.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},pn=fn;return pn.variants[1].contains=[fn],fn.variants[1].contains=[pn],{name:"Kotlin",aliases:["kt","kts"],keywords:ze,contains:[en.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),en.C_LINE_COMMENT_MODE,dn,tn,nn,ln,cn,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:ze,relevance:5,contains:[{begin:en.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[en.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:ze,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[fn,en.C_LINE_COMMENT_MODE,dn],relevance:0},en.C_LINE_COMMENT_MODE,dn,ln,cn,an,en.C_NUMBER_MODE]},dn]},{begin:[/class|interface|trait/,/\s+/,en.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},en.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},ln,cn]},an,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},un]}}const MODES$1=en=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:en.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[en.APOS_STRING_MODE,en.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:en.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),TAGS$1=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES$1=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES$1=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS$1=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES$1=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse(),PSEUDO_SELECTORS=PSEUDO_CLASSES$1.concat(PSEUDO_ELEMENTS$1);function less(en){const ze=MODES$1(en),tn=PSEUDO_SELECTORS,nn="and or not only",rn="[\\w-]+",sn="("+rn+"|@\\{"+rn+"\\})",an=[],ln=[],cn=function(_n){return{className:"string",begin:"~?"+_n+".*?"+_n}},un=function(_n,An,Rn){return{className:_n,begin:An,relevance:Rn}},dn={$pattern:/[a-z-]+/,keyword:nn,attribute:MEDIA_FEATURES$1.join(" ")},fn={begin:"\\(",end:"\\)",contains:ln,keywords:dn,relevance:0};ln.push(en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE,cn("'"),cn('"'),ze.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},ze.HEXCOLOR,fn,un("variable","@@?"+rn,10),un("variable","@\\{"+rn+"\\}"),un("built_in","~?`[^`]*?`"),{className:"attribute",begin:rn+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},ze.IMPORTANT,{beginKeywords:"and not"},ze.FUNCTION_DISPATCH);const pn=ln.concat({begin:/\{/,end:/\}/,contains:an}),hn={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(ln)},gn={begin:sn+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},ze.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES$1.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:ln}}]},En={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:dn,returnEnd:!0,contains:ln,relevance:0}},mn={className:"variable",variants:[{begin:"@"+rn+"\\s*:",relevance:15},{begin:"@"+rn}],starts:{end:"[;}]",returnEnd:!0,contains:pn}},bn={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:sn,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE,hn,un("keyword","all\\b"),un("variable","@\\{"+rn+"\\}"),{begin:"\\b("+TAGS$1.join("|")+")\\b",className:"selector-tag"},ze.CSS_NUMBER_MODE,un("selector-tag",sn,0),un("selector-id","#"+sn),un("selector-class","\\."+sn,0),un("selector-tag","&",0),ze.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+PSEUDO_CLASSES$1.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+PSEUDO_ELEMENTS$1.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:pn},{begin:"!important"},ze.FUNCTION_DISPATCH]},Tn={begin:rn+`:(:)?(${tn.join("|")})`,returnBegin:!0,contains:[bn]};return an.push(en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE,En,mn,Tn,gn,bn,hn,ze.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:an}}function lua(en){const ze="\\[=*\\[",tn="\\]=*\\]",nn={begin:ze,end:tn,contains:["self"]},rn=[en.COMMENT("--(?!"+ze+")","$"),en.COMMENT("--"+ze,tn,{contains:[nn],relevance:10})];return{name:"Lua",keywords:{$pattern:en.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:rn.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[en.inherit(en.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:rn}].concat(rn)},en.C_NUMBER_MODE,en.APOS_STRING_MODE,en.QUOTE_STRING_MODE,{className:"string",begin:ze,end:tn,contains:[nn],relevance:5}])}}function makefile(en){const ze={className:"variable",variants:[{begin:"\\$\\("+en.UNDERSCORE_IDENT_RE+"\\)",contains:[en.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},tn={className:"string",begin:/"/,end:/"/,contains:[en.BACKSLASH_ESCAPE,ze]},nn={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[ze]},rn={begin:"^"+en.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},sn={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},an={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[ze]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[en.HASH_COMMENT_MODE,ze,tn,nn,rn,sn,an]}}function objectivec(en){const ze={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},tn=/[a-zA-Z@][a-zA-Z0-9_]*/,ln={"variable.language":["this","super"],$pattern:tn,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},cn={$pattern:tn,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:ln,illegal:"</",contains:[ze,en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE,en.C_NUMBER_MODE,en.QUOTE_STRING_MODE,en.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[en.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},en.inherit(en.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+cn.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:cn,contains:[en.UNDERSCORE_TITLE_MODE]},{begin:"\\."+en.UNDERSCORE_IDENT_RE,relevance:0}]}}function perl(en){const ze=en.regex,tn=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],nn=/[dualxmsipngr]{0,12}/,rn={$pattern:/[\w.]+/,keyword:tn.join(" ")},sn={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:rn},an={begin:/->\{/,end:/\}/},ln={variants:[{begin:/\$\d/},{begin:ze.concat(/[$%@](\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@][^\s\w{]/,relevance:0}]},cn=[en.BACKSLASH_ESCAPE,sn,ln],un=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],dn=(hn,gn,En="\\1")=>{const mn=En==="\\1"?En:ze.concat(En,gn);return ze.concat(ze.concat("(?:",hn,")"),gn,/(?:\\.|[^\\\/])*?/,mn,/(?:\\.|[^\\\/])*?/,En,nn)},fn=(hn,gn,En)=>ze.concat(ze.concat("(?:",hn,")"),gn,/(?:\\.|[^\\\/])*?/,En,nn),pn=[ln,en.HASH_COMMENT_MODE,en.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),an,{className:"string",contains:cn,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[en.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[en.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+en.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[en.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:dn("s|tr|y",ze.either(...un,{capture:!0}))},{begin:dn("s|tr|y","\\(","\\)")},{begin:dn("s|tr|y","\\[","\\]")},{begin:dn("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:fn("(?:m|qr)?",/\//,/\//)},{begin:fn("m|qr",ze.either(...un,{capture:!0}),/\1/)},{begin:fn("m|qr",/\(/,/\)/)},{begin:fn("m|qr",/\[/,/\]/)},{begin:fn("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[en.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return sn.contains=pn,an.contains=pn,{name:"Perl",aliases:["pl","pm"],keywords:rn,contains:pn}}function phpTemplate(en){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},en.inherit(en.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),en.inherit(en.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function plaintext(en){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function pythonRepl(en){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function r(en){const ze=en.regex,tn=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,nn=ze.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),rn=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,sn=ze.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:tn,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[en.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:ze.lookahead(ze.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:tn},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),en.HASH_COMMENT_MODE,{scope:"string",contains:[en.BACKSLASH_ESCAPE],variants:[en.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),en.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),en.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),en.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),en.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),en.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[rn,nn]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,nn]},{scope:{1:"punctuation",2:"number"},match:[sn,nn]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,nn]}]},{scope:{3:"operator"},match:[tn,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:rn},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:sn},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}const MODES=en=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:en.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[en.APOS_STRING_MODE,en.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:en.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),TAGS=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function scss(en){const ze=MODES(en),tn=PSEUDO_ELEMENTS,nn=PSEUDO_CLASSES,rn="@[a-z-]+",sn="and or not only",ln={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE,ze.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},ze.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+TAGS.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+nn.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+tn.join("|")+")"},ln,{begin:/\(/,end:/\)/,contains:[ze.CSS_NUMBER_MODE]},ze.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[ze.BLOCK_COMMENT,ln,ze.HEXCOLOR,ze.CSS_NUMBER_MODE,en.QUOTE_STRING_MODE,en.APOS_STRING_MODE,ze.IMPORTANT,ze.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:rn,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:sn,attribute:MEDIA_FEATURES.join(" ")},contains:[{begin:rn,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},ln,en.QUOTE_STRING_MODE,en.APOS_STRING_MODE,ze.HEXCOLOR,ze.CSS_NUMBER_MODE]},ze.FUNCTION_DISPATCH]}}function source(en){return en?typeof en=="string"?en:en.source:null}function lookahead(en){return concat("(?=",en,")")}function concat(...en){return en.map(tn=>source(tn)).join("")}function stripOptionsFromArgs(en){const ze=en[en.length-1];return typeof ze=="object"&&ze.constructor===Object?(en.splice(en.length-1,1),ze):{}}function either(...en){return"("+(stripOptionsFromArgs(en).capture?"":"?:")+en.map(nn=>source(nn)).join("|")+")"}const keywordWrapper=en=>concat(/\b/,en,/\w$/.test(en)?/\b/:/\B/),dotKeywords=["Protocol","Type"].map(keywordWrapper),optionalDotKeywords=["init","self"].map(keywordWrapper),keywordTypes=["Any","Self"],keywords=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],literals=["false","nil","true"],precedencegroupKeywords=["assignment","associativity","higherThan","left","lowerThan","none","right"],numberSignKeywords=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],builtIns=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],operatorHead=either(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),operatorCharacter=either(operatorHead,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),operator=concat(operatorHead,operatorCharacter,"*"),identifierHead=either(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),identifierCharacter=either(identifierHead,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),identifier=concat(identifierHead,identifierCharacter,"*"),typeIdentifier=concat(/[A-Z]/,identifierCharacter,"*"),keywordAttributes=["attached","autoclosure",concat(/convention\(/,either("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",concat(/objc\(/,identifier,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],availabilityKeywords=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function swift(en){const ze={match:/\s+/,relevance:0},tn=en.COMMENT("/\\*","\\*/",{contains:["self"]}),nn=[en.C_LINE_COMMENT_MODE,tn],rn={match:[/\./,either(...dotKeywords,...optionalDotKeywords)],className:{2:"keyword"}},sn={match:concat(/\./,either(...keywords)),relevance:0},an=keywords.filter(Gn=>typeof Gn=="string").concat(["_|0"]),ln=keywords.filter(Gn=>typeof Gn!="string").concat(keywordTypes).map(keywordWrapper),cn={variants:[{className:"keyword",match:either(...ln,...optionalDotKeywords)}]},un={$pattern:either(/\b\w+/,/#\w+/),keyword:an.concat(numberSignKeywords),literal:literals},dn=[rn,sn,cn],fn={match:concat(/\./,either(...builtIns)),relevance:0},pn={className:"built_in",match:concat(/\b/,either(...builtIns),/(?=\()/)},hn=[fn,pn],gn={match:/->/,relevance:0},En={className:"operator",relevance:0,variants:[{match:operator},{match:`\\.(\\.|${operatorCharacter})+`}]},mn=[gn,En],bn="([0-9]_*)+",Tn="([0-9a-fA-F]_*)+",_n={className:"number",relevance:0,variants:[{match:`\\b(${bn})(\\.(${bn}))?([eE][+-]?(${bn}))?\\b`},{match:`\\b0x(${Tn})(\\.(${Tn}))?([pP][+-]?(${bn}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},An=(Gn="")=>({className:"subst",variants:[{match:concat(/\\/,Gn,/[0\\tnr"']/)},{match:concat(/\\/,Gn,/u\{[0-9a-fA-F]{1,8}\}/)}]}),Rn=(Gn="")=>({className:"subst",match:concat(/\\/,Gn,/[\t ]*(?:[\r\n]|\r\n)/)}),Cn=(Gn="")=>({className:"subst",label:"interpol",begin:concat(/\\/,Gn,/\(/),end:/\)/}),wn=(Gn="")=>({begin:concat(Gn,/"""/),end:concat(/"""/,Gn),contains:[An(Gn),Rn(Gn),Cn(Gn)]}),Fn=(Gn="")=>({begin:concat(Gn,/"/),end:concat(/"/,Gn),contains:[An(Gn),Cn(Gn)]}),xn={className:"string",variants:[wn(),wn("#"),wn("##"),wn("###"),Fn(),Fn("#"),Fn("##"),Fn("###")]},zn=[en.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[en.BACKSLASH_ESCAPE]}],Hn={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:zn},Yn=Gn=>{const Gr=concat(Gn,/\//),ei=concat(/\//,Gn);return{begin:Gr,end:ei,contains:[...zn,{scope:"comment",begin:`#(?!.*${ei})`,end:/$/}]}},Xn={scope:"regexp",variants:[Yn("###"),Yn("##"),Yn("#"),Hn]},Kn={match:concat(/`/,identifier,/`/)},Un={className:"variable",match:/\$\d+/},On={className:"variable",match:`\\$${identifierCharacter}+`},Sn=[Kn,Un,On],Nn={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:availabilityKeywords,contains:[...mn,_n,xn]}]}},Mn={scope:"keyword",match:concat(/@/,either(...keywordAttributes))},Dn={scope:"meta",match:concat(/@/,identifier)},$n=[Nn,Mn,Dn],Vn={match:lookahead(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:concat(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,identifierCharacter,"+")},{className:"type",match:typeIdentifier,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:concat(/\s+&\s+/,lookahead(typeIdentifier)),relevance:0}]},Zn={begin:/</,end:/>/,keywords:un,contains:[...nn,...dn,...$n,gn,Vn]};Vn.contains.push(Zn);const Qn={match:concat(identifier,/\s*:/),keywords:"_|0",relevance:0},Wn={begin:/\(/,end:/\)/,relevance:0,keywords:un,contains:["self",Qn,...nn,Xn,...dn,...hn,...mn,_n,xn,...Sn,...$n,Vn]},Wr={begin:/</,end:/>/,keywords:"repeat each",contains:[...nn,Vn]},si={begin:either(lookahead(concat(identifier,/\s*:/)),lookahead(concat(identifier,/\s+/,identifier,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:identifier}]},ti={begin:/\(/,end:/\)/,keywords:un,contains:[si,...nn,...dn,...mn,_n,xn,...$n,Vn,Wn],endsParent:!0,illegal:/["']/},Qr={match:[/(func|macro)/,/\s+/,either(Kn.match,identifier,operator)],className:{1:"keyword",3:"title.function"},contains:[Wr,ti,ze],illegal:[/\[/,/%/]},li={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[Wr,ti,ze],illegal:/\[|%/},oi={match:[/operator/,/\s+/,operator],className:{1:"keyword",3:"title"}},ii={begin:[/precedencegroup/,/\s+/,typeIdentifier],className:{1:"keyword",3:"title"},contains:[Vn],keywords:[...precedencegroupKeywords,...literals],end:/}/};for(const Gn of xn.variants){const Gr=Gn.contains.find(Yr=>Yr.label==="interpol");Gr.keywords=un;const ei=[...dn,...hn,...mn,_n,xn,...Sn];Gr.contains=[...ei,{begin:/\(/,end:/\)/,contains:["self",...ei]}]}return{name:"Swift",keywords:un,contains:[...nn,Qr,li,{beginKeywords:"struct protocol class extension enum actor",end:"\\{",excludeEnd:!0,keywords:un,contains:[en.inherit(en.TITLE_MODE,{className:"title.class",begin:/[A-Za-z$_][\u00C0-\u02B80-9A-Za-z$_]*/}),...dn]},oi,ii,{beginKeywords:"import",end:/$/,contains:[...nn],relevance:0},Xn,...dn,...hn,...mn,_n,xn,...Sn,...$n,Vn,Wn]}}function vbnet(en){const ze=en.regex,tn={className:"string",begin:/"(""|[^/n])"C\b/},nn={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},rn=/\d{1,2}\/\d{1,2}\/\d{4}/,sn=/\d{4}-\d{1,2}-\d{1,2}/,an=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,ln=/\d{1,2}(:\d{1,2}){1,2}/,cn={className:"literal",variants:[{begin:ze.concat(/# */,ze.either(sn,rn),/ *#/)},{begin:ze.concat(/# */,ln,/ *#/)},{begin:ze.concat(/# */,an,/ *#/)},{begin:ze.concat(/# */,ze.either(sn,rn),/ +/,ze.either(an,ln),/ *#/)}]},un={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},dn={className:"label",begin:/^\w+:/},fn=en.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),pn=en.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[tn,nn,cn,un,dn,fn,pn,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[pn]}]}}function wasm(en){en.regex;const ze=en.COMMENT(/\(;/,/;\)/);ze.contains.push("self");const tn=en.COMMENT(/;;/,/$/),nn=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],rn={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},sn={className:"variable",begin:/\$[\w_]+/},an={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},ln={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},cn={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},un={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:nn},contains:[tn,ze,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},sn,an,rn,en.QUOTE_STRING_MODE,cn,un,ln]}}function django(en){const ze={begin:/\|[A-Za-z]+:?/,keywords:{name:"truncatewords removetags linebreaksbr yesno get_digit timesince random striptags filesizeformat escape linebreaks length_is ljust rjust cut urlize fix_ampersands title floatformat capfirst pprint divisibleby add make_list unordered_list urlencode timeuntil urlizetrunc wordcount stringformat linenumbers slice date dictsort dictsortreversed default_if_none pluralize lower join center default truncatewords_html upper length phone2numeric wordwrap time addslashes slugify first escapejs force_escape iriencode last safe safeseq truncatechars localize unlocalize localtime utc timezone"},contains:[en.QUOTE_STRING_MODE,en.APOS_STRING_MODE]};return{name:"Django",aliases:["jinja"],case_insensitive:!0,subLanguage:"xml",contains:[en.COMMENT(/\{%\s*comment\s*%\}/,/\{%\s*endcomment\s*%\}/),en.COMMENT(/\{#/,/#\}/),{className:"template-tag",begin:/\{%/,end:/%\}/,contains:[{className:"name",begin:/\w+/,keywords:{name:"comment endcomment load templatetag ifchanged endifchanged if endif firstof for endfor ifnotequal endifnotequal widthratio extends include spaceless endspaceless regroup ifequal endifequal ssi now with cycle url filter endfilter debug block endblock else autoescape endautoescape csrf_token empty elif endwith static trans blocktrans endblocktrans get_static_prefix get_media_prefix plural get_current_language language get_available_languages get_current_language_bidi get_language_info get_language_info_list localize endlocalize localtime endlocaltime timezone endtimezone get_current_timezone verbatim"},starts:{endsWithParent:!0,keywords:"in by as",contains:[ze],relevance:0}}]},{className:"template-variable",begin:/\{\{/,end:/\}\}/,contains:[ze]}]}}function dockerfile(en){return{name:"Dockerfile",aliases:["docker"],case_insensitive:!0,keywords:["from","maintainer","expose","env","arg","user","onbuild","stopsignal"],contains:[en.HASH_COMMENT_MODE,en.APOS_STRING_MODE,en.QUOTE_STRING_MODE,en.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}}function nginx(en){const ze=en.regex,tn={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{\w+\}/},{begin:ze.concat(/[$@]/,en.UNDERSCORE_IDENT_RE)}]},rn={endsWithParent:!0,keywords:{$pattern:/[a-z_]{2,}|\/dev\/poll/,literal:["on","off","yes","no","true","false","none","blocked","debug","info","notice","warn","error","crit","select","break","last","permanent","redirect","kqueue","rtsig","epoll","poll","/dev/poll"]},relevance:0,illegal:"=>",contains:[en.HASH_COMMENT_MODE,{className:"string",contains:[en.BACKSLASH_ESCAPE,tn],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[tn]},{className:"regexp",contains:[en.BACKSLASH_ESCAPE,tn],variants:[{begin:"\\s\\^",end:"\\s|\\{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|\\{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]?\\b",relevance:0},tn]};return{name:"Nginx config",aliases:["nginxconf"],contains:[en.HASH_COMMENT_MODE,{beginKeywords:"upstream location",end:/;|\{/,contains:rn.contains,keywords:{section:"upstream location"}},{className:"section",begin:ze.concat(en.UNDERSCORE_IDENT_RE+ze.lookahead(/\s+\{/)),relevance:0},{begin:ze.lookahead(en.UNDERSCORE_IDENT_RE+"\\s"),end:";|\\{",contains:[{className:"attribute",begin:en.UNDERSCORE_IDENT_RE,starts:rn}],relevance:0}],illegal:"[^\\s\\}\\{]"}}function pgsql(en){const ze=en.COMMENT("--","$"),tn="[a-zA-Z_][a-zA-Z_0-9$]*",nn="\\$([a-zA-Z_]?|[a-zA-Z_][a-zA-Z_0-9]*)\\$",rn="<<\\s*"+tn+"\\s*>>",sn="ABORT ALTER ANALYZE BEGIN CALL CHECKPOINT|10 CLOSE CLUSTER COMMENT COMMIT COPY CREATE DEALLOCATE DECLARE DELETE DISCARD DO DROP END EXECUTE EXPLAIN FETCH GRANT IMPORT INSERT LISTEN LOAD LOCK MOVE NOTIFY PREPARE REASSIGN|10 REFRESH REINDEX RELEASE RESET REVOKE ROLLBACK SAVEPOINT SECURITY SELECT SET SHOW START TRUNCATE UNLISTEN|10 UPDATE VACUUM|10 VALUES AGGREGATE COLLATION CONVERSION|10 DATABASE DEFAULT PRIVILEGES DOMAIN TRIGGER EXTENSION FOREIGN WRAPPER|10 TABLE FUNCTION GROUP LANGUAGE LARGE OBJECT MATERIALIZED VIEW OPERATOR CLASS FAMILY POLICY PUBLICATION|10 ROLE RULE SCHEMA SEQUENCE SERVER STATISTICS SUBSCRIPTION SYSTEM TABLESPACE CONFIGURATION DICTIONARY PARSER TEMPLATE TYPE USER MAPPING PREPARED ACCESS METHOD CAST AS TRANSFORM TRANSACTION OWNED TO INTO SESSION AUTHORIZATION INDEX PROCEDURE ASSERTION ALL ANALYSE AND ANY ARRAY ASC ASYMMETRIC|10 BOTH CASE CHECK COLLATE COLUMN CONCURRENTLY|10 CONSTRAINT CROSS DEFERRABLE RANGE DESC DISTINCT ELSE EXCEPT FOR FREEZE|10 FROM FULL HAVING ILIKE IN INITIALLY INNER INTERSECT IS ISNULL JOIN LATERAL LEADING LIKE LIMIT NATURAL NOT NOTNULL NULL OFFSET ON ONLY OR ORDER OUTER OVERLAPS PLACING PRIMARY REFERENCES RETURNING SIMILAR SOME SYMMETRIC TABLESAMPLE THEN TRAILING UNION UNIQUE USING VARIADIC|10 VERBOSE WHEN WHERE WINDOW WITH BY RETURNS INOUT OUT SETOF|10 IF STRICT CURRENT CONTINUE OWNER LOCATION OVER PARTITION WITHIN BETWEEN ESCAPE EXTERNAL INVOKER DEFINER WORK RENAME VERSION CONNECTION CONNECT TABLES TEMP TEMPORARY FUNCTIONS SEQUENCES TYPES SCHEMAS OPTION CASCADE RESTRICT ADD ADMIN EXISTS VALID VALIDATE ENABLE DISABLE REPLICA|10 ALWAYS PASSING COLUMNS PATH REF VALUE OVERRIDING IMMUTABLE STABLE VOLATILE BEFORE AFTER EACH ROW PROCEDURAL ROUTINE NO HANDLER VALIDATOR OPTIONS STORAGE OIDS|10 WITHOUT INHERIT DEPENDS CALLED INPUT LEAKPROOF|10 COST ROWS NOWAIT SEARCH UNTIL ENCRYPTED|10 PASSWORD CONFLICT|10 INSTEAD INHERITS CHARACTERISTICS WRITE CURSOR ALSO STATEMENT SHARE EXCLUSIVE INLINE ISOLATION REPEATABLE READ COMMITTED SERIALIZABLE UNCOMMITTED LOCAL GLOBAL SQL PROCEDURES RECURSIVE SNAPSHOT ROLLUP CUBE TRUSTED|10 INCLUDE FOLLOWING PRECEDING UNBOUNDED RANGE GROUPS UNENCRYPTED|10 SYSID FORMAT DELIMITER HEADER QUOTE ENCODING FILTER OFF FORCE_QUOTE FORCE_NOT_NULL FORCE_NULL COSTS BUFFERS TIMING SUMMARY DISABLE_PAGE_SKIPPING RESTART CYCLE GENERATED IDENTITY DEFERRED IMMEDIATE LEVEL LOGGED UNLOGGED OF NOTHING NONE EXCLUDE ATTRIBUTE USAGE ROUTINES TRUE FALSE NAN INFINITY ",an="SUPERUSER NOSUPERUSER CREATEDB NOCREATEDB CREATEROLE NOCREATEROLE INHERIT NOINHERIT LOGIN NOLOGIN REPLICATION NOREPLICATION BYPASSRLS NOBYPASSRLS ",ln="ALIAS BEGIN CONSTANT DECLARE END EXCEPTION RETURN PERFORM|10 RAISE GET DIAGNOSTICS STACKED|10 FOREACH LOOP ELSIF EXIT WHILE REVERSE SLICE DEBUG LOG INFO NOTICE WARNING ASSERT OPEN ",cn="BIGINT INT8 BIGSERIAL SERIAL8 BIT VARYING VARBIT BOOLEAN BOOL BOX BYTEA CHARACTER CHAR VARCHAR CIDR CIRCLE DATE DOUBLE PRECISION FLOAT8 FLOAT INET INTEGER INT INT4 INTERVAL JSON JSONB LINE LSEG|10 MACADDR MACADDR8 MONEY NUMERIC DEC DECIMAL PATH POINT POLYGON REAL FLOAT4 SMALLINT INT2 SMALLSERIAL|10 SERIAL2|10 SERIAL|10 SERIAL4|10 TEXT TIME ZONE TIMETZ|10 TIMESTAMP TIMESTAMPTZ|10 TSQUERY|10 TSVECTOR|10 TXID_SNAPSHOT|10 UUID XML NATIONAL NCHAR INT4RANGE|10 INT8RANGE|10 NUMRANGE|10 TSRANGE|10 TSTZRANGE|10 DATERANGE|10 ANYELEMENT ANYARRAY ANYNONARRAY ANYENUM ANYRANGE CSTRING INTERNAL RECORD PG_DDL_COMMAND VOID UNKNOWN OPAQUE REFCURSOR NAME OID REGPROC|10 REGPROCEDURE|10 REGOPER|10 REGOPERATOR|10 REGCLASS|10 REGTYPE|10 REGROLE|10 REGNAMESPACE|10 REGCONFIG|10 REGDICTIONARY|10 ",un=cn.trim().split(" ").map(function(En){return En.split("|")[0]}).join("|"),dn="CURRENT_TIME CURRENT_TIMESTAMP CURRENT_USER CURRENT_CATALOG|10 CURRENT_DATE LOCALTIME LOCALTIMESTAMP CURRENT_ROLE|10 CURRENT_SCHEMA|10 SESSION_USER PUBLIC ",fn="FOUND NEW OLD TG_NAME|10 TG_WHEN|10 TG_LEVEL|10 TG_OP|10 TG_RELID|10 TG_RELNAME|10 TG_TABLE_NAME|10 TG_TABLE_SCHEMA|10 TG_NARGS|10 TG_ARGV|10 TG_EVENT|10 TG_TAG|10 ROW_COUNT RESULT_OID|10 PG_CONTEXT|10 RETURNED_SQLSTATE COLUMN_NAME CONSTRAINT_NAME PG_DATATYPE_NAME|10 MESSAGE_TEXT TABLE_NAME SCHEMA_NAME PG_EXCEPTION_DETAIL|10 PG_EXCEPTION_HINT|10 PG_EXCEPTION_CONTEXT|10 ",pn="SQLSTATE SQLERRM|10 SUCCESSFUL_COMPLETION WARNING DYNAMIC_RESULT_SETS_RETURNED IMPLICIT_ZERO_BIT_PADDING NULL_VALUE_ELIMINATED_IN_SET_FUNCTION PRIVILEGE_NOT_GRANTED PRIVILEGE_NOT_REVOKED STRING_DATA_RIGHT_TRUNCATION DEPRECATED_FEATURE NO_DATA NO_ADDITIONAL_DYNAMIC_RESULT_SETS_RETURNED SQL_STATEMENT_NOT_YET_COMPLETE CONNECTION_EXCEPTION CONNECTION_DOES_NOT_EXIST CONNECTION_FAILURE SQLCLIENT_UNABLE_TO_ESTABLISH_SQLCONNECTION SQLSERVER_REJECTED_ESTABLISHMENT_OF_SQLCONNECTION TRANSACTION_RESOLUTION_UNKNOWN PROTOCOL_VIOLATION TRIGGERED_ACTION_EXCEPTION FEATURE_NOT_SUPPORTED INVALID_TRANSACTION_INITIATION LOCATOR_EXCEPTION INVALID_LOCATOR_SPECIFICATION INVALID_GRANTOR INVALID_GRANT_OPERATION INVALID_ROLE_SPECIFICATION DIAGNOSTICS_EXCEPTION STACKED_DIAGNOSTICS_ACCESSED_WITHOUT_ACTIVE_HANDLER CASE_NOT_FOUND CARDINALITY_VIOLATION DATA_EXCEPTION ARRAY_SUBSCRIPT_ERROR CHARACTER_NOT_IN_REPERTOIRE DATETIME_FIELD_OVERFLOW DIVISION_BY_ZERO ERROR_IN_ASSIGNMENT ESCAPE_CHARACTER_CONFLICT INDICATOR_OVERFLOW INTERVAL_FIELD_OVERFLOW INVALID_ARGUMENT_FOR_LOGARITHM INVALID_ARGUMENT_FOR_NTILE_FUNCTION INVALID_ARGUMENT_FOR_NTH_VALUE_FUNCTION INVALID_ARGUMENT_FOR_POWER_FUNCTION INVALID_ARGUMENT_FOR_WIDTH_BUCKET_FUNCTION INVALID_CHARACTER_VALUE_FOR_CAST INVALID_DATETIME_FORMAT INVALID_ESCAPE_CHARACTER INVALID_ESCAPE_OCTET INVALID_ESCAPE_SEQUENCE NONSTANDARD_USE_OF_ESCAPE_CHARACTER INVALID_INDICATOR_PARAMETER_VALUE INVALID_PARAMETER_VALUE INVALID_REGULAR_EXPRESSION INVALID_ROW_COUNT_IN_LIMIT_CLAUSE INVALID_ROW_COUNT_IN_RESULT_OFFSET_CLAUSE INVALID_TABLESAMPLE_ARGUMENT INVALID_TABLESAMPLE_REPEAT INVALID_TIME_ZONE_DISPLACEMENT_VALUE INVALID_USE_OF_ESCAPE_CHARACTER MOST_SPECIFIC_TYPE_MISMATCH NULL_VALUE_NOT_ALLOWED NULL_VALUE_NO_INDICATOR_PARAMETER NUMERIC_VALUE_OUT_OF_RANGE SEQUENCE_GENERATOR_LIMIT_EXCEEDED STRING_DATA_LENGTH_MISMATCH STRING_DATA_RIGHT_TRUNCATION SUBSTRING_ERROR TRIM_ERROR UNTERMINATED_C_STRING ZERO_LENGTH_CHARACTER_STRING FLOATING_POINT_EXCEPTION INVALID_TEXT_REPRESENTATION INVALID_BINARY_REPRESENTATION BAD_COPY_FILE_FORMAT UNTRANSLATABLE_CHARACTER NOT_AN_XML_DOCUMENT INVALID_XML_DOCUMENT INVALID_XML_CONTENT INVALID_XML_COMMENT INVALID_XML_PROCESSING_INSTRUCTION INTEGRITY_CONSTRAINT_VIOLATION RESTRICT_VIOLATION NOT_NULL_VIOLATION FOREIGN_KEY_VIOLATION UNIQUE_VIOLATION CHECK_VIOLATION EXCLUSION_VIOLATION INVALID_CURSOR_STATE INVALID_TRANSACTION_STATE ACTIVE_SQL_TRANSACTION BRANCH_TRANSACTION_ALREADY_ACTIVE HELD_CURSOR_REQUIRES_SAME_ISOLATION_LEVEL INAPPROPRIATE_ACCESS_MODE_FOR_BRANCH_TRANSACTION INAPPROPRIATE_ISOLATION_LEVEL_FOR_BRANCH_TRANSACTION NO_ACTIVE_SQL_TRANSACTION_FOR_BRANCH_TRANSACTION READ_ONLY_SQL_TRANSACTION SCHEMA_AND_DATA_STATEMENT_MIXING_NOT_SUPPORTED NO_ACTIVE_SQL_TRANSACTION IN_FAILED_SQL_TRANSACTION IDLE_IN_TRANSACTION_SESSION_TIMEOUT INVALID_SQL_STATEMENT_NAME TRIGGERED_DATA_CHANGE_VIOLATION INVALID_AUTHORIZATION_SPECIFICATION INVALID_PASSWORD DEPENDENT_PRIVILEGE_DESCRIPTORS_STILL_EXIST DEPENDENT_OBJECTS_STILL_EXIST INVALID_TRANSACTION_TERMINATION SQL_ROUTINE_EXCEPTION FUNCTION_EXECUTED_NO_RETURN_STATEMENT MODIFYING_SQL_DATA_NOT_PERMITTED PROHIBITED_SQL_STATEMENT_ATTEMPTED READING_SQL_DATA_NOT_PERMITTED INVALID_CURSOR_NAME EXTERNAL_ROUTINE_EXCEPTION CONTAINING_SQL_NOT_PERMITTED MODIFYING_SQL_DATA_NOT_PERMITTED PROHIBITED_SQL_STATEMENT_ATTEMPTED READING_SQL_DATA_NOT_PERMITTED EXTERNAL_ROUTINE_INVOCATION_EXCEPTION INVALID_SQLSTATE_RETURNED NULL_VALUE_NOT_ALLOWED TRIGGER_PROTOCOL_VIOLATED SRF_PROTOCOL_VIOLATED EVENT_TRIGGER_PROTOCOL_VIOLATED SAVEPOINT_EXCEPTION INVALID_SAVEPOINT_SPECIFICATION INVALID_CATALOG_NAME INVALID_SCHEMA_NAME TRANSACTION_ROLLBACK TRANSACTION_INTEGRITY_CONSTRAINT_VIOLATION SERIALIZATION_FAILURE STATEMENT_COMPLETION_UNKNOWN DEADLOCK_DETECTED SYNTAX_ERROR_OR_ACCESS_RULE_VIOLATION SYNTAX_ERROR INSUFFICIENT_PRIVILEGE CANNOT_COERCE GROUPING_ERROR WINDOWING_ERROR INVALID_RECURSION INVALID_FOREIGN_KEY INVALID_NAME NAME_TOO_LONG RESERVED_NAME DATATYPE_MISMATCH INDETERMINATE_DATATYPE COLLATION_MISMATCH INDETERMINATE_COLLATION WRONG_OBJECT_TYPE GENERATED_ALWAYS UNDEFINED_COLUMN UNDEFINED_FUNCTION UNDEFINED_TABLE UNDEFINED_PARAMETER UNDEFINED_OBJECT DUPLICATE_COLUMN DUPLICATE_CURSOR DUPLICATE_DATABASE DUPLICATE_FUNCTION DUPLICATE_PREPARED_STATEMENT DUPLICATE_SCHEMA DUPLICATE_TABLE DUPLICATE_ALIAS DUPLICATE_OBJECT AMBIGUOUS_COLUMN AMBIGUOUS_FUNCTION AMBIGUOUS_PARAMETER AMBIGUOUS_ALIAS INVALID_COLUMN_REFERENCE INVALID_COLUMN_DEFINITION INVALID_CURSOR_DEFINITION INVALID_DATABASE_DEFINITION INVALID_FUNCTION_DEFINITION INVALID_PREPARED_STATEMENT_DEFINITION INVALID_SCHEMA_DEFINITION INVALID_TABLE_DEFINITION INVALID_OBJECT_DEFINITION WITH_CHECK_OPTION_VIOLATION INSUFFICIENT_RESOURCES DISK_FULL OUT_OF_MEMORY TOO_MANY_CONNECTIONS CONFIGURATION_LIMIT_EXCEEDED PROGRAM_LIMIT_EXCEEDED STATEMENT_TOO_COMPLEX TOO_MANY_COLUMNS TOO_MANY_ARGUMENTS OBJECT_NOT_IN_PREREQUISITE_STATE OBJECT_IN_USE CANT_CHANGE_RUNTIME_PARAM LOCK_NOT_AVAILABLE OPERATOR_INTERVENTION QUERY_CANCELED ADMIN_SHUTDOWN CRASH_SHUTDOWN CANNOT_CONNECT_NOW DATABASE_DROPPED SYSTEM_ERROR IO_ERROR UNDEFINED_FILE DUPLICATE_FILE SNAPSHOT_TOO_OLD CONFIG_FILE_ERROR LOCK_FILE_EXISTS FDW_ERROR FDW_COLUMN_NAME_NOT_FOUND FDW_DYNAMIC_PARAMETER_VALUE_NEEDED FDW_FUNCTION_SEQUENCE_ERROR FDW_INCONSISTENT_DESCRIPTOR_INFORMATION FDW_INVALID_ATTRIBUTE_VALUE FDW_INVALID_COLUMN_NAME FDW_INVALID_COLUMN_NUMBER FDW_INVALID_DATA_TYPE FDW_INVALID_DATA_TYPE_DESCRIPTORS FDW_INVALID_DESCRIPTOR_FIELD_IDENTIFIER FDW_INVALID_HANDLE FDW_INVALID_OPTION_INDEX FDW_INVALID_OPTION_NAME FDW_INVALID_STRING_LENGTH_OR_BUFFER_LENGTH FDW_INVALID_STRING_FORMAT FDW_INVALID_USE_OF_NULL_POINTER FDW_TOO_MANY_HANDLES FDW_OUT_OF_MEMORY FDW_NO_SCHEMAS FDW_OPTION_NAME_NOT_FOUND FDW_REPLY_HANDLE FDW_SCHEMA_NOT_FOUND FDW_TABLE_NOT_FOUND FDW_UNABLE_TO_CREATE_EXECUTION FDW_UNABLE_TO_CREATE_REPLY FDW_UNABLE_TO_ESTABLISH_CONNECTION PLPGSQL_ERROR RAISE_EXCEPTION NO_DATA_FOUND TOO_MANY_ROWS ASSERT_FAILURE INTERNAL_ERROR DATA_CORRUPTED INDEX_CORRUPTED ",gn="ARRAY_AGG AVG BIT_AND BIT_OR BOOL_AND BOOL_OR COUNT EVERY JSON_AGG JSONB_AGG JSON_OBJECT_AGG JSONB_OBJECT_AGG MAX MIN MODE STRING_AGG SUM XMLAGG CORR COVAR_POP COVAR_SAMP REGR_AVGX REGR_AVGY REGR_COUNT REGR_INTERCEPT REGR_R2 REGR_SLOPE REGR_SXX REGR_SXY REGR_SYY STDDEV STDDEV_POP STDDEV_SAMP VARIANCE VAR_POP VAR_SAMP PERCENTILE_CONT PERCENTILE_DISC ROW_NUMBER RANK DENSE_RANK PERCENT_RANK CUME_DIST NTILE LAG LEAD FIRST_VALUE LAST_VALUE NTH_VALUE NUM_NONNULLS NUM_NULLS ABS CBRT CEIL CEILING DEGREES DIV EXP FLOOR LN LOG MOD PI POWER RADIANS ROUND SCALE SIGN SQRT TRUNC WIDTH_BUCKET RANDOM SETSEED ACOS ACOSD ASIN ASIND ATAN ATAND ATAN2 ATAN2D COS COSD COT COTD SIN SIND TAN TAND BIT_LENGTH CHAR_LENGTH CHARACTER_LENGTH LOWER OCTET_LENGTH OVERLAY POSITION SUBSTRING TREAT TRIM UPPER ASCII BTRIM CHR CONCAT CONCAT_WS CONVERT CONVERT_FROM CONVERT_TO DECODE ENCODE INITCAP LEFT LENGTH LPAD LTRIM MD5 PARSE_IDENT PG_CLIENT_ENCODING QUOTE_IDENT|10 QUOTE_LITERAL|10 QUOTE_NULLABLE|10 REGEXP_MATCH REGEXP_MATCHES REGEXP_REPLACE REGEXP_SPLIT_TO_ARRAY REGEXP_SPLIT_TO_TABLE REPEAT REPLACE REVERSE RIGHT RPAD RTRIM SPLIT_PART STRPOS SUBSTR TO_ASCII TO_HEX TRANSLATE OCTET_LENGTH GET_BIT GET_BYTE SET_BIT SET_BYTE TO_CHAR TO_DATE TO_NUMBER TO_TIMESTAMP AGE CLOCK_TIMESTAMP|10 DATE_PART DATE_TRUNC ISFINITE JUSTIFY_DAYS JUSTIFY_HOURS JUSTIFY_INTERVAL MAKE_DATE MAKE_INTERVAL|10 MAKE_TIME MAKE_TIMESTAMP|10 MAKE_TIMESTAMPTZ|10 NOW STATEMENT_TIMESTAMP|10 TIMEOFDAY TRANSACTION_TIMESTAMP|10 ENUM_FIRST ENUM_LAST ENUM_RANGE AREA CENTER DIAMETER HEIGHT ISCLOSED ISOPEN NPOINTS PCLOSE POPEN RADIUS WIDTH BOX BOUND_BOX CIRCLE LINE LSEG PATH POLYGON ABBREV BROADCAST HOST HOSTMASK MASKLEN NETMASK NETWORK SET_MASKLEN TEXT INET_SAME_FAMILY INET_MERGE MACADDR8_SET7BIT ARRAY_TO_TSVECTOR GET_CURRENT_TS_CONFIG NUMNODE PLAINTO_TSQUERY PHRASETO_TSQUERY WEBSEARCH_TO_TSQUERY QUERYTREE SETWEIGHT STRIP TO_TSQUERY TO_TSVECTOR JSON_TO_TSVECTOR JSONB_TO_TSVECTOR TS_DELETE TS_FILTER TS_HEADLINE TS_RANK TS_RANK_CD TS_REWRITE TSQUERY_PHRASE TSVECTOR_TO_ARRAY TSVECTOR_UPDATE_TRIGGER TSVECTOR_UPDATE_TRIGGER_COLUMN XMLCOMMENT XMLCONCAT XMLELEMENT XMLFOREST XMLPI XMLROOT XMLEXISTS XML_IS_WELL_FORMED XML_IS_WELL_FORMED_DOCUMENT XML_IS_WELL_FORMED_CONTENT XPATH XPATH_EXISTS XMLTABLE XMLNAMESPACES TABLE_TO_XML TABLE_TO_XMLSCHEMA TABLE_TO_XML_AND_XMLSCHEMA QUERY_TO_XML QUERY_TO_XMLSCHEMA QUERY_TO_XML_AND_XMLSCHEMA CURSOR_TO_XML CURSOR_TO_XMLSCHEMA SCHEMA_TO_XML SCHEMA_TO_XMLSCHEMA SCHEMA_TO_XML_AND_XMLSCHEMA DATABASE_TO_XML DATABASE_TO_XMLSCHEMA DATABASE_TO_XML_AND_XMLSCHEMA XMLATTRIBUTES TO_JSON TO_JSONB ARRAY_TO_JSON ROW_TO_JSON JSON_BUILD_ARRAY JSONB_BUILD_ARRAY JSON_BUILD_OBJECT JSONB_BUILD_OBJECT JSON_OBJECT JSONB_OBJECT JSON_ARRAY_LENGTH JSONB_ARRAY_LENGTH JSON_EACH JSONB_EACH JSON_EACH_TEXT JSONB_EACH_TEXT JSON_EXTRACT_PATH JSONB_EXTRACT_PATH JSON_OBJECT_KEYS JSONB_OBJECT_KEYS JSON_POPULATE_RECORD JSONB_POPULATE_RECORD JSON_POPULATE_RECORDSET JSONB_POPULATE_RECORDSET JSON_ARRAY_ELEMENTS JSONB_ARRAY_ELEMENTS JSON_ARRAY_ELEMENTS_TEXT JSONB_ARRAY_ELEMENTS_TEXT JSON_TYPEOF JSONB_TYPEOF JSON_TO_RECORD JSONB_TO_RECORD JSON_TO_RECORDSET JSONB_TO_RECORDSET JSON_STRIP_NULLS JSONB_STRIP_NULLS JSONB_SET JSONB_INSERT JSONB_PRETTY CURRVAL LASTVAL NEXTVAL SETVAL COALESCE NULLIF GREATEST LEAST ARRAY_APPEND ARRAY_CAT ARRAY_NDIMS ARRAY_DIMS ARRAY_FILL ARRAY_LENGTH ARRAY_LOWER ARRAY_POSITION ARRAY_POSITIONS ARRAY_PREPEND ARRAY_REMOVE ARRAY_REPLACE ARRAY_TO_STRING ARRAY_UPPER CARDINALITY STRING_TO_ARRAY UNNEST ISEMPTY LOWER_INC UPPER_INC LOWER_INF UPPER_INF RANGE_MERGE GENERATE_SERIES GENERATE_SUBSCRIPTS CURRENT_DATABASE CURRENT_QUERY CURRENT_SCHEMA|10 CURRENT_SCHEMAS|10 INET_CLIENT_ADDR INET_CLIENT_PORT INET_SERVER_ADDR INET_SERVER_PORT ROW_SECURITY_ACTIVE FORMAT_TYPE TO_REGCLASS TO_REGPROC TO_REGPROCEDURE TO_REGOPER TO_REGOPERATOR TO_REGTYPE TO_REGNAMESPACE TO_REGROLE COL_DESCRIPTION OBJ_DESCRIPTION SHOBJ_DESCRIPTION TXID_CURRENT TXID_CURRENT_IF_ASSIGNED TXID_CURRENT_SNAPSHOT TXID_SNAPSHOT_XIP TXID_SNAPSHOT_XMAX TXID_SNAPSHOT_XMIN TXID_VISIBLE_IN_SNAPSHOT TXID_STATUS CURRENT_SETTING SET_CONFIG BRIN_SUMMARIZE_NEW_VALUES BRIN_SUMMARIZE_RANGE BRIN_DESUMMARIZE_RANGE GIN_CLEAN_PENDING_LIST SUPPRESS_REDUNDANT_UPDATES_TRIGGER LO_FROM_BYTEA LO_PUT LO_GET LO_CREAT LO_CREATE LO_UNLINK LO_IMPORT LO_EXPORT LOREAD LOWRITE GROUPING CAST ".trim().split(" ").map(function(En){return En.split("|")[0]}).join("|");return{name:"PostgreSQL",aliases:["postgres","postgresql"],supersetOf:"sql",case_insensitive:!0,keywords:{keyword:sn+ln+an,built_in:dn+fn+pn},illegal:/:==|\W\s*\(\*|(^|\s)\$[a-z]|\{\{|[a-z]:\s*$|\.\.\.|TO:|DO:/,contains:[{className:"keyword",variants:[{begin:/\bTEXT\s*SEARCH\b/},{begin:/\b(PRIMARY|FOREIGN|FOR(\s+NO)?)\s+KEY\b/},{begin:/\bPARALLEL\s+(UNSAFE|RESTRICTED|SAFE)\b/},{begin:/\bSTORAGE\s+(PLAIN|EXTERNAL|EXTENDED|MAIN)\b/},{begin:/\bMATCH\s+(FULL|PARTIAL|SIMPLE)\b/},{begin:/\bNULLS\s+(FIRST|LAST)\b/},{begin:/\bEVENT\s+TRIGGER\b/},{begin:/\b(MAPPING|OR)\s+REPLACE\b/},{begin:/\b(FROM|TO)\s+(PROGRAM|STDIN|STDOUT)\b/},{begin:/\b(SHARE|EXCLUSIVE)\s+MODE\b/},{begin:/\b(LEFT|RIGHT)\s+(OUTER\s+)?JOIN\b/},{begin:/\b(FETCH|MOVE)\s+(NEXT|PRIOR|FIRST|LAST|ABSOLUTE|RELATIVE|FORWARD|BACKWARD)\b/},{begin:/\bPRESERVE\s+ROWS\b/},{begin:/\bDISCARD\s+PLANS\b/},{begin:/\bREFERENCING\s+(OLD|NEW)\b/},{begin:/\bSKIP\s+LOCKED\b/},{begin:/\bGROUPING\s+SETS\b/},{begin:/\b(BINARY|INSENSITIVE|SCROLL|NO\s+SCROLL)\s+(CURSOR|FOR)\b/},{begin:/\b(WITH|WITHOUT)\s+HOLD\b/},{begin:/\bWITH\s+(CASCADED|LOCAL)\s+CHECK\s+OPTION\b/},{begin:/\bEXCLUDE\s+(TIES|NO\s+OTHERS)\b/},{begin:/\bFORMAT\s+(TEXT|XML|JSON|YAML)\b/},{begin:/\bSET\s+((SESSION|LOCAL)\s+)?NAMES\b/},{begin:/\bIS\s+(NOT\s+)?UNKNOWN\b/},{begin:/\bSECURITY\s+LABEL\b/},{begin:/\bSTANDALONE\s+(YES|NO|NO\s+VALUE)\b/},{begin:/\bWITH\s+(NO\s+)?DATA\b/},{begin:/\b(FOREIGN|SET)\s+DATA\b/},{begin:/\bSET\s+(CATALOG|CONSTRAINTS)\b/},{begin:/\b(WITH|FOR)\s+ORDINALITY\b/},{begin:/\bIS\s+(NOT\s+)?DOCUMENT\b/},{begin:/\bXML\s+OPTION\s+(DOCUMENT|CONTENT)\b/},{begin:/\b(STRIP|PRESERVE)\s+WHITESPACE\b/},{begin:/\bNO\s+(ACTION|MAXVALUE|MINVALUE)\b/},{begin:/\bPARTITION\s+BY\s+(RANGE|LIST|HASH)\b/},{begin:/\bAT\s+TIME\s+ZONE\b/},{begin:/\bGRANTED\s+BY\b/},{begin:/\bRETURN\s+(QUERY|NEXT)\b/},{begin:/\b(ATTACH|DETACH)\s+PARTITION\b/},{begin:/\bFORCE\s+ROW\s+LEVEL\s+SECURITY\b/},{begin:/\b(INCLUDING|EXCLUDING)\s+(COMMENTS|CONSTRAINTS|DEFAULTS|IDENTITY|INDEXES|STATISTICS|STORAGE|ALL)\b/},{begin:/\bAS\s+(ASSIGNMENT|IMPLICIT|PERMISSIVE|RESTRICTIVE|ENUM|RANGE)\b/}]},{begin:/\b(FORMAT|FAMILY|VERSION)\s*\(/},{begin:/\bINCLUDE\s*\(/,keywords:"INCLUDE"},{begin:/\bRANGE(?!\s*(BETWEEN|UNBOUNDED|CURRENT|[-0-9]+))/},{begin:/\b(VERSION|OWNER|TEMPLATE|TABLESPACE|CONNECTION\s+LIMIT|PROCEDURE|RESTRICT|JOIN|PARSER|COPY|START|END|COLLATION|INPUT|ANALYZE|STORAGE|LIKE|DEFAULT|DELIMITER|ENCODING|COLUMN|CONSTRAINT|TABLE|SCHEMA)\s*=/},{begin:/\b(PG_\w+?|HAS_[A-Z_]+_PRIVILEGE)\b/,relevance:10},{begin:/\bEXTRACT\s*\(/,end:/\bFROM\b/,returnEnd:!0,keywords:{type:"CENTURY DAY DECADE DOW DOY EPOCH HOUR ISODOW ISOYEAR MICROSECONDS MILLENNIUM MILLISECONDS MINUTE MONTH QUARTER SECOND TIMEZONE TIMEZONE_HOUR TIMEZONE_MINUTE WEEK YEAR"}},{begin:/\b(XMLELEMENT|XMLPI)\s*\(\s*NAME/,keywords:{keyword:"NAME"}},{begin:/\b(XMLPARSE|XMLSERIALIZE)\s*\(\s*(DOCUMENT|CONTENT)/,keywords:{keyword:"DOCUMENT CONTENT"}},{beginKeywords:"CACHE INCREMENT MAXVALUE MINVALUE",end:en.C_NUMBER_RE,returnEnd:!0,keywords:"BY CACHE INCREMENT MAXVALUE MINVALUE"},{className:"type",begin:/\b(WITH|WITHOUT)\s+TIME\s+ZONE\b/},{className:"type",begin:/\bINTERVAL\s+(YEAR|MONTH|DAY|HOUR|MINUTE|SECOND)(\s+TO\s+(MONTH|HOUR|MINUTE|SECOND))?\b/},{begin:/\bRETURNS\s+(LANGUAGE_HANDLER|TRIGGER|EVENT_TRIGGER|FDW_HANDLER|INDEX_AM_HANDLER|TSM_HANDLER)\b/,keywords:{keyword:"RETURNS",type:"LANGUAGE_HANDLER TRIGGER EVENT_TRIGGER FDW_HANDLER INDEX_AM_HANDLER TSM_HANDLER"}},{begin:"\\b("+gn+")\\s*\\("},{begin:"\\.("+un+")\\b"},{begin:"\\b("+un+")\\s+PATH\\b",keywords:{keyword:"PATH",type:cn.replace("PATH ","")}},{className:"type",begin:"\\b("+un+")\\b"},{className:"string",begin:"'",end:"'",contains:[{begin:"''"}]},{className:"string",begin:"(e|E|u&|U&)'",end:"'",contains:[{begin:"\\\\."}],relevance:10},en.END_SAME_AS_BEGIN({begin:nn,end:nn,contains:[{subLanguage:["pgsql","perl","python","tcl","r","lua","java","php","ruby","bash","scheme","xml","json"],endsWithParent:!0}]}),{begin:'"',end:'"',contains:[{begin:'""'}]},en.C_NUMBER_MODE,en.C_BLOCK_COMMENT_MODE,ze,{className:"meta",variants:[{begin:"%(ROW)?TYPE",relevance:10},{begin:"\\$\\d+"},{begin:"^#\\w",end:"$"}]},{className:"symbol",begin:rn,relevance:10}]}}function elixir(en){const ze=en.regex,tn="[a-zA-Z_][a-zA-Z0-9_.]*(!|\\?)?",nn="[a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",an={$pattern:tn,keyword:["after","alias","and","case","catch","cond","defstruct","defguard","do","else","end","fn","for","if","import","in","not","or","quote","raise","receive","require","reraise","rescue","try","unless","unquote","unquote_splicing","use","when","with|0"],literal:["false","nil","true"]},ln={className:"subst",begin:/#\{/,end:/\}/,keywords:an},cn={className:"number",begin:"(\\b0o[0-7_]+)|(\\b0b[01_]+)|(\\b0x[0-9a-fA-F_]+)|(-?\\b[0-9][0-9_]*(\\.[0-9_]+([eE][-+]?[0-9]+)?)?)",relevance:0},dn={match:/\\[\s\S]/,scope:"char.escape",relevance:0},fn=`[/|([{<"']`,pn=[{begin:/"/,end:/"/},{begin:/'/,end:/'/},{begin:/\//,end:/\//},{begin:/\|/,end:/\|/},{begin:/\(/,end:/\)/},{begin:/\[/,end:/\]/},{begin:/\{/,end:/\}/},{begin:/</,end:/>/}],hn=Rn=>({scope:"char.escape",begin:ze.concat(/\\/,Rn),relevance:0}),gn={className:"string",begin:"~[a-z](?="+fn+")",contains:pn.map(Rn=>en.inherit(Rn,{contains:[hn(Rn.end),dn,ln]}))},En={className:"string",begin:"~[A-Z](?="+fn+")",contains:pn.map(Rn=>en.inherit(Rn,{contains:[hn(Rn.end)]}))},mn={className:"regex",variants:[{begin:"~r(?="+fn+")",contains:pn.map(Rn=>en.inherit(Rn,{end:ze.concat(Rn.end,/[uismxfU]{0,7}/),contains:[hn(Rn.end),dn,ln]}))},{begin:"~R(?="+fn+")",contains:pn.map(Rn=>en.inherit(Rn,{end:ze.concat(Rn.end,/[uismxfU]{0,7}/),contains:[hn(Rn.end)]}))}]},bn={className:"string",contains:[en.BACKSLASH_ESCAPE,ln],variants:[{begin:/"""/,end:/"""/},{begin:/'''/,end:/'''/},{begin:/~S"""/,end:/"""/,contains:[]},{begin:/~S"/,end:/"/,contains:[]},{begin:/~S'''/,end:/'''/,contains:[]},{begin:/~S'/,end:/'/,contains:[]},{begin:/'/,end:/'/},{begin:/"/,end:/"/}]},Tn={className:"function",beginKeywords:"def defp defmacro defmacrop",end:/\B\b/,contains:[en.inherit(en.TITLE_MODE,{begin:tn,endsParent:!0})]},_n=en.inherit(Tn,{className:"class",beginKeywords:"defimpl defmodule defprotocol defrecord",end:/\bdo\b|$|;/}),An=[bn,mn,En,gn,en.HASH_COMMENT_MODE,_n,Tn,{begin:"::"},{className:"symbol",begin:":(?![\\s:])",contains:[bn,{begin:nn}],relevance:0},{className:"symbol",begin:tn+":(?!:)",relevance:0},{className:"title.class",begin:/(\b[A-Z][a-zA-Z0-9_]+)/,relevance:0},cn,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))"}];return ln.contains=An,{name:"Elixir",aliases:["ex","exs"],keywords:an,contains:An}}function haskell(en){const ze="([0-9]_*)+",tn="([0-9a-fA-F]_*)+",nn="([01]_*)+",rn="([0-7]_*)+",cn="([!#$%&*+.\\/<=>?@\\\\^~-]|(?!([(),;\\[\\]`|{}]|[_:\"']))(\\p{S}|\\p{P}))",un={variants:[en.COMMENT("--+","$"),en.COMMENT(/\{-/,/-\}/,{contains:["self"]})]},dn={className:"meta",begin:/\{-#/,end:/#-\}/},fn={className:"meta",begin:"^#",end:"$"},pn={className:"type",begin:"\\b[A-Z][\\w']*",relevance:0},hn={begin:"\\(",end:"\\)",illegal:'"',contains:[dn,fn,{className:"type",begin:"\\b[A-Z][\\w]*(\\((\\.\\.|,|\\w+)\\))?"},en.inherit(en.TITLE_MODE,{begin:"[_a-z][\\w']*"}),un]},gn={begin:/\{/,end:/\}/,contains:hn.contains},En={className:"number",relevance:0,variants:[{match:`\\b(${ze})(\\.(${ze}))?([eE][+-]?(${ze}))?\\b`},{match:`\\b0[xX]_*(${tn})(\\.(${tn}))?([pP][+-]?(${ze}))?\\b`},{match:`\\b0[oO](${rn})\\b`},{match:`\\b0[bB](${nn})\\b`}]};return{name:"Haskell",aliases:["hs"],keywords:"let in if then else case of where do module import hiding qualified type data newtype deriving class instance as default infix infixl infixr foreign export ccall stdcall cplusplus jvm dotnet safe unsafe family forall mdo proc rec",unicodeRegex:!0,contains:[{beginKeywords:"module",end:"where",keywords:"module where",contains:[hn,un],illegal:"\\W\\.|;"},{begin:"\\bimport\\b",end:"$",keywords:"import qualified as hiding",contains:[hn,un],illegal:"\\W\\.|;"},{className:"class",begin:"^(\\s*)?(class|instance)\\b",end:"where",keywords:"class family instance where",contains:[pn,hn,un]},{className:"class",begin:"\\b(data|(new)?type)\\b",end:"$",keywords:"data family type newtype deriving",contains:[dn,pn,hn,gn,un]},{beginKeywords:"default",end:"$",contains:[pn,hn,un]},{beginKeywords:"infix infixl infixr",end:"$",contains:[en.C_NUMBER_MODE,un]},{begin:"\\bforeign\\b",end:"$",keywords:"foreign import export ccall stdcall cplusplus jvm dotnet safe unsafe",contains:[pn,en.QUOTE_STRING_MODE,un]},{className:"meta",begin:"#!\\/usr\\/bin\\/env runhaskell",end:"$"},dn,fn,{scope:"string",begin:/'(?=\\?.')/,end:/'/,contains:[{scope:"char.escape",match:/\\./}]},en.QUOTE_STRING_MODE,En,pn,en.inherit(en.TITLE_MODE,{begin:"^[_a-z][\\w']*"}),{begin:`(?!-)${cn}--+|--+(?!-)${cn}`},un,{begin:"->|<-"}]}}function scala(en){const ze=en.regex,tn={className:"meta",begin:"@[A-Za-z]+"},nn={className:"subst",variants:[{begin:"\\$[A-Za-z0-9_]+"},{begin:/\$\{/,end:/\}/}]},rn={className:"string",variants:[{begin:'"""',end:'"""'},{begin:'"',end:'"',illegal:"\\n",contains:[en.BACKSLASH_ESCAPE]},{begin:'[a-z]+"',end:'"',illegal:"\\n",contains:[en.BACKSLASH_ESCAPE,nn]},{className:"string",begin:'[a-z]+"""',end:'"""',contains:[nn],relevance:10}]},sn={className:"type",begin:"\\b[A-Z][A-Za-z0-9_]*",relevance:0},an={className:"title",begin:/[^0-9\n\t "'(),.`{}\[\]:;][^\n\t "'(),.`{}\[\]:;]+|[^0-9\n\t "'(),.`{}\[\]:;=]/,relevance:0},ln={className:"class",beginKeywords:"class object trait type",end:/[:={\[\n;]/,excludeEnd:!0,contains:[en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE,{beginKeywords:"extends with",relevance:10},{begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0,relevance:0,contains:[sn,en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE]},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,relevance:0,contains:[sn,en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE]},an]},cn={className:"function",beginKeywords:"def",end:ze.lookahead(/[:={\[(\n;]/),contains:[an]},un={begin:[/^\s*/,"extension",/\s+(?=[[(])/],beginScope:{2:"keyword"}},dn={begin:[/^\s*/,/end/,/\s+/,/(extension\b)?/],beginScope:{2:"keyword",4:"keyword"}},fn=[{match:/\.inline\b/},{begin:/\binline(?=\s)/,keywords:"inline"}],pn={begin:[/\(\s*/,/using/,/\s+(?!\))/],beginScope:{2:"keyword"}};return{name:"Scala",keywords:{literal:"true false null",keyword:"type yield lazy override def with val var sealed abstract private trait object if then forSome for while do throw finally protected extends import final return else break new catch super class case package default try this match continue throws implicit export enum given transparent"},contains:[{begin:["//>",/\s+/,/using/,/\s+/,/\S+/],beginScope:{1:"comment",3:"keyword",5:"type"},end:/$/,contains:[{className:"string",begin:/\S+/}]},en.C_LINE_COMMENT_MODE,en.C_BLOCK_COMMENT_MODE,rn,sn,cn,ln,en.C_NUMBER_MODE,un,dn,...fn,pn,tn]}}function powershell(en){const ze=["string","char","byte","int","long","bool","decimal","single","double","DateTime","xml","array","hashtable","void"],tn="Add|Clear|Close|Copy|Enter|Exit|Find|Format|Get|Hide|Join|Lock|Move|New|Open|Optimize|Pop|Push|Redo|Remove|Rename|Reset|Resize|Search|Select|Set|Show|Skip|Split|Step|Switch|Undo|Unlock|Watch|Backup|Checkpoint|Compare|Compress|Convert|ConvertFrom|ConvertTo|Dismount|Edit|Expand|Export|Group|Import|Initialize|Limit|Merge|Mount|Out|Publish|Restore|Save|Sync|Unpublish|Update|Approve|Assert|Build|Complete|Confirm|Deny|Deploy|Disable|Enable|Install|Invoke|Register|Request|Restart|Resume|Start|Stop|Submit|Suspend|Uninstall|Unregister|Wait|Debug|Measure|Ping|Repair|Resolve|Test|Trace|Connect|Disconnect|Read|Receive|Send|Write|Block|Grant|Protect|Revoke|Unblock|Unprotect|Use|ForEach|Sort|Tee|Where",nn="-and|-as|-band|-bnot|-bor|-bxor|-casesensitive|-ccontains|-ceq|-cge|-cgt|-cle|-clike|-clt|-cmatch|-cne|-cnotcontains|-cnotlike|-cnotmatch|-contains|-creplace|-csplit|-eq|-exact|-f|-file|-ge|-gt|-icontains|-ieq|-ige|-igt|-ile|-ilike|-ilt|-imatch|-in|-ine|-inotcontains|-inotlike|-inotmatch|-ireplace|-is|-isnot|-isplit|-join|-le|-like|-lt|-match|-ne|-not|-notcontains|-notin|-notlike|-notmatch|-or|-regex|-replace|-shl|-shr|-split|-wildcard|-xor",rn={$pattern:/-?[A-z\.\-]+\b/,keyword:"if else foreach return do while until elseif begin for trap data dynamicparam end break throw param continue finally in switch exit filter try process catch hidden static parameter",built_in:"ac asnp cat cd CFS chdir clc clear clhy cli clp cls clv cnsn compare copy cp cpi cpp curl cvpa dbp del diff dir dnsn ebp echo|0 epal epcsv epsn erase etsn exsn fc fhx fl ft fw gal gbp gc gcb gci gcm gcs gdr gerr ghy gi gin gjb gl gm gmo gp gps gpv group gsn gsnp gsv gtz gu gv gwmi h history icm iex ihy ii ipal ipcsv ipmo ipsn irm ise iwmi iwr kill lp ls man md measure mi mount move mp mv nal ndr ni nmo npssc nsn nv ogv oh popd ps pushd pwd r rbp rcjb rcsn rd rdr ren ri rjb rm rmdir rmo rni rnp rp rsn rsnp rujb rv rvpa rwmi sajb sal saps sasv sbp sc scb select set shcm si sl sleep sls sort sp spjb spps spsv start stz sujb sv swmi tee trcm type wget where wjb write"},sn=/\w[\w\d]*((-)[\w\d]+)*/,an={begin:"`[\\s\\S]",relevance:0},ln={className:"variable",variants:[{begin:/\$\B/},{className:"keyword",begin:/\$this/},{begin:/\$[\w\d][\w\d_:]*/}]},cn={className:"literal",begin:/\$(null|true|false)\b/},un={className:"string",variants:[{begin:/"/,end:/"/},{begin:/@"/,end:/^"@/}],contains:[an,ln,{className:"variable",begin:/\$[A-z]/,end:/[^A-z]/}]},dn={className:"string",variants:[{begin:/'/,end:/'/},{begin:/@'/,end:/^'@/}]},fn={className:"doctag",variants:[{begin:/\.(synopsis|description|example|inputs|outputs|notes|link|component|role|functionality)/},{begin:/\.(parameter|forwardhelptargetname|forwardhelpcategory|remotehelprunspace|externalhelp)\s+\S+/}]},pn=en.inherit(en.COMMENT(null,null),{variants:[{begin:/#/,end:/$/},{begin:/<#/,end:/#>/}],contains:[fn]}),hn={className:"built_in",variants:[{begin:"(".concat(tn,")+(-)[\\w\\d]+")}]},gn={className:"class",beginKeywords:"class enum",end:/\s*[{]/,excludeEnd:!0,relevance:0,contains:[en.TITLE_MODE]},En={className:"function",begin:/function\s+/,end:/\s*\{|$/,excludeEnd:!0,returnBegin:!0,relevance:0,contains:[{begin:"function",relevance:0,className:"keyword"},{className:"title",begin:sn,relevance:0},{begin:/\(/,end:/\)/,className:"params",relevance:0,contains:[ln]}]},mn={begin:/using\s/,end:/$/,returnBegin:!0,contains:[un,dn,{className:"keyword",begin:/(using|assembly|command|module|namespace|type)/}]},bn={variants:[{className:"operator",begin:"(".concat(nn,")\\b")},{className:"literal",begin:/(-){1,2}[\w\d-]+/,relevance:0}]},Tn={className:"selector-tag",begin:/@\B/,relevance:0},_n={className:"function",begin:/\[.*\]\s*[\w]+[ ]??\(/,end:/$/,returnBegin:!0,relevance:0,contains:[{className:"keyword",begin:"(".concat(rn.keyword.toString().replace(/\s/g,"|"),")\\b"),endsParent:!0,relevance:0},en.inherit(en.TITLE_MODE,{endsParent:!0})]},An=[_n,pn,an,en.NUMBER_MODE,un,dn,hn,ln,cn,Tn],Rn={begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0,relevance:0,contains:[].concat("self",An,{begin:"("+ze.join("|")+")",className:"built_in",relevance:0},{className:"type",begin:/[\.\w\d]+/,relevance:0})};return _n.contains.unshift(Rn),{name:"PowerShell",aliases:["pwsh","ps","ps1"],case_insensitive:!0,keywords:rn,contains:An.concat(gn,En,mn,bn,Rn)}}function clojure(en){const ze="a-zA-Z_\\-!.?+*=<>&'",tn="[#]?["+ze+"]["+ze+"0-9/;:$#]*",nn="def defonce defprotocol defstruct defmulti defmethod defn- defn defmacro deftype defrecord",rn={$pattern:tn,built_in:nn+" cond apply if-not if-let if not not= =|0 <|0 >|0 <=|0 >=|0 ==|0 +|0 /|0 *|0 -|0 rem quot neg? pos? delay? symbol? keyword? true? false? integer? empty? coll? list? set? ifn? fn? associative? sequential? sorted? counted? reversible? number? decimal? class? distinct? isa? float? rational? reduced? ratio? odd? even? char? seq? vector? string? map? nil? contains? zero? instance? not-every? not-any? libspec? -> ->> .. . inc compare do dotimes mapcat take remove take-while drop letfn drop-last take-last drop-while while intern condp case reduced cycle split-at split-with repeat replicate iterate range merge zipmap declare line-seq sort comparator sort-by dorun doall nthnext nthrest partition eval doseq await await-for let agent atom send send-off release-pending-sends add-watch mapv filterv remove-watch agent-error restart-agent set-error-handler error-handler set-error-mode! error-mode shutdown-agents quote var fn loop recur throw try monitor-enter monitor-exit macroexpand macroexpand-1 for dosync and or when when-not when-let comp juxt partial sequence memoize constantly complement identity assert peek pop doto proxy first rest cons cast coll last butlast sigs reify second ffirst fnext nfirst nnext meta with-meta ns in-ns create-ns import refer keys select-keys vals key val rseq name namespace promise into transient persistent! conj! assoc! dissoc! pop! disj! use class type num float double short byte boolean bigint biginteger bigdec print-method print-dup throw-if printf format load compile get-in update-in pr pr-on newline flush read slurp read-line subvec with-open memfn time re-find re-groups rand-int rand mod locking assert-valid-fdecl alias resolve ref deref refset swap! reset! set-validator! compare-and-set! alter-meta! reset-meta! commute get-validator alter ref-set ref-history-count ref-min-history ref-max-history ensure sync io! new next conj set! to-array future future-call into-array aset gen-class reduce map filter find empty hash-map hash-set sorted-map sorted-map-by sorted-set sorted-set-by vec vector seq flatten reverse assoc dissoc list disj get union difference intersection extend extend-type extend-protocol int nth delay count concat chunk chunk-buffer chunk-append chunk-first chunk-rest max min dec unchecked-inc-int unchecked-inc unchecked-dec-inc unchecked-dec unchecked-negate unchecked-add-int unchecked-add unchecked-subtract-int unchecked-subtract chunk-next chunk-cons chunked-seq? prn vary-meta lazy-seq spread list* str find-keyword keyword symbol gensym force rationalize"},sn={begin:tn,relevance:0},an={scope:"number",relevance:0,variants:[{match:/[-+]?0[xX][0-9a-fA-F]+N?/},{match:/[-+]?0[0-7]+N?/},{match:/[-+]?[1-9][0-9]?[rR][0-9a-zA-Z]+N?/},{match:/[-+]?[0-9]+\/[0-9]+N?/},{match:/[-+]?[0-9]+((\.[0-9]*([eE][+-]?[0-9]+)?M?)|([eE][+-]?[0-9]+M?|M))/},{match:/[-+]?([1-9][0-9]*|0)N?/}]},ln={scope:"character",variants:[{match:/\\o[0-3]?[0-7]{1,2}/},{match:/\\u[0-9a-fA-F]{4}/},{match:/\\(newline|space|tab|formfeed|backspace|return)/},{match:/\\\S/,relevance:0}]},cn={scope:"regex",begin:/#"/,end:/"/,contains:[en.BACKSLASH_ESCAPE]},un=en.inherit(en.QUOTE_STRING_MODE,{illegal:null}),dn={scope:"punctuation",match:/,/,relevance:0},fn=en.COMMENT(";","$",{relevance:0}),pn={className:"literal",begin:/\b(true|false|nil)\b/},hn={begin:"\\[|(#::?"+tn+")?\\{",end:"[\\]\\}]",relevance:0},gn={className:"symbol",begin:"[:]{1,2}"+tn},En={begin:"\\(",end:"\\)"},mn={endsWithParent:!0,relevance:0},bn={keywords:rn,className:"name",begin:tn,relevance:0,starts:mn},Tn=[dn,En,ln,cn,un,fn,gn,hn,an,pn,sn],_n={beginKeywords:nn,keywords:{$pattern:tn,keyword:nn},end:'(\\[|#|\\d|"|:|\\{|\\)|\\(|$)',contains:[{className:"title",begin:tn,relevance:0,excludeEnd:!0,endsParent:!0}].concat(Tn)};return En.contains=[_n,bn,mn],mn.contains=Tn,hn.contains=Tn,{name:"Clojure",aliases:["clj","edn"],illegal:/\S/,contains:[dn,En,ln,cn,un,fn,gn,hn,an,pn]}}function lisp(en){const ze="[a-zA-Z_\\-+\\*\\/<=>&#][a-zA-Z0-9_\\-+*\\/<=>&#!]*",tn="\\|[^]*?\\|",nn="(-|\\+)?\\d+(\\.\\d+|\\/\\d+)?((d|e|f|l|s|D|E|F|L|S)(\\+|-)?\\d+)?",rn={className:"literal",begin:"\\b(t{1}|nil)\\b"},sn={className:"number",variants:[{begin:nn,relevance:0},{begin:"#(b|B)[0-1]+(/[0-1]+)?"},{begin:"#(o|O)[0-7]+(/[0-7]+)?"},{begin:"#(x|X)[0-9a-fA-F]+(/[0-9a-fA-F]+)?"},{begin:"#(c|C)\\("+nn+" +"+nn,end:"\\)"}]},an=en.inherit(en.QUOTE_STRING_MODE,{illegal:null}),ln=en.COMMENT(";","$",{relevance:0}),cn={begin:"\\*",end:"\\*"},un={className:"symbol",begin:"[:&]"+ze},dn={begin:ze,relevance:0},fn={begin:tn},hn={contains:[sn,an,cn,un,{begin:"\\(",end:"\\)",contains:["self",rn,an,sn,dn]},dn],variants:[{begin:"['`]\\(",end:"\\)"},{begin:"\\(quote ",end:"\\)",keywords:{name:"quote"}},{begin:"'"+tn}]},gn={variants:[{begin:"'"+ze},{begin:"#'"+ze+"(::"+ze+")*"}]},En={begin:"\\(\\s*",end:"\\)"},mn={endsWithParent:!0,relevance:0};return En.contains=[{className:"name",variants:[{begin:ze,relevance:0},{begin:tn}]},mn],mn.contains=[hn,gn,En,rn,sn,an,ln,cn,un,fn,dn],{name:"Lisp",illegal:/\S/,contains:[sn,en.SHEBANG(),rn,an,ln,hn,gn,En,dn]}}const emptyOptions={},defaultPrefix="hljs-";function createLowlight(en){const ze=HighlightJS.newInstance();return en&&sn(en),{highlight:tn,highlightAuto:nn,listLanguages:rn,register:sn,registerAlias:an,registered:ln};function tn(cn,un,dn){const fn=dn||emptyOptions,pn=typeof fn.prefix=="string"?fn.prefix:defaultPrefix;if(!ze.getLanguage(cn))throw new Error("Unknown language: `"+cn+"` is not registered");ze.configure({__emitter:HastEmitter,classPrefix:pn});const hn=ze.highlight(un,{ignoreIllegals:!0,language:cn});if(hn.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:hn.errorRaised});const gn=hn._emitter.root,En=gn.data;return En.language=hn.language,En.relevance=hn.relevance,gn}function nn(cn,un){const fn=(un||emptyOptions).subset||rn();let pn=-1,hn=0,gn;for(;++pn<fn.length;){const En=fn[pn];if(!ze.getLanguage(En))continue;const mn=tn(En,cn,un);mn.data&&mn.data.relevance!==void 0&&mn.data.relevance>hn&&(hn=mn.data.relevance,gn=mn)}return gn||{type:"root",children:[],data:{language:void 0,relevance:hn}}}function rn(){return ze.listLanguages()}function sn(cn,un){if(typeof cn=="string")ze.registerLanguage(cn,un);else{let dn;for(dn in cn)Object.hasOwn(cn,dn)&&ze.registerLanguage(dn,cn[dn])}}function an(cn,un){if(typeof cn=="string")ze.registerAliases(typeof un=="string"?un:[...un],{languageName:cn});else{let dn;for(dn in cn)if(Object.hasOwn(cn,dn)){const fn=cn[dn];ze.registerAliases(typeof fn=="string"?fn:[...fn],{languageName:dn})}}}function ln(cn){return!!ze.getLanguage(cn)}}class HastEmitter{constructor(ze){this.options=ze,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(ze){if(ze==="")return;const tn=this.stack[this.stack.length-1],nn=tn.children[tn.children.length-1];nn&&nn.type==="text"?nn.value+=ze:tn.children.push({type:"text",value:ze})}startScope(ze){this.openNode(String(ze))}endScope(){this.closeNode()}__addSublanguage(ze,tn){const nn=this.stack[this.stack.length-1],rn=ze.root.children;tn?nn.children.push({type:"element",tagName:"span",properties:{className:[tn]},children:rn}):nn.children.push(...rn)}openNode(ze){const tn=this,nn=ze.split(".").map(function(an,ln){return ln?an+"_".repeat(ln):tn.options.classPrefix+an}),rn=this.stack[this.stack.length-1],sn={type:"element",tagName:"span",properties:{className:nn},children:[]};rn.children.push(sn),this.stack.push(sn)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const lowlight=createLowlight();lowlight.register("javascript",javascript$1);lowlight.register("css",css);lowlight.register("typescript",typescript);lowlight.register("python",python);lowlight.register("xml",xml);lowlight.register("java",java);lowlight.register("ruby",ruby);lowlight.register("php",php);lowlight.register("c",c);lowlight.register("cpp",cpp);lowlight.register("csharp",csharp);lowlight.register("go",go);lowlight.register("rust",rust);lowlight.register("bash",bash);lowlight.register("sql",sql);lowlight.register("json",json);lowlight.register("markdown",markdown);lowlight.register("yaml",yaml);lowlight.register("shell",shell);lowlight.register("diff",diff);lowlight.register("graphql",graphql);lowlight.register("ini",ini);lowlight.register("kotlin",kotlin);lowlight.register("less",less);lowlight.register("lua",lua);lowlight.register("makefile",makefile);lowlight.register("objectivec",objectivec);lowlight.register("perl",perl);lowlight.register("phptemplate",phpTemplate);lowlight.register("plaintext",plaintext);lowlight.register("pythonrepl",pythonRepl);lowlight.register("r",r);lowlight.register("scss",scss);lowlight.register("swift",swift);lowlight.register("vbnet",vbnet);lowlight.register("wasm",wasm);lowlight.register("django",django);lowlight.register("dockerfile",dockerfile);lowlight.register("nginx",nginx);lowlight.register("pgsql",pgsql);lowlight.register("elixir",elixir);lowlight.register("haskell",haskell);lowlight.register("scala",scala);lowlight.register("powershell",powershell);lowlight.register("closure",clojure);lowlight.register("lisp",lisp);HighlightJS.registerLanguage("javascript",javascript$1);HighlightJS.registerLanguage("python",python);HighlightJS.registerLanguage("xml",xml);HighlightJS.registerLanguage("css",css);HighlightJS.registerLanguage("java",java);HighlightJS.registerLanguage("ruby",ruby);HighlightJS.registerLanguage("php",php);HighlightJS.registerLanguage("c",c);HighlightJS.registerLanguage("cpp",cpp);HighlightJS.registerLanguage("csharp",csharp);HighlightJS.registerLanguage("go",go);HighlightJS.registerLanguage("rust",rust);HighlightJS.registerLanguage("bash",bash);HighlightJS.registerLanguage("sql",sql);HighlightJS.registerLanguage("json",json);HighlightJS.registerLanguage("markdown",markdown);HighlightJS.registerLanguage("typescript",typescript);HighlightJS.registerLanguage("yaml",yaml);HighlightJS.registerLanguage("shell",shell);HighlightJS.registerLanguage("diff",diff);HighlightJS.registerLanguage("graphql",graphql);HighlightJS.registerLanguage("ini",ini);HighlightJS.registerLanguage("kotlin",kotlin);HighlightJS.registerLanguage("less",less);HighlightJS.registerLanguage("lua",lua);HighlightJS.registerLanguage("makefile",makefile);HighlightJS.registerLanguage("objectivec",objectivec);HighlightJS.registerLanguage("perl",perl);HighlightJS.registerLanguage("phptemplate",phpTemplate);HighlightJS.registerLanguage("plaintext",plaintext);HighlightJS.registerLanguage("pythonrepl",pythonRepl);HighlightJS.registerLanguage("r",r);HighlightJS.registerLanguage("scss",scss);HighlightJS.registerLanguage("swift",swift);HighlightJS.registerLanguage("vbnet",vbnet);HighlightJS.registerLanguage("wasm",wasm);HighlightJS.registerLanguage("django",django);HighlightJS.registerLanguage("dockerfile",dockerfile);HighlightJS.registerLanguage("nginx",nginx);HighlightJS.registerLanguage("pgsql",pgsql);HighlightJS.registerLanguage("elixir",elixir);HighlightJS.registerLanguage("haskell",haskell);HighlightJS.registerLanguage("scala",scala);HighlightJS.registerLanguage("closure",clojure);HighlightJS.registerLanguage("lisp",lisp);HighlightJS.configure({ignoreUnescapedHTML:!0});const editor=en=>{let ze;return{updatedAt:Date.now(),init(){if(!ze){let tn=[];document.querySelectorAll(".tiptap.ProseMirror").forEach(nn=>{tn.push(nn.innerHTML),nn.remove()}),tn.length>0&&(en=tn.join(`
`)),this.initializeEditor(this.$refs.elementEditor)}},initializeEditor(tn){const nn=this;ze=new Editor({element:tn,extensions:[StarterKit.configure({codeBlock:!1,code:!1}),Typography,Link.configure({HTMLAttributes:{class:""}}),TextAlign.configure({types:["heading","paragraph"],alignments:["left","center","right","justify"]}),Code.configure({HTMLAttributes:{class:"hljs"}}),CodeBlockLowlight.configure({lowlight,HTMLAttributes:{class:"hljs"}}),CodeInlineLowlight.configure({lowlight}),Image,DynamicCharInsertionExtension],editorProps:{attributes:{class:""}},content:en,onCreate({editor:rn}){nn.updatedAt=Date.now()},onUpdate({editor:rn}){document.getElementById("editorContent").value=rn.getHTML(),nn.updatedAt=Date.now()},onSelectionUpdate({editor:rn}){nn.updatedAt=Date.now()},onTransaction:()=>{nn.updateHistoryStatus()}})},cleanup(){ze&&(ze.destroy(),ze=null)},isLoaded(){return ze},isActive(tn,nn={}){return ze.isActive(tn,nn)},toggleHeading(tn){ze.chain().toggleHeading(tn).focus().run(),this.updatedAt=Date.now()},toggleBold(){ze.chain().toggleBold().focus().run(),this.updatedAt=Date.now()},toggleItalic(){ze.chain().toggleItalic().focus().run(),this.updatedAt=Date.now()},canUndo:!1,canRedo:!1,updateHistoryStatus(){this.canUndo=ze.can().undo(),this.canRedo=ze.can().redo(),this.updatedAt=Date.now()},undo(){this.canUndo&&ze.chain().undo().run()},redo(){this.canRedo&&ze.chain().redo().run()},toggleCode(){ze.chain().toggleCode().focus().run(),this.updatedAt=Date.now()},toggleCodeBlock(){ze.chain().toggleCodeBlock().focus().run(),this.updatedAt=Date.now()},toggleBlockquote(){ze.chain().toggleBlockquote().focus().run(),this.updatedAt=Date.now()},setLink(tn){ze.chain().focus().extendMarkRange("link").setLink({href:tn}).run(),this.updatedAt=Date.now()},setTextAlign(tn){ze.chain().focus().setTextAlign(tn).run(),this.updatedAt=Date.now()},toggleBulletList(){ze.chain().toggleBulletList().focus().run(),this.updatedAt=Date.now()},toggleOrderedList(){ze.chain().toggleOrderedList().focus().run(),this.updatedAt=Date.now()},setImage(tn){tn&&isImage(tn).then(nn=>{nn?(ze.chain().focus().setImage({src:tn}).run(),this.updatedAt=Date.now()):console.error("Invalid image URL")})},setChar(tn){ze.chain().focus().setChar(tn).run()},transformInlineCode(){ze.chain().focus().transformInlineCode().run()}}};async function isImage(en){const tn=(await fetch(en,{method:"HEAD",mode:"cors"})).headers.get("Content-Type");return tn&&tn.startsWith("image/")}const clamp=(en,ze=0,tn=100)=>Math.min(Math.max(en,ze),tn);class ProgressBar{constructor(ze){this.elementId=ze}async startOrAdvance(ze=10,tn=6,nn=1){let rn=document.getElementById(this.elementId),sn=parseInt(rn.style.width,10)||0;const an=clamp(sn+ze);for(;sn<an;sn+=nn)await this.incrementWidth(sn,tn);sn>=100&&this.reset()}incrementWidth(ze,tn){let nn=document.getElementById(this.elementId);return new Promise(rn=>{setTimeout(()=>{nn.style.width=`${ze+1}%`,rn()},tn)})}reset(){let ze=document.getElementById(this.elementId);ze.style.width="0%",ze.style.opacity="1"}}const mainMenuHandler=()=>({menuOpen:!1,init(){this.setResizeListener()},setResizeListener(){window.addEventListener("resize",()=>{window.innerWidth>768&&(this.menuOpen=!1)})}});module_default$1.data("formValidator",formValidator);module_default$1.data("mainMenuHandler",mainMenuHandler);document.addEventListener("alpine:init",()=>{module_default$1.plugin(module_default),module_default$1.data("editor",editor)});window.Alpine=module_default$1;module_default$1.start();htmx.config.scrollIntoViewOnBoost=!1;HighlightJS.highlightAll();const body=document.querySelector("body");body.setAttribute("hx-boost","true");body.setAttribute("hx-target","#main-section");const timezone=Intl.DateTimeFormat().resolvedOptions().timeZone;document.cookie=`timezone=${timezone}; path=/`;document.addEventListener("DOMContentLoaded",en=>{document.querySelectorAll("code").forEach(ze=>{ze.dataset.highlighted!=="yes"&&HighlightJS.highlightElement(ze)})});document.body.addEventListener("htmx:afterSwap",function(en){document.querySelectorAll("pre code, code").forEach(ze=>{ze.dataset.highlighted!=="yes"&&HighlightJS.highlightElement(ze)})});typeof window.htmx<"u"&&htmx.on("htmx:afterSettle",function(en){typeof window.djdt<"u"&&en.target instanceof HTMLBodyElement&&djdt.show_toolbar()});const progressBarHandler=new ProgressBar("progressBar");let fragmentRequest;function isFragmentRequest(en){return fragmentRequest=en.detail.elt.dataset.fragmentRequest,!!fragmentRequest}document.body.addEventListener("htmx:beforeRequest",en=>{isFragmentRequest(en)||progressBarHandler.startOrAdvance(30,2)});document.body.addEventListener("htmx:afterOnLoad",en=>{isFragmentRequest(en)||progressBarHandler.startOrAdvance(100,1,3)});window.addEventListener("popstate",function(){document.readyState==="complete"&&setTimeout(()=>{progressBarHandler.reset()},300)});document.body.addEventListener("htmx:xhr:abort",()=>progressBarHandler.reset());document.body.addEventListener("htmx:sendError",()=>progressBarHandler.reset());document.body.addEventListener("htmx:responseError",()=>progressBarHandler.reset());document.body.addEventListener("htmx:swapError",()=>progressBarHandler.reset());document.body.addEventListener("htmx:timeout",()=>progressBarHandler.reset());
